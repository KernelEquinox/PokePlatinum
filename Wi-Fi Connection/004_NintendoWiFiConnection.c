//----- (021D0D80) --------------------------------------------------------
int __fastcall Function_21d0d80(int a1, uint a2, int a3, int a4)
{
  uint v4;
  int v5;
  ushort *v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  int v14;
  int v15;

  v15 = a1;
  v4 = a2;
  v5 = a3;
  v14 = a4;
  if ( dword_221A400[0] )
    ErrorHandler();
  v6 = (ushort *)malloc(v4, 4360);
  MI_CpuFill8(v6, 0, 0x1108u);
  dword_221A400[0] = ((uint)v6 + 31) & 0xFFFFFFE0;
  *(uint *)(dword_221A400[0] + 3964) = v6;
  *(uint *)(dword_221A400[0] + 3960) = v15;
  *(uint *)(dword_221A400[0] + 4004) = 0;
  *(uint *)(dword_221A400[0] + 4008) = 0;
  *(uint *)(dword_221A400[0] + 4032) = 0;
  *(uint *)(dword_221A400[0] + 4208) = 0;
  *(uint *)(dword_221A400[0] + 4228) = v4;
  *(uint *)(dword_221A400[0] + 4232) = v4;
  *(uint *)(dword_221A400[0] + 4236) = v5;
  *(uint *)(dword_221A400[0] + 3984) = malloc(v4, v5 + 12320);
  *(uint *)(dword_221A400[0] + 3992) = 0;
  *(uint *)(dword_221A400[0] + 3988) = NNS_FndCreateExpHeapEx(
                                           (*(uint *)(dword_221A400[0] + 3984) + 31) & 0xFFFFFFE0,
                                           v5,
                                           0);
  *(uint *)(dword_221A400[0] + 3996) = 0;
  *(uint *)(dword_221A400[0] + 4260) = 0;
  *(uint *)(dword_221A400[0] + 4244) = -1;
  *(uint *)(dword_221A400[0] + 4204) = 0;
  *(uint *)(dword_221A400[0] + 4220) = v14;
  *(uint *)(dword_221A400[0] + 4224) = 0;
  *(uint *)(dword_221A400[0] + 4312) = 0;
  *(uint *)(dword_221A400[0] + 4248) = -1;
  *(uint *)(dword_221A400[0] + 4252) = 1;
  *(uchar *)(dword_221A400[0] + 4318) = 0;
  *(uint *)(dword_221A400[0] + 4300) = 0;
  *(uchar *)(dword_221A400[0] + 4316) = 0;
  *(uchar *)(dword_221A400[0] + 4317) = 0;
  *(ushort *)(dword_221A400[0] + 4308) = 1;
  *(uint *)(dword_221A400[0] + 4304) = 1;
  *(ushort *)(dword_221A400[0] + 4310) = 1;
  if ( v15 )
  {
    LoadVariableAreaAdress_1d(*(uint *)(dword_221A400[0] + 3960));
    Function_202ad28();
    *(uint *)(dword_221A400[0] + 3856) = v7;
    v8 = LoadVariableAreaAdress_1d(*(uint *)(dword_221A400[0] + 3960));
    *(uint *)(dword_221A400[0] + 256) = Function_202aed8(v8, 0);
  }
  *(uchar *)(dword_221A400[0] + 4325) = 1;
  v9 = 0;
  *(uint *)(dword_221A400[0] + 4196) = 0;
  do
  {
    v10 = dword_221A400[0] + v9++;
    *(uchar *)(v10 + 4164) = 0;
  }
  while ( v9 < 32 );
  Function_21d24d8();
  if ( !Function_20a450c(*(uint *)(dword_221A400[0] + 3856)) )
    return 1;
  if ( Function_20a453c(*(uint *)(dword_221A400[0] + 3856), dword_221A400[0], v11, v12) )
    return 0;
  return 2;
}

//----- (021D0F68) --------------------------------------------------------
int Function_21d0f68()
{
  if ( dword_221A400[0] )
  {
    Function_21d27cc(dword_221A400[0]);
    if ( *(uint *)(dword_221A400[0] + 3992) )
    {
      Function_20a543c(*(uint *)(dword_221A400[0] + 3996));
      free(*(uint *)(dword_221A400[0] + 3992));
      *(uint *)(dword_221A400[0] + 3992) = 0;
    }
    Function_20a543c(*(uint *)(dword_221A400[0] + 3988));
    Function_2018238(*(uint *)(dword_221A400[0] + 4228), *(uint *)(dword_221A400[0] + 3984));
    Function_2018238(*(uint *)(dword_221A400[0] + 4228), *(uint *)(dword_221A400[0] + 3964));
    dword_221A400[0] = 0;
  }
  return Function_4_21d76e8();
}

//----- (021D0FEC) --------------------------------------------------------
int __fastcall Function_21d0fec(int a1, int a2, int a3, int a4)
{
  int v4;
  int v5;
  int v6;
  int result;
  char v8;
  char v9;
  int v10;

  v10 = a4;
  v4 = dword_221A400[0];
  v5 = *(uint *)(dword_221A400[0] + 4208);
  switch ( (uchar)v5 )
  {
    case 0:
      Function_4_21d776c(Function_21d1aa0, Function_21d1b04);
      Function_4_21d78c8(dword_221A400[0] + 3860, 2, 1, 20);
      v6 = Function_4_21d792c(2);
      Function_4_21d797c(v6);
      *(uint *)(dword_221A400[0] + 4208) = 1;
      *(uint *)(dword_221A400[0] + 4240) = 0;
      goto LABEL_3;
    case 1:
LABEL_3:
      if ( !Function_4_21d7a8c() )
      {
        v5 = Function_4_21d7ae4();
        return Function_21d1b5c(v5, v4);
      }
      if ( Function_4_21d7bfc() == 4 )
        *(uint *)(dword_221A400[0] + 4208) = 2;
      else
        *(uint *)(dword_221A400[0] + 4208) = 12;
LABEL_8:
      result = ((int (*)(void))Function_21d1b5c)();
      if ( !result )
      {
        Function_21d8c08(
          dword_221A400[0] + 260,
          *(uint *)(dword_221A400[0] + 3856),
          10727,
          "pokemondpds",
          "1vTlwb",
          0,
          0,
          *(uint *)(dword_221A400[0] + 256),
          32);
        OS_GetOwnerInfo((int)&v8);
        Function_21d9244(&v9);
        *(uint *)(dword_221A400[0] + 4208) = 3;
LABEL_10:
        v5 = Function_21d8ff4();
        return Function_21d1b5c(v5, v4);
      }
      return result;
    case 2:
      goto LABEL_8;
    case 3:
      goto LABEL_10;
    case 4:
      Function_21d8ff4();
      return 27;
    default:
      return Function_21d1b5c(v5, v4);
  }
}

//----- (021D1104) --------------------------------------------------------
int __fastcall Function_4_21d1104(int a1, int a2)
{
  int result;

  *(uint *)(dword_221A400[0] + 4004) = a1;
  result = 4008;
  *(uint *)(dword_221A400[0] + 4008) = a2;
  return result;
}

//----- (021D1120) --------------------------------------------------------
int __fastcall Function_21d1120(int a1, int a2)
{
  int result;

  *(uint *)(dword_221A400[0] + 4012) = a1;
  result = 4016;
  *(uint *)(dword_221A400[0] + 4016) = a2;
  return result;
}

//----- (021D113C) --------------------------------------------------------
int __fastcall Function_21d113c(int result)
{
  *(uint *)(dword_221A400[0] + 4028) = result;
  return result;
}

//----- (021D1150) --------------------------------------------------------
int __fastcall Function_21d1150(int a1, int a2)
{
  int result;

  *(uint *)(dword_221A400[0] + 4020) = a1;
  result = 4024;
  *(uint *)(dword_221A400[0] + 4024) = a2;
  return result;
}

//----- (021D116C) --------------------------------------------------------
int __fastcall Function_21d116c(int a1, int a2, int a3, int a4)
{
  int v4;
  int v5;
  int v6;
  int v7;
  int result;
  int v9;
  int v10;
  int v11;

  v11 = a4;
  v4 = a1;
  v5 = a2;
  v6 = a3;
  v7 = a4;
  if ( !dword_221A400[0] )
    ErrorHandler();
  if ( *(uint *)(dword_221A400[0] + 4208) != 4 )
    return 0;
  Function_21d27cc(4);
  v9 = 513;
  v10 = 1000 * v7;
  if ( Function_21dc9ac(0, &v9, 8) )
    ErrorHandler();
  if ( !Function_21dc87c(0, "ppw_lobby", v4) )
    ErrorHandler();
  MI_CpuFill8((ushort *)(dword_221A400[0] + 4036), 0, 0x80u);
  Function_20d7510(dword_221A400[0] + 4036, "%s = '%s'");
  if ( (uint)strlen((char *)(dword_221A400[0] + 4036)) >= 0x80 )
    ErrorHandler();
  if ( v6 )
    Function_21dc87c(1, dword_221A400[0] + 4036, dword_221A400[0] + 4036);
  *(uint *)(dword_221A400[0] + 4208) = 5;
  *(uint *)(dword_221A400[0] + 4220) = v5;
  Function_21d93f4((uchar)v5, dword_221A400[0] + 4036, Function_21d1898);
  *(uint *)(dword_221A400[0] + 4212) = 0;
  Function_21e4d74(Function_21d18f4);
  Function_21e4d94(Function_21d1950);
  Function_21d9724(Function_21d1a20, 0);
  Function_21e4db4(Function_21d16e8);
  *(uint *)(dword_221A400[0] + 4216) = 0;
  result = 1;
  *(uchar *)(dword_221A400[0] + 4325) = 1;
  return result;
}

//----- (021D12B4) --------------------------------------------------------
int Function_21d12b4()
{
  int result;

  result = 4208;
  if ( *(uint *)(dword_221A400[0] + 4208) == 10 )
    *(uint *)(dword_221A400[0] + 4208) = 11;
  else
    *(uint *)(dword_221A400[0] + 4208) = 9;
  return result;
}

//----- (021D12D4) --------------------------------------------------------
int __fastcall Function_21d12d4(int a1)
{
  uint v1;
  int v2;
  int v3;

  v1 = *(uint *)(dword_221A400[0] + 4208);
  if ( v1 <= 0x10 )
    JUMPOUT(__CS__, *((short *)&off_21D12F0 + v1) + 35459826);
  switch ( (uchar)v1 )
  {
    case 5:
      if ( a1 )
        *(uint *)(dword_221A400[0] + 4208) = 6;
      if ( *(uint *)(dword_221A400[0] + 4212) == 2 )
      {
        v2 = *(uint *)(dword_221A400[0] + 4244);
        if ( v2 >= 0 && *(uchar *)(dword_221A400[0] + v2 + 4164) != 6 )
          *(uint *)(dword_221A400[0] + 4208) = 10;
      }
      return Function_21d1d1c();
    case 6:
    case 0xA:
      if ( *(uint *)(dword_221A400[0] + 4212) )
      {
        Function_21d9750();
        Function_21d12b4();
      }
      else
      {
        Function_21dc75c();
      }
      return Function_21d1d1c();
    case 7:
      v3 = Function_203895c();
      if ( !Function_203272c(v3) )
        Function_21d1e74(*(uint *)(dword_221A400[0] + 4228));
      *(ushort *)(dword_221A400[0] + 4308) = *(uint *)(dword_221A400[0] + 4252) != 0;
      *(uint *)(dword_221A400[0] + 4208) = 8;
      return 20;
    case 9:
      *(uint *)(dword_221A400[0] + 4208) = 4;
      *(uint *)(dword_221A400[0] + 4216) = 0;
      *(uint *)(dword_221A400[0] + 4248) = -1;
      return 21;
    case 0xB:
      *(uint *)(dword_221A400[0] + 4208) = 4;
      *(uint *)(dword_221A400[0] + 4216) = 0;
      *(uint *)(dword_221A400[0] + 4248) = -1;
      return 22;
    case 0xC:
      return Function_21d1b5c(a1, 4208);
    case 0x10:
      if ( !*(uint *)(dword_221A400[0] + 4240) )
      {
        Function_21d9750();
        *(uint *)(dword_221A400[0] + 4208) = 17;
      }
      break;
    default:
      return Function_21d1d1c();
  }
  return Function_21d1d1c();
}

//----- (021D1404) --------------------------------------------------------
BOOL Function_21d1404()
{
  return !*(uint *)(dword_221A400[0] + 4216) && Function_21d1c5c();
}

//----- (021D142C) --------------------------------------------------------
int __fastcall Function_21d142c(int a1, int a2)
{
  int v2;
  uint v3;
  int result;
  void (__fastcall *v5)(uint, int, uint);

  v2 = a1;
  v3 = a2;
  if ( a2 >= 256 )
    return 0;
  if ( Function_21d9968() )
  {
    if ( !*(uint *)(dword_221A400[0] + 4216) && Function_21d1c5c() )
    {
      *(uint *)dword_221A400[0] = (*(ushort *)(dword_221A400[0] + 4308) << 8) | 1;
      *(uchar *)(dword_221A400[0] + 2) = ++*(uchar *)(dword_221A400[0] + 4316);
      MI_CpuCopy8(v2, dword_221A400[0] + 4, v3, 0x10DCu);
      *(uint *)(dword_221A400[0] + 4216) = 1;
      Function_21e4c28();
      result = 1;
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    v5 = *(void (__fastcall **)(uint, int, uint))(dword_221A400[0] + 4004);
    if ( v5 )
      v5(0, v2, (ushort)v3);
    result = 1;
  }
  return result;
}

//----- (021D14D4) --------------------------------------------------------
int __fastcall Function_21d14d4(int a1, int a2)
{
  int v2;
  uint v3;
  int result;
  int v5;
  void (__fastcall *v6)(uint, int, uint);

  v2 = a1;
  v3 = a2;
  if ( a2 >= 256 )
    return 0;
  if ( Function_21d9968() )
    return 0;
  if ( *(uint *)(dword_221A400[0] + 4216) || !Function_21d1c5c() )
    return 0;
  *(uint *)dword_221A400[0] = (*(ushort *)(dword_221A400[0] + 4308) << 8) | 1;
  *(uchar *)(dword_221A400[0] + 2) = ++*(uchar *)(dword_221A400[0] + 4316);
  MI_CpuCopy8(v2, dword_221A400[0] + 4, v3, 0x10DCu);
  *(uint *)(dword_221A400[0] + 4216) = 1;
  v5 = Function_4_21d99d4();
  if ( Function_21e4c28(v5, dword_221A400[0], v3 + 4) )
  {
    v6 = *(void (__fastcall **)(uint, int, uint))(dword_221A400[0] + 4008);
    if ( v6 )
      v6(0, v2, (ushort)v3);
    result = 1;
  }
  else
  {
    result = 0;
    *(uint *)(dword_221A400[0] + 4216) = 0;
  }
  return result;
}

//----- (021D1590) --------------------------------------------------------
int __fastcall Function_21d1590(int a1, int a2)
{
  int v2;
  uint v3;
  int result;
  ushort v5;
  int v6;

  v2 = a1;
  v3 = a2;
  if ( a2 >= 256 )
    return 0;
  if ( *(uint *)(dword_221A400[0] + 4216) || !Function_21d1c5c() )
    return 0;
  *(uint *)dword_221A400[0] = (*(ushort *)(dword_221A400[0] + 4308) << 8) | 1;
  *(uchar *)(dword_221A400[0] + 2) = ++*(uchar *)(dword_221A400[0] + 4316);
  MI_CpuCopy8(v2, dword_221A400[0] + 4, v3, 0x10DCu);
  *(uint *)(dword_221A400[0] + 4216) = 1;
  v5 = Function_4_21d99d4();
  if ( v5 == Function_21e4c28(v5, dword_221A400[0], v3 + 4) )
  {
    if ( *(uint *)(dword_221A400[0] + 4008) )
    {
      v6 = Function_21d9968();
      (*(void (__fastcall **)(int, int, uint))(dword_221A400[0] + 4008))(v6, v2, (ushort)v3);
    }
    result = 1;
  }
  else
  {
    result = 0;
    *(uint *)(dword_221A400[0] + 4216) = 0;
  }
  return result;
}

//----- (021D1650) --------------------------------------------------------
int __fastcall Function_21d1650(int a1, int a2, int a3)
{
  int v3;
  int v4;
  int result;

  v3 = a1;
  v4 = a3;
  if ( Function_20a45fc(*(uint *)(dword_221A400[0] + 3856)) )
  {
    Function_20a4620(*(uint *)(dword_221A400[0] + 3856));
    *(uchar *)(dword_221A400[0] + 4326) = 1;
  }
  if ( v3 )
  {
    result = 4208;
    *(uint *)(dword_221A400[0] + 4208) = 12;
  }
  else if ( Function_21d934c(
              0,
              Function_21d171c,
              *(uint *)(dword_221A400[0] + 3856),
              Function_21d1740,
              v4,
              Function_21d1744,
              v4) )
  {
    result = Function_21db3dc(Function_21d17a0, 0);
  }
  else
  {
    result = Function_2038ae0(1);
  }
  return result;
}

//----- (021D16E8) --------------------------------------------------------
int Function_21d16e8()
{
  int result;

  result = *(uint *)(dword_221A400[0] + 4264);
  if ( result )
  {
    Function_21d9750();
    *(uint *)(dword_221A400[0] + 4248) = -1;
    result = 4208;
    *(uint *)(dword_221A400[0] + 4208) = 18;
  }
  return result;
}

//----- (021D171C) --------------------------------------------------------
int __fastcall Function_21d171c(int a1)
{
  int result;

  if ( a1 )
  {
    result = 4208;
    *(uint *)(dword_221A400[0] + 4208) = 12;
  }
  else
  {
    result = 4208;
    *(uint *)(dword_221A400[0] + 4208) = 4;
  }
  return result;
}

//----- (021D1740) --------------------------------------------------------
void Function_21d1740()
{
  ;
}

//----- (021D1744) --------------------------------------------------------
ushort *__fastcall Function_21d1744(int a1, int a2)
{
  int v2;
  int v3;
  int v4;
  int v5;
  uint v6;
  int v7;
  int v8;

  v2 = a1;
  v3 = a2;
  v4 = LoadVariableAreaAdress_1d(*(uint *)(dword_221A400[0] + 3960));
  v5 = Function_202aed8(v4, 0);
  MI_CpuCopy8(*(uint *)(dword_221A400[0] + 256), v5, 0x180u, v6);
  v7 = LoadVariableAreaAdress_1d(*(uint *)(dword_221A400[0] + 3960));
  Function_202b270(v7, v2, v3);
  v8 = LoadVariableAreaAdress_17(*(uint *)(dword_221A400[0] + 3960));
  return Function_20307f0(v8, v2);
}

//----- (021D17A0) --------------------------------------------------------
void Function_21d17a0()
{
  ;
}

//----- (021D17A4) --------------------------------------------------------
ushort *Function_21d17a4()
{
  return MI_CpuFill8((ushort *)(dword_221A400[0] + 4268), 0, 0x20u);
}

//----- (021D17C0) --------------------------------------------------------
ushort *Function_21d17c0()
{
  int v0;
  int v1;
  int v2;
  int v3;

  v0 = 0;
  do
    v1 = Function_21e4e60((uchar)v0++, 0);
  while ( v0 < 4 );
  if ( Function_21d9968(v1) )
  {
    if ( !Function_21e4e60(0, 10000) )
      ErrorHandler();
  }
  else
  {
    v2 = 0;
    v3 = *(uint *)(dword_221A400[0] + 4220);
    if ( v3 > 0 )
    {
      do
      {
        if ( v2 != Function_21d9968(v3)
          && Function_4_21d99d4() & (1 << v2)
          && !Function_21e4e60((uchar)v2, 10000) )
        {
          ErrorHandler();
        }
        ++v2;
        v3 = *(uint *)(dword_221A400[0] + 4220);
      }
      while ( v2 < v3 );
    }
  }
  *(uint *)(dword_221A400[0] + 4264) = 1;
  return Function_21d17a4();
}

//----- (021D1854) --------------------------------------------------------
ushort *Function_21d1854()
{
  int v0;
  int i;

  *(uint *)(dword_221A400[0] + 4208) = 7;
  v0 = *(uint *)(dword_221A400[0] + 4220);
  for ( i = 0; i < v0; v0 = *(uint *)(dword_221A400[0] + 4220) )
  {
    if ( i != Function_21d9968(v0) )
      Function_21d2748(i);
    ++i;
  }
  return Function_21d17c0();
}

//----- (021D1898) --------------------------------------------------------
int __fastcall Function_21d1898(int a1, int a2)
{
  int result;
  int v3;

  if ( a1 )
  {
    *(uint *)(dword_221A400[0] + 4208) = 12;
  }
  else if ( a2 )
  {
    Function_21d12b4();
  }
  else
  {
    Function_21d9968(0);
    Function_21d1854();
  }
  result = *(uint *)(dword_221A400[0] + 4020);
  if ( result )
  {
    v3 = Function_21d9968(result);
    result = (*(int (__fastcall **)(int, uint))(dword_221A400[0] + 4020))(v3, *(uint *)(dword_221A400[0] + 4024));
  }
  return result;
}

//----- (021D18F0) --------------------------------------------------------
int Function_21d18f0()
{
  return 1;
}

//----- (021D18F4) --------------------------------------------------------
int __fastcall Function_21d18f4(int a1, int a2)
{
  int result;

  *(uint *)(dword_221A400[0] + 4216) = 0;
  result = 4268;
  *(uint *)(dword_221A400[0] + 4 * a2 + 4268) = 0;
  return result;
}

//----- (021D1918) --------------------------------------------------------
int __fastcall Function_21d1918(short a1)
{
  short v1;
  int v2;
  int result;

  v1 = a1;
  v2 = Function_203895c();
  result = Function_203272c(v2);
  if ( !result )
  {
    if ( v1 & 0x100 )
    {
      result = 4304;
      *(uint *)(dword_221A400[0] + 4304) = 1;
    }
    else
    {
      result = 4304;
      *(uint *)(dword_221A400[0] + 4304) = 0;
    }
  }
  return result;
}

//----- (021D1950) --------------------------------------------------------
int __fastcall Function_21d1950(int a1, uchar *a2, int a3)
{
  uchar *v3;
  int v4;
  int result;
  uint v6;
  int v7;
  int v8;
  void (__fastcall *v9)(int, int, uint);
  void (__fastcall *v10)(int, int, uint);
  int v11;
  int v12;

  v11 = a1;
  v3 = a2;
  v4 = a3;
  v12 = (a2[2] << 16) | (a2[3] << 24) | (a2[1] << 8) | *a2;
  *(uint *)(dword_221A400[0] + 4264) = 1;
  if ( (uchar)v12 == 1 )
  {
    Function_21d1918(v12);
    *(uchar *)(dword_221A400[0] + 4317) = v3[2];
    result = Function_21d1aa0(0, v4 - 4, 4);
    v7 = result;
    if ( result )
    {
      v8 = MI_CpuCopy8((int)(v3 + 4), result, v4 - 4, v6);
      if ( Function_21d9968(v8) )
      {
        v10 = *(void (__fastcall **)(int, int, uint))(dword_221A400[0] + 4008);
        if ( v10 )
          v10(v11, v7, (ushort)(v4 - 4));
      }
      else
      {
        v9 = *(void (__fastcall **)(int, int, uint))(dword_221A400[0] + 4004);
        if ( v9 )
          v9(v11, v7, (ushort)(v4 - 4));
      }
      result = Function_21d1b04(0, v7, v4 - 4);
    }
  }
  else
  {
    result = Function_21d2c70();
    if ( !result )
      result = Function_21d1918(v12);
  }
  return result;
}

//----- (021D1A20) --------------------------------------------------------
int *__fastcall Function_21d1a20(int a1, int a2, int a3, int a4)
{
  int v4;
  int *result;
  int (__fastcall *v6)(int, uint);

  v4 = a4;
  *(uint *)(dword_221A400[0] + 4216) = 0;
  *(uint *)(dword_221A400[0] + 4300) = 0;
  *(uint *)(dword_221A400[0] + 4256) = 0;
  if ( !a1 && *(uchar *)(dword_221A400[0] + 4325) == 1 && Function_21d9920() == 1 )
  {
    if ( *(uint *)(dword_221A400[0] + 4208) != 6 )
      *(uint *)(dword_221A400[0] + 4208) = 16;
    if ( *(uint *)(dword_221A400[0] + 4240) )
      Function_21d1f18();
  }
  result = dword_221A400;
  v6 = *(int (__fastcall **)(int, uint))(dword_221A400[0] + 4012);
  if ( v6 )
    result = (int *)v6(v4, *(uint *)(dword_221A400[0] + 4016));
  return result;
}

//----- (021D1AA0) --------------------------------------------------------
int __fastcall Function_21d1aa0(int a1, int a2, int a3)
{
  int v3;
  int v4;
  int v5;
  int v6;
  int result;

  v3 = a2;
  v4 = a3;
  v5 = OS_DisableInterrupts();
  v6 = NNS_FndAllocFromExpHeapEx(*(uint *)(dword_221A400[0] + 3988), v3, v4);
  if ( !v6 && *(uint *)(dword_221A400[0] + 3992) )
    v6 = NNS_FndAllocFromExpHeapEx(*(uint *)(dword_221A400[0] + 3996), v3, v4);
  if ( v6 )
  {
    OS_RestoreInterrupts(v5);
    result = v6;
  }
  else
  {
    Function_2038ae0(1);
    OS_RestoreInterrupts(v5);
    result = 0;
  }
  return result;
}

//----- (021D1B04) --------------------------------------------------------
void __fastcall Function_21d1b04(int a1, int a2)
{
  int v2;
  int v3;
  int v4;
  int v5;

  v2 = a2;
  if ( a2 )
  {
    v3 = OS_DisableInterrupts();
    if ( Function_20a5654(v2) == 16 )
    {
      if ( !*(uint *)(dword_221A400[0] + 3992) )
      {
        Function_2038ae0(1);
        return;
      }
      Function_20a55d8(*(uint *)(dword_221A400[0] + 3996), v2, dword_221A400[0], v5);
    }
    else
    {
      Function_20a55d8(*(uint *)(dword_221A400[0] + 3988), v2, v4, v5);
    }
    OS_RestoreInterrupts(v3);
  }
}

//----- (021D1B5C) --------------------------------------------------------
int __fastcall Function_21d1b5c(int a1, int a2, int a3, int a4)
{
  int v4;
  int v5;
  int v6;
  void (__fastcall *v7)(int);
  int v9;
  int v10;
  int v11;

  v11 = a4;
  v4 = 0;
  v5 = Function_4_21d75f4(&v10, &v9);
  if ( v5 )
  {
    v4 = v10;
    if ( !v10 || v9 == 1 )
      v4 = v5;
    switch ( (uchar)v9 )
    {
      case 1:
        Function_4_21d76e8(v9);
        break;
      case 2:
        Function_4_21d76e8(v9);
        break;
      case 3:
      case 4:
      case 5:
      case 6:
        if ( dword_221A400[0] )
        {
          v6 = *(uint *)(dword_221A400[0] + 4208);
          switch ( (uchar)v6 )
          {
            case 0:
            case 1:
            case 2:
              goto LABEL_11;
            case 3:
            case 4:
            case 5:
            case 6:
            case 7:
            case 8:
            case 9:
            case 0xC:
            case 0x10:
            case 0x11:
            case 0x12:
              Function_4_21d8e8c();
LABEL_11:
              v6 = Function_203895c();
              if ( v6 != 33 )
                v6 = Function_4_21d7db0();
              break;
            default:
              break;
          }
          Function_4_21d76e8(v6);
        }
        if ( dword_221A400[0] )
          *(uint *)(dword_221A400[0] + 4208) = 14;
        break;
      case 7:
        if ( dword_221A400[0] )
        {
          *(uint *)(dword_221A400[0] + 4208) = 15;
          v7 = *(void (__fastcall **)(int))(dword_221A400[0] + 4032);
          if ( v7 )
            v7(-v10);
        }
        break;
      default:
        break;
    }
  }
  if ( *(uchar *)(dword_221A400[0] + 4318) )
    v4 = 26;
  if ( v5 )
    Function_2037f94(v10, v9, v5);
  return v4;
}

//----- (021D1C5C) --------------------------------------------------------
int Function_21d1c5c()
{
  int v0;
  int v1;
  int v2;

  v0 = 0;
  v1 = 0;
  v2 = *(uint *)(dword_221A400[0] + 4220);
  if ( v2 <= 0 )
    return v0;
  while ( 1 )
  {
    if ( v1 != Function_21d9968(v2) )
    {
      if ( Function_21d9a08((uchar)v1) )
      {
        v0 = 1;
        if ( !Function_21e4a58((uchar)v1) )
          break;
      }
    }
    ++v1;
    v2 = *(uint *)(dword_221A400[0] + 4220);
    if ( v1 >= v2 )
      return v0;
  }
  return 0;
}

//----- (021D1CAC) --------------------------------------------------------
int __fastcall Function_21d1cac(int a1)
{
  int v1;
  int v2;

  v1 = a1;
  if ( *(uint *)(dword_221A400[0] + 4216) || !Function_21d1c5c() || !(Function_4_21d99d4() & 0xFFFE) )
    return 0;
  *(uint *)(dword_221A400[0] + 4216) = 1;
  *(uint *)dword_221A400[0] = (*(ushort *)(dword_221A400[0] + 4308) << 8) | 2;
  v2 = Function_4_21d99d4();
  Function_21e4c28(v2, dword_221A400[0], 4);
  *(uint *)(dword_221A400[0] + 4 * v1 + 4268) = 0;
  return 1;
}

//----- (021D1D1C) --------------------------------------------------------
int Function_21d1d1c()
{
  int v0;
  int v1;
  int v2;
  int v3;
  int v4;
  int v5;
  int v6;
  ushort *v7;
  int v8;
  int result;
  uint v10;
  int v11;
  int v12;
  int v13;
  int v14;

  v0 = Function_21d8ff4();
  Function_21d21b4(v0);
  if ( *(uint *)(dword_221A400[0] + 4240) )
  {
    if ( *(ushort *)(dword_221A400[0] + 4308) != 1
      || *(uint *)(dword_221A400[0] + 4304) != 1
      || *(ushort *)(dword_221A400[0] + 4310) != 1 )
    {
      v2 = Function_21d2fa4();
    }
    else
    {
      v2 = Function_21d2fb8();
    }
    Function_21d2b28(v2);
    if ( *(uint *)(dword_221A400[0] + 4224) != Function_4_21d99d4() && !*(uchar *)(dword_221A400[0] + 4319) )
    {
      if ( *(uint *)(dword_221A400[0] + 4252) )
      {
        v3 = Function_4_21d99d4();
        v4 = v3;
        v5 = Function_21d9968(v3);
        if ( Function_21d2fcc(v4, v5) )
          *(uint *)(dword_221A400[0] + 4224) = Function_4_21d99d4();
      }
    }
  }
  v6 = 4208;
  v7 = (ushort *)dword_221A400[0];
  v8 = *(uint *)(dword_221A400[0] + 4208);
  if ( v8 == 18 )
  {
    result = Function_21d1b5c(dword_221A400[0], 4208, 18, v1);
    if ( !result )
      result = 23;
  }
  else if ( v8 == 17 )
  {
    result = 24;
  }
  else
  {
    v10 = v8 - 7;
    if ( v10 <= 1 )
    {
      v6 = *(uint *)(dword_221A400[0] + 4220);
      v11 = 0;
      if ( v6 > 0 )
      {
        v12 = 0;
        while ( 1 )
        {
          v13 = (int)&v7[v12];
          v14 = *(uint *)&v7[v12 + 2134];
          v10 = *(uint *)(v13 + 4268) + 1;
          *(uint *)(v13 + 4268) = v10;
          if ( v14 >= 120 && !*(uint *)(dword_221A400[0] + 4216) && Function_21d1cac(v11) )
            break;
          v7 = (ushort *)dword_221A400[0];
          ++v11;
          v6 = *(uint *)(dword_221A400[0] + 4220);
          v12 += 2;
          if ( v11 >= v6 )
            goto LABEL_25;
        }
        v7 = Function_21d17a4();
      }
    }
LABEL_25:
    result = Function_21d1b5c((int)v7, v6, v10, v1);
  }
  return result;
}

//----- (021D1E30) --------------------------------------------------------
int Function_4_21d1e30()
{
  int v0;
  int result;

  if ( dword_221A400[0] && ((v0 = *(uint *)(dword_221A400[0] + 4208), v0 == 7) || v0 == 8 || v0 == 16) )
    result = Function_21d9968(v0);
  else
    result = -1;
  return result;
}

//----- (021D1E60) --------------------------------------------------------
int Function_21d1e60()
{
  int result;

  result = 4240;
  *(uint *)(dword_221A400[0] + 4240) = 0;
  return result;
}

//----- (021D1E74) --------------------------------------------------------
int __fastcall Function_21d1e74(int a1)
{
  int v1;
  int v2;
  int v3;
  BOOL v4;
  int result;
  int v6;

  v1 = a1;
  v2 = 1;
  v3 = Function_203895c();
  v4 = Function_203272c(v3);
  if ( v4 )
  {
    v2 = Function_2035e18() - 1;
    if ( v2 < 1 )
      v2 = 1;
    *(ushort *)(dword_221A400[0] + 4308) = 1;
    *(uint *)(dword_221A400[0] + 4304) = 1;
    *(ushort *)(dword_221A400[0] + 4310) = 1;
  }
  result = 4240;
  if ( !*(uint *)(dword_221A400[0] + 4240) )
  {
    switch ( (uchar)*(uint *)(dword_221A400[0] + 4260) )
    {
      case 2u:
        v6 = 1;
        break;
      case 3u:
        v6 = 2;
        break;
      case 4u:
        v6 = 3;
        break;
      case 5u:
        v6 = 4;
        break;
      default:
        if ( v4 )
          v6 = 3;
        else
          v6 = 4;
        break;
    }
    Function_21d2cc0(v1, v6, v2);
    Function_21d2ef4(Function_21d1e60);
    result = 4240;
    *(uint *)(dword_221A400[0] + 4240) = 1;
  }
  return result;
}

//----- (021D1F18) --------------------------------------------------------
int Function_21d1f18()
{
  int result;

  result = Function_21d2f08();
  if ( dword_221A400[0] )
  {
    *(uint *)(dword_221A400[0] + 4240) = 0;
    result = 4224;
    *(uint *)(dword_221A400[0] + 4224) = 0;
  }
  return result;
}

//----- (021D1F3C) --------------------------------------------------------
int __fastcall Function_21d1f3c(uint a1)
{
  int v1;
  uint v2;
  uint v3;
  int result;

  v1 = a1;
  v2 = s32_div_f(a1, 100);
  v3 = s32_div_f(v1, 1000);
  if ( v1 == 20101 )
    return 1;
  if ( v3 == 23 )
    return 1;
  if ( v1 == 20108 )
    return 2;
  if ( v1 == 20110 )
    return 3;
  if ( v2 == 512 )
    return 4;
  if ( v2 == 500 )
    return 5;
  if ( v1 == 51103 )
    return 7;
  switch ( v2 )
  {
    case 0x1FEu:
      return 6;
    case 0x1FFu:
      return 6;
    case 0x201u:
      return 6;
  }
  if ( v1 >= 52000 && v1 <= 52003 )
    return 8;
  if ( v1 >= 52100 && v1 <= 52103 )
    return 8;
  if ( v1 >= 52200 && v1 <= 52203 )
    return 8;
  if ( v1 == 80430 )
    return 9;
  if ( v3 == 20 )
    return 0;
  switch ( v2 )
  {
    case 0x208u:
      return 0;
    case 0x209u:
      return 0;
    case 0x20Au:
      return 0;
    case 0x20Bu:
      return 0;
    case 0x212u:
      return 0;
    case 0x213u:
      return 0;
    case 0x214u:
      return 0;
  }
  if ( v1 < 10000 )
    return 14;
  if ( v3 == 31 )
    return 12;
  switch ( (uchar)v3 )
  {
    case 0:
    case 1:
    case 2:
      result = 11;
      break;
    case 3:
    case 4:
    case 5:
    case 6:
      result = 10;
      break;
    case 7:
      result = 15;
      break;
    default:
      ErrorHandler();
      result = -1;
      break;
  }
  return result;
}

//----- (021D20B0) --------------------------------------------------------
int __fastcall Function_4_21d20b0(int a1)
{
  int v2;

  if ( a1 )
  {
    v2 = *(uint *)(dword_221A400[0] + 4208);
    if ( v2 == 4 || v2 == 17 || v2 == 18 )
      return 1;
  }
  else
  {
    switch ( (uchar)*(uint *)(dword_221A400[0] + 4208) )
    {
      case 4u:
      case 0xEu:
      case 0x11u:
      case 0x12u:
        return 1;
      case 5u:
      case 7u:
      case 8u:
        if ( *(uint *)(dword_221A400[0] + 4240) )
          Function_21d2ea4();
        *(uint *)(dword_221A400[0] + 4208) = 16;
        return 0;
      default:
        return 0;
    }
  }
  return 0;
}

//----- (021D2134) --------------------------------------------------------
int Function_4_21d2134()
{
  int v0;

  v0 = *(uint *)(dword_221A400[0] + 4208);
  if ( v0 != 17 && v0 != 18 && v0 != 4 )
    return 0;
  *(uint *)(dword_221A400[0] + 4208) = 4;
  *(uint *)(dword_221A400[0] + 4248) = -1;
  Function_21d25fc();
  return 1;
}

//----- (021D2170) --------------------------------------------------------
int __fastcall Function_21d2170(int result)
{
  if ( dword_221A400[0] )
    *(uint *)(dword_221A400[0] + 4032) = result;
  return result;
}

//----- (021D2184) --------------------------------------------------------
int Function_4_21d2184()
{
  int v0;

  v0 = Function_4_21d8e8c();
  Function_4_21d7db0(v0);
  Function_21d1f18();
  return Function_21d0f68();
}

//----- (021D2198) --------------------------------------------------------
int __fastcall Function_21d2198(int a1, int a2)
{
  int result;

  *(uint *)(dword_221A400[0] + 4196) = a1;
  result = 4200;
  *(uint *)(dword_221A400[0] + 4200) = a2;
  return result;
}

//----- (021D21B4) --------------------------------------------------------
int __fastcall Function_21d21b4(int a1, int a2, int a3, int a4)
{
  int result;
  int v5;
  int v6;

  v6 = a4;
  result = dword_221A400[0];
  if ( *(uint *)(dword_221A400[0] + 4196) )
  {
    v5 = *(uint *)(dword_221A400[0] + 4204) & 0x1F;
    if ( Function_20a4028((uint *)(*(uint *)(dword_221A400[0] + 256) + 12 * v5)) )
      *(uchar *)(dword_221A400[0] + v5 + 4164) = Function_21db2a4(
                                                   *(uint *)(dword_221A400[0] + 256) + 12 * v5,
                                                   *(uint *)(dword_221A400[0] + 4196)
                                                 + *(uint *)(dword_221A400[0] + 4200) * v5,
                                                   &v6);
    result = (*(uint *)(dword_221A400[0] + 4204) + 1) & 0x1F;
    *(uint *)(dword_221A400[0] + 4204) = result;
  }
  return result;
}

//----- (021D222C) --------------------------------------------------------
int Function_21d222c()
{
  return Function_21db350();
}

//----- (021D2234) --------------------------------------------------------
int __fastcall Function_21d2234(int a1)
{
  return *(uchar *)(dword_221A400[0] + a1 + 4164);
}

//----- (021D2248) --------------------------------------------------------
int __fastcall Function_21d2248(int a1, int a2, int a3)
{
  int v3;
  int v4;
  int v5;
  int result;
  int v7;
  int v8;

  v3 = a1;
  v4 = a2;
  v5 = a3;
  if ( Function_21d27e0() )
    return -4;
  if ( *(uint *)(dword_221A400[0] + 4208) == 4 )
  {
    Function_21d27cc(4208);
    *(uint *)(dword_221A400[0] + 4312) = 0;
    *(uchar *)(dword_221A400[0] + 4325) = 1;
    *(uint *)(dword_221A400[0] + 4244) = v3;
    *(uint *)(dword_221A400[0] + 4220) = v4;
    if ( v5 )
      LOBYTE(v4) = 2;
    *(uint *)(dword_221A400[0] + 4256) = 1;
    if ( v3 >= 0 )
    {
      v7 = Function_21d952c(v3, Function_21d2488);
      v8 = 2;
    }
    else
    {
      v7 = Function_21d9494((uchar)v4, Function_21d23a4);
      v8 = 1;
    }
    *(uint *)(dword_221A400[0] + 4212) = v8;
    if ( v7 )
    {
      *(uint *)(dword_221A400[0] + 4300) = 0;
      *(uint *)(dword_221A400[0] + 4208) = 5;
      Function_21e4d74(Function_21d18f4);
      Function_21e4d94(Function_21d1950);
      Function_21d9724(Function_21d1a20, 0);
      Function_21e4db4(Function_21d16e8);
      result = 0;
      *(uint *)(dword_221A400[0] + 4216) = 0;
    }
    else if ( ++*(uint *)(dword_221A400[0] + 4300) <= 120 )
    {
      result = -2;
    }
    else
    {
      result = -3;
    }
  }
  else if ( ++*(uint *)(dword_221A400[0] + 4300) <= 120 )
  {
    result = -1;
  }
  else
  {
    result = -3;
  }
  return result;
}

//----- (021D2388) --------------------------------------------------------
int Function_4_21d2388()
{
  int result;

  if ( dword_221A400[0] )
    result = *(uint *)(dword_221A400[0] + 4244);
  else
    result = -1;
  return result;
}

//----- (021D23A4) --------------------------------------------------------
ushort *__fastcall Function_21d23a4(int a1, ushort *a2, int a3, int a4, int a5)
{
  int v5;
  ushort *result;
  int v7;
  int v8;
  int (__fastcall *v9)(int);
  int v10;
  int v11;

  v11 = a4;
  v5 = a1;
  result = a2;
  v7 = 0;
  *(uint *)(dword_221A400[0] + 4256) = 0;
  if ( !v5 )
  {
    if ( a2 )
    {
      if ( !a3 )
      {
        result = (ushort *)dword_221A400[0];
        *(uint *)(dword_221A400[0] + 4248) = -1;
      }
    }
    else
    {
      v8 = Function_203895c();
      if ( Function_2032740(v8) && a5 == -1 )
        v7 = 1;
      v9 = *(int (__fastcall **)(int))(dword_221A400[0] + 4028);
      if ( v9 && !v9(a5) )
        v7 = 1;
      if ( (*(uchar *)(dword_221A400[0] + 4320) || v7)
        && (v11 = Function_4_21d99d4(*(uchar *)(dword_221A400[0] + 4320)) & ~*(uint *)(dword_221A400[0]
                                                                                                 + 4312),
            v10 = Function_4_21d99d4(v11),
            v11) )
      {
        Function_21d985c(&v11);
        result = (ushort *)(v11 ^ v10);
        if ( (v11 ^ v10) == 1 )
        {
          result = (ushort *)4208;
          *(uint *)(dword_221A400[0] + 4208) = 6;
        }
      }
      else
      {
        *(uint *)(dword_221A400[0] + 4244) = a5;
        *(uint *)(dword_221A400[0] + 4312) = Function_4_21d99d4(4244);
        if ( *(uint *)(dword_221A400[0] + 4312) == 1 )
        {
          result = (ushort *)6;
          *(uint *)(dword_221A400[0] + 4208) = 6;
        }
        else
        {
          result = Function_21d1854();
        }
      }
    }
  }
  return result;
}

//----- (021D2488) --------------------------------------------------------
ushort *__fastcall Function_21d2488(ushort *result, int a2)
{
  *(uint *)(dword_221A400[0] + 4256) = 0;
  if ( !result && !a2 )
    result = Function_21d1854();
  return result;
}

//----- (021D24AC) --------------------------------------------------------
int __fastcall Function_21d24ac(int result)
{
  int (__fastcall *v1)(uint, uint);

  *(uint *)(dword_221A400[0] + 4248) = result;
  v1 = *(int (__fastcall **)(uint, uint))(dword_221A400[0] + 4020);
  if ( v1 )
    result = v1((ushort)result, *(uint *)(dword_221A400[0] + 4024));
  return result;
}

//----- (021D24D8) --------------------------------------------------------
BOOL __fastcall Function_21d24d8(int a1, int a2, int a3, int a4)
{
  int v4;
  int v5;
  BOOL result;
  char v7;
  char v8;
  int v9;

  v9 = a4;
  if ( Function_20a450c(*(uint *)(dword_221A400[0] + 3856)) )
    Function_20a4788(*(uint **)(dword_221A400[0] + 3856), (int *)&v7);
  else
    Function_20a4788(*(uint **)(dword_221A400[0] + 3856), (int *)&v8);
  v4 = 0;
  v5 = 0;
  do
  {
    Function_20a4060((uint *)(*(uint *)(dword_221A400[0] + 256) + v5));
    result = Function_20a4028((uint *)(*(uint *)(dword_221A400[0] + 256) + v5));
    ++v4;
    v5 += 12;
  }
  while ( v4 < 32 );
  return result;
}

//----- (021D2544) --------------------------------------------------------
int Function_21d2544()
{
  return Function_21d2f7c();
}

//----- (021D254C) --------------------------------------------------------
int Function_21d254c()
{
  int result;

  if ( dword_221A400[0] )
    result = *(uint *)(dword_221A400[0] + 4252);
  else
    result = 0;
  return result;
}

//----- (021D2568) --------------------------------------------------------
int Function_21d2568()
{
  int result;

  if ( dword_221A400[0] )
    result = *(uint *)(dword_221A400[0] + 4248);
  else
    result = 0;
  return result;
}

//----- (021D2584) --------------------------------------------------------
int __fastcall Function_21d2584(int result)
{
  *(uint *)(dword_221A400[0] + 4252) = result;
  return result;
}

//----- (021D2598) --------------------------------------------------------
short __fastcall Function_21d2598(short result)
{
  *(ushort *)(dword_221A400[0] + 4310) = result;
  return result;
}

//----- (021D25AC) --------------------------------------------------------
int Function_21d25ac()
{
  int result;

  result = 4320;
  *(uchar *)(dword_221A400[0] + 4320) = 2;
  return result;
}

//----- (021D25C0) --------------------------------------------------------
BOOL Function_21d25c0()
{
  if ( !*(uchar *)(dword_221A400[0] + 4320) )
  {
    *(uchar *)(dword_221A400[0] + 4320) = 1;
    Function_21dc7c8(Function_21d25ac, 0);
  }
  return *(uchar *)(dword_221A400[0] + 4320) == 2;
}

//----- (021D25FC) --------------------------------------------------------
int Function_21d25fc()
{
  int result;

  result = 4320;
  *(uchar *)(dword_221A400[0] + 4320) = 0;
  return result;
}

//----- (021D2610) --------------------------------------------------------
int Function_21d2610()
{
  return Function_21d9920();
}

//----- (021D2618) --------------------------------------------------------
int __fastcall Function_21d2618(int a1, uint a2)
{
  int result;

  if ( a1 )
  {
    *(uint *)(dword_221A400[0] + 4232) = 11;
    result = *(uint *)(dword_221A400[0] + 3992);
    if ( !result )
    {
      *(uint *)(dword_221A400[0] + 3992) = malloc(a2, 61472);
      *(uint *)(dword_221A400[0] + 3996) = NNS_FndCreateExpHeapEx(
                                               (*(uint *)(dword_221A400[0] + 3992) + 31) & 0xFFFFFFE0,
                                               61440,
                                               0);
      Function_20a563c(*(uint *)(dword_221A400[0] + 3996), 16);
      result = Function_20a5614(*(uint *)(dword_221A400[0] + 3996));
      *(uint *)(dword_221A400[0] + 4000) = result;
    }
  }
  else
  {
    result = 4228;
    *(uint *)(dword_221A400[0] + 4232) = *(uint *)(dword_221A400[0] + 4228);
    if ( *(uint *)(dword_221A400[0] + 3992) )
    {
      if ( *(uint *)(dword_221A400[0] + 4000) == Function_20a5614(*(uint *)(dword_221A400[0] + 3996)) )
      {
        Function_20a543c(*(uint *)(dword_221A400[0] + 3996));
        free(*(uint *)(dword_221A400[0] + 3992));
        result = 3992;
        *(uint *)(dword_221A400[0] + 3992) = 0;
      }
      else
      {
        result = Function_2038ae0(1);
      }
    }
  }
  return result;
}

//----- (021D26EC) --------------------------------------------------------
char __fastcall Function_21d26ec(char result)
{
  *(uchar *)(dword_221A400[0] + 4325) = result;
  return result;
}

//----- (021D2700) --------------------------------------------------------
int __fastcall Function_21d2700(int result)
{
  int v1;
  int v2;

  v1 = 4 * result;
  v2 = *(uint *)(dword_221A400[0] + 4 * result + 3968);
  if ( v2 )
  {
    if ( *(uchar *)(dword_221A400[0] + result + 4321) == 1 )
      free(v2);
    else
      Function_21d1b04(0, v2);
    result = 3968;
    *(uint *)(dword_221A400[0] + v1 + 3968) = 0;
  }
  return result;
}

//----- (021D2748) --------------------------------------------------------
int __fastcall Function_21d2748(int a1)
{
  int v1;
  int v2;
  int result;
  char v4;

  v1 = a1;
  Function_21d2700(a1);
  v2 = 4 * v1;
  result = *(uint *)(dword_221A400[0] + 4 * v1 + 3968);
  if ( !result )
  {
    if ( *(uint *)(dword_221A400[0] + 4232) == 11 )
    {
      *(uint *)(dword_221A400[0] + v2 + 3968) = malloc(0xBu, 4128);
      v4 = 1;
    }
    else
    {
      *(uint *)(dword_221A400[0] + v2 + 3968) = Function_21d1aa0(0, 4096, 32);
      v4 = 0;
    }
    *(uchar *)(dword_221A400[0] + v1 + 4321) = v4;
    result = Function_21e4d28((uchar)v1, (*(uint *)(dword_221A400[0] + v2 + 3968) + 31) & 0xFFFFFFE0, 4096);
  }
  return result;
}

//----- (021D27CC) --------------------------------------------------------
int Function_21d27cc()
{
  int v0;
  int result;

  v0 = 0;
  do
    result = Function_21d2700(v0++);
  while ( v0 < 4 );
  return result;
}

//----- (021D27E0) --------------------------------------------------------
int Function_21d27e0()
{
  return *(uchar *)(dword_221A400[0] + 4326);
}

//----- (021D27F4) --------------------------------------------------------
int Function_21d27f4()
{
  int result;

  result = 4326;
  *(uchar *)(dword_221A400[0] + 4326) = 0;
  return result;
}

//----- (021D2808) --------------------------------------------------------
int Function_21d2808()
{
  int v0;
  int v1;
  int v2;
  int v3;
  int v4;
  int v5;

  MIC_Init();
  PM_Init();
  PM_SetAmp(1);
  PM_SetAmpGain(3u, v0, v1, v2);
  v3 = 0;
  v4 = 0;
  *(uint *)(dword_221A400[2] + 6776) = 0;
  *(uint *)(dword_221A400[2] + 6788) = 0;
  *(uint *)(dword_221A400[2] + 6780) = 0;
  *(uint *)(dword_221A400[2] + 6784) = 0;
  *(uint *)(dword_221A400[2] + 6792) = 0;
  do
  {
    ++v3;
    v5 = dword_221A400[2] + v4;
    v4 += 2;
    *(ushort *)(v5 + 6796) = 0;
  }
  while ( v3 < 16 );
  *(uint *)(dword_221A400[2] + 6828) = 0;
  Function_2202e80(1);
  Function_20b799c();
  Function_20b8934((uint *)(dword_221A400[2] + 6648));
  MIi_CpuClearFast(0, (uint *)(dword_221A400[2] + 4364), 0x880u);
  dword_221A400[1] = 0;
  return Function_2202eb0(1);
}

//----- (021D28B0) --------------------------------------------------------
void Function_21d28b0()
{
  ;
}

//----- (021D28B4) --------------------------------------------------------
ushort *__fastcall Function_21d28b4(ushort *result, uint a2, uint *a3, uint a4, int a5, int a6)
{
  uint v6;
  uint *v7;
  uint v8;
  int v9;
  uint v10;
  uint v11;

  v6 = a2;
  v7 = a3;
  v8 = a4;
  v9 = a6;
  if ( result )
  {
    if ( *(uchar *)(dword_221A400[2] + 6745) )
    {
      MIC_StartAutoSamplingAsync(
        (uint *)(dword_221A400[2] + 6748),
        (int (__fastcall *)(uint, uint))Function_21d28b0,
        0);
      *(uchar *)(dword_221A400[2] + 6745) = 0;
    }
    if ( Function_20ca958() - a6 < v8 )
      v9 = a6 + v8;
    if ( (word_27FFFA8 & 0x8000) >> 15 )
      v9 = dword_221A400[2] + 4364;
    if ( !*(uint *)(dword_221A400[2] + 6640) )
      Function_2202994(v9, v8);
    v11 = 0;
    if ( v6 )
    {
      do
      {
        Function_2202cf0(*v7, v8, 0);
        ++v11;
        ++v7;
      }
      while ( v11 < v6 );
    }
    result = (ushort *)6744;
    *(uchar *)(dword_221A400[2] + 6744) = 2;
  }
  else
  {
    v10 = 0;
    if ( a2 )
    {
      do
      {
        result = MI_CpuFill8((ushort *)*v7, 0, v8);
        ++v10;
        ++v7;
      }
      while ( v10 < v6 );
    }
  }
  return result;
}

//----- (021D2974) --------------------------------------------------------
int Function_21d2974()
{
  int v0;
  int v1;
  int result;
  int v3;

  v0 = *(uint *)(dword_221A400[2] + 6740);
  if ( v0 )
  {
    v3 = Function_22042f4(*(uint *)(dword_221A400[2] + 6740), 0);
  }
  else
  {
    v1 = Function_2204160();
    v0 = v1;
    if ( !v1 )
      return 0;
    v3 = Function_22042f4(v1, 0);
  }
  if ( v3 )
  {
    Function_2204188(v0);
    result = 0;
    *(uint *)(dword_221A400[2] + 6740) = 0;
  }
  else
  {
    *(uint *)(dword_221A400[2] + 6740) = v0;
    result = 1;
  }
  return result;
}

//----- (021D29C8) --------------------------------------------------------
BOOL Function_21d29c8()
{
  int v0;

  v0 = *(uint *)(dword_221A400[2] + 6740);
  if ( !v0 || *(uint *)(v0 + 12) != 4 )
    return 0;
  if ( Function_22043d0() )
    return 0;
  return Function_22027a8(*(uint *)(dword_221A400[2] + 6740)) != 0;
}

//----- (021D2A10) --------------------------------------------------------
int __fastcall Function_21d2a10(int a1, int a2, int a3)
{
  int result;

  switch ( a2 )
  {
    case 7:
      return Function_22027a8(a3);
    case 9:
      return Function_21d2b04(a3);
    case 12:
      result = Function_21d2b04(a3);
      break;
  }
  return result;
}

//----- (021D2A38) --------------------------------------------------------
#error "Failed to decompile function. "

//----- (021D2B04) --------------------------------------------------------
int __fastcall Function_21d2b04(int a1)
{
  int v1;
  int result;

  v1 = a1;
  Function_22028e0();
  Function_2204188(v1);
  result = 6740;
  *(uint *)(dword_221A400[2] + 6740) = 0;
  return result;
}

//----- (021D2B28) --------------------------------------------------------
int Function_21d2b28()
{
  int v0;
  int v1;
  int v2;
  int v3;
  int v4;
  int result;
  int v6;

  v0 = OS_GetTick();
  v2 = v1;
  dword_221A400[1] += u32_div_f(64000 * (v0 - dword_221A400[3]), 33514) - 16666;
  if ( dword_221A400[1] < -10000 )
    dword_221A400[1] = 0;
  dword_221A400[3] = v0;
  dword_221A400[4] = v2;
  Function_2205ae8();
  if ( dword_221A400[1] >= 16666 )
  {
    do
    {
      Function_2205ae8();
      dword_221A400[1] -= 16666;
    }
    while ( dword_221A400[1] - 16666 >= 16666 );
  }
  v4 = *(uint *)(dword_221A400[2] + 6784);
  if ( v4 )
  {
    switch ( (uchar)*(uint *)(dword_221A400[2] + 6780) )
    {
      case 0u:
        PM_SetAmpGain(3u, v4, dword_221A400[2], v3);
        break;
      case 1u:
        PM_SetAmpGain(2u, v4, dword_221A400[2], v3);
        break;
      case 2u:
        PM_SetAmpGain(1u, v4, dword_221A400[2], v3);
        break;
      case 3u:
        PM_SetAmpGain(0, v4, dword_221A400[2], v3);
        break;
      default:
        break;
    }
    *(uint *)(dword_221A400[2] + 6784) = 0;
  }
  result = dword_221A400[2];
  if ( *(uint *)(dword_221A400[2] + 6632) != 3 )
  {
    v6 = *(uint *)(dword_221A400[2] + 6636);
    if ( v6 )
    {
      if ( v6 == 1 )
      {
        result = (ushort)--*(ushort *)(dword_221A400[2] + 6746);
        if ( !*(ushort *)(dword_221A400[2] + 6746) )
        {
          result = 6636;
          *(uint *)(dword_221A400[2] + 6636) = 0;
        }
      }
    }
    else if ( Function_4_21d1e30() )
    {
      result = Function_4_21d1e30();
      if ( result == 1 )
      {
        result = Function_21d29c8();
        if ( result )
        {
          result = 6636;
          *(uint *)(dword_221A400[2] + 6636) = 2;
        }
      }
    }
    else
    {
      result = Function_21d2974();
      if ( result )
      {
        *(uint *)(dword_221A400[2] + 6636) = 1;
        result = 6746;
        *(ushort *)(dword_221A400[2] + 6746) = 60;
      }
    }
  }
  return result;
}

//----- (021D2C70) --------------------------------------------------------
BOOL __fastcall Function_21d2c70(uchar a1)
{
  BOOL result;

  if ( dword_221A400[2] )
    result = Function_2205b2c(a1) != 0;
  else
    result = 0;
  return result;
}

//----- (021D2C98) --------------------------------------------------------
int __fastcall Function_21d2c98(uint *a1, uint *a2, int a3, uint a4)
{
  uint v4;
  uint *v5;
  uint *v6;
  ushort *v7;
  int result;

  v4 = a3 + 32;
  v5 = a1;
  v6 = a2;
  v7 = (ushort *)malloc(a4, a3 + 32);
  *v5 = v7;
  MI_CpuFill8(v7, 0, v4);
  result = 31;
  *v6 = (*v5 + 31) & 0xFFFFFFE0;
  return result;
}

//----- (021D2CC0) --------------------------------------------------------
int __fastcall Function_21d2cc0(uint a1, int a2, int a3, int a4)
{
  int v4;
  int v5;
  uint v6;
  int v7;
  int v8;
  int v10;
  char v11;
  int v12;
  int v13;
  int v14;
  uchar v15;
  int v16;
  int v17;
  int (__fastcall *v18)(int, int, int);
  int v19;
  int v20;

  v20 = a4;
  v4 = a2;
  v5 = a3;
  v6 = a1;
  qmemcpy(&v11, "\r\r\r", 3);
  if ( !dword_221A400[2] )
  {
    v10 = 0;
    Function_21d2c98(&v10, (uint *)&dword_221A400[2], 6832, a1);
    *(uint *)(dword_221A400[2] + 2176) = v10;
    Function_21d2c98((uint *)(dword_221A400[2] + 2184), (uint *)(dword_221A400[2] + 2180), 9152 * v5 + 32, v6);
    *(uint *)(dword_221A400[2] + 6644) = v6;
    *(uint *)(dword_221A400[2] + 6540) = 0;
    Function_21d2808();
  }
  *(uint *)(dword_221A400[2] + 6748) = 3;
  *(uint *)(dword_221A400[2] + 6752) = dword_221A400[2];
  *(uint *)(dword_221A400[2] + 6756) = 2176;
  *(uint *)(dword_221A400[2] + 6760) = 4160;
  *(uint *)(dword_221A400[2] + 6764) = 1;
  *(uint *)(dword_221A400[2] + 6768) = 0;
  *(uint *)(dword_221A400[2] + 6772) = 0;
  *(uchar *)(dword_221A400[2] + 6745) = 1;
  Function_20b89ac(dword_221A400[2] + 6648, 1, (int)&v11);
  Function_20b8c44(dword_221A400[2] + 6648, 0);
  Function_20b8a34(
    (int *)(dword_221A400[2] + 6648),
    1,
    dword_221A400[2] + 2188,
    2176,
    65,
    2,
    (int)Function_21d28b4,
    dword_221A400[2]);
  *(uint *)(dword_221A400[2] + 6636) = 0;
  *(uint *)(dword_221A400[2] + 6740) = 0;
  v7 = Function_203895c();
  if ( Function_203272c(v7) )
    v14 = 3;
  else
    v14 = 1;
  *(uint *)(dword_221A400[2] + 6632) = v14;
  v12 = dword_221A400[2] + 6544;
  v13 = v5;
  v15 = Function_21d9968(dword_221A400[2] + 6544);
  if ( v15 == -1 )
    ErrorHandler();
  if ( *(uint *)(dword_221A400[2] + 6632) == 3 )
    v18 = Function_21d2a10;
  else
    v18 = (int (__fastcall *)(int, int, int))Function_21d2a38;
  v19 = 0;
  v16 = *(uint *)(dword_221A400[2] + 2180);
  v17 = 9152 * v5 + 32;
  Function_2205988(&v12);
  *(uint *)(dword_221A400[2] + 6640) = 0;
  v8 = Function_2202e0c(v4);
  Function_21d2e8c(v8);
  return Function_2202eb0(1);
}

//----- (021D2E8C) --------------------------------------------------------
int Function_21d2e8c()
{
  return Function_20b8bd4(dword_221A400[2] + 6648);
}

//----- (021D2EA4) --------------------------------------------------------
int Function_21d2ea4()
{
  int v0;
  int v1;
  int result;

  v0 = *(uint *)(dword_221A400[2] + 6740);
  if ( !v0 )
    return Function_21d1f18();
  v1 = *(uint *)(dword_221A400[2] + 6636);
  if ( !v1 )
    return Function_21d1f18();
  if ( v1 == 1 && Function_22042f4(v0, 2) )
    return Function_21d1f18();
  result = Function_22042f4(*(uint *)(dword_221A400[2] + 6740), 1);
  if ( result )
    result = Function_21d1f18();
  return result;
}

//----- (021D2EF4) --------------------------------------------------------
int __fastcall Function_21d2ef4(int result)
{
  *(uint *)(dword_221A400[2] + 6540) = result;
  return result;
}

//----- (021D2F08) --------------------------------------------------------
int *Function_21d2f08()
{
  int *result;
  int (*v1)(void);
  int *v2;

  result = &dword_221A400[1];
  if ( dword_221A400[2] )
  {
    v1 = *(int (**)(void))(dword_221A400[2] + 6540);
    MIC_StopAutoSampling();
    Function_20b8c28((uint *)(dword_221A400[2] + 6648));
    v2 = Function_20b8a0c(dword_221A400[2] + 6648);
    Function_2205ac0(v2);
    Function_2018238(*(uint *)(dword_221A400[2] + 6644), *(uint *)(dword_221A400[2] + 2184));
    Function_2018238(*(uint *)(dword_221A400[2] + 6644), *(uint *)(dword_221A400[2] + 2176));
    result = &dword_221A400[1];
    dword_221A400[2] = 0;
    if ( v1 )
      result = (int *)v1();
  }
  return result;
}

//----- (021D2F7C) --------------------------------------------------------
int __fastcall Function_21d2f7c(int a1, int a2, int a3, int a4)
{
  int result;
  int v5;
  int v6;
  int v7;

  v7 = a4;
  if ( dword_221A400[2] && (Function_22052bc(&v5), v6 > 2) )
    result = v5;
  else
    result = 0;
  return result;
}

//----- (021D2FA4) --------------------------------------------------------
int Function_21d2fa4()
{
  int result;

  result = 6640;
  *(uint *)(dword_221A400[2] + 6640) = 1;
  return result;
}

//----- (021D2FB8) --------------------------------------------------------
int Function_21d2fb8()
{
  int result;

  result = 6640;
  *(uint *)(dword_221A400[2] + 6640) = 0;
  return result;
}

//----- (021D2FCC) --------------------------------------------------------
int __fastcall Function_21d2fcc(int a1, int a2)
{
  int v2;
  int v3;
  int v5;
  int v6;

  v2 = a1;
  v3 = a2;
  if ( !dword_221A400[2] || *(uint *)(dword_221A400[2] + 6632) != 3 )
    return 0;
  v5 = 0;
  v6 = 0;
  do
  {
    if ( v5 != v3 && (1 << v5) & v2 && *(uint *)(dword_221A400[2] + v6 + 6616) != 1 )
    {
      if ( Function_22043f4((uchar)v5) )
        return 0;
      *(uint *)(dword_221A400[2] + v6 + 6616) = 1;
    }
    ++v5;
    v6 += 4;
  }
  while ( v5 < 4 );
  return 1;
}

//----- (021D3038) --------------------------------------------------------
int __fastcall Function_21d3038(int result)
{
  dword_2215EA0 = result;
  return result;
}

//----- (021D3048) --------------------------------------------------------
int __fastcall Function_21d3048(int a1, int a2)
{
  int *v2;
  int v3;
  int result;
  ushort *v5;
  int v6;
  int *v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;

  v2 = (int *)a1;
  v3 = a2;
  if ( dword_221A400[7] )
    return 2;
  v5 = (ushort *)(*(int (__fastcall **)(const char *, int))(a1 + 64))("ALLOC DWCauth", 5108);
  dword_221A400[7] = (int)v5;
  if ( !v5 )
    return 2;
  MI_CpuFill8(v5, 0, 0x13F4u);
  *(uint *)(dword_221A400[7] + 4884) = v3;
  dword_221A400[5] = 0;
  MI_CpuFill8((ushort *)(dword_221A400[7] + 4104), 0, 0x1C4u);
  v6 = 4;
  *(uint *)(dword_221A400[7] + 4104) = 20100;
  v7 = (int *)(dword_221A400[7] + 4556);
  do
  {
    v8 = *v2;
    v9 = v2[1];
    v10 = v2[2];
    v11 = v2[3];
    v2 += 4;
    *v7 = v8;
    v7[1] = v9;
    v7[2] = v10;
    v7[3] = v11;
    v7 += 4;
    --v6;
  }
  while ( v6 );
  v12 = v2[1];
  *v7 = *v2;
  v7[1] = v12;
  *(ushort *)(dword_221A400[7] + 4606) = 0;
  *(uchar *)(dword_221A400[7] + 4619) = 0;
  *(uint *)(dword_221A400[7] + 4100) = Function_21d3410(1);
  result = *(uint *)(dword_221A400[7] + 4100);
  if ( !result )
  {
    dword_221A400[6] = 0;
    Function_21d316c();
    result = 0;
  }
  return result;
}

//----- (021D316C) --------------------------------------------------------
uint Function_21d316c()
{
  uint result;

  OS_InitMutex((uint *)(dword_221A400[7] + 5080));
  *(uint *)(dword_221A400[7] + 5104) = 0;
  if ( !*(uint *)(dword_221A400[7] + 4996) || (result = Function_20c2204(dword_221A400[7] + 4888)) != 0 )
  {
    OS_CreateThread(
      (int *)(dword_221A400[7] + 4888),
      (int)Function_21d3520,
      (int)&dword_221A400[7],
      dword_221A400[7] + 4096,
      4096,
      16);
    result = OS_WakeupThreadDirect(dword_221A400[7] + 4888);
  }
  return result;
}

//----- (021D3220) --------------------------------------------------------
uint Function_21d3220()
{
  uint result;

  result = dword_221A400[7];
  if ( dword_221A400[7] )
  {
    OS_LockMutex((uint *)(dword_221A400[7] + 5080));
    *(uint *)(dword_221A400[7] + 5104) = 1;
    OS_UnlockMutex((int *)(dword_221A400[7] + 5080));
    if ( *(uint *)(dword_221A400[7] + 4884) )
      Function_21d46e8();
    result = *(uint *)(dword_221A400[7] + 4996);
    if ( result )
      result = Function_20c21d4(dword_221A400[7] + 4888);
  }
  return result;
}

//----- (021D32AC) --------------------------------------------------------
int *Function_21d32ac()
{
  int *result;
  void (__fastcall *v1)(const char *, int, uint);

  result = (int *)dword_221A400[7];
  if ( dword_221A400[7] )
  {
    v1 = *(void (__fastcall **)(const char *, int, uint))(dword_221A400[7] + 4624);
    if ( *(uint *)(dword_221A400[7] + 4884) )
      Function_21d4c2c();
    v1("FREE DWCauth", dword_221A400[7], 0);
    result = &dword_221A400[5];
    dword_221A400[7] = 0;
  }
  return result;
}

//----- (021D3304) --------------------------------------------------------
uint Function_21d3304()
{
  uint result;

  result = *(uint *)(dword_221A400[7] + 4996);
  if ( result )
    result = Function_20c21d4(dword_221A400[7] + 4888);
  return result;
}

//----- (021D3334) --------------------------------------------------------
int Function_21d3334()
{
  int v1;

  if ( !dword_221A400[7] )
    return 22;
  OS_LockMutex((uint *)(dword_221A400[7] + 5080));
  v1 = *(uint *)(dword_221A400[7] + 4100);
  OS_UnlockMutex((int *)(dword_221A400[7] + 5080));
  return v1;
}

//----- (021D3380) --------------------------------------------------------
int __fastcall Function_21d3380(int *a1, int a2, int a3, uint a4)
{
  int *v4;
  int v5;
  int result;

  v4 = a1;
  if ( !dword_221A400[7] )
    MI_CpuFill8(a1, 0, 0x1C4u);
  MI_CpuCopy8(dword_221A400[7] + 4104, (uint)v4, 0x1C4u, a4);
  if ( *v4 < 20000 || *v4 >= 30000 )
    *v4 = 20998;
  v5 = *v4;
  result = 20100;
  if ( *v4 >= 20100 )
  {
    result = -v5;
    *v4 = -v5;
  }
  return result;
}

//----- (021D3410) --------------------------------------------------------
int __fastcall Function_21d3410(int a1)
{
  int v1;
  int v2;
  int v3;
  uint v4;
  int v6;

  v1 = a1;
  if ( Function_20d8d14((int *)"https://nas.test.nintendowifi.net/ac", "https://nas.nintendowifi.net/ac") )
    dword_2215EB4 = 1;
  dword_2215EAC = *(uint *)(dword_221A400[7] + 4620);
  dword_2215EB0 = *(uint *)(dword_221A400[7] + 4624);
  if ( Function_21d4478(*(uint *)(dword_221A400[7] + 4884), &dword_2215EA0) )
    return 4;
  if ( v1 == 1 )
    Function_20a283c((uint)&dword_221A400[8], v2, v3, v4);
  *(uint *)(dword_221A400[7] + 4100) = Function_21d3c74(
                                           *(uint *)(dword_221A400[7] + 4884),
                                           dword_221A400[7] + 4608,
                                           dword_221A400[7] + 4556);
  if ( *(uint *)(dword_221A400[7] + 4100) )
    return 4;
  if ( Function_21d4594(*(uint *)(dword_221A400[7] + 4884)) )
    return 4;
  v6 = Function_20c249c(dword_21CCC84);
  Function_21d462c(*(uint *)(dword_221A400[7] + 4884), v6 - 1);
  return 0;
}

//----- (021D3520) --------------------------------------------------------
uint Function_21d3520()
{
  int v0;
  int v1;
  int v2;
  int v4;
  uint v5;
  bool v6;
  int v7;
  uint v8;
  bool v9;
  int v10;
  int v11;

  v0 = 0;
  while ( 1 )
  {
    v1 = *(uint *)(dword_221A400[7] + 4884);
    if ( *(uint *)(v1 + 7076) )
      Function_20c21d4(v1 + 6968);
    if ( *(uint *)(*(uint *)(dword_221A400[7] + 4884) + 4128) == 8 )
    {
      v4 = Function_21d37d4();
      switch ( v4 )
      {
        case 16:
          if ( v0 > 2 )
            return Function_21d3e18(16);
          ++v0;
          v11 = 0;
          break;
        case 17:
          return Function_21d3e18(17);
        case 21:
          return Function_21d3e18(21);
        default:
          if ( v0 >= 2 )
            return Function_21d3e18(v4);
          ++v0;
          v11 = 1;
          break;
      }
    }
    else
    {
      *(uint *)(dword_221A400[7] + 4104) = 20100;
      v2 = *(uint *)(*(uint *)(dword_221A400[7] + 4884) + 4128);
      if ( v2 == 7 )
        return Function_21d3e18(20);
      if ( v0 > 2 )
      {
        if ( v2 == 2 )
          return Function_21d3e18(9);
        if ( v2 == 3 )
          return Function_21d3e18(11);
        return Function_21d3e18(13);
      }
      ++v0;
      v11 = 1;
    }
    OS_GetTick();
    OS_GetTick();
    ll_udiv();
    v6 = 1;
    if ( !v7 )
      v6 = v5 >= 0x1388;
    if ( !v6 )
      break;
LABEL_35:
    Function_21d4c2c(*(uint *)(dword_221A400[7] + 4884));
    OS_LockMutex((uint *)(dword_221A400[7] + 5080));
    *(uint *)(dword_221A400[7] + 4100) = Function_21d3410(v11);
    if ( *(uint *)(dword_221A400[7] + 4100) )
    {
      *(uint *)(dword_221A400[7] + 4104) = 20100;
      return OS_UnlockMutex((int *)(dword_221A400[7] + 5080));
    }
    OS_UnlockMutex((int *)(dword_221A400[7] + 5080));
  }
  while ( 1 )
  {
    OS_LockMutex((uint *)(dword_221A400[7] + 5080));
    if ( *(uint *)(dword_221A400[7] + 5104) == 1 )
      break;
    OS_UnlockMutex((int *)(dword_221A400[7] + 5080));
    OS_Sleep(0x1388u);
    OS_GetTick();
    ll_udiv();
    v9 = 1;
    if ( !v10 )
      v9 = v8 >= 0x1388;
    if ( v9 )
      goto LABEL_35;
  }
  *(uint *)(dword_221A400[7] + 4104) = 20100;
  OS_UnlockMutex((int *)(dword_221A400[7] + 5080));
  return Function_21d3e18(20);
}

//----- (021D37C0) --------------------------------------------------------
#error "Failed to decompile function. "

//----- (021D37D4) --------------------------------------------------------
int Function_21d37d4()
{
  int (__fastcall *v0)(const char *, int);
  void (__fastcall *v1)(const char *, int, uint);
  int result;
  uint v3;
  int v4;
  int v5;
  uint v6;
  int v7;
  int v8;
  int v9;
  int v10;
  uint v11;
  int v12;

  v0 = *(int (__fastcall **)(const char *, int))(dword_221A400[7] + 4620);
  v1 = *(void (__fastcall **)(const char *, int, uint))(dword_221A400[7] + 4624);
  if ( Function_21d5404(*(uint *)(dword_221A400[7] + 4884), 0) != 1 )
  {
    result = 14;
    *(uint *)(dword_221A400[7] + 4104) = 20100;
    return result;
  }
  if ( Function_21d39ac() )
    return 14;
  v4 = *(uint *)(dword_221A400[7] + 4104);
  if ( v4 >= 20100 )
  {
    if ( v4 == 20104 )
    {
      Function_20a3cac((uint)&dword_221A400[8], 20100, 20104, v3);
      result = 16;
      *(uint *)(dword_221A400[7] + 4104) = 20104;
    }
    else if ( v4 == 20108 )
    {
      v8 = v0("ALLOC bmwork", 1792);
      v12 = v8;
      if ( v8 )
      {
        Function_20a3c18((v8 + 31) & 0xFFFFFFE0, v9, v10, v11);
        v1("FREE bmwork", v12, 0);
      }
      result = 17;
      *(uint *)(dword_221A400[7] + 4104) = 20108;
    }
    else
    {
      result = 18;
    }
  }
  else
  {
    if ( v4 == 20002 )
    {
      v7 = v0("ALLOC bmwork", 1823);
      if ( !v7 )
      {
        result = 2;
        *(uint *)(dword_221A400[7] + 4104) = 20100;
        return result;
      }
      if ( Function_20a3c5c(&dword_221A400[8], (v7 + 31) & 0xFFFFFFE0, v5, v6) != 1 )
      {
        v1("FREE bmwork", v7, 0);
        result = 15;
        *(uint *)(dword_221A400[7] + 4104) = 20100;
        return result;
      }
      v1("FREE bmwork", v7, 0);
    }
    result = 21;
  }
  return result;
}

//----- (021D39AC) --------------------------------------------------------
int Function_21d39ac()
{
  int v0;
  int v1;
  int v2;
  int v3;
  int v4;
  int v5;
  int result;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;

  v11 = 0;
  v0 = Function_21d56a4(*(uint *)(dword_221A400[7] + 4884), "Date");
  v11 = v0;
  if ( v0 )
    Function_21d6a88(v0);
  v11 = 0;
  dword_21D0D40 = 0;
  v1 = Function_21d56a4(*(uint *)(dword_221A400[7] + 4884), "httpresult");
  Function_20dae0c(v1, v2, v3, v4);
  if ( dword_21D0D40 == 34 )
  {
    result = 12;
    *(uint *)(dword_221A400[7] + 4104) = 20101;
  }
  else if ( v5 == 200 )
  {
    if ( Function_21d56fc(*(uint *)(dword_221A400[7] + 4884), "returncd", dword_221A400[7] + 4108, 4) > 0 )
    {
      Function_20dad44(dword_221A400[7] + 4108, &v11, 10, v7);
      v9 = v8;
      v10 = strlen((char *)(dword_221A400[7] + 4108));
      if ( v11 == dword_221A400[7] + 4108 + v10 )
      {
        *(uint *)(dword_221A400[7] + 4104) = v9 + 20000;
        if ( v9 < 100 )
        {
          *(uchar *)(dword_221A400[7] + 4178) = 0;
          *(uchar *)(dword_221A400[7] + 4127) = 0;
          *(uchar *)(dword_221A400[7] + 4479) = 0;
          *(uchar *)(dword_221A400[7] + 4112) = 0;
          *(uchar *)(dword_221A400[7] + 4488) = 0;
          Function_21d56fc(*(uint *)(dword_221A400[7] + 4884), "token", dword_221A400[7] + 4178, 301);
          Function_21d56fc(*(uint *)(dword_221A400[7] + 4884), "locator", dword_221A400[7] + 4127, 51);
          Function_21d56fc(*(uint *)(dword_221A400[7] + 4884), "challenge", dword_221A400[7] + 4479, 9);
          Function_21d56fc(*(uint *)(dword_221A400[7] + 4884), "datetime", dword_221A400[7] + 4112, 15);
          Function_21d5750(*(uint *)(dword_221A400[7] + 4884), "Set-Cookie", dword_221A400[7] + 4488, 65);
          *(uchar *)(dword_221A400[7] + 4531) = 0;
          if ( v9 == 40 )
            dword_221A400[5] = 2;
          else
            dword_221A400[5] = 1;
        }
        result = 0;
      }
      else
      {
        *(uint *)(dword_221A400[7] + 4104) = 20101;
        result = 12;
      }
    }
    else
    {
      result = 14;
      *(uint *)(dword_221A400[7] + 4104) = 20101;
    }
  }
  else
  {
    *(uint *)(dword_221A400[7] + 4104) = v5 + 23000;
    result = 18;
  }
  return result;
}

//----- (021D3C74) --------------------------------------------------------
int __fastcall Function_21d3c74(int a1, char *a2, ushort *a3, int a4)
{
  int v4;
  bool v5;
  char *v6;
  ushort *v7;
  int v8;
  int v10;
  int v11;
  int v12;
  int v13;
  char v14;
  int v15;

  v15 = a4;
  v4 = a1;
  v5 = dword_221A400[9] == 0;
  v6 = a2;
  v7 = a3;
  if ( !dword_221A400[9] )
    v5 = dword_221A400[8] == 0;
  if ( v5 )
  {
    v8 = strlen("acctcreate");
    if ( Function_21d4e7c(v4, "action", "acctcreate", v8) )
      return 8;
  }
  else
  {
    v10 = strlen("login");
    if ( Function_21d4e7c(v4, "action", "login", v10) )
      return 8;
    v11 = strlen(v6);
    if ( Function_21d4e7c(v4, "gsbrcd", v6, v11) )
      return 8;
  }
  if ( !Function_21d3e84(&v14, &dword_221A400[8]) )
    return 5;
  if ( !Function_21d4134(v4, &v14, dword_221A400[15]) )
    return 8;
  if ( dword_221A400[6] == 1 )
  {
    v12 = strlen("Y");
    if ( Function_21d4e7c(v4, "iswfc", "Y", v12) )
      return 8;
  }
  if ( Function_20dce64(v7) )
  {
    v13 = Function_20dce64(v7);
    if ( Function_21d4e7c(v4, "ingamesn", v7, 2 * v13) )
      return 8;
  }
  return 0;
}

//----- (021D3E18) --------------------------------------------------------
uint __fastcall Function_21d3e18(int a1)
{
  int v1;

  v1 = a1;
  OS_LockMutex((uint *)(dword_221A400[7] + 5080));
  *(uint *)(dword_221A400[7] + 4100) = v1;
  return OS_UnlockMutex((int *)(dword_221A400[7] + 5080));
}

//----- (021D3E5C) --------------------------------------------------------
int __fastcall Function_21d3e5c(int a1, int a2, int a3, uint a4)
{
  int v4;
  char v6;
  uint v7;

  v7 = a4;
  v4 = a1;
  Function_20a283c((uint)&v6, a2, a3, a4);
  return Function_21d3e84(v4, &v6);
}

//----- (021D3E84) --------------------------------------------------------
int __fastcall Function_21d3e84(ushort *a1, int a2)
{
  int v2;
  uchar *v3;
  uint v4;
  uint v5;
  int v6;
  uint v7;
  char *v8;
  uchar *v9;
  int v10;
  int v11;
  uint v12;
  int result;
  int v14;
  int v15;
  uchar *v16;
  int v17;
  int v18;
  uint v19;
  int v20;
  int v21;
  uint v22;
  char v23;
  char v24;
  int v25;
  int v26;
  int v27;
  int v28;
  int v29;
  int v30;
  uchar v31;
  uchar v32;
  uchar v33;
  char v34;

  v2 = a2;
  v3 = a1;
  MI_CpuFill8(a1, 0, 0x94u);
  if ( *(ull *)v2 )
    OS_SNPrintf(v3, 14, "%013llu");
  else
    OS_SNPrintf(v3, 14, "%013llu", *(uint *)(v2 + 8), *(uint *)(v2 + 12));
  OS_SNPrintf(v3 + 14, 7, "%03u", *(ushort *)(v2 + 16));
  if ( !LOBYTE(dword_27FFE00[3]) )
    OS_Panic();
  MI_CpuCopy8((int)&dword_27FFE00[3], (uint)(v3 + 21), 4u, v4);
  if ( !LOBYTE(dword_27FFE00[4]) )
    OS_Panic();
  MI_CpuCopy8((int)&dword_27FFE00[4], (uint)(v3 + 26), 2u, v5);
  v3[29] = 48;
  OS_GetMacAddress((uint)&v24, 48, v6, v7);
  v8 = &v24;
  v9 = v3 + 31;
  v10 = 0;
  do
  {
    v11 = (uchar)*v8++;
    Function_20c1ab0(v9, "%02x", v11);
    ++v10;
    v9 += 2;
  }
  while ( v10 < 6 );
  OS_GetOwnerInfo((int)&v31);
  if ( v31 >= 8u )
    v31 = 1;
  OS_SNPrintf(v3 + 44, 3, "%02x", v31);
  MI_CpuCopy8((int)&v34, (uint)(v3 + 126), 0x14u, v12);
  OS_SNPrintf(v3 + 47, 5, "%02x%02x", v32, v33);
  if ( Function_20cbae4((int)&v28, (int)&v25) )
    return 0;
  OS_SNPrintf(v3 + 52, 13, "%02d%02d%02d%02d%02d%02d", v28, v29, v30, v25, v26, v27);
  v14 = OS_DisableInterrupts();
  v15 = Function_2215398();
  DC_InvalidateRange(v15, 6);
  if ( v15 )
  {
    v16 = v3 + 65;
    v17 = 0;
    do
    {
      v18 = Function_20c1ab0(v16, "%02x", *(uchar *)(v15 + v17++));
      v16 += 2;
    }
    while ( v17 < 6 );
    v19 = Function_21e5f18(v18);
    v20 = v19;
    if ( v19 == 255 || v19 > 0x63 )
      v20 = 99;
    OS_SNPrintf(v3 + 111, 14, "%02d:0000000-00", v20);
    v21 = Function_22153dc(&v23);
    DC_InvalidateRange(v21, 32);
    if ( v21 )
    {
      MI_CpuCopy8(v21, (uint)(v3 + 78), 0x20u, v22);
      Function_21e5f48(v3 + 114);
      OS_RestoreInterrupts(v14);
      result = 1;
    }
    else
    {
      OS_RestoreInterrupts(v14);
      result = 0;
    }
  }
  else
  {
    OS_RestoreInterrupts(v14);
    result = 0;
  }
  return result;
}

//----- (021D4134) --------------------------------------------------------
BOOL __fastcall Function_21d4134(int a1, int a2, int a3)
{
  int v3;
  int v4;
  int v5;
  int v6;
  BOOL result;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;
  int v14;
  int v15;
  int v16;
  int v17;
  int v18;
  int v19;
  int v20;
  char v21;

  v3 = a3;
  v4 = a1;
  v5 = a2;
  OS_SNPrintf(&v21, 33, "%03d%03d");
  v6 = strlen(&v21);
  if ( Function_21d4e7c(v4, "sdkver", &v21, v6) )
    return 0;
  v8 = strlen((char *)v5);
  if ( Function_21d4e7c(v4, "userid", v5, v8) )
    return 0;
  v9 = strlen((char *)(v5 + 14));
  if ( Function_21d4e7c(v4, "passwd", v5 + 14, v9) )
    return 0;
  v10 = strlen((char *)(v5 + 65));
  if ( Function_21d4e7c(v4, "bssid", v5 + 65, v10) )
    return 0;
  v11 = strlen((char *)(v5 + 111));
  if ( Function_21d4e7c(v4, "apinfo", v5 + 111, v11) )
    return 0;
  v12 = strlen((char *)(v5 + 21));
  if ( Function_21d4e7c(v4, "gamecd", v5 + 21, v12) )
    return 0;
  v13 = strlen((char *)(v5 + 26));
  if ( Function_21d4e7c(v4, "makercd", v5 + 26, v13) )
    return 0;
  v14 = strlen((char *)(v5 + 29));
  if ( Function_21d4e7c(v4, "unitcd", v5 + 29, v14) )
    return 0;
  v15 = strlen((char *)(v5 + 31));
  if ( Function_21d4e7c(v4, "macadr", v5 + 31, v15) )
    return 0;
  v16 = strlen((char *)(v5 + 44));
  if ( Function_21d4e7c(v4, "lang", v5 + 44, v16) )
    return 0;
  v17 = strlen((char *)(v5 + 47));
  if ( Function_21d4e7c(v4, "birth", v5 + 47, v17) )
    return 0;
  v18 = strlen((char *)(v5 + 52));
  if ( Function_21d4e7c(v4, "devtime", v5 + 52, v18) )
    return 0;
  v19 = Function_20dce64((ushort *)(v5 + 126));
  if ( Function_21d4e7c(v4, "devname", v5 + 126, 2 * v19) )
    return 0;
  if ( v3 == 1 )
  {
    v20 = strlen((char *)(v5 + 78));
    if ( Function_21d4e7c(v4, "ssid", v5 + 78, v20) )
      return 0;
  }
  OS_SNPrintf(&v21, 33, "Nitro WiFi SDK/%d.%d");
  if ( Function_21d4da0(v4, "User-Agent", &v21) )
    result = 0;
  else
    result = Function_21d4da0(v4, "HTTP_X_GAMECD", v5 + 21) == 0;
  return result;
}

//----- (021D4478) --------------------------------------------------------
int __fastcall Function_21d4478(ushort *a1, uint *a2)
{
  uint *v2;
  ushort *v3;
  int (__fastcall *v4)(const char *, int);
  int v5;
  uint *v6;
  int v7;
  int v8;
  int v9;
  uint *v10;
  int v11;
  int v12;
  int v13;
  int result;
  int v15;
  int v16;

  v2 = a2;
  v3 = a1;
  v4 = (int (__fastcall *)(const char *, int))a2[3];
  MI_CpuFill8(a1, 0, 0x1C14u);
  v5 = (int)(v3 + 2048);
  *(uint *)(v5 + 2608) = -1;
  *(uint *)(v5 + 2612) = -1;
  v6 = v3 + 2050;
  v7 = v2[1];
  v8 = v2[2];
  v9 = v2[3];
  *v6 = *v2;
  v6[1] = v7;
  v6[2] = v8;
  v6[3] = v9;
  v10 = v3 + 2058;
  v11 = v2[5];
  v12 = v2[6];
  *v10 = v2[4];
  v10[1] = v11;
  v10[2] = v12;
  v13 = v4("ALLOC http->lowrecvbuf", 2920);
  *((uint *)v3 + 1651) = v13;
  if ( v13 )
  {
    v15 = v4("ALLOC http->lowsendbuf", 1514);
    *((uint *)v3 + 1652) = v15;
    if ( v15 )
    {
      if ( Function_21d501c(v3, v3 + 3332, *((uint *)v3 + 1027)) )
      {
        if ( Function_21d515c(v3, *v2) )
        {
          v16 = Function_21d4ce0(v3);
          *((uint *)v3 + 1032) = v16;
          if ( !v16 )
            *((uchar *)v3 + 4096) = -1;
          result = *((uint *)v3 + 1032);
        }
        else
        {
          result = 1;
          *((uint *)v3 + 1032) = 1;
        }
      }
      else
      {
        result = 1;
        *((uint *)v3 + 1032) = 1;
      }
    }
    else
    {
      result = 1;
      *((uint *)v3 + 1032) = 1;
    }
  }
  else
  {
    result = 1;
    *((uint *)v3 + 1032) = 1;
  }
  return result;
}

//----- (021D4594) --------------------------------------------------------
BOOL __fastcall Function_21d4594(int a1)
{
  int v1;
  int v2;
  BOOL result;
  uchar *v4;
  int v5;
  char v6;

  v1 = a1;
  if ( Function_21d4da0(a1, "Connection", "close") )
    return 1;
  v4 = Function_20d90b0(*(uchar **)(v1 + 6648), "\r\n\r\n", v2);
  v5 = strlen((char *)v4 + 4);
  result = 0;
  if ( v5 )
  {
    OS_SNPrintf(&v6, 7, "%d", v5);
    if ( Function_21d4da0(v1, "Content-Length", &v6) )
      result = 1;
  }
  return result;
}

//----- (021D462C) --------------------------------------------------------
uint __fastcall Function_21d462c(uint *a1, int a2)
{
  uint *v2;
  int v3;
  uint result;

  v2 = a1;
  v3 = a2;
  a1[1796] = 0;
  OS_InitMutex(a1 + 1790);
  OS_InitMutex(v2 + 1670);
  dword_221A400[13] = v2[1030] == 1;
  if ( !v2[1769] || (result = Function_20c2204((int)(v2 + 1742))) != 0 )
  {
    OS_CreateThread(v2 + 1742, (int)Function_21d4910, (int)v2, (int)(v2 + 1024), 4096, v3);
    result = OS_WakeupThreadDirect((int)(v2 + 1742));
  }
  return result;
}

//----- (021D46E8) --------------------------------------------------------
uint __fastcall Function_21d46e8(int a1)
{
  uint *v1;
  uint result;

  v1 = (uint *)a1;
  result = *(uchar *)(a1 + 4096);
  if ( result == 255 )
  {
    OS_LockMutex(v1 + 1790);
    v1[1796] = 1;
    OS_UnlockMutex(v1 + 1790);
    result = v1[1769];
    if ( result )
      result = Function_20c21d4((int)(v1 + 1742));
  }
  return result;
}

//----- (021D4744) --------------------------------------------------------
int __fastcall Function_21d4744(int a1)
{
  int v1;
  int *v2;
  int result;

  v1 = a1;
  if ( *(uint *)(a1 + 4400) == 1 )
  {
    OS_GetLowEntropyData((int *)(a1 + 6612));
    Function_220fe28(v1 + 6612, 32);
  }
  OS_LockMutex((uint *)(v1 + 7160));
  v2 = (int *)(v1 + 7160);
  if ( *(uint *)(v1 + 7184) == 1 )
  {
    OS_UnlockMutex(v2);
    result = 0;
  }
  else
  {
    OS_UnlockMutex(v2);
    OS_Sleep(0xAu);
    result = 1;
  }
  return result;
}

//----- (021D47BC) --------------------------------------------------------
int __fastcall Function_21d47bc(int a1)
{
  uint *v1;
  uint *v2;

  v1 = (uint *)a1;
  MI_CpuFill8((ushort *)(a1 + 4408), 0, 0x64u);
  v2 = v1 + 1024;
  v2[93] = 2920;
  v2[94] = v1[1651];
  v2[96] = 1514;
  v2[97] = v1[1652];
  return Function_220bcf0(v1 + 1102);
}

//----- (021D4814) --------------------------------------------------------
int __fastcall Function_21d4814(int a1)
{
  return Function_220d8d8(*(uint *)(a1 + 4388));
}

//----- (021D4828) --------------------------------------------------------
int __fastcall Function_21d4828(int a1)
{
  uint *v1;
  uchar *v2;
  int v3;
  int v4;
  uchar *v6;
  int v7;
  uchar *v8;
  int v9;
  int v10;
  uchar *v11;
  uchar v12;
  int v13;
  int v14;
  int v15;
  int v16;

  v1 = (uint *)a1;
  v2 = *(uchar **)(a1 + 6664);
  v3 = a1 + 6664;
  if ( !Function_20d90b0(*(uchar **)(a1 + 6664), "\r\n\r\n", a1 + 520) )
    return 0;
  v6 = Function_20d90b0(v2, "\r\n\r\n", v4) + 4;
  OS_LockMutex(v1 + 1670);
  v1[1677] = *(uint *)(v3 + 4) - (uint)v6;
  OS_UnlockMutex(v1 + 1670);
  v8 = Function_20d90b0(*(uchar **)v3, "Content-Length: ", v7);
  if ( v8 )
  {
    v9 = strlen("Content-Length: ");
    v11 = Function_20d90b0(&v8[v9], "\r\n", v10);
    v12 = *v11;
    *v11 = 0;
    OS_LockMutex(v1 + 1670);
    Function_20dae0c((int)&v8[v9], v13, v14, v15);
    v1[1676] = v16;
    OS_UnlockMutex(v1 + 1670);
    *v11 = v12;
  }
  return 1;
}

//----- (021D4910) --------------------------------------------------------
int __fastcall Function_21d4910(int a1)
{
  int v1;
  int v2;
  int v3;
  int v4;
  uint *v5;
  int v6;
  int v7;
  bool v8;
  int v9;
  int result;
  int v11;
  int v12;
  int v13;
  int v14;
  int v15;
  int v16;
  uint v17;
  uint v18;
  uint v19;
  uchar *v20;
  int v21;
  bool v22;
  uchar v23;
  ull v24;
  int v25;
  int v26;
  int v27;
  int v28;
  int v29;
  int v30;
  int v31;

  v1 = a1;
  v2 = *(uint *)(a1 + 4124);
  v3 = a1 + 4408;
  v4 = a1 + 4508;
  v5 = (uint *)(a1 + 6664);
  v6 = 0;
  if ( v2 <= 0 )
    v2 = 60000;
  Function_21d47bc(a1);
  v7 = Function_21d4814(v1);
  v9 = v7;
  v8 = v7 == 0;
  result = v1 + 4096;
  if ( v8 )
  {
    *(uint *)(v1 + 4128) = 2;
    return result;
  }
  *(uint *)(v1 + 4396) = v9;
  Function_220bda8();
  if ( *(uint *)(v1 + 4400) == 1 )
  {
    MI_CpuFill8((ushort *)v4, 0, 0x830u);
    *(uint *)(v4 + 2064) = Function_21d5010;
    *(uint *)(v4 + 2048) = *(uint *)(v1 + 4388);
    *(uint *)(v3 + 12) = v4;
    Function_220dd60(off_22160D0, 12);
    Function_2210dc0(1);
  }
  v11 = Function_220bd48(0, *(ushort *)(v1 + 4404), v9);
  if ( Function_220bf5c(v11) )
  {
    *(uint *)(v1 + 4128) = 3;
    v12 = Function_220bddc(v1 + 4096);
    return Function_220bd04(v12);
  }
  v13 = *(uint *)(v1 + 6648);
  v14 = strlen(*(char **)(v1 + 6648));
  v31 = Function_220c6d8(v13, v14);
  if ( v31 <= 0 )
  {
    v15 = v1 + 4096;
    *(uint *)(v1 + 4128) = 5;
LABEL_36:
    v28 = Function_220c03c(v15);
    v29 = Function_220c078(v28);
    v30 = Function_220bddc(v29);
    return Function_220bd04(v30);
  }
  Function_220c7e0();
  if ( !Function_21d4744(v1) )
  {
    v15 = v1 + 4096;
    *(uint *)(v1 + 4128) = 7;
    goto LABEL_36;
  }
  v5[1] = *v5;
  v5[2] = *v5 + v5[3];
  OS_GetTick();
  while ( 1 )
  {
    if ( !dword_221A400[3728] )
    {
      v15 = v1 + 4096;
      *(uint *)(v1 + 4128) = 5;
      goto LABEL_36;
    }
    v16 = Function_220c770();
    v31 = v16;
    if ( v16 < 0 )
      break;
    if ( v16 > 0 )
    {
      OS_GetTick();
      v16 = Function_220c1d0(&v31);
      if ( !v16 )
        break;
      v18 = v5[1];
      v19 = v31;
      if ( v31 >= (int)(v5[2] - 1 - v18) )
        v19 = v5[2] - 1 - v18;
      MI_CpuCopy8(v16, v18, v19, v17);
      v20 = (uchar *)(v5[1] + v19);
      v5[1] = v20;
      *v20 = 0;
      if ( v6 == 1 )
      {
        OS_LockMutex((uint *)(v1 + 6680));
        *(uint *)(v1 + 6708) += v19;
        OS_UnlockMutex((int *)(v1 + 6680));
      }
      else
      {
        v6 = Function_21d4828(v1);
      }
      if ( v31 > v19 )
      {
        v16 = Function_220c2c4(v31);
        break;
      }
      v16 = Function_220c2c4(v19);
    }
    v21 = *(uint *)(v1 + 6704);
    v23 = 0;
    v22 = v21 < 0;
    if ( v21 >= 0 )
    {
      v16 = *(uint *)(v1 + 6708);
      v23 = __OFSUB__(v16, v21);
      v22 = v16 - v21 < 0;
    }
    if ( !(v22 ^ v23) )
      break;
    OS_GetTick();
    ll_udiv();
    if ( v24 > v2 )
    {
      v15 = v1 + 4096;
      *(uint *)(v1 + 4128) = 6;
      goto LABEL_36;
    }
    if ( !Function_21d4744(v1) )
    {
      v15 = v1 + 4096;
      *(uint *)(v1 + 4128) = 7;
      goto LABEL_36;
    }
  }
  v25 = Function_220c03c(v16);
  v26 = Function_220c078(v25);
  v27 = Function_220bddc(v26);
  Function_220bd04(v27);
  result = v1 + 4096;
  *(uint *)(v1 + 4128) = 8;
  return result;
}

//----- (021D4C2C) --------------------------------------------------------
ushort *__fastcall Function_21d4c2c(ushort *result)
{
  ushort *v1;
  void (__fastcall *v2)(const char *);

  v1 = result;
  v2 = (void (__fastcall *)(const char *))*((uint *)result + 1029);
  if ( result )
  {
    Function_21d5790();
    Function_21d5074(v1, v1 + 3332);
    Function_21d5074(v1, v1 + 3324);
    if ( *((uint *)v1 + 1651) )
    {
      v2("FREE http->lowrecvbuf");
      *((uint *)v1 + 1651) = 0;
    }
    if ( *((uint *)v1 + 1652) )
    {
      v2("FREE http->lowsendbuf");
      *((uint *)v1 + 1652) = 0;
    }
    result = MI_CpuFill8(v1, 0, 0x1C14u);
  }
  return result;
}

//----- (021D4CE0) --------------------------------------------------------
int __fastcall Function_21d4ce0(int a1)
{
  char *v1;
  int v2;
  int v3;
  int v4;
  int v5;
  int v6;

  v2 = a1;
  v3 = *(uint *)(a1 + 4104);
  if ( !v3 )
    v1 = "POST /%s HTTP/1.0\r\nContent-type: application/x-www-form-urlencoded\r\nHost: %s\r\n\r\n";
  if ( v3 )
    v1 = "GET /%s HTTP/1.0\r\nHost: %s\r\n\r\n";
  v4 = strlen(*(char **)(a1 + 4388));
  v5 = strlen(v1);
  v6 = strlen(*(char **)(v2 + 4392));
  if ( Function_21d501c(v2, v2 + 6648, v4 + v5 - 4 + v6 + 1024) != 1 )
    return 1;
  *(uint *)(v2 + 6652) += OS_SNPrintf(
                              *(uchar **)(v2 + 6652),
                              *(uint *)(v2 + 6660),
                              v1,
                              *(uint *)(v2 + 4392),
                              *(uint *)(v2 + 4388));
  return 0;
}

//----- (021D4DA0) --------------------------------------------------------
int __fastcall Function_21d4da0(int a1, char *a2, char *a3)
{
  int v3;
  char *v4;
  char *v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int result;
  uchar *v13;
  char *v14;
  uchar v15;
  int v16;

  v3 = a1;
  v4 = a3;
  v5 = a2;
  v6 = a1 + 6648;
  v7 = strlen(a3);
  v8 = strlen("%s: %s\r\n");
  v9 = v7 + v8 - 4 + strlen(v5);
  v10 = *(uint *)(v6 + 8);
  v11 = v10 - *(uint *)(v6 + 4);
  if ( v9 + 1 > v11 && !Function_21d50b4(v3, v6, v9 - v11 + 1) )
    return 1;
  v13 = Function_20d90b0(*(uchar **)v6, "\r\n\r\n", v10);
  v14 = (char *)(v13 + 2);
  v15 = v13[2];
  v16 = strlen((char *)v13 + 2);
  Function_20d50d8(&v14[v9], v14, v16 + 1);
  v14[OS_SNPrintf(v14, v9 + 1, "%s: %s\r\n", v5, v4)] = v15;
  result = 0;
  *(uint *)(v6 + 4) += v9;
  return result;
}

//----- (021D4E7C) --------------------------------------------------------
int __fastcall Function_21d4e7c(int a1, char *a2, int a3, int a4)
{
  char *v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  char *v11;
  int v12;
  int v13;
  int v14;
  uchar *v15;
  int v16;
  int v17;
  int result;
  int v19;
  int v20;
  uchar *v21;
  int v22;

  v22 = a4;
  v5 = a1;
  v6 = *(uint *)(a1 + 6644);
  v7 = a1 + 504;
  if ( !v6 )
    v4 = "%s=";
  v8 = a3;
  v9 = v7 + 6144;
  v10 = a4;
  v11 = a2;
  if ( v6 )
    v4 = "&%s=";
  ++*(uint *)(v5 + 6644);
  v12 = Function_21d72e0(a3, a4);
  v13 = strlen(v4);
  v14 = v13 - 2 + strlen(v11);
  v15 = *(uchar **)(v9 + 4);
  v16 = v12 + v14;
  v17 = *(uint *)(v9 + 8) - (uint)v15;
  if ( v16 > v17 )
  {
    if ( !Function_21d50b4(v5, v9, v16 - v17 + 1) )
      return 1;
    v15 = *(uchar **)(v9 + 4);
    v17 = *(uint *)(v9 + 8) - (uint)v15;
  }
  v19 = *(uint *)(v9 + 4) + OS_SNPrintf(v15, v17, v4, v11, v22);
  *(uint *)(v9 + 4) = v19;
  v20 = *(uint *)(v9 + 8) - v19 - 1;
  if ( Function_21d72e0(v8, v10) < 0 )
    return 1;
  result = 0;
  v21 = (uchar *)(*(uint *)(v9 + 4) + v12);
  *(uint *)(v9 + 4) = v21;
  *v21 = 0;
  return result;
}

//----- (021D4F88) --------------------------------------------------------
int __fastcall Function_21d4f88(int a1, char *a2, int a3, int a4)
{
  int v4;
  char *v5;
  int v6;
  int v7;
  uchar *v8;
  int v9;
  int v11;
  int v12;

  v12 = a4;
  v4 = a1;
  v5 = a2;
  v6 = a1 + 6648;
  v7 = strlen(a2);
  v8 = *(uchar **)(v6 + 4);
  v9 = *(uint *)(v6 + 8) - (uint)v8;
  if ( v7 > v9 )
  {
    if ( !Function_21d50b4(v4, v6, v7 - v9 + 1) )
      return 1;
    v8 = *(uchar **)(v6 + 4);
    v9 = *(uint *)(v6 + 8) - (uint)v8;
  }
  v11 = OS_SNPrintf(v8, v9, "%s", v5, v12);
  if ( v11 != v7 )
    return 1;
  *(uint *)(v6 + 4) += v11;
  return 0;
}

//----- (021D5010) --------------------------------------------------------
int __fastcall Function_21d5010(int result)
{
  if ( result & 0x8000 )
    result &= 0xFFFF7FFF;
  return result;
}

//----- (021D501C) --------------------------------------------------------
int __fastcall Function_21d501c(int a1, int *a2, int a3)
{
  int v3;
  int *v4;
  int v6;

  v3 = a3;
  v4 = a2;
  if ( !a3 )
    return 0;
  v6 = (*(int (__fastcall **)(const char *, int))(a1 + 4112))("ALLOC buf->buffer", a3);
  *v4 = v6;
  if ( !v6 )
    return 0;
  v4[1] = v6;
  v4[3] = v3;
  v4[2] = *v4 + v3;
  return 1;
}

//----- (021D5074) --------------------------------------------------------
ushort *__fastcall Function_21d5074(int a1, uint *a2)
{
  ushort *v2;

  v2 = a2;
  if ( *a2 )
    (*(void (__fastcall **)(const char *))(a1 + 4116))("FREE buf->buffer");
  return MI_CpuFill8(v2, 0, 0x10u);
}

//----- (021D50B4) --------------------------------------------------------
int __fastcall Function_21d50b4(int a1, int *a2, int a3)
{
  int v3;
  void (__fastcall *v4)(const char *, int, uint);
  int v5;
  int *v6;
  int result;
  uint v8;
  uint v9;

  v3 = a1 + 4096;
  v4 = *(void (__fastcall **)(const char *, int, uint))(v3 + 20);
  v5 = a3;
  v6 = a2;
  if ( a3 <= 0 )
    return 0;
  v9 = (*(int (__fastcall **)(const char *, int))(v3 + 16))("ALLOC newptr", a2[3] + a3);
  if ( !v9 )
    return 0;
  MI_CpuCopy8(*v6, v9, v6[3], v8);
  v4("FREE buf->buffer", *v6, 0);
  if ( !v9 )
    return 0;
  v6[1] += v9 - *v6;
  result = 1;
  v6[3] += v5;
  *v6 = v9;
  v6[2] = v9 + v6[3];
  return result;
}

//----- (021D515C) --------------------------------------------------------
int __fastcall Function_21d515c(int a1, char *a2)
{
  char *v2;
  int v3;
  int v4;
  int v6;
  int v7;
  int v8;
  int v9;
  uchar *v10;
  int v11;
  uchar *v12;
  int v13;
  uchar *v14;
  int v15;
  int v16;
  int v17;
  short v18;

  v2 = a2;
  v3 = a1;
  v4 = 0;
  if ( (uint)strlen(a2) >= 0x100 )
    return 0;
  strncpy((uchar *)(v3 + 4132), v2, 256);
  v6 = strlen(v2);
  if ( v6 != strlen((char *)(v3 + 4132)) )
    return 0;
  if ( Function_20d90b0((uchar *)(v3 + 4132), "http://", v7) )
  {
    v9 = v3 + 4096;
    *(uint *)(v9 + 292) = v3 + 4139;
    *(uint *)(v9 + 304) = 0;
    *(ushort *)(v3 + 4404) = 80;
  }
  else
  {
    v10 = Function_20d90b0((uchar *)(v3 + 4132), "https://", v8);
    if ( !v10 )
      return 0;
    v8 = (int)(v10 + 8);
    v11 = v3 + 4096;
    *(uint *)(v11 + 292) = v8;
    *(uint *)(v11 + 304) = 1;
    *(ushort *)(v3 + 4404) = 443;
  }
  v12 = Function_20d90b0(*(uchar **)(v3 + 4388), ":", v8);
  if ( v12 )
  {
    *v12 = 0;
    v4 = (int)(v12 + 1);
  }
  v14 = Function_20d90b0(*(uchar **)(v3 + 4388), "/", v13);
  v17 = 0;
  if ( v14 )
  {
    *v14 = 0;
    v17 = (int)(v14 + 1);
  }
  *(uint *)(v3 + 4392) = v17;
  if ( v4 )
  {
    Function_20dae0c(v4, v17, v15, v16);
    *(ushort *)(v3 + 4404) = v18;
  }
  return 1;
}

//----- (021D52B0) --------------------------------------------------------
int __fastcall Function_21d52b0(int a1, int *a2, char *a3, int *a4)
{
  int *v4;
  int v5;
  int v6;
  int v7;
  bool v8;
  bool v9;
  uchar v10;
  int (__fastcall *v11)(const char *, int);
  void (__fastcall *v12)(const char *);
  int *v13;
  int *v14;
  int result;
  int v16;
  int v17;
  int v18;
  int v19;

  v4 = a2;
  v5 = a1 + 4096;
  v6 = a2[1];
  v7 = v4[2];
  v10 = __OFSUB__(v7, v6);
  v8 = v7 == v6;
  v9 = v7 - v6 < 0;
  v11 = *(int (__fastcall **)(const char *, int))(v5 + 16);
  v12 = *(void (__fastcall **)(const char *))(v5 + 20);
  v13 = (int *)a3;
  v14 = a4;
  if ( !((uchar)(v9 ^ v10) | v8) )
    return 0;
  v16 = strlen(a3);
  *(uint *)(*v4 + 8 * v4[2]) = v11("ALLOC result->entry[i].label", v16 + 1);
  v17 = v4[2];
  v18 = *v4;
  if ( *(uint *)(*v4 + 8 * v17)
    && (v19 = strlen((char *)v14),
        *(uint *)(*v4 + 8 * v4[2] + 4) = v11("ALLOC result->entry[i].value", v19 + 1),
        v17 = v4[2],
        v18 = *v4,
        *(uint *)(*v4 + 8 * v17 + 4)) )
  {
    Function_20d8b7c(*(uchar **)(v18 + 8 * v17), v13);
    Function_20d8b7c(*(uchar **)(*v4 + 8 * v4[2] + 4), v14);
    result = 1;
    ++v4[2];
  }
  else
  {
    if ( *(uint *)(v18 + 8 * v17) )
    {
      v12("FREE result->entry[i].label");
      *(uint *)(*v4 + 8 * v4[2]) = 0;
    }
    if ( *(uint *)(*v4 + 8 * v4[2] + 4) )
    {
      v12("FREE result->entry[i].value");
      *(uint *)(*v4 + 8 * v4[2] + 4) = 0;
    }
    result = 0;
  }
  return result;
}

//----- (021D5404) --------------------------------------------------------
int __fastcall Function_21d5404(int a1, int a2, int a3, int a4)
{
  uchar v4;
  int v5;
  int v6;
  uchar *v7;
  int v8;
  uchar *v9;
  uint v11;
  int v12;
  uchar *v13;
  uchar *v14;
  uchar v15;
  int v16;
  int v17;
  uchar *v18;
  int v19;
  uchar *i;
  uchar *v21;
  uchar *v22;
  uchar v23;
  int v24;
  uchar *v25;
  uchar *v26;
  int v27;
  int v28;
  bool v29;
  uchar *v30;
  uchar *v31;
  int v32;
  uchar *v33;
  uchar v34;
  int v35;
  uchar *v36;
  int v37;
  uchar *v38;
  int v39;
  uchar *v40;
  int v41;
  int v42;
  int v43;
  int v44;

  v44 = a4;
  v5 = a1;
  v6 = a2;
  v41 = a1 + 6712;
  v42 = 32;
  v43 = 0;
  MI_CpuFill8((ushort *)(a1 + 6712), 0, 0x100u);
  v7 = *(uchar **)(v5 + 6664);
  v9 = Function_20d90b0(*(uchar **)(v5 + 6664), "\r\n\r\n", v8);
  v40 = v9;
  if ( !v9 )
    return 0;
  v11 = (uint)&v9[strlen((char *)v9 + 4) + 4];
  v13 = Function_20d90b0(v7, " ", v12);
  v14 = v13;
  if ( !v13 )
    return 0;
  v15 = v13[4];
  v13[4] = 0;
  v16 = Function_21d52b0(v5, &v41, "httpresult", (int *)(v13 + 1));
  v14[4] = v15;
  if ( v16 != 1 )
    return 0;
  if ( v6 == 1 || Function_20d8e28(v14 + 1, "200", 3) )
    return 1;
  v18 = Function_20d90b0(v14 + 5, "\r\n", v17);
  if ( !v18 )
    return 0;
  for ( i = v18 + 2; ; i = (uchar *)(v24 + v27 + 2) )
  {
    v28 = (char)*i;
    v29 = v28 == 13;
    if ( v28 != 13 )
      v29 = i[1] == 10;
    if ( v29 )
      break;
    v21 = Function_20d90b0(i, ": ", v19);
    v22 = v21;
    if ( !v21 )
      break;
    v23 = *v21;
    v24 = (int)(v21 + 2);
    *v21 = 0;
    v25 = Function_20d90b0(v21 + 2, "\r\n", v19);
    v26 = v25;
    if ( !v25 )
    {
      *v22 = v23;
      break;
    }
    v4 = *v25;
    *v25 = 0;
    if ( Function_21d52b0(v5, &v41, (char *)i, (int *)(v22 + 2)) != 1 )
    {
      *v22 = v23;
      *v26 = v4;
      return 0;
    }
    v27 = strlen((char *)v22 + 2);
    *v22 = v23;
    *v26 = v4;
  }
  v30 = v40 + 4;
  while ( (uint)v30 < v11 )
  {
    v31 = Function_20d90b0(v30, "=", v19);
    v33 = v31;
    if ( !v31 )
      break;
    v34 = *v31;
    v35 = (int)(v31 + 1);
    *v31 = 0;
    v36 = Function_20d90b0(v31 + 1, "&", v32);
    v38 = v36;
    if ( !v36 )
    {
      v36 = Function_20d90b0(v33 + 1, "\r\n", v37);
      v38 = v36;
    }
    if ( v38 )
    {
      v4 = *v38;
      LOBYTE(v36) = 0;
    }
    if ( v38 )
      *v38 = (uchar)v36;
    if ( Function_21d52b0(v5, &v41, (char *)v30, (int *)(v33 + 1)) != 1 )
    {
      *v33 = v34;
      if ( v38 )
        *v38 = v4;
      return 0;
    }
    v39 = strlen((char *)v33 + 1);
    *v33 = v34;
    v30 = (uchar *)(v35 + v39 + 1);
    if ( v38 )
      *v38 = v4;
  }
  return 1;
}

//----- (021D56A4) --------------------------------------------------------
int __fastcall Function_21d56a4(int a1, int *a2)
{
  int v2;
  int *v3;
  int v4;
  uint *v5;

  v2 = a1;
  v3 = a2;
  v4 = 0;
  do
  {
    v5 = *(uint **)(v2 + 8 * v4 + 6712);
    if ( !v5 )
      break;
    if ( !Function_20d8d14(v3, v5) )
      return *(uint *)(v2 + 8 * v4 + 6716);
    ++v4;
  }
  while ( v4 < 32 );
  return 0;
}

//----- (021D56FC) --------------------------------------------------------
uint __fastcall Function_21d56fc(int a1, int *a2, int a3, uint a4)
{
  int v4;
  uint v5;
  char *v6;
  char *v7;
  uint result;
  int v9;

  v4 = a3;
  v5 = a4;
  v6 = (char *)Function_21d56a4(a1, a2);
  v7 = v6;
  if ( !v6 )
    return 0;
  v9 = strlen(v6);
  result = Function_21d7468(v7, v9, v4, v5);
  if ( result != -1 && result < v5 )
    *(uchar *)(v4 + result) = 0;
  return result;
}

//----- (021D5750) --------------------------------------------------------
int __fastcall Function_21d5750(int a1, int *a2, uchar *a3, int a4)
{
  uchar *v4;
  int v5;
  char *v6;
  int *v7;

  v4 = a3;
  v5 = a4;
  v6 = (char *)Function_21d56a4(a1, a2);
  v7 = (int *)v6;
  if ( !v6 )
    return 0;
  if ( strlen(v6) >= v5 )
    return 0;
  Function_20d8b7c(v4, v7);
  return 1;
}

//----- (021D5790) --------------------------------------------------------
int __fastcall Function_21d5790(int a1, int a2, int a3)
{
  int result;
  void (__fastcall *v4)(const char *);
  int v5;
  int v6;
  int i;

  result = a1 + 4096;
  v4 = *(void (__fastcall **)(const char *))(result + 20);
  v5 = a3;
  v6 = a2;
  for ( i = 0; i < v5; ++i )
  {
    if ( *(uint *)(v6 + 8 * i) )
    {
      v4("FREE array_entry[i].label");
      *(uint *)(v6 + 8 * i) = 0;
    }
    result = v6 + 8 * i;
    if ( *(uint *)(result + 4) )
    {
      v4("FREE array_entry[i].value");
      result = v6 + 8 * i;
      *(uint *)(result + 4) = 0;
    }
  }
  return result;
}

//----- (021D5818) --------------------------------------------------------
int __fastcall Function_21d5818(uint *a1)
{
  uint *v1;
  int (__fastcall *v2)(const char *, int);
  ushort *v4;
  int v5;
  int v6;
  uint *v7;
  uint *v8;

  v1 = a1;
  v2 = (int (__fastcall *)(const char *, int))*a1;
  if ( dword_221A400[14] )
    return 4;
  v4 = (ushort *)v2("ALLOC DWCnetcheck", 4596);
  dword_221A400[14] = (int)v4;
  if ( !v4 )
    return 4;
  MI_CpuFill8(v4, 0, 0x11F4u);
  *(uint *)(dword_221A400[14] + 4100) = -99999;
  v5 = v1[1];
  v6 = v1[2];
  v7 = (uint *)(dword_221A400[14] + 4360);
  *v7 = *v1;
  v7[1] = v5;
  v7[2] = v6;
  if ( dword_221A400[19] )
    return 4;
  dword_221A400[19] = v2("ALLOC DWChttp", 7188);
  if ( !dword_221A400[19] )
    return 4;
  dword_221A400[15] = 0;
  v8 = OS_InitMutex((uint *)(dword_221A400[14] + 4572));
  Function_21d5ab0(v8);
  return 0;
}

//----- (021D58F8) --------------------------------------------------------
int *Function_21d58f8()
{
  void (__fastcall *v0)(uint);
  int *result;

  v0 = *(void (__fastcall **)(uint))(dword_221A400[14] + 4364);
  if ( dword_221A400[19] )
  {
    Function_21d4c2c((ushort *)dword_221A400[19]);
    ((void (__fastcall *)(const char *, int, uint))v0)("FREE DWChttp", dword_221A400[19], 0);
    dword_221A400[19] = 0;
  }
  Function_21d32ac();
  result = (int *)dword_221A400[14];
  if ( dword_221A400[14] )
  {
    if ( *(uint *)(dword_221A400[14] + 4372) )
    {
      v0("FREE DWCnetcheck->body_302");
      *(uint *)(dword_221A400[14] + 4372) = 0;
    }
    if ( *(uint *)(dword_221A400[14] + 4376) )
    {
      v0("FREE DWCnetcheck->body_wayport");
      *(uint *)(dword_221A400[14] + 4376) = 0;
    }
    ((void (__fastcall *)(const char *, int, uint))v0)("FREE DWCnetcheck", dword_221A400[14], 0);
    result = &dword_221A400[14];
    dword_221A400[14] = 0;
  }
  return result;
}

//----- (021D59F0) --------------------------------------------------------
int *Function_21d59f0()
{
  int *result;

  result = &dword_221A400[14];
  if ( dword_221A400[14] )
  {
    if ( dword_221A400[19] )
      Function_21d46e8(dword_221A400[19]);
    Function_21d3220();
    if ( *(uint *)(dword_221A400[14] + 4488) )
      Function_20c21d4(dword_221A400[14] + 4380);
    result = (int *)(dword_221A400[14] + 4096);
    *(uint *)(dword_221A400[14] + 4100) = -7;
  }
  return result;
}

//----- (021D5A58) --------------------------------------------------------
int Function_21d5a58()
{
  int v0;

  OS_LockMutex((uint *)(dword_221A400[14] + 4572));
  v0 = *(uint *)(dword_221A400[14] + 4096);
  OS_UnlockMutex((int *)(dword_221A400[14] + 4572));
  return v0;
}

//----- (021D5A98) --------------------------------------------------------
int Function_21d5a98()
{
  return *(uint *)(dword_221A400[14] + 4100);
}

//----- (021D5AB0) --------------------------------------------------------
uint Function_21d5ab0()
{
  uint result;

  if ( !*(uint *)(dword_221A400[14] + 4488) || (result = Function_20c2204(dword_221A400[14] + 4380)) != 0 )
  {
    OS_CreateThread(
      (int *)(dword_221A400[14] + 4380),
      (int)Function_21d5b38,
      dword_221A400[14],
      dword_221A400[14] + 4096,
      4096,
      16);
    result = OS_WakeupThreadDirect(dword_221A400[14] + 4380);
  }
  return result;
}

//----- (021D5B38) --------------------------------------------------------
int Function_21d5b38()
{
  int v0;
  char *v1;
  int (__fastcall *v2)(const char *, int);
  int (__fastcall *v3)(const char *, int, uint);
  int v4;
  int result;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;
  int v14;
  int v15;
  int v16;
  int v17;
  uint v18;
  int v19;
  int v20;
  int v21;
  int v22;
  char *v23;
  int v24;
  int v25;
  int v26;
  int v27;
  uint v28;
  int v29;
  int v30;
  uint v31;
  int v32;
  int v33;
  uint v34;
  int v35;
  int v36;
  int v37;
  int v38;
  int v39;
  int v40;
  int v41;
  int v42;
  int v43;
  int v44;
  int v45;
  int v46;
  bool v47;
  int v48;
  int v49;
  int v50;
  int v51;
  bool v52;
  int v53;
  int v54;
  int v55;
  int v56;
  int v57;
  int v58;
  int v59;
  int v60;
  int v61;
  int v62;
  int v63;
  int v64;
  int v65;
  char *v66;
  int v67;
  int v68;
  uchar *v69;
  uchar *v70;
  uint v71;
  int v72;
  int v73;
  char *v74;
  char v75;
  long long v76;
  char v77;
  int v78;

  v0 = 0;
  v1 = 0;
  v2 = *(int (__fastcall **)(const char *, int))(dword_221A400[14] + 4360);
  v3 = *(int (__fastcall **)(const char *, int, uint))(dword_221A400[14] + 4364);
  v4 = 0;
  while ( 1 )
  {
    dword_221A400[20] = 35742560;
    dword_221A400[21] = 1;
    dword_221A400[22] = 4096;
    dword_221A400[23] = (int)v2;
    dword_221A400[24] = (int)v3;
    dword_221A400[26] = 20000;
    *(uint *)(dword_221A400[14] + 4100) = -2;
    if ( Function_21d4478((ushort *)dword_221A400[19], &dword_221A400[20]) )
    {
      Function_21d4c2c((ushort *)dword_221A400[19]);
      result = Function_21d6a44(1);
      goto LABEL_148;
    }
    if ( Function_21d4594(dword_221A400[19]) )
    {
      Function_21d4c2c((ushort *)dword_221A400[19]);
      result = Function_21d6a44(1);
      goto LABEL_148;
    }
    v6 = Function_20c249c(dword_21CCC84);
    Function_21d462c((uint *)dword_221A400[19], v6 - 1);
    if ( *(uint *)(dword_221A400[19] + 7076) )
      Function_20c21d4(dword_221A400[19] + 6968);
    v9 = *(uint *)(dword_221A400[19] + 4128);
    if ( v9 == 2 )
    {
      *(uint *)(dword_221A400[14] + 4100) = -1;
LABEL_12:
      Function_21d4c2c((ushort *)dword_221A400[19]);
      result = Function_21d6a44(3);
      goto LABEL_148;
    }
    if ( v9 != 8 )
      goto LABEL_12;
    if ( Function_21d5404(dword_221A400[19], 0, v7, v8) != 1 )
    {
      Function_21d4c2c((ushort *)dword_221A400[19]);
      result = Function_21d6a44(2);
      goto LABEL_148;
    }
    v10 = Function_21d56a4(dword_221A400[19], (int *)"httpresult");
    Function_20dae0c(v10, v11, v12, v13);
    v15 = v14;
    if ( dword_21D0D40 == 34 )
    {
      result = Function_21d6a44(2);
      goto LABEL_148;
    }
    if ( v14 == 200 )
    {
      dword_221A400[16] = *(uint *)(dword_221A400[19] + 4396);
    }
    else
    {
      if ( v14 != 302 )
      {
        Function_21d4c2c((ushort *)dword_221A400[19]);
        result = Function_21d6a44(10);
        goto LABEL_148;
      }
      dword_221A400[15] = 1;
      if ( *(uint *)(dword_221A400[14] + 4376) )
      {
        *(uint *)(dword_221A400[14] + 4100) = -6;
        Function_21d4c2c((ushort *)dword_221A400[19]);
        dword_221A400[20] = 35741372;
        dword_221A400[21] = 0;
        dword_221A400[22] = 512;
        dword_221A400[23] = (int)v2;
        dword_221A400[24] = (int)v3;
        dword_221A400[26] = 20000;
        if ( Function_20d8d14((int *)"https://nas.test.nintendowifi.net/ac", "https://nas.nintendowifi.net/ac") )
          dword_221A400[25] = 1;
        if ( Function_21d4478((ushort *)dword_221A400[19], &dword_221A400[20]) )
        {
          Function_21d4c2c((ushort *)dword_221A400[19]);
          result = Function_21d6a44(1);
          goto LABEL_148;
        }
        if ( !Function_21d3e5c((int)&v77, v16, v17, v18) || !Function_21d4134(dword_221A400[19], (int)&v77, 1) )
        {
          Function_21d4c2c((ushort *)dword_221A400[19]);
          result = Function_21d6a44(8);
          goto LABEL_148;
        }
        if ( Function_21d4e7c(dword_221A400[19], "action", (int)"message", 7)
          || (v19 = *(uint *)(dword_221A400[14] + 4376),
              v20 = strlen(*(char **)(dword_221A400[14] + 4376)),
              Function_21d4e7c(dword_221A400[19], "HotSpotResponse", v19, v20)) )
        {
          Function_21d4c2c((ushort *)dword_221A400[19]);
          result = Function_21d6a44(8);
          goto LABEL_148;
        }
        v3("FREE DWCnetcheck->body_wayport", *(uint *)(dword_221A400[14] + 4376), 0);
        *(uint *)(dword_221A400[14] + 4376) = 0;
        if ( Function_21d4594(dword_221A400[19]) )
        {
          Function_21d4c2c((ushort *)dword_221A400[19]);
          result = Function_21d6a44(1);
          goto LABEL_148;
        }
        v21 = Function_20c249c(dword_21CCC84);
        Function_21d462c((uint *)dword_221A400[19], v21 - 1);
        if ( *(uint *)(dword_221A400[19] + 7076) )
          Function_20c21d4(dword_221A400[19] + 6968);
        v22 = *(uint *)(dword_221A400[19] + 4128);
        if ( v22 == 2 )
        {
          *(uint *)(dword_221A400[14] + 4100) = -1;
        }
        else if ( v22 == 8 )
        {
          Function_21d4c2c((ushort *)dword_221A400[19]);
          result = Function_21d6a44(7);
          goto LABEL_148;
        }
        Function_21d4c2c((ushort *)dword_221A400[19]);
        result = Function_21d6a44(3);
        goto LABEL_148;
      }
      v23 = *(char **)(dword_221A400[19] + 6664);
      v74 = v23;
      if ( !v23 )
      {
        Function_21d4c2c((ushort *)dword_221A400[19]);
        result = Function_21d6a44(2);
        goto LABEL_148;
      }
      v24 = strlen(v23);
      *(uint *)(dword_221A400[14] + 4372) = v2("ALLOC DWCnetcheck->body_302", v24 + 1);
      v70 = *(uchar **)(dword_221A400[14] + 4372);
      if ( !v70 )
      {
        Function_21d4c2c((ushort *)dword_221A400[19]);
        result = Function_21d6a44(4);
        goto LABEL_148;
      }
      v25 = strlen(v74);
      strncpy(v70, v74, v25 + 1);
    }
    Function_21d4c2c((ushort *)dword_221A400[19]);
    Function_20a283c((uint)&v76, v26, v27, v28);
    if ( !v76 )
      break;
LABEL_60:
    if ( v15 == 200 )
    {
      *(uint *)(dword_221A400[14] + 4100) = 0;
      result = Function_21d6a44(11);
      goto LABEL_148;
    }
    *(uint *)(dword_221A400[14] + 4100) = -4;
    dword_221A400[20] = 35741372;
    dword_221A400[21] = 0;
    dword_221A400[22] = 4096;
    dword_221A400[23] = (int)v2;
    dword_221A400[24] = (int)v3;
    dword_221A400[26] = 40000;
    if ( Function_20d8d14((int *)"https://nas.test.nintendowifi.net/ac", "https://nas.nintendowifi.net/ac") )
      dword_221A400[25] = 1;
    if ( Function_21d4478((ushort *)dword_221A400[19], &dword_221A400[20]) )
    {
      Function_21d4c2c((ushort *)dword_221A400[19]);
      result = Function_21d6a44(1);
      goto LABEL_148;
    }
    if ( !Function_21d3e5c((int)&v77, v32, v33, v34) || !Function_21d4134(dword_221A400[19], (int)&v77, 1) )
    {
      Function_21d4c2c((ushort *)dword_221A400[19]);
      result = Function_21d6a44(8);
      goto LABEL_148;
    }
    if ( Function_21d4e7c(dword_221A400[19], "action", (int)"parse", 5)
      || (v35 = *(uint *)(dword_221A400[14] + 4372),
          v36 = strlen(*(char **)(dword_221A400[14] + 4372)),
          Function_21d4e7c(dword_221A400[19], "HTML", v35, v36)) )
    {
      Function_21d4c2c((ushort *)dword_221A400[19]);
      result = Function_21d6a44(8);
      goto LABEL_148;
    }
    v3("FREE DWCnetcheck->body_302", *(uint *)(dword_221A400[14] + 4372), 0);
    *(uint *)(dword_221A400[14] + 4372) = 0;
    if ( Function_21d4594(dword_221A400[19]) )
    {
      Function_21d4c2c((ushort *)dword_221A400[19]);
      result = Function_21d6a44(1);
      goto LABEL_148;
    }
    v37 = Function_20c249c(dword_21CCC84);
    Function_21d462c((uint *)dword_221A400[19], v37 - 1);
    if ( *(uint *)(dword_221A400[19] + 7076) )
      Function_20c21d4(dword_221A400[19] + 6968);
    v40 = *(uint *)(dword_221A400[19] + 4128);
    if ( v40 == 2 )
    {
      *(uint *)(dword_221A400[14] + 4100) = -1;
LABEL_84:
      Function_21d4c2c((ushort *)dword_221A400[19]);
      result = Function_21d6a44(3);
      goto LABEL_148;
    }
    if ( v40 == 3 )
    {
      Function_21d4c2c((ushort *)dword_221A400[19]);
      if ( dword_221A400[17] == 1 )
      {
        *(uint *)(dword_221A400[14] + 4100) = 0;
        result = Function_21d6a44(11);
      }
      else
      {
        result = Function_21d6a44(3);
      }
      goto LABEL_148;
    }
    if ( v40 != 8 )
      goto LABEL_84;
    if ( Function_21d5404(dword_221A400[19], 0, v38, v39) != 1 )
    {
      Function_21d4c2c((ushort *)dword_221A400[19]);
      result = Function_21d6a44(2);
      goto LABEL_148;
    }
    v41 = Function_21d56a4(dword_221A400[19], (int *)"httpresult");
    Function_20dae0c(v41, v42, v43, v44);
    v46 = v45;
    if ( dword_21D0D40 == 34 )
    {
      Function_21d4c2c((ushort *)dword_221A400[19]);
      result = Function_21d6a44(2);
      goto LABEL_148;
    }
    if ( v45 != 200 )
    {
      Function_21d4c2c((ushort *)dword_221A400[19]);
      v47 = dword_221A400[17] == 1;
      if ( dword_221A400[17] == 1 )
        v47 = v46 == 302;
      if ( v47 )
      {
        *(uint *)(dword_221A400[14] + 4100) = 0;
        result = Function_21d6a44(11);
      }
      else
      {
        result = Function_21d6a44(2);
      }
      goto LABEL_148;
    }
    if ( (int)Function_21d56fc(dword_221A400[19], (int *)"returncd", (int)&v75, 4u) <= 0 )
    {
      Function_21d4c2c((ushort *)dword_221A400[19]);
      result = Function_21d6a44(9);
      goto LABEL_148;
    }
    Function_20dae0c((int)&v75, v48, v49, v50);
    if ( dword_21D0D40 == 34 )
    {
      Function_21d4c2c((ushort *)dword_221A400[19]);
      result = Function_21d6a44(9);
      goto LABEL_148;
    }
    v52 = dword_221A400[17] == 1;
    if ( dword_221A400[17] == 1 )
      v52 = v51 == 114;
    if ( v52 )
    {
      *(uint *)(dword_221A400[14] + 4100) = 0;
      result = Function_21d6a44(11);
      goto LABEL_148;
    }
    if ( v51 >= 100 )
    {
      Function_21d4c2c((ushort *)dword_221A400[19]);
      result = Function_21d6a44(6);
      goto LABEL_148;
    }
    v73 = Function_21d56fc(dword_221A400[19], (int *)"url", 0, 0);
    if ( v73 <= 0 )
    {
      Function_21d4c2c((ushort *)dword_221A400[19]);
      result = Function_21d6a44(9);
      goto LABEL_148;
    }
    v72 = Function_21d56fc(dword_221A400[19], (int *)"data", 0, 0);
    if ( v72 <= 0 )
    {
      Function_21d4c2c((ushort *)dword_221A400[19]);
      result = Function_21d6a44(9);
      goto LABEL_148;
    }
    v53 = Function_21d56fc(dword_221A400[19], (int *)"wait", 0, 0);
    v0 = v2("ALLOC url", v73 + 1);
    if ( !v0 )
    {
      Function_21d4c2c((ushort *)dword_221A400[19]);
      result = Function_21d6a44(4);
      goto LABEL_148;
    }
    v1 = (char *)v2("ALLOC data_len", v72 + 1);
    if ( !v1 )
    {
      Function_21d4c2c((ushort *)dword_221A400[19]);
      result = Function_21d6a44(4);
      goto LABEL_148;
    }
    if ( v53 > 0 )
    {
      v4 = v2("ALLOC wait_len", v53 + 1);
      if ( !v4 )
      {
        Function_21d4c2c((ushort *)dword_221A400[19]);
        result = Function_21d6a44(4);
        goto LABEL_148;
      }
    }
    v54 = Function_21d56fc(dword_221A400[19], (int *)"url", v0, v73 + 1);
    if ( v54 < 0 )
    {
      Function_21d4c2c((ushort *)dword_221A400[19]);
      result = Function_21d6a44(9);
      goto LABEL_148;
    }
    *(uchar *)(v0 + v54) = 0;
    v55 = Function_21d56fc(dword_221A400[19], (int *)"data", (int)v1, v72 + 1);
    if ( v55 < 0 )
    {
      Function_21d4c2c((ushort *)dword_221A400[19]);
      result = Function_21d6a44(9);
      goto LABEL_148;
    }
    v1[v55] = 0;
    v71 = 0;
    if ( v53 > 0 )
    {
      v56 = Function_21d56fc(dword_221A400[19], (int *)"wait", v4, v53 + 1);
      if ( v56 < 0 )
      {
        Function_21d4c2c((ushort *)dword_221A400[19]);
        result = Function_21d6a44(9);
        goto LABEL_148;
      }
      *(uchar *)(v4 + v56) = 0;
      Function_20dae0c(v4, 0, v57, v58);
      if ( dword_21D0D40 == 34 )
      {
        Function_21d4c2c((ushort *)dword_221A400[19]);
        result = Function_21d6a44(9);
        goto LABEL_148;
      }
      v71 = 1000 * v59;
      if ( 1000 * v59 > 180000 )
        v71 = 180000;
    }
    Function_21d4c2c((ushort *)dword_221A400[19]);
    *(uint *)(dword_221A400[14] + 4100) = -5;
    dword_221A400[20] = v0;
    dword_221A400[21] = 0;
    dword_221A400[22] = 4096;
    dword_221A400[23] = (int)v2;
    dword_221A400[24] = (int)v3;
    dword_221A400[26] = 120000;
    if ( Function_21d4478((ushort *)dword_221A400[19], &dword_221A400[20]) )
    {
      Function_21d4c2c((ushort *)dword_221A400[19]);
      result = Function_21d6a44(1);
      goto LABEL_148;
    }
    if ( Function_21d4f88(dword_221A400[19], v1, v60, v61) )
    {
      Function_21d4c2c((ushort *)dword_221A400[19]);
      result = Function_21d6a44(8);
      goto LABEL_148;
    }
    if ( Function_21d4594(dword_221A400[19]) )
    {
      Function_21d4c2c((ushort *)dword_221A400[19]);
      result = Function_21d6a44(1);
      goto LABEL_148;
    }
    v62 = Function_20c249c(dword_21CCC84);
    Function_21d462c((uint *)dword_221A400[19], v62 - 1);
    if ( *(uint *)(dword_221A400[19] + 7076) )
      Function_20c21d4(dword_221A400[19] + 6968);
    v65 = *(uint *)(dword_221A400[19] + 4128);
    if ( v65 == 2 )
    {
      *(uint *)(dword_221A400[14] + 4100) = -1;
LABEL_140:
      Function_21d4c2c((ushort *)dword_221A400[19]);
      result = Function_21d6a44(3);
      goto LABEL_148;
    }
    if ( v65 != 8 )
      goto LABEL_140;
    if ( Function_21d5404(dword_221A400[19], 1, v63, v64) != 1 )
    {
      Function_21d4c2c((ushort *)dword_221A400[19]);
      result = Function_21d6a44(2);
      goto LABEL_148;
    }
    v66 = *(char **)(dword_221A400[19] + 6664);
    if ( !v66 )
    {
      Function_21d4c2c((ushort *)dword_221A400[19]);
      result = Function_21d6a44(2);
      goto LABEL_148;
    }
    v67 = strlen(*(char **)(dword_221A400[19] + 6664));
    *(uint *)(dword_221A400[14] + 4376) = v2("ALLOC DWCnetcheck->body_wayport", v67 + 1);
    v69 = *(uchar **)(dword_221A400[14] + 4376);
    if ( !v69 )
    {
      Function_21d4c2c((ushort *)dword_221A400[19]);
      result = Function_21d6a44(4);
      goto LABEL_148;
    }
    v68 = strlen(v66);
    strncpy(v69, v66, v68 + 1);
    Function_21d4c2c((ushort *)dword_221A400[19]);
    OS_Sleep(v71);
  }
  *(uint *)(dword_221A400[14] + 4100) = -3;
  LOWORD(dword_221A400[27]) = 0;
  LOBYTE(dword_221A400[40]) = 0;
  dword_221A400[43] = *(uint *)(dword_221A400[14] + 4360);
  dword_221A400[44] = *(uint *)(dword_221A400[14] + 4364);
  if ( Function_21d3048((int)&dword_221A400[27], dword_221A400[19]) )
  {
    result = Function_21d6a44(5);
    goto LABEL_148;
  }
  Function_21d3304();
  if ( Function_21d3334() == 21 )
  {
    Function_21d32ac();
    goto LABEL_60;
  }
  if ( Function_21d3334() == 9 )
  {
    *(uint *)(dword_221A400[14] + 4100) = -1;
  }
  else
  {
    Function_21d3380(&v78, v29, v30, v31);
    if ( dword_221A400[17] == 1 && (v78 == -23302 || Function_21d3334() == 11) )
    {
      *(uint *)(dword_221A400[14] + 4100) = 0;
      Function_21d32ac();
      result = Function_21d6a44(11);
      goto LABEL_148;
    }
    *(uint *)(dword_221A400[14] + 4100) = v78;
  }
  Function_21d32ac();
  result = Function_21d6a44(6);
LABEL_148:
  if ( v0 )
    result = v3("FREE url", v0, 0);
  if ( v1 )
    result = v3("FREE data", (int)v1, 0);
  if ( v4 )
    result = v3("FREE wait", v4, 0);
  return result;
}

//----- (021D6A44) --------------------------------------------------------
uint __fastcall Function_21d6a44(int a1)
{
  int v1;

  v1 = a1;
  OS_LockMutex((uint *)(dword_221A400[14] + 4572));
  *(uint *)(dword_221A400[14] + 4096) = v1;
  return OS_UnlockMutex((int *)(dword_221A400[14] + 4572));
}

//----- (021D6A88) --------------------------------------------------------
int __fastcall Function_21d6a88(char *a1, int a2, int a3, int a4)
{
  char *v4;
  int v5;
  int v6;
  bool v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  long long v13;
  bool v14;
  int v15;
  int v16;
  int v17;
  int v18;
  int v19;
  int v20;
  int v21;
  int v22;
  int v23;
  int v24;
  int v25;
  long long v26;
  bool v27;
  int result;
  char v29;
  char v30;
  char v31;
  char v32;
  char v33;
  char v34;
  char v35;
  char v36;
  char v37;
  char v38;
  char v39;
  char v40;
  char v41;
  int v42;
  int v43;
  int v44;
  int v45;
  uint v46;
  int v47;
  int v48;

  v48 = a4;
  v4 = a1;
  v5 = strlen(a1);
  v6 = strlen("Fri, 03 Mar 2006 01:28:13 GMT");
  v7 = v5 == v6;
  if ( v5 == v6 )
    v7 = v4[7] == 32;
  if ( v7 )
  {
    v8 = v4[11];
    v7 = v8 == 32;
    if ( v8 == 32 )
    {
      v9 = v4[16];
      v7 = v9 == 32;
      if ( v9 == 32 )
      {
        v10 = v4[19];
        v7 = v10 == 58;
        if ( v10 == 58 )
        {
          v11 = v4[22];
          v7 = v11 == 58;
          if ( v11 == 58 )
            v7 = v4[25] == 32;
        }
      }
    }
  }
  if ( !v7 || Function_20cbae4((int)&v45, (int)&v42) )
    return 0;
  LODWORD(v13) = RTC_ConvertDateTimeToSecond(&v45, &v42);
  HIDWORD(v13) = v12;
  v14 = v12 == -1;
  if ( v12 == -1 )
    v14 = (uint)v13 == -1;
  if ( v14 )
    return 0;
  Function_20d8b7c(&v29, (int *)v4);
  v31 = 0;
  v33 = 0;
  v35 = 0;
  v37 = 0;
  v39 = 0;
  v41 = 0;
  dword_21D0D40 = 0;
  Function_20dae0c((int)&v34, (int)&dword_21D0D40, 0, v15);
  v45 = v16;
  if ( dword_21D0D40 == 34 )
    return 0;
  v45 = v16 - 2000;
  v46 = 13;
  v17 = 0;
  while ( Function_20d8d14((int *)*(&off_2216540 + v17), &v32) )
  {
    if ( ++v17 >= 12 )
      goto LABEL_20;
  }
  v46 = v17 + 1;
LABEL_20:
  if ( v46 > 0xC )
    return 0;
  dword_21D0D40 = 0;
  Function_20dae0c((int)&v30, (int)&dword_21D0D40, 0, v18);
  v47 = v20;
  if ( dword_21D0D40 == 34 )
    return 0;
  dword_21D0D40 = 0;
  Function_20dae0c((int)&v36, (int)&dword_21D0D40, 0, v19);
  v42 = v22;
  if ( dword_21D0D40 == 34 )
    return 0;
  dword_21D0D40 = 0;
  Function_20dae0c((int)&v38, (int)&dword_21D0D40, 0, v21);
  v43 = v24;
  if ( dword_21D0D40 == 34 )
    return 0;
  dword_21D0D40 = 0;
  Function_20dae0c((int)&v40, (int)&dword_21D0D40, 0, v23);
  v44 = v25;
  if ( dword_21D0D40 == 34 )
    return 0;
  LODWORD(v26) = RTC_ConvertDateTimeToSecond(&v45, &v42);
  v27 = HIDWORD(v26) == -1;
  if ( HIDWORD(v26) == -1 )
    v27 = (uint)v26 == -1;
  if ( v27 )
    return 0;
  *(ull *)&dword_221A400[48] = v13 - v26;
  *(ull *)&dword_221A400[46] = v13;
  result = 1;
  dword_221A400[45] = 1;
  return result;
}

//----- (021D6CA4) --------------------------------------------------------
int __fastcall Function_21d6ca4(int (__fastcall *a1)(uint, uint), int a2)
{
  int (__fastcall *v2)(uint, uint);
  int v3;
  int result;
  ushort *v5;

  v2 = a1;
  v3 = a2;
  if ( dword_221A400[50] )
  {
    Function_21d7724(9, -24100);
    result = 0;
  }
  else
  {
    v5 = (ushort *)a1("ALLOC intwork", 7200);
    dword_221A400[50] = (int)v5;
    if ( v5 )
    {
      MI_CpuFill8(v5, 0, 0x1C20u);
      result = 1;
      *(uint *)dword_221A400[50] = v2;
      *(uint *)(dword_221A400[50] + 4) = v3;
    }
    else
    {
      Function_21d7724(9, -24100);
      result = 0;
    }
  }
  return result;
}

//----- (021D6D3C) --------------------------------------------------------
int *Function_21d6d3c()
{
  int *result;

  result = (int *)dword_221A400[50];
  if ( dword_221A400[50] )
  {
    Function_21d4c2c((ushort *)(dword_221A400[50] + 8));
    (*(void (__fastcall **)(const char *))(dword_221A400[50] + 4))("FREE intwork");
    result = &dword_221A400[50];
    dword_221A400[50] = 0;
  }
  return result;
}

//----- (021D6D88) --------------------------------------------------------
int __fastcall Function_21d6d88(int a1, ushort *a2, int a3, int a4)
{
  int v4;
  int v5;
  bool v6;
  int v7;
  int v8;
  int v9;
  uint v10;
  int result;
  int v12;
  int v13;
  int v14;
  int v15;
  int v16;
  int v17;
  int v18;
  int v19;
  char v20;
  int v21;

  v21 = a4;
  v4 = a1;
  *(uint *)(dword_221A400[50] + 7196) = a2;
  MI_CpuFill8(a2, 0, 0x174u);
  if ( *(uint *)(dword_221A400[50] + 7084) && !Function_20c2204(dword_221A400[50] + 6976) )
    OS_Panic();
  v13 = 35741372;
  v14 = 0;
  v15 = 4096;
  v16 = *(uint *)dword_221A400[50];
  v17 = *(uint *)(dword_221A400[50] + 4);
  v5 = Function_20d8d14((int *)"https://nas.test.nintendowifi.net/ac", "https://nas.nintendowifi.net/ac");
  v6 = v5 == 0;
  if ( v5 )
  {
    v7 = 1;
    v18 = 1;
  }
  else
  {
    v7 = 0;
  }
  if ( v6 )
    v18 = v7;
  v19 = 20000;
  if ( Function_21d4478((ushort *)(dword_221A400[50] + 8), &v13) )
  {
    Function_21d7724(9, -24100);
    result = 0;
  }
  else if ( Function_21d3e5c((int)&v20, v8, v9, v10) && Function_21d4134(dword_221A400[50] + 8, (int)&v20, 0) )
  {
    if ( Function_21d4e7c(dword_221A400[50] + 8, "action", (int)"SVCLOC", 6)
      || Function_21d4e7c(dword_221A400[50] + 8, "svc", v4, 4) )
    {
      Function_21d4c2c((ushort *)(dword_221A400[50] + 8));
      Function_21d7724(9, -24100);
      result = 0;
    }
    else if ( Function_21d4594(dword_221A400[50] + 8) )
    {
      Function_21d4c2c((ushort *)(dword_221A400[50] + 8));
      Function_21d7724(9, -24100);
      result = 0;
    }
    else
    {
      v12 = Function_20c249c(dword_21CCC84);
      Function_21d462c((uint *)(dword_221A400[50] + 8), v12 - 1);
      if ( *(uint *)(dword_221A400[50] + 7084) )
      {
        result = 1;
      }
      else
      {
        Function_21d4c2c((ushort *)(dword_221A400[50] + 8));
        Function_21d7724(9, -24100);
        result = 0;
      }
    }
  }
  else
  {
    Function_21d4c2c((ushort *)(dword_221A400[50] + 8));
    Function_21d7724(9, -24100);
    result = 0;
  }
  return result;
}

//----- (021D6FF0) --------------------------------------------------------
int Function_21d6ff0()
{
  int result;
  int v1;

  if ( !dword_221A400[50] )
    return 0;
  if ( !*(uint *)(dword_221A400[50] + 7084) )
    return 1;
  if ( Function_20c2204(dword_221A400[50] + 6976) != 1 )
    return 2;
  v1 = *(uint *)(dword_221A400[50] + 4136);
  if ( v1 == 7 )
  {
    Function_21d4c2c((ushort *)(dword_221A400[50] + 8));
    result = 5;
  }
  else if ( v1 == 8 )
  {
    if ( Function_21d70c4() )
    {
      Function_21d4c2c((ushort *)(dword_221A400[50] + 8));
      result = 3;
    }
    else
    {
      Function_21d4c2c((ushort *)(dword_221A400[50] + 8));
      result = 4;
    }
  }
  else
  {
    Function_21d4c2c((ushort *)(dword_221A400[50] + 8));
    Function_21d7724(17, -24101);
    result = 4;
  }
  return result;
}

//----- (021D70C4) --------------------------------------------------------
int __fastcall Function_21d70c4(int a1, int a2, int a3, int a4)
{
  int result;
  char *v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;
  int v14;
  int v15;
  int v16;
  int v17;
  char v18;
  int v19;

  v19 = a4;
  if ( Function_21d5404(dword_221A400[50] + 8, 0, a3, a4) )
  {
    v5 = (char *)Function_21d56a4(dword_221A400[50] + 8, (int *)"Date");
    if ( v5 )
      Function_21d6a88(v5, v6, v7, v8);
    v9 = Function_21d56a4(dword_221A400[50] + 8, (int *)"httpresult");
    if ( v9 )
    {
      Function_20dae0c(v9, v10, v11, v12);
      if ( dword_21D0D40 == 34 )
      {
        Function_21d7724(16, -25101);
        result = 0;
      }
      else if ( v13 == 200 )
      {
        if ( (int)Function_21d56fc(dword_221A400[50] + 8, (int *)"returncd", (int)&v18, 4u) > 0 )
        {
          Function_20dae0c((int)&v18, v14, v15, v16);
          if ( dword_21D0D40 == 34 )
          {
            Function_21d7724(16, -25101);
            result = 0;
          }
          else if ( v17 < 100 )
          {
            Function_21d56fc(dword_221A400[50] + 8, (int *)"svchost", *(uint *)(dword_221A400[50] + 7196) + 4, 0x40u);
            Function_21d56fc(
              dword_221A400[50] + 8,
              (int *)"servicetoken",
              *(uint *)(dword_221A400[50] + 7196) + 69,
              0x12Cu);
            Function_21d56fc(dword_221A400[50] + 8, (int *)"statusdata", (int)&v18, 1u);
            **(uint **)(dword_221A400[50] + 7196) = v18 == 89;
            result = 1;
          }
          else
          {
            Function_21d7724(16, -24000 - v17);
            result = 0;
          }
        }
        else
        {
          Function_21d7724(16, -25101);
          result = 0;
        }
      }
      else
      {
        Function_21d7724(16, -25000 - v13);
        result = 0;
      }
    }
    else
    {
      Function_21d7724(16, -25101);
      result = 0;
    }
  }
  else
  {
    Function_21d7724(16, -25101);
    result = 0;
  }
  return result;
}

//----- (021D72E0) --------------------------------------------------------
uint __fastcall Function_21d72e0(int a1, uint a2, uchar *a3, uint a4)
{
  int v4;
  uint v5;
  uint result;
  int v7;
  uchar *i;
  uint v9;
  int v10;
  uint v11;
  char v12;
  char v13;
  char v14;
  uchar *v15;
  uchar v16;
  uchar v17;
  uchar v18;
  uint v19;

  v19 = a4;
  v15 = a3;
  v4 = a1;
  v5 = a2 % 3;
  if ( a2 % 3 )
    v5 = 4;
  if ( !(a2 % 3) )
    v5 = 0;
  result = v5 + 4 * (a2 / 3);
  if ( a3 )
  {
    if ( a4 >= result )
    {
      v7 = v4 + a2;
      for ( i = a3; v4 != v7; i += 4 )
      {
        v9 = v7 - v4;
        v10 = 8 * (v7 - v4) / 6 + (8 * (v7 - v4) % 6 != 0);
        if ( v7 - v4 >= 3 )
          v9 = 3;
        MI_CpuFill8(&v16, 0, 3u);
        MI_CpuCopy8(v4, (uint)&v16, v9, v11);
        *i = aAbcdefghijklmn_0[(int)v16 >> 2];
        if ( v10 >= 2 )
          v12 = aAbcdefghijklmn_0[16 * v16 & 0x3F | ((int)v17 >> 4)];
        else
          v12 = 42;
        i[1] = v12;
        if ( v10 >= 3 )
          v13 = aAbcdefghijklmn_0[4 * v17 & 0x3F | ((int)v18 >> 6)];
        else
          v13 = 42;
        i[2] = v13;
        if ( v10 >= 4 )
          v14 = aAbcdefghijklmn_0[v18 & 0x3F];
        else
          v14 = 42;
        v4 += v9;
        i[3] = v14;
      }
      result = i - v15;
    }
    else
    {
      result = -1;
    }
  }
  return result;
}

//----- (021D7468) --------------------------------------------------------
int __fastcall Function_21d7468(int a1, uint a2, uchar *a3, uint a4)
{
  int result;
  int v5;
  uint v6;
  int v7;
  int v8;
  uchar *v9;
  int v10;
  int *v11;
  int v12;
  int v13;
  uint v14;

  v14 = a4;
  if ( a2 & 3 )
    return -1;
  v5 = 0;
  v6 = 0;
  if ( a2 )
  {
    do
    {
      v7 = *(char *)(a1 + v6++);
      if ( v7 != 42 )
        v5 += 6;
    }
    while ( v6 < a2 );
  }
  v8 = v5 / 8;
  if ( !a3 )
    return v5 / 8;
  if ( a4 < v8 )
    return -1;
  if ( a2 )
  {
    v9 = a3;
    do
    {
      v10 = 0;
      v11 = (int *)&v14;
      do
      {
        v12 = *(char *)(a1 + v10);
        if ( v12 < 65 || v12 > 90 )
        {
          if ( v12 < 97 || v12 > 122 )
          {
            if ( v12 < 48 || v12 > 57 )
            {
              if ( v12 == 46 )
              {
                *(uchar *)v11 = 62;
              }
              else if ( v12 == 45 )
              {
                *(uchar *)v11 = 63;
              }
              else
              {
                *(uchar *)v11 = 0;
              }
            }
            else
            {
              *(uchar *)v11 = v12 + 4;
            }
          }
          else
          {
            *(uchar *)v11 = v12 - 71;
          }
        }
        else
        {
          *(uchar *)v11 = v12 - 65;
        }
        ++v10;
        v11 = (int *)((char *)v11 + 1);
      }
      while ( v10 < 4 );
      v13 = v9 + 1 - a3;
      *v9 = (SBYTE1(v14) >> 4) | 4 * v14;
      a1 += 4;
      if ( v13 >= v8 )
        break;
      v13 = v9 + 2 - a3;
      v9[1] = (SBYTE2(v14) >> 2) | 16 * BYTE1(v14);
      if ( v13 >= v8 )
        break;
      v9[2] = HIBYTE(v14) | (BYTE2(v14) << 6);
      v9 += 3;
      v13 = v9 - a3;
    }
    while ( v9 - a3 < v8 );
    result = v13;
  }
  else
  {
    result = 0;
    *a3 = 0;
  }
  return result;
}

//----- (021D75D4) --------------------------------------------------------
int __fastcall Function_4_21d75d4(uint *a1)
{
  if ( a1 )
    *a1 = dword_221A400[52];
  return dword_221A400[51];
}

//----- (021D75F4) --------------------------------------------------------
int __fastcall Function_4_21d75f4(uint *a1, uint *a2)
{
  if ( a1 )
    *a1 = dword_221A400[52];
  if ( a2 )
  {
    switch ( dword_221A400[51] )
    {
      case 1:
      case 9:
        *a2 = 7;
        break;
      case 2:
      case 3:
      case 4:
      case 5:
      case 8:
        *a2 = 6;
        break;
      case 6:
        *a2 = 3;
        break;
      case 7:
        *a2 = 4;
        break;
      case 0xA:
      case 0xB:
      case 0xC:
      case 0xD:
        *a2 = 1;
        break;
      case 0xE:
        *a2 = 5;
        break;
      case 0xF:
      case 0x11:
      case 0x13:
        *a2 = 6;
        break;
      case 0x10:
      case 0x12:
        *a2 = 2;
        break;
      default:
        *a2 = 0;
        break;
    }
  }
  return dword_221A400[51];
}

//----- (021D76E8) --------------------------------------------------------
int *Function_4_21d76e8()
{
  int *result;

  result = &dword_221A400[51];
  if ( dword_221A400[51] != 9 )
  {
    dword_221A400[51] = 0;
    dword_221A400[52] = 0;
  }
  return result;
}

//----- (021D7708) --------------------------------------------------------
BOOL Function_21d7708()
{
  return dword_221A400[51] != 0;
}

//----- (021D7724) --------------------------------------------------------
int __fastcall Function_21d7724(int result, int a2)
{
  if ( dword_221A400[51] != 9 )
  {
    dword_221A400[51] = result;
    dword_221A400[52] = a2;
  }
  return result;
}

//----- (021D773C) --------------------------------------------------------
int __fastcall Function_21d773c(int a1)
{
  return a1 - 32;
}

//----- (021D7744) --------------------------------------------------------
int __fastcall Function_21d7744(uint *a1, int a2)
{
  *a1 = 1146569549;
  a1[1] = a2;
  return (int)(a1 + 8);
}

//----- (021D775C) --------------------------------------------------------
int __fastcall Function_21d775c(int a1)
{
  return *(uint *)(Function_21d773c(a1) + 4);
}

//----- (021D776C) --------------------------------------------------------
int __fastcall Function_4_21d776c(int result, int a2)
{
  dword_221A400[54] = result;
  dword_221A400[53] = a2;
  return result;
}

//----- (021D7780) --------------------------------------------------------
int __fastcall Function_4_21d7780(int a1, int a2)
{
  return Function_21d7790(a1, a2, 32);
}

//----- (021D7790) --------------------------------------------------------
int __fastcall Function_21d7790(int a1, int a2)
{
  int v2;
  uint *v3;
  int result;

  v2 = a2;
  v3 = (uint *)((int (__fastcall *)(int, int))dword_221A400[54])(a1, a2 + 32);
  if ( v3 )
    result = Function_21d7744(v3, v2);
  else
    result = 0;
  return result;
}

//----- (021D77C4) --------------------------------------------------------
int __fastcall Function_4_21d77c4(int result, int a2)
{
  int v2;
  int v3;

  v2 = result;
  if ( a2 )
  {
    v3 = *(uint *)(Function_21d773c(a2) + 4) + 32;
    result = ((int (__fastcall *)(int))dword_221A400[53])(v2);
  }
  return result;
}

//----- (021D7800) --------------------------------------------------------
int Function_21d7800()
{
  return Function_21d7814();
}

//----- (021D7814) --------------------------------------------------------
int __fastcall Function_21d7814(int a1, int a2, int a3, int a4)
{
  uint v4;
  int v5;
  int v6;
  int v7;
  uint v9;
  uint v10;

  v4 = a4;
  v5 = a2;
  v6 = a1;
  v7 = Function_21d7790(a1, a4);
  if ( !v7 )
    return 0;
  if ( v5 )
  {
    v9 = Function_21d775c(v5);
    if ( v9 <= v4 )
      v4 = v9;
    MI_CpuCopy8(v5, v7, v4, v10);
    Function_4_21d77c4(v6, v5);
  }
  return v7;
}

//----- (021D7880) --------------------------------------------------------
int __fastcall Function_21d7880(int a1)
{
  return Function_4_21d7780(5, a1);
}

//----- (021D7894) --------------------------------------------------------
int Function_21d7894()
{
  return Function_21d7800();
}

//----- (021D78B0) --------------------------------------------------------
int __fastcall Function_21d78b0(int a1)
{
  return Function_4_21d77c4(5, a1);
}

//----- (021D78C8) --------------------------------------------------------
ushort *__fastcall Function_4_21d78c8(ushort *result, short a2, int a3, int a4)
{
  int v4;
  short v5;
  int v6;

  v4 = (int)result;
  v5 = a2;
  v6 = a4;
  if ( !dword_221A400[56] )
  {
    MI_CpuFill8(result, 0, 0x64u);
    *(ushort *)(v4 + 8) = v5;
    *(ushort *)(v4 + 10) = 1;
    *(ushort *)(v4 + 4) = 1;
    *(ushort *)(v4 + 6) = 0;
    *(uchar *)(v4 + 12) = 0;
    *(uint *)(v4 + 16) = 0;
    dword_221A400[56] = v4;
    result = (ushort *)Function_220dce0(v6);
  }
  return result;
}

//----- (021D792C) --------------------------------------------------------
int __fastcall Function_4_21d792c(int result)
{
  switch ( result )
  {
    case 0:
      return Function_21d3038((int)"https://nas.test.nintendowifi.net/ac");
    case 1:
      return Function_21d3038((int)"https://nas.dev.nintendowifi.net/ac");
    case 2:
      result = Function_21d3038((int)"https://nas.nintendowifi.net/ac");
      break;
  }
  return result;
}

//----- (021D797C) --------------------------------------------------------
int Function_4_21d797c()
{
  int result;
  int (__fastcall *v1)(int, int);
  int (__fastcall *v2)(int, int);
  char v3;
  char v4;

  if ( !dword_221A400[56] )
    return Function_21d7724(9, -50199);
  result = *(ushort *)(dword_221A400[56] + 4);
  if ( result == 1 )
  {
    MI_CpuFill8(&v1, 0, 0xCu);
    v3 = *(ushort *)(dword_221A400[56] + 8);
    v4 = *(ushort *)(dword_221A400[56] + 10);
    v1 = Function_4_21d7780;
    v2 = Function_4_21d77c4;
    *(ushort *)(dword_221A400[56] + 4) = 2;
    result = Function_21e5c34(&v1);
    if ( !result )
      result = Function_21d7724(9, -50199);
  }
  return result;
}

//----- (021D7A30) --------------------------------------------------------
int __fastcall Function_21d7a30(int a1, int a2, int a3, int a4)
{
  int v4;
  int v5;
  int v6;
  int v7;
  int *v8;
  int result;

  v4 = a1;
  v5 = a2;
  v6 = a3;
  v7 = a4;
  Function_4_21d797c();
  v8 = &dword_221A400[55];
  if ( dword_221A400[56] )
  {
    v8 = (int *)1;
    *(uchar *)(dword_221A400[56] + 12) = 1;
  }
  result = Function_4_21d7bfc(v8);
  if ( result == 2 )
    result = Function_21e5fdc(v4, v5, v6, v7);
  return result;
}

//----- (021D7A8C) --------------------------------------------------------
BOOL Function_4_21d7a8c()
{
  if ( !dword_221A400[56] )
    return 0;
  if ( !*(uint *)dword_221A400[56] )
    return 0;
  *(ushort *)(dword_221A400[56] + 4) = 3;
  Function_4_21d7bfc(3);
  return *(uchar *)(dword_221A400[56] + 12) != 0;
}

//----- (021D7AE4) --------------------------------------------------------
int Function_4_21d7ae4()
{
  int result;

  result = (int)&dword_221A400[55];
  if ( dword_221A400[56] )
  {
    result = *(uint *)(dword_221A400[56] + 16);
    switch ( result )
    {
      case 1:
        *(uint *)dword_221A400[56] = 0;
        result = Function_21e9214();
        *(uint *)(dword_221A400[56] + 16) = result;
        break;
      case 2:
        Function_21e9548();
        Function_21d7a30(
          dword_221A400[56] + 20,
          dword_221A400[56] + 52,
          *(uint *)(dword_221A400[56] + 84),
          dword_221A400[56] + 88);
        result = dword_221A400[56];
        *(uint *)(dword_221A400[56] + 16) = 0;
        break;
      case 3:
        Function_21e9548();
        *(uint *)dword_221A400[56] = -1;
        result = dword_221A400[56];
        *(uchar *)(dword_221A400[56] + 12) = 1;
        break;
      case 4:
        return result;
      default:
        result = *(ushort *)(dword_221A400[56] + 4);
        if ( result == 2 )
        {
          result = Function_21e5ddc();
          *(uint *)dword_221A400[56] = result;
        }
        else if ( result == 4 )
        {
          result = *(ushort *)(dword_221A400[56] + 6);
          if ( *(ushort *)(dword_221A400[56] + 6) )
          {
            result = Function_4_2213898();
            if ( result != 9 )
            {
              *(ushort *)(dword_221A400[56] + 6) = 0;
              result = dword_221A400[56];
              *(ushort *)(dword_221A400[56] + 4) = 6;
            }
          }
        }
        break;
    }
  }
  return result;
}

//----- (021D7BFC) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x21D7C84 for case 0"

//----- (021D7C24) --------------------------------------------------------
void Function_21d7c24()
{
  JUMPOUT(&loc_21D7C84);
}

//----- (021D7C28) --------------------------------------------------------
void Function_21d7c28()
{
  JUMPOUT(&loc_21D7C38);
}

//----- (021D7C2C) --------------------------------------------------------
void Function_21d7c2c()
{
  JUMPOUT(&loc_21D7C40);
}

//----- (021D7C30) --------------------------------------------------------
void Function_21d7c30()
{
  JUMPOUT(&loc_21D7C48);
}

//----- (021D7C34) --------------------------------------------------------
void Function_21d7c34()
{
  int v0;

  JUMPOUT(__CS__, v0);
}

//----- (021D7DB0) --------------------------------------------------------
int *Function_4_21d7db0()
{
  int *result;
  uint v1;

  result = &dword_221A400[55];
  if ( dword_221A400[56] )
  {
    if ( *(ushort *)(dword_221A400[56] + 4) == 1 )
    {
      dword_221A400[56] = 0;
    }
    else
    {
      if ( !((int (*)(void))Function_21e5fa0)() )
      {
        do
          v1 = OS_Sleep(0xAu);
        while ( !Function_21e5fa0(v1) );
      }
      result = &dword_221A400[55];
      dword_221A400[56] = 0;
    }
  }
  return result;
}

//----- (021D7E10) --------------------------------------------------------
int Function_4_21d7e10()
{
  int result;
  int v1;

  if ( !dword_221A400[56] )
    return 1;
  v1 = *(ushort *)(dword_221A400[56] + 4);
  if ( v1 == 8 )
    return 0;
  if ( v1 == 1 )
  {
    dword_221A400[56] = 0;
    result = 1;
  }
  else
  {
    *(ushort *)(dword_221A400[56] + 4) = 5;
    if ( Function_21e5fa0(5) )
    {
      dword_221A400[56] = 0;
      result = 1;
    }
    else
    {
      result = 0;
    }
  }
  return result;
}

//----- (021D7E80) --------------------------------------------------------
BOOL Function_21d7e80()
{
  return dword_221A400[56] && *(ushort *)(dword_221A400[56] + 4) == 6;
}

//----- (021D7EAC) --------------------------------------------------------
int Function_4_21d7eac()
{
  return Function_22156ec();
}

//----- (021D7EB8) --------------------------------------------------------
int __fastcall Function_4_21d7eb8(int *a1, int a2, int a3, int a4)
{
  int *v4;
  int v6;
  int v7;
  int v8;
  uint v9;
  int v10;
  uint v11;
  int v12;
  uint v13;
  ushort v14;
  uchar v15;
  char v16;
  int v17;

  v17 = a4;
  v4 = a1;
  MI_CpuFill8(a1, 0, 0x3Cu);
  v4[1] = 255;
  if ( Function_4_21d7bfc(255) != 4 )
    return 0;
  v6 = Function_21e5f18(4);
  *v4 = v6;
  if ( v6 == 255 || v6 > 99 )
  {
    *v4 = 99;
    return 0;
  }
  v7 = OS_DisableInterrupts();
  v8 = Function_2215398();
  DC_InvalidateRange(v8, 6);
  if ( !v8 )
  {
    OS_RestoreInterrupts(v7);
    return 0;
  }
  MI_CpuCopy8(v8, (uint)v4 + 51, 6u, v9);
  if ( *v4 >= 0 && *v4 < 3 )
  {
    v10 = Function_22153dc(&v14);
    DC_InvalidateRange(v10, 32);
    if ( !v10 )
    {
      OS_RestoreInterrupts(v7);
      return 0;
    }
    MI_CpuCopy8(v10, (uint)v4 + 18, v14, v11);
  }
  OS_RestoreInterrupts(v7);
  if ( Function_21e5f48(&v15) )
  {
    v12 = 0;
    if ( v15 >= 0x30u && v15 <= 0x39u )
      v12 = 1;
    if ( v12 )
      v13 = v15 - 48;
    else
      v13 = 255;
    v4[1] = v13;
    MI_CpuCopy8((int)&v16, (uint)(v4 + 2), 9u, v13);
  }
  else
  {
    v4[1] = 255;
  }
  return 1;
}

//----- (021D8018) --------------------------------------------------------
int Function_4_21d8018()
{
  BOOL v0;
  uint v1;
  int v2;

  Function_4_21d7ae4();
  v0 = Function_21d7e80();
  if ( !v0 )
    return 0;
  v1 = Function_21e5f18(v0);
  v2 = v1;
  if ( v1 == 255 || v1 > 0x63 )
    v2 = 99;
  Function_21d7724(8, -54000 - v2);
  return 1;
}

//----- (021D806C) --------------------------------------------------------
int __fastcall Function_4_21d806c(int a1, int a2)
{
  int *v2;
  uint *v3;
  long long v5;
  bool v6;
  ll v7;

  v2 = (int *)a1;
  v3 = (uint *)a2;
  if ( !dword_221A400[45] )
    return 0;
  if ( Function_20cbae4(a1, a2) )
    return 0;
  LODWORD(v5) = RTC_ConvertDateTimeToSecond(v2, v3);
  v6 = HIDWORD(v5) == -1;
  if ( HIDWORD(v5) == -1 )
    v6 = (uint)v5 == -1;
  if ( v6 )
    return 0;
  if ( v5 < *(ull *)&dword_221A400[46] )
    v5 += 3155760000LL;
  v7 = v5 - *(ull *)&dword_221A400[48];
  if ( (((ull)(v5 - *(ull *)&dword_221A400[48]) >> 32) & 0x80000000) != 0LL || v7 > 3155759999LL )
    return 0;
  RTC_ConvertSecondToDateTime(v2, v3, v7);
  return 1;
}

//----- (021D8144) --------------------------------------------------------
int __fastcall Function_21d8144(char *a1, ushort *a2)
{
  char *v2;
  ushort *v3;
  int v5;
  int v6;
  int v7;

  v2 = a1;
  v3 = a2;
  if ( !Function_21d6ca4(Function_4_21d7780, (int)Function_4_21d77c4) )
    return 0;
  if ( strlen(v2) )
    v7 = Function_21d6d88((int)v2, v3, v5, v6);
  else
    v7 = Function_21d6d88((int)"0000", v3, v5, v6);
  if ( v7 )
    return 1;
  Function_21d6d3c();
  return 0;
}

//----- (021D81B8) --------------------------------------------------------
int Function_21d81b8()
{
  int v0;

  v0 = Function_21d6ff0();
  if ( (uint)(v0 - 3) <= 2 )
    Function_21d6d3c();
  return v0;
}

//----- (021D81DC) --------------------------------------------------------
int Function_4_21d81dc()
{
  ushort *v0;
  int result;
  uint v2;

  if ( dword_221A400[57] )
    OS_Panic();
  v0 = (ushort *)Function_4_21d7780(4, 7712);
  dword_221A400[57] = (int)v0;
  if ( v0 )
  {
    MI_CpuFill8(v0, 0, 0x1E20u);
    MI_CpuCopy8((int)&dword_221742C, dword_221A400[57] + 7240, 9u, v2);
    *(uint *)(dword_221A400[57] + 7252) = Function_4_21d7780;
    *(uint *)(dword_221A400[57] + 7256) = Function_4_21d77c4;
    Function_21d3048(dword_221A400[57] + 7188, dword_221A400[57]);
    result = 1;
  }
  else
  {
    Function_21d7724(9, -20100);
    result = 0;
  }
  return result;
}

//----- (021D82A0) --------------------------------------------------------
int Function_4_21d82a0()
{
  int result;
  int v1;
  int v2;
  int v3;
  uint v4;
  int v5;

  if ( !dword_221A400[57] )
    return 0;
  v1 = Function_21d3334();
  switch ( v1 )
  {
    case 0:
      return 2;
    case 20:
      Function_21d32ac();
      Function_4_21d77c4(4, dword_221A400[57]);
      dword_221A400[57] = 0;
      result = 5;
      break;
    case 21:
      Function_21d32ac();
      Function_4_21d77c4(4, dword_221A400[57]);
      dword_221A400[57] = 0;
      result = 3;
      break;
    default:
      Function_21d3380(&v5, v2, v3, v4);
      Function_21d32ac();
      Function_4_21d77c4(4, dword_221A400[57]);
      dword_221A400[57] = 0;
      Function_21d7724(2, v5);
      result = 4;
      break;
  }
  return result;
}

//----- (021D8398) --------------------------------------------------------
uint Function_4_21d8398()
{
  return Function_21d3220();
}

//----- (021D83A4) --------------------------------------------------------
int __fastcall Function_21d83a4(int a1)
{
  return Function_21d7790(6, a1);
}

//----- (021D83BC) --------------------------------------------------------
int __fastcall Function_21d83bc(int a1)
{
  return Function_4_21d77c4(6, a1);
}

//----- (021D83D4) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x21D8490 for case 0"

//----- (021D8408) --------------------------------------------------------
void __noreturn Function_21d8408()
{
  JUMPOUT(&loc_21D8490);
}

//----- (021D840C) --------------------------------------------------------
void Function_21d840c()
{
  JUMPOUT(&loc_21D842C);
}

//----- (021D8410) --------------------------------------------------------
void __noreturn Function_21d8410()
{
  JUMPOUT(&loc_21D843C);
}

//----- (021D8414) --------------------------------------------------------
void Function_21d8414()
{
  JUMPOUT(&loc_21D8444);
}

//----- (021D8418) --------------------------------------------------------
void Function_21d8418()
{
  JUMPOUT(&loc_21D8454);
}

//----- (021D841C) --------------------------------------------------------
void Function_21d841c()
{
  JUMPOUT(&loc_21D8464);
}

//----- (021D8420) --------------------------------------------------------
void Function_21d8420()
{
  JUMPOUT(&loc_21D8494);
}

//----- (021D8424) --------------------------------------------------------
void __noreturn Function_21d8424()
{
  JUMPOUT(&loc_21D8478);
}

//----- (021D8428) --------------------------------------------------------
void Function_21d8428()
{
  int v0;
  int v1;
  int v2;
  int v3;

  Function_21d7724(9, -31009);
  (*(void (__fastcall **)(int, int, int))dword_221A400[58])(v2, v1, v0);
  JUMPOUT(__CS__, v3);
}

//----- (021D84CC) --------------------------------------------------------
int *Function_21d84cc()
{
  int (*v0)(void);
  int *result;

  Function_20c21d4(dword_221A400[58] + 2496);
  v0 = *(int (**)(void))(dword_221A400[58] + 4);
  Function_21d83bc(dword_221A400[58]);
  result = &dword_221A400[58];
  dword_221A400[58] = 0;
  if ( v0 )
    result = (int *)v0();
  return result;
}

//----- (021D8510) --------------------------------------------------------
int __fastcall Function_21d8510(int a1, int a2, int a3, int a4)
{
  int v4;
  int v5;
  int v7;
  int v8;
  char v9;
  char v10;
  int v11;

  v11 = a4;
  while ( 1 )
  {
    v4 = Function_21d81b8();
    if ( v4 == 3 )
      break;
    if ( v4 == 4 )
    {
      Function_4_21d75d4(&v8);
      Function_21d7724(14, v8);
      return (*(int (__fastcall **)(uint))dword_221A400[58])(0);
    }
    if ( v4 == 5 )
      Function_21d83d4(0, 6, -1);
    OS_Sleep(0x64u);
  }
  v5 = strlen((char *)(dword_221A400[58] + 80));
  if ( (uint)(v5 + strlen("https:///download")) > 0xFF )
    return Function_21d83d4(0, 8, -1);
  OS_SNPrintf(&v10, 256, "https://%s/download", dword_221A400[58] + 80);
  v7 = strlen((char *)(dword_221A400[58] + 145));
  if ( (Function_21d72e0(dword_221A400[58] + 145, v7, &v9, 0x190u) & 0x80000000) != 0 )
    return Function_21d83d4(0, 8, -1);
  if ( !((int (__fastcall *)(int (__fastcall *)(int), int (__fastcall *)(int), char *, char *, int, int, int (__fastcall *)(uint, uint, uint)))dword_221F800[4749])(
          Function_21d83a4,
          Function_21d83bc,
          &v10,
          &v9,
          dword_221A400[58] + 8,
          dword_221A400[58] + 40,
          Function_21d83d4) )
    return Function_21d83d4(0, 8, -1);
  *(uint *)(dword_221A400[58] + 72) = 1;
  return Function_21d83d4(0, 0, -1);
}

//----- (021D86A8) --------------------------------------------------------
#error "Failed to decompile function. "

//----- (021D86C8) --------------------------------------------------------
int __fastcall Function_4_21d86c8(int a1, char *a2, char *a3)
{
  int v3;
  char *v4;
  char *v5;
  int result;

  v3 = a1;
  v4 = a2;
  v5 = a3;
  if ( Function_21d7708() )
    return 0;
  dword_221A400[58] = Function_21d83a4(2688);
  *(uint *)(dword_221A400[58] + 72) = 0;
  MI_CpuFill8((ushort *)dword_221A400[58], 0, 0xA80u);
  *(uint *)dword_221A400[58] = v3;
  strncpy((uchar *)(dword_221A400[58] + 8), v4, 31);
  strncpy((uchar *)(dword_221A400[58] + 40), v5, 31);
  if ( Function_21d8144("9000", (ushort *)(dword_221A400[58] + 76)) )
  {
    OS_CreateThread((int *)(dword_221A400[58] + 2496), (int)Function_21d8510, 0, dword_221A400[58] + 2496, 2048, 16);
    OS_WakeupThreadDirect(dword_221A400[58] + 2496);
    result = 1;
  }
  else
  {
    Function_21d83bc(dword_221A400[58]);
    result = 0;
    dword_221A400[58] = 0;
  }
  return result;
}

//----- (021D87E0) --------------------------------------------------------
int __fastcall Function_4_21d87e0(int a1)
{
  if ( !dword_221A400[58] )
    return 0;
  *(uint *)(dword_221A400[58] + 4) = a1;
  if ( *(uint *)(dword_221A400[58] + 72) )
    ((void (__fastcall *)(int *(*)()))dword_221F800[4872])(Function_21d84cc);
  else
    Function_21d84cc();
  return 1;
}

//----- (021D882C) --------------------------------------------------------
int __fastcall Function_4_21d882c(int a1, int a2, int a3)
{
  int v3;
  int v4;
  int v5;
  int result;

  v3 = a1;
  v4 = a2;
  v5 = a3;
  if ( Function_21d7708() )
    result = 0;
  else
    result = ((int (__fastcall *)(int, int, int))dword_221F800[4516])(v3, v4, v5);
  return result;
}

//----- (021D8860) --------------------------------------------------------
int __fastcall Function_4_21d8860(int a1)
{
  int v1;
  int result;

  v1 = a1;
  if ( Function_21d7708() )
    result = 0;
  else
    result = ((int (__fastcall *)(int))dword_221F800[5446])(v1);
  return result;
}

//----- (021D8884) --------------------------------------------------------
int __fastcall Function_4_21d8884(ushort *a1, int a2, int a3)
{
  ushort *v3;
  int v4;
  int v5;

  v3 = a1;
  v4 = a2;
  v5 = a3;
  if ( Function_21d7708() )
    return 0;
  MI_CpuFill8(v3, 0, 176 * v5);
  return ((int (__fastcall *)(ushort *, int, int))dword_221F800[5475])(v3, v4, v5);
}

//----- (021D88CC) --------------------------------------------------------
int __fastcall Function_4_21d88cc(int a1, int a2, int a3)
{
  int v3;
  int v4;
  int v5;
  int result;

  v3 = a1;
  v4 = a2;
  v5 = a3;
  if ( Function_21d7708() )
    result = 0;
  else
    result = ((int (__fastcall *)(int, int, int))dword_221F800[5651])(v3, v4, v5);
  return result;
}

//----- (021D8900) --------------------------------------------------------
int Function_4_21d8900()
{
  int result;

  if ( Function_21d7708() )
    result = 0;
  else
    result = ((int (*)(void))dword_221F800[4882])();
  return result;
}

//----- (021D891C) --------------------------------------------------------
int __fastcall Function_4_21d891c(int a1, int a2)
{
  int v2;
  int v3;
  int result;

  v2 = a1;
  v3 = a2;
  if ( Function_21d7708() )
    result = 0;
  else
    result = ((int (__fastcall *)(int, int))dword_221F800[5762])(v2, v3);
  return result;
}

//----- (021D8948) --------------------------------------------------------
int __fastcall Function_21d8948(int a1, int a2, char *a3)
{
  char *v3;

  v3 = a3;
  OS_SNPrintf(a3, 4096, "%c%s%c%s");
  return strlen(v3);
}

//----- (021D8980) --------------------------------------------------------
int __fastcall Function_21d8980(int a1, int a2, char *a3)
{
  char *v3;
  int v4;
  int v5;
  char *v6;

  v3 = a3;
  v4 = a1;
  v5 = a2;
  v6 = strchr(a3, 0);
  Function_21d8948(v4, v5, v6);
  return strlen(v3);
}

//----- (021D89C0) --------------------------------------------------------
int __fastcall Function_21d89c0(char *a1, uchar *a2, char *a3, int a4)
{
  uchar *v4;
  char *v5;
  int v6;
  int result;
  char *v8;
  int v9;
  char *v10;
  char *v11;
  char *v12;
  char *v13;
  int v14;

  v4 = a2;
  v5 = a1;
  v6 = a4;
  if ( !a2 )
    return -1;
  v8 = strchr(a3, a4);
  if ( !v8 )
    return -1;
  while ( 1 )
  {
    v9 = strlen(v5);
    if ( !Function_20d8e28((uchar *)v8 + 1, (uchar *)v5, v9) && v6 == v8[strlen(v5) + 1] )
      break;
    v10 = strchr(v8 + 1, v6);
    if ( !v10 )
      return -1;
    v8 = strchr(v10 + 1, v6);
    if ( !v8 )
      return -1;
  }
  v11 = strchr(v8 + 1, v6);
  v12 = v11;
  if ( !v11 )
    return -1;
  v13 = strchr(v11 + 1, v6);
  if ( v13 )
    v14 = v13 - (v12 + 1);
  else
    v14 = strlen(v12 + 1);
  strncpy(v4, v12 + 1, v14);
  result = v14;
  v4[v14] = 0;
  return result;
}

//----- (021D8ABC) --------------------------------------------------------
uint __fastcall Function_21d8abc(uint a1)
{
  uint v1;
  long long v2;
  uint result;
  long long v4;

  v1 = a1;
  if ( !*(ull *)&dword_221A400[59] && !*(ull *)&dword_221A400[61] && !*(ull *)&dword_221A400[63] )
  {
    OS_GetMacAddress((uint)&v4, dword_221A400[63], dword_221A400[64], dword_221A400[61]);
    LODWORD(v2) = OS_GetTick();
    LODWORD(v4) = (v4 >> 24) & 0xFFFFFF | ((uint)v2 << 24);
    HIDWORD(v4) = v2 >> 8;
    dword_221A400[59] = v4;
    dword_221A400[60] = v2 >> 8;
    dword_221A400[61] = 1812433253;
    dword_221A400[62] = 1566083941;
    dword_221A400[63] = 2531011;
    dword_221A400[64] = 0;
  }
  result = (*(ull *)&dword_221A400[63] + *(ull *)&dword_221A400[61] * *(ull *)&dword_221A400[59]) >> 32;
  *(ull *)&dword_221A400[59] = *(ull *)&dword_221A400[63]
                                + *(ull *)&dword_221A400[61] * *(ull *)&dword_221A400[59];
  if ( v1 )
    result = result * (ull)v1 >> 32;
  return result;
}

//----- (021D8BDC) --------------------------------------------------------
int __fastcall Function_21d8bdc(ushort *a1)
{
  int v1;

  v1 = 0;
  if ( *a1 )
  {
    do
      ++v1;
    while ( a1[v1] );
  }
  return v1;
}

//----- (021D8C08) --------------------------------------------------------
int *__fastcall Function_21d8c08(int a1, int a2, int a3, char *a4, char *a5, int a6, int a7, int a8, int a9)
{
  int v9;
  int v10;
  char *v11;
  int v12;
  int v13;
  uint v14;
  int v15;
  uint v16;
  int v17;
  int *result;

  v9 = a2;
  v10 = a3;
  v11 = a4;
  dword_221A400[65] = a1;
  Function_4_21d76e8();
  *(uint *)dword_221A400[65] = 0;
  *(uint *)(dword_221A400[65] + 4) = Function_21de094;
  v12 = a6;
  *(uint *)(dword_221A400[65] + 8) = Function_21da30c;
  *(uint *)(dword_221A400[65] + 12) = Function_21da318;
  v13 = a7;
  *(uint *)(dword_221A400[65] + 16) = Function_21da680;
  if ( !a6 )
    v12 = 0x2000;
  *(uint *)(dword_221A400[65] + 20) = v12;
  if ( !a7 )
    v13 = 0x2000;
  *(uint *)(dword_221A400[65] + 24) = v13;
  *(uint *)(dword_221A400[65] + 28) = 0;
  *(uint *)(dword_221A400[65] + 32) = v9;
  *(uint *)(dword_221A400[65] + 36) = 0;
  *(uint *)(dword_221A400[65] + 40) = 0;
  *(uchar *)(dword_221A400[65] + 44) = 0;
  *(uchar *)(dword_221A400[65] + 45) = 0;
  *(uint *)(dword_221A400[65] + 100) = 0;
  *(uint *)(dword_221A400[65] + 104) = &dword_221A400[876];
  *(uint *)(dword_221A400[65] + 108) = &dword_221A400[940];
  *(uint *)(dword_221A400[65] + 112) = 0;
  *(uint *)(dword_221A400[65] + 116) = 0;
  *(uint *)(dword_221A400[65] + 120) = 0;
  *(uint *)(dword_221A400[65] + 124) = 0;
  *(uint *)(dword_221A400[65] + 128) = 0;
  *(uint *)(dword_221A400[65] + 132) = 0;
  *(uint *)(dword_221A400[65] + 136) = 0;
  *(uint *)(dword_221A400[65] + 140) = 0;
  *(uint *)(dword_221A400[65] + 144) = 0;
  *(uint *)(dword_221A400[65] + 148) = 0;
  Function_21d9bd4();
  Function_21da6c8(
    dword_221A400[65] + 152,
    v9,
    dword_221A400[65] + 28,
    v10,
    *(uint *)(v9 + 36),
    dword_221A400[65] + 46,
    Function_21d9f4c,
    0);
  Function_21db420(dword_221A400[65] + 792, dword_221A400[65] + 28, dword_221A400[65] + 46, a8, a9);
  Function_21dcaf8(dword_221A400[65] + 884, dword_221A400[65] + 28);
  Function_21e4eac(dword_221A400[65] + 2040);
  if ( (uint)strlen(v11) < 0x100 )
    v15 = strlen(v11);
  else
    v15 = 255;
  MI_CpuCopy8((int)v11, (uint)&dword_221A400[876], v15, v14);
  *((uchar *)&dword_221A400[876] + v15) = 0;
  if ( (uint)strlen(a5) < 0x100 )
    v17 = strlen(a5);
  else
    v17 = 255;
  MI_CpuCopy8((int)a5, (uint)&dword_221A400[940], v17, v16);
  result = &dword_221A400[940];
  *((uchar *)&dword_221A400[940] + v17) = 0;
  return result;
}

//----- (021D8E8C) --------------------------------------------------------
int *Function_4_21d8e8c()
{
  int *result;
  int v1;
  int v2;
  int v3;
  int v4;

  result = (int *)dword_221A400[65];
  if ( dword_221A400[65] )
  {
    if ( *(uint *)(dword_221A400[65] + 900) )
    {
      Function_21fc1f0();
      *(uint *)(dword_221A400[65] + 900) = 0;
    }
    *(uchar *)(dword_221A400[65] + 908) = 0;
    if ( *(uint *)(dword_221A400[65] + 1112) )
    {
      Function_21febbc();
      *(uint *)(dword_221A400[65] + 1112) = 0;
    }
    v1 = Function_21dc734();
    Function_21f6338(v1);
    if ( *(uint *)(dword_221A400[65] + 28) )
    {
      Function_21eb2a8(dword_221A400[65] + 28);
      Function_21eb2a8(dword_221A400[65] + 28);
      Function_21eb2a8(dword_221A400[65] + 28);
      Function_21eb2a8(dword_221A400[65] + 28);
      Function_21eb274(dword_221A400[65] + 28);
      Function_21eb258(dword_221A400[65] + 28);
      *(uint *)(dword_221A400[65] + 28) = 0;
    }
    v2 = Function_21da8e8();
    v3 = Function_21dbab0(v2);
    v4 = Function_21dec64(v3);
    Function_21e5180(v4);
    if ( *(uint *)dword_221A400[65] )
    {
      Function_21f8484();
      *(uint *)dword_221A400[65] = 0;
    }
    result = &dword_221A400[65];
    dword_221A400[65] = 0;
  }
  return result;
}

//----- (021D8FF4) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x21D91E0 for case 0"

//----- (021D9044) --------------------------------------------------------
void Function_21d9044()
{
  JUMPOUT(&loc_21D91E0);
}

//----- (021D9048) --------------------------------------------------------
void Function_21d9048()
{
  JUMPOUT(&loc_21D9060);
}

//----- (021D904C) --------------------------------------------------------
void Function_21d904c()
{
  JUMPOUT(&loc_21D9174);
}

//----- (021D9050) --------------------------------------------------------
void Function_21d9050()
{
  JUMPOUT(&loc_21D917C);
}

//----- (021D9054) --------------------------------------------------------
void Function_21d9054()
{
  JUMPOUT(&loc_21D917C);
}

//----- (021D9058) --------------------------------------------------------
void Function_21d9058()
{
  JUMPOUT(&loc_21D918C);
}

//----- (021D905C) --------------------------------------------------------
void Function_21d905c()
{
  int v0;
  int v1;
  bool v2;
  int v3;

  v0 = Function_21e4f64();
  Function_21db500(v0);
  v1 = *(uchar *)(dword_221A400[65] + 905);
  v2 = v1 == 2;
  if ( v1 != 2 )
    v2 = *(uchar *)(dword_221A400[65] + 905) == 3;
  if ( v2 )
  {
    Function_21dd2bc(1);
  }
  else if ( *(uint *)dword_221A400[65] )
  {
    Function_21dd2bc(0);
  }
  if ( *(uchar *)(dword_221A400[65] + 908) != 1 )
    JUMPOUT(__CS__, v3);
  if ( *(uint *)(dword_221A400[65] + 900) )
  {
    Function_21fc1f0();
    *(uint *)(dword_221A400[65] + 900) = 0;
  }
  *(uchar *)(dword_221A400[65] + 908) = 0;
  JUMPOUT(__CS__, v3);
}

//----- (021D9244) --------------------------------------------------------
int __fastcall Function_21d9244(ushort *a1, int a2, int a3, int a4)
{
  ushort *v4;
  int v5;
  int v6;
  bool v8;
  int v9;
  short v10;
  int v11;

  v4 = a1;
  v5 = a3;
  v6 = a4;
  if ( !a1 )
    return 0;
  if ( Function_21d7708() || *(uint *)(dword_221A400[65] + 36) )
    return 0;
  *(uint *)(dword_221A400[65] + 112) = v5;
  v8 = v4 == 0;
  *(uint *)(dword_221A400[65] + 116) = v6;
  if ( v4 )
    v8 = *v4 == 0;
  if ( v8 )
  {
    v9 = 0;
  }
  else
  {
    MIi_CpuClear16(0, dword_221A400[65] + 46, 52);
    if ( (uint)Function_21d8bdc(v4) <= 0x19 )
      v9 = Function_21d8bdc(v4);
    else
      v9 = 25;
    MIi_CpuCopy16((int)v4, dword_221A400[65] + 46, 2 * v9, v10);
  }
  v11 = dword_221A400[65] + 2 * v9;
  *(ushort *)(v11 + 46) = 0;
  if ( Function_4_21d7bfc(v11) == 4 )
  {
    Function_21d9cd8(1);
    Function_21e9700(*(uint *)(dword_221A400[65] + 104));
  }
  else
  {
    Function_21da898(2, -60010);
  }
  return 1;
}

//----- (021D934C) --------------------------------------------------------
int __fastcall Function_21d934c(int a1, int a2, int a3, int a4, int a5, int a6, int a7)
{
  int v7;
  int v8;
  int v9;
  int v10;

  v7 = a2;
  v8 = a3;
  v9 = a4;
  if ( Function_21d7708() )
    return 0;
  v10 = *(uint *)(dword_221A400[65] + 36);
  if ( v10 < 3 || v10 == 4 )
    return 0;
  *(uint *)(dword_221A400[65] + 120) = v7;
  *(uint *)(dword_221A400[65] + 124) = v8;
  Function_21d9cd8(4);
  Function_21db664(dword_221A400[65] + 224, dword_221A400[65] + 480, Function_21d9fac, 0, v9, a5, a6, a7);
  return 1;
}

//----- (021D93F4) --------------------------------------------------------
int __fastcall Function_21d93f4(char a1, int a2, int a3, int a4, int a5, int a6)
{
  char v6;
  int v7;
  int v8;
  int v9;

  v6 = a1;
  v7 = a2;
  v8 = a3;
  v9 = a4;
  if ( Function_21d7708() || *(uint *)(dword_221A400[65] + 36) != 3 )
    return 0;
  Function_21d9bd4();
  *(uint *)(dword_221A400[65] + 128) = v8;
  *(uint *)(dword_221A400[65] + 132) = v9;
  Function_21d9cd8(5);
  Function_21dce10((uchar)(v6 - 1), v7, Function_21d9ff4, 0, a5, a6);
  return 1;
}

//----- (021D9494) --------------------------------------------------------
int __fastcall Function_21d9494(char a1, int a2, int a3, int a4)
{
  char v4;
  int v5;
  int v6;
  int v7;

  v4 = a1;
  v5 = a2;
  v6 = a3;
  v7 = a4;
  if ( Function_21d7708() || *(uint *)(dword_221A400[65] + 36) != 3 )
    return 0;
  Function_21d9bd4();
  *(uint *)(dword_221A400[65] + 136) = v5;
  *(uint *)(dword_221A400[65] + 140) = v6;
  *(uchar *)(dword_221A400[65] + 44) = 0;
  Function_21d9cd8(5);
  Function_21dcffc((uchar)(v4 - 1), Function_21d9ff4, 0, v7);
  return 1;
}

//----- (021D952C) --------------------------------------------------------
int __fastcall Function_21d952c(int a1, int a2, int a3, int a4, int a5)
{
  int v5;
  int v6;
  int v7;
  int v8;
  int v10;
  int v11;
  int v12;
  int v13;
  uchar v14;
  int v15;
  int v16;
  uchar v17;
  int v18;
  char v19;
  int v20;
  char v21;
  int v22;
  char v23;
  int v24;

  v24 = a4;
  v5 = a1;
  v6 = a2;
  v7 = a3;
  v8 = a4;
  v20 = -1;
  if ( Function_21d7708() || *(uint *)(dword_221A400[65] + 36) != 3 )
    return 0;
  Function_21d9bd4();
  *(uint *)(dword_221A400[65] + 136) = v6;
  *(uint *)(dword_221A400[65] + 140) = v7;
  Function_21d9cd8(5);
  v10 = Function_21db894(v5);
  v11 = v10;
  if ( v10 && Function_21eba88(dword_221A400[65] + 28, v10) )
  {
    Function_21eba18(dword_221A400[65] + 28, v11, &v20);
    Function_21eb8d8(dword_221A400[65] + 28, v20, &v21);
    if ( v22 == 6 )
    {
      v19 = 48;
      Function_21d89c0("SCM", &v19, &v23, 47);
      Function_20dacac((int)&v19, 0, 10, v13);
      v15 = v14;
      Function_21d89c0("SCN", &v19, &v23, 47);
      Function_20dacac((int)&v19, 0, 10, v16);
      if ( v17 != v15 )
      {
        Function_21dd0a4(v11, Function_21d9ff4, 0, v8, a5);
        return 1;
      }
      v12 = 13;
    }
    else
    {
      v12 = 11;
    }
  }
  else
  {
    v12 = 11;
  }
  Function_21d7724(v12, 0);
  v18 = *(uint *)(dword_221A400[65] + 140);
  (*(void (__fastcall **)(int))(dword_221A400[65] + 136))(v12);
  if ( dword_221A400[65] )
  {
    if ( *(uint *)(dword_221A400[65] + 36) == 5 )
    {
      Function_21d9cd8(3);
      Function_21db978(1, &dword_2217474, 0);
    }
  }
  return 1;
}

//----- (021D9724) --------------------------------------------------------
int __fastcall Function_21d9724(int a1, int a2)
{
  int result;

  if ( !dword_221A400[65] )
    return 0;
  *(uint *)(dword_221A400[65] + 144) = a1;
  result = 1;
  *(uint *)(dword_221A400[65] + 148) = a2;
  return result;
}

//----- (021D9750) --------------------------------------------------------
int Function_21d9750()
{
  int v0;
  bool v1;
  int result;
  int v3;

  if ( !dword_221A400[65] || Function_21d7708() )
    return -1;
  v0 = *(uint *)(dword_221A400[65] + 36);
  v1 = v0 == 5;
  if ( v0 != 5 )
    v1 = v0 == 6;
  if ( !v1 )
    return -1;
  if ( *(uchar *)(dword_221A400[65] + 897) )
  {
    *(uchar *)(dword_221A400[65] + 45) = 1;
    Function_21f8710(*(uint *)dword_221A400[65]);
    result = 0;
    *(uchar *)(dword_221A400[65] + 45) = 0;
  }
  else
  {
    v3 = Function_21db978(1, &dword_2217474, 0);
    Function_21dc734(v3);
    Function_21d9cd8(3);
    result = 1;
  }
  return result;
}

//----- (021D97F4) --------------------------------------------------------
int __fastcall Function_21d97f4(int a1)
{
  int v1;
  int v2;
  bool v3;

  v1 = a1;
  if ( !dword_221A400[65] || Function_21d7708() )
    return -1;
  v2 = *(uint *)(dword_221A400[65] + 36);
  v3 = v2 == 5;
  if ( v2 != 5 )
    v3 = v2 == 6;
  if ( !v3 )
    return -1;
  if ( !Function_21d9b24(v1) )
    return -2;
  Function_21f86f0();
  return 0;
}

//----- (021D985C) --------------------------------------------------------
int __fastcall Function_21d985c(uint *a1)
{
  uint *v1;
  bool v2;
  int v3;
  bool v4;
  int result;
  uint v6;

  v1 = a1;
  v2 = dword_221A400[65] == 0;
  if ( dword_221A400[65] )
    v2 = a1 == 0;
  if ( v2 || Function_21d7708() )
    return -1;
  v3 = *(uint *)(dword_221A400[65] + 36);
  v4 = v3 == 5;
  if ( v3 != 5 )
    v4 = v3 == 6;
  if ( !v4 )
    return -1;
  v6 = 0;
  do
  {
    if ( *v1 & (1 << v6) )
    {
      if ( v6 == Function_21d9968(*v1) )
      {
        *v1 &= ~(1 << v6);
      }
      else if ( Function_21d97f4(v6) )
      {
        *v1 &= ~(1 << v6);
      }
    }
    v6 = (v6 + 1) & 0xFF;
  }
  while ( v6 < 0x20 );
  if ( *v1 )
    result = 0;
  else
    result = -2;
  return result;
}

//----- (021D9920) --------------------------------------------------------
int Function_21d9920()
{
  int result;
  int v1;
  bool v2;

  if ( !dword_221A400[65] )
    return 0;
  v1 = *(uchar *)(dword_221A400[65] + 905);
  v2 = v1 == 2;
  if ( v1 != 2 )
    v2 = *(uchar *)(dword_221A400[65] + 905) == 3;
  if ( v2 )
    result = Function_21dea48() + 1;
  else
    result = Function_21dea28() + 1;
  return result;
}

//----- (021D9968) --------------------------------------------------------
int Function_21d9968()
{
  int result;

  if ( dword_221A400[65] )
    result = *(uchar *)(dword_221A400[65] + 44);
  else
    result = 0;
  return result;
}

//----- (021D9984) --------------------------------------------------------
int __fastcall Function_21d9984(uint *a1)
{
  int result;
  int v2;
  bool v3;

  if ( !dword_221A400[65] )
    return 0;
  *a1 = dword_221A400[65] + 1604;
  v2 = *(uchar *)(dword_221A400[65] + 905);
  v3 = v2 == 2;
  if ( v2 != 2 )
    v3 = *(uchar *)(dword_221A400[65] + 905) == 3;
  if ( v3 )
    result = Function_21deaf0();
  else
    result = Function_21deabc();
  return result;
}

//----- (021D99D4) --------------------------------------------------------
int __fastcall Function_4_21d99d4(int a1, int a2, int a3, int a4)
{
  int v5;
  int v6;

  v6 = a4;
  if ( !dword_221A400[65] )
    return 0;
  v5 = Function_21d9984(&v6);
  return Function_21d9d58(v6, v5);
}

//----- (021D9A08) --------------------------------------------------------
int __fastcall Function_21d9a08(char a1)
{
  if ( !dword_221A400[65] )
    return 0;
  if ( *(uint *)(dword_221A400[65] + 1636) & (1 << a1) )
    return Function_21d9c8c();
  return 0;
}

//----- (021D9A40) --------------------------------------------------------
int Function_21d9a40()
{
  int result;

  if ( dword_221A400[65] )
    result = *(uint *)(dword_221A400[65] + 36);
  else
    result = 0;
  return result;
}

//----- (021D9A5C) --------------------------------------------------------
int Function_21d9a5c()
{
  int v1;
  int v2;

  if ( *(uint *)dword_221A400[65] )
    return 0;
  Function_21d8abc(0x4000u);
  v1 = Function_21fabfc();
  v2 = Function_21f8470(
         dword_221A400[65],
         v1,
         *(uint *)(dword_221A400[65] + 20),
         *(uint *)(dword_221A400[65] + 24),
         Function_21da68c);
  if ( !Function_21d9ea8() )
  {
    Function_21f84cc(*(uint *)dword_221A400[65], Function_21dde4c);
    Function_21f8774(*(uint *)dword_221A400[65], Function_21ddd58);
  }
  return v2;
}

//----- (021D9B24) --------------------------------------------------------
int __fastcall Function_21d9b24(int a1)
{
  int v1;
  int v3;

  v1 = a1;
  if ( !dword_221A400[65] )
    return 0;
  v3 = 0;
  do
  {
    if ( dword_221A400[v3 + 67] && v1 == *(uchar *)(Function_21f87b8() + 1) )
      return dword_221A400[v3 + 67];
    ++v3;
  }
  while ( v3 < 32 );
  return 0;
}

//----- (021D9B88) --------------------------------------------------------
int Function_21d9b88()
{
  return *(uchar *)(Function_21f87b8() + 1);
}

//----- (021D9B98) --------------------------------------------------------
int Function_21d9b98()
{
  return *(uchar *)Function_21f87b8();
}

//----- (021D9BA8) --------------------------------------------------------
int Function_21d9ba8()
{
  int result;

  result = 0;
  while ( dword_221A400[result + 67] )
  {
    if ( ++result >= 32 )
      return -1;
  }
  return result;
}

//----- (021D9BD4) --------------------------------------------------------
int Function_21d9bd4()
{
  MIi_CpuClear32(0, &dword_221A400[67], 128);
  return MIi_CpuClear32(0, &dword_221A400[99], 256);
}

//----- (021D9C04) --------------------------------------------------------
int *__fastcall Function_21d9c04(int a1)
{
  return &dword_221A400[a1 + 67];
}

//----- (021D9C14) --------------------------------------------------------
int *__fastcall Function_21d9c14(int a1, int a2)
{
  int i;
  int v4;

  for ( i = 0; i < a2; i = (i + 1) & 0xFF )
  {
    if ( a1 == *(uint *)(dword_221A400[65] + 4 * i + 1128) )
      break;
  }
  if ( i >= a2 )
    return 0;
  Function_21d9b24(*(uchar *)(dword_221A400[65] + i + 1604));
  v4 = Function_21d9b98();
  return Function_21d9c04(v4);
}

//----- (021D9C7C) --------------------------------------------------------
int *__fastcall Function_21d9c7c(int a1)
{
  return &dword_221A400[2 * a1 + 99];
}

//----- (021D9C8C) --------------------------------------------------------
int __fastcall Function_21d9c8c(int a1)
{
  int v1;
  int v2;

  v1 = a1;
  v2 = 0;
  do
  {
    if ( dword_221A400[v2 + 67] && v1 == *(uchar *)(Function_21f87b8() + 1) )
      return 1;
    ++v2;
  }
  while ( v2 < 32 );
  return 0;
}

//----- (021D9CD4) --------------------------------------------------------
void Function_21d9cd4()
{
  ;
}

//----- (021D9CD8) --------------------------------------------------------
int __fastcall Function_21d9cd8(int result)
{
  *(uint *)(dword_221A400[65] + 40) = *(uint *)(dword_221A400[65] + 36);
  *(uint *)(dword_221A400[65] + 36) = result;
  return result;
}

//----- (021D9CF8) --------------------------------------------------------
int __fastcall Function_21d9cf8(int a1, int a2, int a3, int a4)
{
  int v4;
  int v5;
  int v6;
  bool v7;
  bool v8;
  int v9;
  uchar *v10;
  int result;
  uchar *v12;
  int v13;

  v13 = a4;
  v4 = a1;
  v5 = Function_21deabc(&v12);
  v6 = v5;
  v7 = v5 == 0;
  v8 = v5 < 0;
  v9 = 0;
  if ( !v8 && !v7 )
  {
    v10 = v12;
    do
    {
      if ( v4 == *v10 )
        break;
      ++v9;
      ++v10;
    }
    while ( v9 < v6 );
  }
  if ( v9 == v6 )
    result = 0;
  else
    result = Function_21de870();
  return result;
}

//----- (021D9D58) --------------------------------------------------------
int __fastcall Function_21d9d58(int a1, int a2)
{
  int v2;
  int i;
  char v4;

  v2 = 0;
  for ( i = 0; i < a2; v2 |= 1 << v4 )
    v4 = *(uchar *)(a1 + i++);
  return v2;
}

//----- (021D9D8C) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x21D9DE8 for case 0"

//----- (021D9DA8) --------------------------------------------------------
void Function_21d9da8()
{
  JUMPOUT(&loc_21D9DE8);
}

//----- (021D9DAC) --------------------------------------------------------
void Function_21d9dac()
{
  JUMPOUT(&loc_21D9DBC);
}

//----- (021D9DB0) --------------------------------------------------------
void Function_21d9db0()
{
  JUMPOUT(&loc_21D9DC8);
}

//----- (021D9DB4) --------------------------------------------------------
void Function_21d9db4()
{
  JUMPOUT(&loc_21D9DD4);
}

//----- (021D9DB8) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x21D9E78 for case 0"

//----- (021D9E00) --------------------------------------------------------
void Function_21d9e00()
{
  JUMPOUT(&loc_21D9E78);
}

//----- (021D9E04) --------------------------------------------------------
void Function_21d9e04()
{
  JUMPOUT(&loc_21D9E18);
}

//----- (021D9E08) --------------------------------------------------------
void Function_21d9e08()
{
  JUMPOUT(&loc_21D9E30);
}

//----- (021D9E0C) --------------------------------------------------------
void Function_21d9e0c()
{
  JUMPOUT(&loc_21D9E78);
}

//----- (021D9E10) --------------------------------------------------------
void Function_21d9e10()
{
  JUMPOUT(&loc_21D9E6C);
}

//----- (021D9E14) --------------------------------------------------------
void Function_21d9e14()
{
  int v0;
  int v1;
  int v2;
  int v3;

  v2 = v0 - 81000;
  Function_21de3bc(v1, v2);
  Function_21db710(v1, v2);
  JUMPOUT(__CS__, v3);
}

//----- (021D9EA8) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x21D9F2C for case 0"

//----- (021D9EC4) --------------------------------------------------------
void Function_21d9ec4()
{
  JUMPOUT(&loc_21D9F2C);
}

//----- (021D9EC8) --------------------------------------------------------
void Function_21d9ec8()
{
  JUMPOUT(&loc_21D9EE4);
}

//----- (021D9ECC) --------------------------------------------------------
void Function_21d9ecc()
{
  JUMPOUT(&loc_21D9EF0);
}

//----- (021D9ED0) --------------------------------------------------------
void Function_21d9ed0()
{
  JUMPOUT(&loc_21D9F00);
}

//----- (021D9ED4) --------------------------------------------------------
void Function_21d9ed4()
{
  JUMPOUT(&loc_21D9F0C);
}

//----- (021D9ED8) --------------------------------------------------------
void Function_21d9ed8()
{
  JUMPOUT(&loc_21D9EF0);
}

//----- (021D9EDC) --------------------------------------------------------
void Function_21d9edc()
{
  JUMPOUT(&loc_21D9F18);
}

//----- (021D9EE0) --------------------------------------------------------
void Function_21d9ee0()
{
  int v0;

  Function_21da898(6, -67080);
  JUMPOUT(__CS__, v0);
}

//----- (021D9F4C) --------------------------------------------------------
int __fastcall Function_21d9f4c(int a1, int a2)
{
  int v2;
  int v3;
  int v4;
  int result;
  int (__fastcall *v6)(int, int, uint);

  v2 = a1;
  v3 = a2;
  if ( a1 )
  {
    Function_21d9cd8(0);
  }
  else
  {
    *(uint *)(dword_221A400[65] + 100) = a2;
    v4 = Function_21d9cd8(3);
    Function_21db940(v4);
  }
  result = dword_221A400[65];
  v6 = *(int (__fastcall **)(int, int, uint))(dword_221A400[65] + 112);
  if ( v6 )
    result = v6(v2, v3, *(uint *)(dword_221A400[65] + 116));
  return result;
}

//----- (021D9FAC) --------------------------------------------------------
int __fastcall Function_21d9fac(int a1, int a2)
{
  int v2;
  int v3;
  int v4;

  v2 = a1;
  v3 = a2;
  v4 = *(uint *)(dword_221A400[65] + 40);
  if ( v4 != 4 )
    Function_21d9cd8(v4);
  return (*(int (__fastcall **)(int, int, uint))(dword_221A400[65] + 120))(
           v2,
           v3,
           *(uint *)(dword_221A400[65] + 124));
}

//----- (021D9FF4) --------------------------------------------------------
int __fastcall Function_21d9ff4(int a1, int a2, int a3, int a4, int a5)
{
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  bool v12;
  int result;
  bool v14;

  v5 = a1;
  v6 = a2;
  v7 = a3;
  v8 = a4;
  if ( a1 || !a2 )
  {
    if ( !a1 )
    {
      Function_21d9cd8(6);
      v9 = 0;
      v10 = *(uchar *)(dword_221A400[65] + 897);
      while ( *(uint *)(dword_221A400[65] + 100) != *(uint *)(dword_221A400[65] + 4 * v9 + 1128) )
      {
        if ( ++v9 > *(uchar *)(dword_221A400[65] + 897) )
          goto LABEL_10;
      }
      *(uchar *)(dword_221A400[65] + 44) = *(uchar *)(dword_221A400[65] + v9 + 1604);
    }
  }
  else if ( !*(uint *)(dword_221A400[65] + 1300) )
  {
    Function_21de478();
    Function_21d9cd8(3);
  }
LABEL_10:
  *(uint *)(dword_221A400[65] + 1636) = Function_21d9d58(
                                            dword_221A400[65] + 1604,
                                            *(uchar *)(dword_221A400[65] + 897) + 1);
  Function_21dea68();
  v11 = *(uchar *)(dword_221A400[65] + 905);
  v12 = v11 == 2;
  if ( v11 != 2 )
    v12 = *(uchar *)(dword_221A400[65] + 905) == 3;
  if ( v12 )
    result = (*(int (__fastcall **)(int, int, int, int, int, uint))(dword_221A400[65] + 136))(
               v5,
               v6,
               v7,
               v8,
               a5,
               *(uint *)(dword_221A400[65] + 140));
  else
    result = (*(int (__fastcall **)(int, int, uint))(dword_221A400[65] + 128))(
               v5,
               v6,
               *(uint *)(dword_221A400[65] + 132));
  v14 = v5 == 0;
  if ( v5 )
  {
    result = dword_221A400[65];
    v14 = dword_221A400[65] == 0;
  }
  if ( !v14 )
  {
    result = *(uint *)(result + 36);
    if ( result == 5 )
      result = Function_21d9cd8(3);
  }
  return result;
}

//----- (021DA16C) --------------------------------------------------------
int __fastcall Function_21da16c(int a1, int a2)
{
  int v2;
  int result;
  bool v4;

  v2 = *(uint *)(a2 + 4);
  result = 1539;
  v4 = v2 == 1539;
  if ( v2 != 1539 )
  {
    result = 2305;
    v4 = v2 == 2305;
  }
  if ( !v4 )
  {
    result += 512;
    v4 = v2 == result;
  }
  if ( !v4 )
    result = Function_21d9d8c(3);
  return result;
}

//----- (021DA1A4) --------------------------------------------------------
void __fastcall Function_21da1a4(int a1, int a2, int a3)
{
  uint *v3;
  uchar *v4;
  int v5;
  int v6;
  char *v7;
  char *v8;
  uint v9;
  int v10;
  int v11;
  uchar *v12;
  int v13;
  int v14;
  int v15;
  bool v16;
  int v17;
  char v18;
  char v19;
  char v20;
  char v21;
  char v22;
  char v23;
  char v24;
  char v25;
  char v26;
  char v27;
  char v28;
  char v29;

  v3 = (uint *)a2;
  v18 = 0;
  v19 = 0;
  v20 = 0;
  v21 = 0;
  v22 = 0;
  v23 = 0;
  v24 = 0;
  v25 = 0;
  v26 = 0;
  v27 = 0;
  v28 = 0;
  v29 = 0;
  v4 = *(uchar **)(a2 + 8);
  v5 = a1;
  if ( !Function_21db7b4(a1, a2, a3) )
  {
    v6 = strlen("GPCM");
    if ( !Function_20d5190(v4, "GPCM", v6) )
    {
      v7 = (char *)&v4[strlen("GPCM")];
      v8 = strchr(v7, 118);
      v9 = v8 - v7;
      strncpy(&v18, v7, v8 - v7);
      if ( v9 <= 0xA )
      {
        Function_20dacac((int)&v18, 0, 10, v10);
        if ( v11 == 3 )
        {
          v12 = (uchar *)&v7[v9 + 1];
          v13 = strlen("MAT");
          if ( !Function_20d5190(v12, "MAT", v13) )
          {
            v14 = *(uint *)(dword_221A400[65] + 36);
            if ( v14 == 5 )
              goto LABEL_15;
            if ( v14 == 6 )
            {
              v15 = *(uchar *)(dword_221A400[65] + 905);
              v16 = v15 == 2;
              if ( v15 != 2 )
                v16 = *(uchar *)(dword_221A400[65] + 905) == 3;
              if ( v16 )
              {
LABEL_15:
                v17 = strlen("MAT");
                Function_21de318(v5, *v3, &v12[v17]);
              }
            }
          }
        }
      }
    }
  }
}

//----- (021DA30C) --------------------------------------------------------
int Function_21da30c()
{
  return Function_21e4ee8();
}

//----- (021DA318) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x21DA360 for case 0"

//----- (021DA34C) --------------------------------------------------------
void Function_21da34c()
{
  JUMPOUT(&loc_21DA360);
}

//----- (021DA350) --------------------------------------------------------
void Function_21da350()
{
  JUMPOUT(&loc_21DA360);
}

//----- (021DA354) --------------------------------------------------------
void Function_21da354()
{
  JUMPOUT(&loc_21DA368);
}

//----- (021DA358) --------------------------------------------------------
void Function_21da358()
{
  JUMPOUT(&loc_21DA368);
}

//----- (021DA35C) --------------------------------------------------------
void Function_21da35c()
{
  int v0;
  int v1;
  bool v2;
  int v3;
  bool v4;
  int v5;

  v2 = *(uchar *)(dword_221A400[65] + 45) == 0;
  if ( !*(uchar *)(dword_221A400[65] + 45) )
    v2 = *(uint *)(dword_221A400[65] + 36) == 6;
  if ( v2 )
    v2 = v1 == 0;
  if ( !v2 )
  {
    if ( Function_21de66c(9, -7601, v0) )
      JUMPOUT(__CS__, v5);
    Function_21d7724(9, -87601);
    JUMPOUT(__CS__, v5);
  }
  v3 = *(uchar *)(dword_221A400[65] + 905);
  v4 = v3 == 2;
  if ( v3 == 2 )
    v4 = 0;
  if ( !v4 )
    JUMPOUT(__CS__, v5);
  Function_21deb94();
  Function_21de7e8(v0);
  JUMPOUT(__CS__, v5);
}

//----- (021DA680) --------------------------------------------------------
int Function_21da680()
{
  return Function_21e4f24();
}

//----- (021DA68C) --------------------------------------------------------
int Function_21da68c()
{
  int v0;
  int result;

  v0 = Function_21f876c();
  dword_221A400[66] = Function_21eaf38(v0);
  Function_21d7724(9, -97003);
  result = dword_221A400[65];
  *(uint *)dword_221A400[65] = 0;
  return result;
}

//----- (021DA6C8) --------------------------------------------------------
int __fastcall Function_21da6c8(ushort *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8)
{
  int v8;
  int v9;
  int v10;
  int result;

  v8 = a2;
  v9 = a3;
  v10 = a4;
  dword_221A400[164] = (int)a1;
  MI_CpuFill8(a1, 0, 0x280u);
  *(uint *)dword_221A400[164] = v9;
  *(uint *)(dword_221A400[164] + 4) = 0;
  *(uint *)(dword_221A400[164] + 8) = v10;
  *(uint *)(dword_221A400[164] + 12) = a5;
  *(uint *)(dword_221A400[164] + 16) = a6;
  *(uint *)(dword_221A400[164] + 20) = a7;
  *(uint *)(dword_221A400[164] + 24) = a8;
  result = dword_221A400[164];
  *(uint *)(dword_221A400[164] + 28) = v8;
  return result;
}

//----- (021DA74C) --------------------------------------------------------
int Function_21da74c()
{
  int result;

  Function_21dabcc(Function_21dab18, 0);
  *(uint *)(dword_221A400[164] + 4) = 1;
  result = dword_221A400[164];
  *(uint *)(dword_221A400[164] + 48) = 0;
  return result;
}

//----- (021DA784) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x21DA7BC for case 0"

//----- (021DA7BC) --------------------------------------------------------
// jumptable 021DA7B4 case 0
int __fastcall Function_21da7bc(int a1, int a2, int a3, int a4, int a5, int (__fastcall *a6)(int, int, int, int))
{
  return a6(a1, a2, a3, a5);
}

//----- (021DA7C0) --------------------------------------------------------
void Function_21da7c0()
{
  JUMPOUT(&loc_21DA7D4);
}

//----- (021DA7C4) --------------------------------------------------------
void Function_21da7c4()
{
  JUMPOUT(&loc_21DA7DC);
}

//----- (021DA7C8) --------------------------------------------------------
void Function_21da7c8()
{
  JUMPOUT(&loc_21DA7DC);
}

//----- (021DA7CC) --------------------------------------------------------
void Function_21da7cc()
{
  JUMPOUT(&loc_21DA7DC);
}

//----- (021DA7D0) --------------------------------------------------------
// jumptable 021DA7B4 case 5
int __fastcall Function_21da7d0(int a1, int a2, int a3, int a4, int a5, int (__fastcall *a6)(int, int, int, int))
{
  return a6(a1, a2, a3, a5);
}

//----- (021DA87C) --------------------------------------------------------
int Function_21da87c()
{
  int result;

  if ( dword_221A400[164] )
    result = *(uint *)(dword_221A400[164] + 28);
  else
    result = 0;
  return result;
}

//----- (021DA898) --------------------------------------------------------
int __fastcall Function_21da898(int result, int a2)
{
  int v2;
  bool v3;
  int v4;
  int (__fastcall *v5)(int, uint, uint);

  v2 = result;
  v3 = dword_221A400[164] == 0;
  if ( dword_221A400[164] )
    v3 = result == 0;
  if ( !v3 )
  {
    Function_21d7724(result, a2);
    v4 = dword_221A400[164];
    v5 = *(int (__fastcall **)(int, uint, uint))(dword_221A400[164] + 20);
    if ( v5 )
      v4 = v5(v2, 0, *(uint *)(dword_221A400[164] + 24));
    result = Function_21da944(v4);
  }
  return result;
}

//----- (021DA8E8) --------------------------------------------------------
int *Function_21da8e8()
{
  int *result;

  if ( *(uint *)(dword_221A400[164] + 36) )
  {
    Function_21d3220();
    Function_21d32ac();
    Function_4_21d77c4(0, *(uint *)(dword_221A400[164] + 36));
    *(uint *)(dword_221A400[164] + 36) = 0;
  }
  result = &dword_221A400[163];
  dword_221A400[164] = 0;
  return result;
}

//----- (021DA944) --------------------------------------------------------
int *Function_21da944()
{
  int *result;

  result = &dword_221A400[163];
  if ( dword_221A400[164] )
  {
    *(uint *)(dword_221A400[164] + 4) = 0;
    result = (int *)dword_221A400[164];
    *(uint *)(dword_221A400[164] + 48) = 0;
  }
  return result;
}

//----- (021DA96C) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x21DA9C8 for case 0"

//----- (021DA988) --------------------------------------------------------
void Function_21da988()
{
  JUMPOUT(&loc_21DA9C8);
}

//----- (021DA98C) --------------------------------------------------------
void Function_21da98c()
{
  JUMPOUT(&loc_21DA99C);
}

//----- (021DA990) --------------------------------------------------------
void Function_21da990()
{
  JUMPOUT(&loc_21DA9A8);
}

//----- (021DA994) --------------------------------------------------------
void Function_21da994()
{
  JUMPOUT(&loc_21DA9B4);
}

//----- (021DA998) --------------------------------------------------------
void Function_21da998()
{
  int v0;

  Function_21da898(6, -61020);
  JUMPOUT(__CS__, v0);
}

//----- (021DA9E0) --------------------------------------------------------
int __fastcall Function_21da9e0(int a1, uint *a2)
{
  uint *v2;
  int v3;
  uint *v4;
  int v5;
  int v6;
  int v7;
  uint *v8;
  int v9;
  int v10;
  int v11;
  int result;
  int v13;
  int v14;

  v2 = a2;
  *(uint *)(dword_221A400[164] + 48) = 0;
  v3 = a1;
  if ( *a2 )
    return ((int (*)(void))Function_21da96c)();
  v4 = (uint *)(dword_221A400[164] + 608);
  v5 = a2[1];
  v6 = v2[2];
  v7 = v2[3];
  *v4 = *v2;
  v4[1] = v5;
  v4[2] = v6;
  v4[3] = v7;
  v8 = (uint *)(dword_221A400[164] + 624);
  v9 = v2[5];
  v10 = v2[6];
  v11 = v2[7];
  *v8 = v2[4];
  v8[1] = v9;
  v8[2] = v10;
  v8[3] = v11;
  result = *(uint *)(dword_221A400[164] + 4);
  if ( result == 2 )
  {
    if ( *(uint *)(*(uint *)(dword_221A400[164] + 28) + 28) == v2[1] )
    {
      *(uint *)(dword_221A400[164] + 4) = 5;
      v13 = Function_21db978(1, &dword_2217484, 0);
      result = Function_21da96c(v13);
      if ( !result )
      {
        (*(void (__fastcall **)(uint, uint, uint))(dword_221A400[164] + 20))(
          0,
          v2[1],
          *(uint *)(dword_221A400[164] + 24));
        result = Function_21d9a5c();
        if ( !result )
          result = Function_21dcc74(v2[1]);
      }
    }
    else
    {
      result = Function_21da898(6, -60000);
    }
  }
  else if ( result == 3 )
  {
    v14 = Function_21eb4f8(v3, v2[1], 0, 0, Function_21dafa0, 0);
    result = Function_21da96c(v14);
  }
  return result;
}

//----- (021DAB18) --------------------------------------------------------
int __fastcall Function_21dab18(int a1, int a2)
{
  return Function_21dab30(a1, a2, Function_21da9e0, 2);
}

//----- (021DAB30) --------------------------------------------------------
int __fastcall Function_21dab30(int *a1, int *a2, int a3, int a4)
{
  int *v4;
  int v5;
  int v6;
  int v7;
  int result;

  v4 = a2;
  v5 = a4;
  Function_20d8b7c((uchar *)(dword_221A400[164] + 72), a1);
  Function_20d8b7c((uchar *)(dword_221A400[164] + 328), v4);
  *(uint *)(dword_221A400[164] + 52) = OS_GetTick();
  *(uint *)(dword_221A400[164] + 56) = v6;
  *(uint *)(dword_221A400[164] + 48) = 1;
  v7 = Function_21eb2f8(*(uint *)dword_221A400[164], dword_221A400[164] + 72, dword_221A400[164] + 328);
  result = Function_21da96c(v7);
  if ( !result )
  {
    result = dword_221A400[164];
    *(uint *)(dword_221A400[164] + 4) = v5;
  }
  return result;
}

//----- (021DABCC) --------------------------------------------------------
int __fastcall Function_21dabcc(int a1, int a2, int a3, int a4)
{
  int v4;
  int v5;
  int v6;
  int v7;
  uint v8;
  int v9;
  int v10;
  int v11;
  uint *v12;
  int v13;
  int v14;
  long long v15;
  int v16;
  uint v17;
  int v18;
  int v19;
  int v20;
  char v22;
  char v23;
  int (__fastcall *v24)(int, int);
  int (__fastcall *v25)(int, int);
  int v26;

  v26 = a4;
  v4 = a1;
  v5 = a2;
  MI_CpuFill8(&v22, 0, 0x48u);
  dword_221A400[165] = v4;
  dword_221A400[163] = v5;
  if ( Function_20a4488(*(uint *)(dword_221A400[164] + 28)) )
  {
    Function_20a4234(
      (int *)(*(uint *)(dword_221A400[164] + 28) + 16),
      *(uint *)(*(uint *)(dword_221A400[164] + 28) + 36),
      (uchar *)(dword_221A400[164] + 584));
  }
  else
  {
    if ( Function_20a4470((uint *)(dword_221A400[164] + 60)) )
    {
      LODWORD(v15) = OS_GetTick();
      Function_20a3fec(dword_221A400[164] + 60, (ull)(6726279311198226789LL * v15 + 2531011) >> 32);
    }
    else if ( Function_20a4404((int *)(*(uint *)(dword_221A400[164] + 28) + 4), v6, v7, v8) )
    {
      v12 = (uint *)(dword_221A400[164] + 60);
      v13 = *(uint *)(*(uint *)(dword_221A400[164] + 28) + 8);
      v14 = *(uint *)(*(uint *)(dword_221A400[164] + 28) + 12);
      *v12 = *(uint *)(*(uint *)(dword_221A400[164] + 28) + 4);
      v12[1] = v13;
      v12[2] = v14;
    }
    else
    {
      Function_20a4340((int *)(dword_221A400[164] + 60), v9, v10, v11);
    }
    Function_20a4234(
      (int *)(dword_221A400[164] + 60),
      *(uint *)(dword_221A400[164] + 12),
      (uchar *)(dword_221A400[164] + 584));
  }
  v16 = Function_21d8bdc(*(ushort **)(dword_221A400[164] + 16));
  MI_CpuCopy8(*(uint *)(dword_221A400[164] + 16), (uint)&v22, 2 * v16 + 2, v17);
  Function_20d8b7c(&v23, (int *)(dword_221A400[164] + 593));
  v24 = Function_4_21d7780;
  v25 = Function_4_21d77c4;
  v18 = Function_21d7790(0, 7188);
  v19 = v18;
  *(uint *)(dword_221A400[164] + 36) = v18;
  *(uint *)(dword_221A400[164] + 40) = OS_GetTick();
  *(uint *)(dword_221A400[164] + 44) = v20;
  return Function_21d3048((int)&v22, v19);
}

//----- (021DAD98) --------------------------------------------------------
int __fastcall Function_21dad98(int a1, int a2, int a3, int a4)
{
  int v4;
  int v5;
  uint v6;
  int result;
  int v8;
  int v9;
  int v10;
  uint v11;
  int v12;
  uint v13;
  bool v14;
  bool v15;
  int v16;
  uint v17;
  char v18;
  char v19;
  int (__fastcall *v20)(int, int);
  int (__fastcall *v21)(int, int);
  int v22;
  char v23;
  short v24;
  char v25;
  int v26;

  v26 = a4;
  if ( Function_21d3334() == 21 )
  {
    Function_21d3380((int *)&v23, v4, v5, v6);
    Function_20d8b7c((uchar *)(dword_221A400[164] + 72), (int *)&v24);
    Function_20d8b7c((uchar *)(dword_221A400[164] + 328), (int *)&v25);
    Function_21d32ac();
    Function_4_21d77c4(0, *(uint *)(dword_221A400[164] + 36));
    *(uint *)(dword_221A400[164] + 36) = 0;
    if ( Function_20a4488(*(uint *)(dword_221A400[164] + 28)) )
      result = ((int (__fastcall *)(int, int, int))dword_221A400[165])(
                 dword_221A400[164] + 72,
                 dword_221A400[164] + 328,
                 dword_221A400[163]);
    else
      result = Function_21dab30(
                 (int *)(dword_221A400[164] + 72),
                 (int *)(dword_221A400[164] + 328),
                 (int)Function_21da9e0,
                 3);
  }
  else
  {
    result = Function_21d3334();
    if ( result )
    {
      v8 = OS_GetTick();
      v9 = *(uint *)(dword_221A400[164] + 44);
      v10 = v8 - *(uint *)(dword_221A400[164] + 40);
      ll_udiv();
      v14 = 1;
      v15 = v12 == 0;
      if ( !v12 )
      {
        v14 = v11 >= 0x2710;
        v15 = v11 == 10000;
      }
      if ( !v15 && v14 )
      {
        Function_21d3380(&v22, v12, 10000, v13);
        Function_21d32ac();
        Function_4_21d77c4(0, *(uint *)(dword_221A400[164] + 36));
        *(uint *)(dword_221A400[164] + 36) = 0;
        result = Function_21da898(2, v22);
      }
      else
      {
        Function_21d32ac();
        MI_CpuFill8(&v18, 0, 0x48u);
        v16 = Function_21d8bdc(*(ushort **)(dword_221A400[164] + 16));
        MI_CpuCopy8(*(uint *)(dword_221A400[164] + 16), (uint)&v18, 2 * v16 + 2, v17);
        Function_20d8b7c(&v19, (int *)(dword_221A400[164] + 593));
        v20 = Function_4_21d7780;
        v21 = Function_4_21d77c4;
        result = Function_21d3048((int)&v18, *(uint *)(dword_221A400[164] + 36));
      }
    }
  }
  return result;
}

//----- (021DAFA0) --------------------------------------------------------
int __fastcall Function_21dafa0(int result, uint *a2, int a3, int a4)
{
  uint *v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  char v12;
  uint v13[5];
  char v14;
  int v15;

  v15 = a4;
  v4 = a2;
  v5 = result;
  if ( !*a2 )
  {
    v6 = *(uint *)(dword_221A400[164] + 4);
    if ( v6 == 3 )
    {
      if ( *((uchar *)v4 + 142) )
      {
        Function_21eb3fc();
        Function_21dabcc((int)Function_21dab18, 0, v9, v10);
        result = dword_221A400[164];
        *(uint *)(dword_221A400[164] + 4) = 1;
      }
      else
      {
        Function_20a4234((int *)(*(uint *)(dword_221A400[164] + 28) + 4), *(uint *)(dword_221A400[164] + 12), &v14);
        v7 = Function_21eb5d4(v5, 1797, &v14);
        result = Function_21da96c(v7);
        if ( !result )
        {
          *(uint *)(dword_221A400[164] + 4) = 4;
          v8 = Function_21eb4f8(v5, v4[1], 0, 0, Function_21dafa0, 0);
          result = Function_21da96c(v8);
        }
      }
    }
    else if ( v6 == 4 )
    {
      Function_20a4234((int *)(*(uint *)(dword_221A400[164] + 28) + 4), *(uint *)(dword_221A400[164] + 12), v13);
      if ( Function_20d8d14((uint *)((char *)v4 + 142), v13) )
      {
        v11 = Function_21eb4f8(v5, v4[1], 0, 0, Function_21dafa0, 0);
        result = Function_21da96c(v11);
      }
      else
      {
        Function_20a4234((int *)(dword_221A400[164] + 60), *(uint *)(dword_221A400[164] + 12), &v12);
        Function_20a45a4(*(uint *)(dword_221A400[164] + 28), (int *)(dword_221A400[164] + 60), v4[1]);
        *(uint *)(dword_221A400[164] + 4) = 2;
        result = Function_21da9e0(v5, (uint *)(dword_221A400[164] + 608));
      }
    }
  }
  return result;
}

//----- (021DB144) --------------------------------------------------------
BOOL Function_21db144()
{
  return dword_221A400[164] && *(uint *)(dword_221A400[164] + 4) == 5;
}

//----- (021DB170) --------------------------------------------------------
int Function_21db170()
{
  return Function_21db188();
}

//----- (021DB188) --------------------------------------------------------
int __fastcall Function_21db188(int a1, uchar *a2, uchar *a3, int a4)
{
  uchar *v4;
  uchar *v5;
  uchar *v6;
  int v7;
  char v8;
  int v9;
  char v10;
  int result;
  char v12;
  char v13;
  int v14;
  char v15;
  char v16;
  int v17;

  v17 = a4;
  v4 = a2;
  v5 = a3;
  v6 = (uchar *)a4;
  if ( Function_21dc064(a1, &v13) )
  {
    if ( v14 == 6 )
    {
      if ( v4 )
      {
        if ( Function_21d89c0("SCM", &v12, &v15, 47) > 0 )
        {
          Function_20dacac((int)&v12, 0, 10, v7);
          *v4 = v8;
        }
        else
        {
          *v4 = 0;
        }
      }
      if ( v5 )
      {
        if ( Function_21d89c0("SCN", &v12, &v15, 47) > 0 )
        {
          Function_20dacac((int)&v12, 0, 10, v9);
          *v5 = v10;
        }
        else
        {
          *v5 = 0;
        }
      }
    }
    else
    {
      if ( v4 )
        *v4 = 0;
      if ( v5 )
        *v5 = 0;
    }
    if ( v6 )
      Function_20d8b7c(v6, (int *)&v16);
    result = (uchar)v14;
  }
  else
  {
    if ( v4 )
      *v4 = 0;
    if ( v5 )
      *v5 = 0;
    result = 0;
  }
  return result;
}

//----- (021DB2A4) --------------------------------------------------------
int Function_21db2a4()
{
  return Function_21db2c0();
}

//----- (021DB2C0) --------------------------------------------------------
int __fastcall Function_21db2c0(int a1, uchar *a2, uchar *a3, uchar *a4, int *a5)
{
  uchar *v5;
  uint v6;
  int result;
  int v8;
  int v9;
  bool v10;
  int v11;
  char v12;

  v5 = a4;
  v6 = (uint)a5;
  result = Function_21db188(a1, a2, a3, (int)&v12);
  v8 = result;
  if ( result )
  {
    v9 = strlen(&v12);
    *a5 = Function_21d7468((int)&v12, v9, 0, 0);
    v10 = v5 == 0;
    if ( v5 )
    {
      v6 = *a5;
      v10 = *a5 == -1;
    }
    if ( !v10 )
    {
      v11 = strlen(&v12);
      Function_21d7468((int)&v12, v11, v5, v6);
    }
    result = v8;
  }
  else
  {
    *a5 = -1;
  }
  return result;
}

//----- (021DB350) --------------------------------------------------------
BOOL __fastcall Function_21db350(int a1, uint a2, int a3, int a4)
{
  int v4;
  uint v5;
  uint v7;
  char v8[256];
  int v9;

  v9 = a4;
  v4 = a1;
  v5 = a2;
  if ( !dword_221A400[168] || !Function_21db144() )
    return 0;
  v7 = Function_21d72e0(v4, v5, v8, 0xFFu);
  if ( v7 == -1 )
    return 0;
  v8[v7] = 0;
  return Function_21db978(-1, 0, v8) == 0;
}

//----- (021DB3DC) --------------------------------------------------------
int __fastcall Function_21db3dc(int a1, int a2)
{
  int result;

  if ( !dword_221A400[168] )
    return 0;
  *(uint *)(dword_221A400[168] + 68) = a1;
  result = 1;
  *(uint *)(dword_221A400[168] + 72) = a2;
  return result;
}

//----- (021DB408) --------------------------------------------------------
uint __fastcall Function_21db408(int a1, uint a2, uchar *a3, uint a4)
{
  return Function_21d72e0(a1, a2, a3, a4);
}

//----- (021DB414) --------------------------------------------------------
int __fastcall Function_21db414(int a1, uint a2, uchar *a3, uint a4)
{
  return Function_21d7468(a1, a2, a3, a4);
}

//----- (021DB420) --------------------------------------------------------
int __fastcall Function_21db420(uint *a1, int a2, int a3, int a4, int a5)
{
  int result;

  dword_221A400[168] = (int)a1;
  *a1 = 0;
  *(uint *)(dword_221A400[168] + 4) = a2;
  *(uint *)(dword_221A400[168] + 8) = 0;
  *(uint *)(dword_221A400[168] + 12) = 0;
  *(uint *)(dword_221A400[168] + 16) = 0;
  *(uint *)(dword_221A400[168] + 20) = a5;
  *(uint *)(dword_221A400[168] + 24) = a4;
  *(uchar *)(dword_221A400[168] + 28) = 0;
  *(uchar *)(dword_221A400[168] + 29) = 0;
  *(uchar *)(dword_221A400[168] + 30) = 0;
  *(uchar *)(dword_221A400[168] + 31) = 0;
  *(uint *)(dword_221A400[168] + 32) = 0;
  *(uint *)(dword_221A400[168] + 36) = 0;
  *(uint *)(dword_221A400[168] + 40) = a3;
  *(uint *)(dword_221A400[168] + 44) = 0;
  *(uint *)(dword_221A400[168] + 48) = 0;
  *(uint *)(dword_221A400[168] + 52) = 0;
  *(uint *)(dword_221A400[168] + 56) = 0;
  *(uint *)(dword_221A400[168] + 60) = 0;
  *(uint *)(dword_221A400[168] + 64) = 0;
  *(uint *)(dword_221A400[168] + 68) = 0;
  *(uint *)(dword_221A400[168] + 72) = 0;
  *(uint *)(dword_221A400[168] + 76) = 0;
  *(uint *)(dword_221A400[168] + 80) = 0;
  *(uint *)(dword_221A400[168] + 84) = 0;
  result = dword_221A400[168];
  *(uint *)(dword_221A400[168] + 88) = 0;
  return result;
}

//----- (021DB500) --------------------------------------------------------
uint Function_21db500()
{
  uint result;
  bool v1;
  uint *v2;
  bool v3;
  uint v4;
  int v5;
  bool v6;
  int v7;

  result = dword_221A400[168];
  if ( dword_221A400[168] )
  {
    result = Function_21d7708();
    if ( !result )
    {
      if ( *(uint *)(dword_221A400[168] + 24) )
      {
        if ( Function_21dc720() || Function_21f63a8() )
        {
          dword_221A400[166] = 1;
          dword_221A400[169] = 0;
          Function_21f63c8();
          dword_221A400[166] = 0;
          if ( dword_221A400[169] == 1 )
          {
            dword_221A400[169] = 0;
            Function_21f6338(&dword_221A400[166]);
          }
        }
        v2 = *(uint **)(dword_221A400[168] + 4);
        v3 = v2 == 0;
        if ( v2 )
          v3 = *v2 == 0;
        if ( !v3 )
        {
          result = Function_21dbac4();
          if ( result )
            return result;
          result = *(uint *)dword_221A400[168];
          if ( !*(uint *)dword_221A400[168] )
            return result;
          v5 = *(uint *)(dword_221A400[168] + 24);
          v6 = v5 == 0;
          if ( v5 )
          {
            v4 = *(uchar *)(dword_221A400[168] + 30);
            v6 = v4 == 3;
          }
          if ( !v6 && *(uint *)(dword_221A400[168] + 8) > 7u )
          {
            if ( v4 <= 1 )
            {
              v7 = *(uint *)(dword_221A400[168] + 20);
              Function_21dbb80();
            }
            if ( (int)*(uchar *)(dword_221A400[168] + 28) >= *(uint *)(dword_221A400[168] + 20) )
            {
              *(uchar *)(dword_221A400[168] + 30) = 3;
              ++*(uchar *)(dword_221A400[168] + 31);
            }
          }
        }
        result = *(uchar *)(dword_221A400[168] + 31);
        if ( result >= 2 )
        {
          *(uchar *)(dword_221A400[168] + 31) = 0;
          result = Function_21dbdec();
        }
      }
      else
      {
        result = *(uint *)(dword_221A400[168] + 4);
        v1 = result == 0;
        if ( result )
        {
          result = *(uint *)result;
          v1 = result == 0;
        }
        if ( !v1 )
          result = Function_21dbac4();
      }
    }
  }
  return result;
}

//----- (021DB664) --------------------------------------------------------
int __fastcall Function_21db664(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8)
{
  int result;

  *(uint *)(dword_221A400[168] + 44) = a3;
  *(uint *)(dword_221A400[168] + 48) = a4;
  *(uint *)(dword_221A400[168] + 52) = a5;
  *(uint *)(dword_221A400[168] + 56) = a6;
  *(uint *)(dword_221A400[168] + 60) = a7;
  *(uint *)(dword_221A400[168] + 64) = a8;
  *(uchar *)(dword_221A400[168] + 29) = 0;
  *(uchar *)(dword_221A400[168] + 30) = 0;
  *(uchar *)(dword_221A400[168] + 31) = 0;
  *(uchar *)(dword_221A400[168] + 28) = 0;
  *(uint *)dword_221A400[168] = 1;
  if ( !*(uint *)(dword_221A400[168] + 24) )
    ++*(uchar *)(dword_221A400[168] + 31);
  result = *(uchar *)(dword_221A400[168] + 31) + 1;
  *(uchar *)(dword_221A400[168] + 31) = result;
  return result;
}

//----- (021DB710) --------------------------------------------------------
int __fastcall Function_21db710(int result, int a2)
{
  int v2;
  bool v3;
  int v4;
  bool v5;

  v2 = result;
  v3 = dword_221A400[168] == 0;
  if ( dword_221A400[168] )
    v3 = result == 0;
  if ( !v3 )
  {
    Function_21d7724(result, a2);
    v4 = *(uint *)dword_221A400[168];
    v5 = *(uint *)dword_221A400[168] == 0;
    if ( *(uint *)dword_221A400[168] )
      v5 = v4 == 2;
    if ( !v5 )
      v4 = (*(int (__fastcall **)(int, uint, uint))(dword_221A400[168] + 44))(
             v2,
             *(uchar *)(dword_221A400[168] + 29),
             *(uint *)(dword_221A400[168] + 48));
    result = Function_21dbb50(v4);
  }
  return result;
}

//----- (021DB768) --------------------------------------------------------
int __fastcall Function_21db768(int result, uint *a2)
{
  if ( *(uint *)(dword_221A400[168] + 24) )
    result = Function_21eb4f8(result, *a2, 0, 0, Function_21dc3d0, 0);
  return result;
}

//----- (021DB7B4) --------------------------------------------------------
int __fastcall Function_21db7b4(int a1, int a2)
{
  uint *v2;
  int v3;

  v2 = (uint *)a2;
  v3 = a1;
  if ( Function_20d8d14(*(int **)(a2 + 8), "I have authorized your request to add me to your list") )
    return 0;
  Function_21eb4f8(v3, *v2, 0, 0, Function_21dc580, 0);
  return 1;
}

//----- (021DB810) --------------------------------------------------------
int __fastcall Function_21db810(int a1, uint *a2)
{
  int v2;
  uint *v3;
  int result;
  int v5;
  char v6;
  int v7;
  char v8;

  v2 = a1;
  v3 = a2;
  result = *(uint *)(dword_221A400[168] + 52);
  if ( result )
  {
    v5 = Function_21db8dc(*a2);
    result = -1;
    if ( v5 != -1 )
    {
      Function_21eb8d8(v2, v3[2], &v6);
      result = (*(int (__fastcall **)(int, uint, char *, uint))(dword_221A400[168] + 52))(
                 v5,
                 (uchar)v7,
                 &v8,
                 *(uint *)(dword_221A400[168] + 56));
    }
  }
  return result;
}

//----- (021DB894) --------------------------------------------------------
int __fastcall Function_21db894(int a1)
{
  int v1;
  int v2;
  int result;
  int v4;
  bool v5;

  v1 = a1;
  v2 = *(uint *)(dword_221A400[168] + 24);
  if ( !v2 )
    return 0;
  v4 = Function_21da87c();
  result = Function_20a4698(v4, (uint *)(v2 + 12 * v1));
  v5 = result == 0;
  if ( result )
    v5 = result == -1;
  if ( v5 )
    result = 0;
  return result;
}

//----- (021DB8DC) --------------------------------------------------------
int __fastcall Function_21db8dc(int a1)
{
  int v1;
  bool v2;
  int v4;

  v1 = a1;
  v2 = dword_221A400[168] == 0;
  if ( dword_221A400[168] )
    v2 = a1 == 0;
  if ( v2 )
    return -1;
  v4 = 0;
  if ( *(uint *)(dword_221A400[168] + 20) <= 0 )
    return -1;
  while ( v1 != Function_21db894(v4) )
  {
    if ( ++v4 >= *(uint *)(dword_221A400[168] + 20) )
      return -1;
  }
  return v4;
}

//----- (021DB940) --------------------------------------------------------
int *Function_21db940()
{
  int *result;
  int v1;

  result = &dword_221A400[166];
  if ( dword_221A400[168] )
  {
    *(uint *)(dword_221A400[168] + 8) = 0;
    result = (int *)OS_GetTick();
    *(uint *)(dword_221A400[168] + 12) = result;
    *(uint *)(dword_221A400[168] + 16) = v1;
  }
  return result;
}

//----- (021DB978) --------------------------------------------------------
int __fastcall Function_21db978(int a1, int a2, int a3)
{
  int v3;
  int v4;
  int v5;

  v3 = a1;
  v4 = a2;
  v5 = a3;
  if ( !dword_221A400[168] || !Function_21db144() )
    return 0;
  if ( v3 == -1 )
    v3 = *(uint *)(**(uint **)(dword_221A400[168] + 4) + 532);
  if ( !v4 )
    v4 = **(uint **)(dword_221A400[168] + 4) + 536;
  if ( !v5 )
    v5 = **(uint **)(dword_221A400[168] + 4) + 792;
  return Function_21ebb2c(*(uint *)(dword_221A400[168] + 4), v3, v4, v5);
}

//----- (021DBA28) --------------------------------------------------------
int __fastcall Function_21dba28(int a1)
{
  int v1;
  void (*v2)(void);
  bool v3;
  int v4;
  int result;
  int v6;
  int v7;
  char v8;

  v1 = a1;
  v2 = *(void (**)(void))(dword_221A400[168] + 68);
  v3 = v2 == 0;
  if ( v2 )
    v3 = *(uint *)dword_221A400[168] == 1;
  if ( !v3 )
  {
    v4 = *(uint *)(dword_221A400[168] + 72);
    v2();
  }
  result = *(uint *)(dword_221A400[168] + 52);
  if ( result )
  {
    v6 = *(uint *)(dword_221A400[168] + 24) + 12 * v1;
    v7 = Function_21db170();
    result = (*(int (__fastcall **)(int, int, char *, uint))(dword_221A400[168] + 52))(
               v1,
               v7,
               &v8,
               *(uint *)(dword_221A400[168] + 56));
  }
  return result;
}

//----- (021DBAB0) --------------------------------------------------------
int *Function_21dbab0()
{
  int *result;

  result = &dword_221A400[166];
  dword_221A400[168] = 0;
  return result;
}

//----- (021DBAC4) --------------------------------------------------------
int Function_21dbac4()
{
  int v0;
  long long v1;
  uint v2;
  bool v3;
  int v4;
  int v5;

  v0 = 0;
  LODWORD(v1) = OS_GetTick();
  HIDWORD(v1) = (v1 - *(ull *)(dword_221A400[168] + 12)) >> 26;
  ll_udiv();
  v3 = 1;
  if ( !v4 )
    v3 = v2 >= 0x12C;
  if ( v3 )
  {
    ++*(uint *)(dword_221A400[168] + 8);
    v0 = Function_21eb274(*(uint *)(dword_221A400[168] + 4));
    *(uint *)(dword_221A400[168] + 12) = OS_GetTick();
    *(uint *)(dword_221A400[168] + 16) = v5;
  }
  return v0;
}

//----- (021DBB50) --------------------------------------------------------
int *Function_21dbb50()
{
  int *result;

  result = &dword_221A400[166];
  if ( dword_221A400[168] )
  {
    *(uint *)dword_221A400[168] = 0;
    *(uchar *)(dword_221A400[168] + 30) = 0;
    result = (int *)dword_221A400[168];
    *(uchar *)(dword_221A400[168] + 31) = 0;
  }
  return result;
}

//----- (021DBB80) --------------------------------------------------------
int __fastcall Function_21dbb80(int a1, int a2)
{
  int v2;
  int v3;
  int v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int result;
  int v11;
  int v12;
  int v13;
  int v14;
  int v15;
  int i;
  int v17;
  char v18;
  int v19;

  v2 = a1;
  v3 = a2;
  if ( !*(uchar *)(dword_221A400[168] + 30) )
  {
    v4 = Function_21eb8a8(*(uint *)(dword_221A400[168] + 4), &v17);
    Function_21dc120(v4);
    for ( i = 0; i < v17; ++i )
    {
      v5 = Function_21eb8d8(*(uint *)(dword_221A400[168] + 4), i, &v19);
      Function_21dc120(v5);
      v6 = 0;
      if ( v3 > 0 )
      {
        while ( 1 )
        {
          v7 = Function_21db894(v6);
          if ( v19 == v7 )
            break;
          if ( ++v6 >= v3 )
            goto LABEL_8;
        }
        v8 = 12 * v6;
        if ( !Function_20a4028((uint *)(v2 + 12 * v6)) )
        {
          Function_20a47dc((int *)(v2 + v8), v19);
          Function_20a40a8((int *)(v2 + v8));
          *(uchar *)(dword_221A400[168] + 29) = 1;
        }
      }
LABEL_8:
      if ( v6 == v3 )
      {
        v9 = Function_21ebad4(*(uint *)(dword_221A400[168] + 4), v19);
        Function_21dc120(v9);
        --v17;
        --i;
      }
    }
    *(uchar *)(dword_221A400[168] + 30) = 1;
  }
  result = *(uchar *)(dword_221A400[168] + 28);
  if ( result >= v3 )
    return result;
  while ( 1 )
  {
    v11 = Function_21db894(result);
    if ( v11 )
    {
      if ( !Function_21dbe7c(v2, *(uchar *)(dword_221A400[168] + 28), v11) )
      {
        v12 = Function_21eba18(*(uint *)(dword_221A400[168] + 4), v11, &i);
        Function_21dc120(v12);
        if ( i == -1 )
          Function_21dc030(v11);
      }
      goto LABEL_19;
    }
    v13 = Function_21da87c();
    if ( Function_20a4698(v13, (uint *)(v2 + 12 * *(uchar *)(dword_221A400[168] + 28))) == -1 )
      break;
LABEL_19:
    result = (uchar)++*(uchar *)(dword_221A400[168] + 28);
    if ( result >= v3 )
      return result;
  }
  v14 = Function_21da87c();
  Function_20a4810(v14, (int *)(v2 + 12 * *(uchar *)(dword_221A400[168] + 28)), &v18);
  v15 = *(uchar *)(dword_221A400[168] + 28);
  Function_21eb430(*(uint *)(dword_221A400[168] + 4));
  result = dword_221A400[168];
  *(uchar *)(dword_221A400[168] + 30) = 2;
  return result;
}

//----- (021DBDEC) --------------------------------------------------------
int Function_21dbdec()
{
  int result;

  (*(void (__fastcall **)(uint, uint, uint))(dword_221A400[168] + 44))(
    0,
    *(uchar *)(dword_221A400[168] + 29),
    *(uint *)(dword_221A400[168] + 48));
  result = dword_221A400[168];
  *(uint *)dword_221A400[168] = 2;
  return result;
}

//----- (021DBE24) --------------------------------------------------------
int __fastcall Function_21dbe24(int result, int a2, int a3)
{
  int v3;
  int v4;
  int (__fastcall *v5)(int, int, uint);

  v3 = a2;
  v4 = a3;
  if ( dword_221A400[168] )
  {
    MI_CpuFill8((ushort *)(result + 12 * a2), 0, 0xCu);
    result = dword_221A400[168];
    v5 = *(int (__fastcall **)(int, int, uint))(dword_221A400[168] + 60);
    if ( v5 )
      result = v5(v3, v4, *(uint *)(dword_221A400[168] + 64));
  }
  return result;
}

//----- (021DBE7C) --------------------------------------------------------
int __fastcall Function_21dbe7c(int a1, int a2, int a3)
{
  int v3;
  int v4;
  int v5;
  int v6;
  int v7;
  int result;

  v3 = a2;
  v4 = a1;
  v5 = a3;
  v6 = 0;
  if ( a2 <= 0 )
    return 0;
  while ( 1 )
  {
    v7 = Function_21db894(v6);
    if ( v7 )
    {
      if ( v7 == v5 )
        break;
    }
    if ( ++v6 >= v3 )
      return 0;
  }
  if ( !Function_20a4028((uint *)(v4 + 12 * v3)) || Function_20a4028((uint *)(v4 + 12 * v6)) )
    Function_21dbe24(v4, v3, v6);
  else
    Function_21dbe24(v4, v6, v3);
  result = 1;
  *(uchar *)(dword_221A400[168] + 29) = 1;
  return result;
}

//----- (021DBF28) --------------------------------------------------------
int __fastcall Function_21dbf28(uint *a1, int a2, int a3)
{
  int v3;
  int v4;
  int v5;
  uint *v6;
  int *v7;
  int v8;
  int v9;
  uint *v10;
  int v12;
  int v13;

  v3 = a2;
  v4 = (int)a1;
  v12 = a3;
  v13 = -1;
  v5 = 0;
  if ( a2 > 0 )
  {
    v6 = a1;
    v7 = a1;
    do
    {
      v8 = Function_21db894(v5);
      if ( v8 )
      {
        v9 = v5 + 1;
        if ( v8 == v12 )
          v13 = v5;
        if ( v9 < v3 )
        {
          v10 = (uint *)(v4 + 12 * v9);
          do
          {
            if ( v8 == Function_21db894(v9) )
            {
              if ( Function_20a4060(v6) == 2 && Function_20a4060(v10) == 3 )
                Function_20a47dc(v7, v8);
              if ( Function_20a4028(v10) )
                Function_20a40a8(v7);
              Function_21dbe24(v4, v9, v5);
              *(uchar *)(dword_221A400[168] + 29) = 1;
            }
            ++v9;
            v10 += 3;
          }
          while ( v9 < v3 );
        }
      }
      ++v5;
      v6 += 3;
      v7 += 3;
    }
    while ( v5 < v3 );
  }
  return v13;
}

//----- (021DC030) --------------------------------------------------------
int __fastcall Function_21dc030(int a1)
{
  int v1;

  v1 = Function_21eb624(*(uint *)(dword_221A400[168] + 4), a1, &dword_22174C8);
  Function_21dc120(v1);
  return v1;
}

//----- (021DC064) --------------------------------------------------------
BOOL __fastcall Function_21dc064(uint *a1, int a2)
{
  uint *v2;
  int v3;
  int v5;
  int v6;
  int v7;
  int v8;

  v2 = a1;
  v3 = a2;
  v8 = 0;
  if ( !dword_221A400[168] || !Function_21db144() )
    return 0;
  v5 = Function_21da87c();
  v6 = Function_20a4698(v5, v2);
  v7 = v6;
  if ( v6 > 0 && Function_21eba18(*(uint *)(dword_221A400[168] + 4), v6, &v8) )
    return 0;
  if ( v7 > 0 && v8 != -1 )
    return Function_21eb8d8(*(uint *)(dword_221A400[168] + 4), v8, v3) == 0;
  return 0;
}

//----- (021DC120) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x21DC17C for case 0"

//----- (021DC13C) --------------------------------------------------------
void Function_21dc13c()
{
  JUMPOUT(&loc_21DC17C);
}

//----- (021DC140) --------------------------------------------------------
void Function_21dc140()
{
  JUMPOUT(&loc_21DC150);
}

//----- (021DC144) --------------------------------------------------------
void Function_21dc144()
{
  JUMPOUT(&loc_21DC15C);
}

//----- (021DC148) --------------------------------------------------------
void Function_21dc148()
{
  JUMPOUT(&loc_21DC168);
}

//----- (021DC14C) --------------------------------------------------------
void Function_21dc14c()
{
  int v0;

  Function_21db710(6, -71020);
  JUMPOUT(__CS__, v0);
}

//----- (021DC194) --------------------------------------------------------
int __fastcall Function_21dc194(int a1, uint *a2, int a3, int a4)
{
  uint *v4;
  int v5;
  int v6;
  int v7;
  int result;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;
  int v14;
  int v15;

  v15 = a4;
  v4 = a2;
  v5 = a1;
  v6 = a3;
  if ( !*a2 && a2[1] && (v7 = 12 * a3, Function_20a4060((uint *)(*(uint *)(dword_221A400[168] + 24) + 12 * a3))) )
  {
    result = *(uint *)dword_221A400[168];
    if ( *(uint *)dword_221A400[168] == 1 )
    {
      v9 = v4[1];
      v10 = 0;
      if ( v9 <= 0 )
      {
LABEL_10:
        v12 = 0;
        if ( v9 <= 0 )
        {
LABEL_16:
          result = v4[2];
          if ( result != 1536 )
          {
            ++*(uchar *)(dword_221A400[168] + 28);
            result = dword_221A400[168];
            *(uchar *)(dword_221A400[168] + 30) = 1;
          }
        }
        else
        {
          v13 = 0;
          while ( 1 )
          {
            v14 = Function_21eba18(v5, *(uint *)(v4[3] + v13), &v15);
            Function_21dc120(v14);
            if ( v15 != -1 )
              break;
            Function_21dc030(*(uint *)(v4[3] + v13));
            ++v12;
            v13 += 172;
            if ( v12 >= v4[1] )
              goto LABEL_16;
          }
          Function_20a47dc((int *)(*(uint *)(dword_221A400[168] + 24) + v7), *(uint *)v4[3]);
          Function_20a40a8((int *)(*(uint *)(dword_221A400[168] + 24) + v7));
          Function_21dba28(v6);
          ++*(uchar *)(dword_221A400[168] + 28);
          *(uchar *)(dword_221A400[168] + 30) = 1;
          v4[2] = 1537;
          result = dword_221A400[168];
          *(uchar *)(dword_221A400[168] + 29) = 1;
        }
      }
      else
      {
        v11 = 0;
        while ( !Function_21dbe7c(*(uint *)(dword_221A400[168] + 24), v6, *(uint *)(v4[3] + v11)) )
        {
          v9 = v4[1];
          ++v10;
          v11 += 172;
          if ( v10 >= v9 )
            goto LABEL_10;
        }
        ++*(uchar *)(dword_221A400[168] + 28);
        result = dword_221A400[168];
        *(uchar *)(dword_221A400[168] + 30) = 1;
        v4[2] = 1537;
      }
    }
  }
  else if ( *v4 )
  {
    result = Function_21dc120(*v4);
  }
  else if ( *(uint *)dword_221A400[168] == 1
         || (result = Function_20a4060((uint *)(*(uint *)(dword_221A400[168] + 24) + 12 * v6))) == 0 )
  {
    ++*(uchar *)(dword_221A400[168] + 28);
    result = dword_221A400[168];
    *(uchar *)(dword_221A400[168] + 30) = 1;
  }
  return result;
}

//----- (021DC3D0) --------------------------------------------------------
int __fastcall Function_21dc3d0(int result, uint *a2, int a3, int a4)
{
  uint *v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;
  char v14;
  int v15[5];
  int v16;

  v16 = a4;
  v4 = a2;
  v5 = result;
  v6 = 0;
  if ( !*a2 )
  {
    v7 = 0;
    v8 = dword_221A400[168];
    if ( *(uint *)(dword_221A400[168] + 20) > 0 )
    {
      v9 = 0;
      do
      {
        if ( Function_20a4060((uint *)(*(uint *)(v8 + 24) + v9)) == 1 )
        {
          v10 = Function_21da87c();
          Function_20a4810(v10, (int *)(*(uint *)(dword_221A400[168] + 24) + v9), v15);
          if ( !Function_20d8d14(v15, (uint *)((char *)v4 + 142)) )
          {
            Function_21eb798(v5, v4[1]);
            Function_20a47dc((int *)(*(uint *)(dword_221A400[168] + 24) + v9), v4[1]);
            v6 = 1;
          }
        }
        else if ( Function_20a4060((uint *)(*(uint *)(dword_221A400[168] + 24) + v9)) == 3
               || Function_20a4060((uint *)(*(uint *)(dword_221A400[168] + 24) + v9)) == 2 )
        {
          v11 = *(uint *)(Function_21da87c() + 36);
          OS_SNPrintf(&v14, 5, "%c%c%c%c", HIBYTE(v11), BYTE2(v11), BYTE1(v11), (uchar)v11);
          v12 = v4[1];
          v13 = Function_21da87c();
          if ( v12 == Function_20a4698(v13, (uint *)(*(uint *)(dword_221A400[168] + 24) + v9))
            && !Function_20d5190((uchar *)&v14, (uchar *)v4 + 151, 4) )
          {
            Function_21eb798(v5, v12);
            v6 = 1;
          }
        }
        v8 = dword_221A400[168];
        v9 += 12;
        ++v7;
      }
      while ( v7 < *(uint *)(dword_221A400[168] + 20) );
    }
    if ( v6 )
      result = Function_21dc030(v4[1]);
    else
      result = Function_21eb7e8(v5, v4[1]);
  }
  return result;
}

//----- (021DC580) --------------------------------------------------------
int __fastcall Function_21dc580(int a1, int *a2, int a3, int a4)
{
  int *v4;
  int result;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;
  int v14[6];
  int v15;

  v15 = a4;
  v4 = a2;
  result = *a2;
  v6 = 0;
  v7 = 0;
  if ( !*a2 )
  {
    v8 = 0;
    result = dword_221A400[168];
    v9 = *(uint *)(dword_221A400[168] + 20);
    if ( v9 > 0 )
    {
      v10 = 0;
      do
      {
        if ( Function_20a4060((uint *)(*(uint *)(result + 24) + v10)) == 1 )
        {
          v11 = Function_21da87c();
          Function_20a4810(v11, (int *)(*(uint *)(dword_221A400[168] + 24) + v10), v14);
          if ( !Function_20d8d14(v14, (int *)((char *)v4 + 142)) )
          {
            Function_20a47dc((int *)(*(uint *)(dword_221A400[168] + 24) + v10), v4[1]);
            Function_20a40a8((int *)(*(uint *)(dword_221A400[168] + 24) + v10));
            v6 = 1;
          }
        }
        else if ( Function_20a4060((uint *)(*(uint *)(dword_221A400[168] + 24) + v10)) == 3
               || Function_20a4060((uint *)(*(uint *)(dword_221A400[168] + 24) + v10)) == 2 )
        {
          v12 = Function_21da87c();
          if ( v4[1] == Function_20a4698(v12, (uint *)(*(uint *)(dword_221A400[168] + 24) + v10)) )
          {
            if ( Function_20a4028((uint *)(*(uint *)(dword_221A400[168] + 24) + v10)) == 1 )
            {
              v7 = 1;
            }
            else
            {
              Function_20a47dc((int *)(*(uint *)(dword_221A400[168] + 24) + v10), v4[1]);
              Function_20a40a8((int *)(*(uint *)(dword_221A400[168] + 24) + v10));
              v6 = 1;
            }
          }
        }
        result = dword_221A400[168];
        ++v8;
        v9 = *(uint *)(dword_221A400[168] + 20);
        v10 += 12;
      }
      while ( v8 < v9 );
    }
    if ( v6 )
    {
      v13 = Function_21dbf28(*(uint **)(result + 24), v9, v4[1]);
      if ( !v7 )
        Function_21dba28(v13);
      result = dword_221A400[168];
      *(uchar *)(dword_221A400[168] + 29) = 1;
    }
  }
  return result;
}

//----- (021DC720) --------------------------------------------------------
int Function_21dc720()
{
  return *(uint *)(dword_221A400[168] + 32);
}

//----- (021DC734) --------------------------------------------------------
int *Function_21dc734()
{
  int *result;

  result = &dword_221A400[170];
  if ( !dword_221A400[174] )
    return (int *)Function_21fb018();
  dword_221A400[173] = 1;
  return result;
}

//----- (021DC75C) --------------------------------------------------------
int Function_21dc75c()
{
  if ( !Function_21dc77c() )
    return 0;
  Function_21e2080();
  return 1;
}

//----- (021DC77C) --------------------------------------------------------
int Function_21dc77c()
{
  if ( Function_21d7708() )
    return 0;
  if ( Function_21e4a34() && Function_21d9a40() == 5 && !*(uchar *)(Function_21e4a34() + 425) )
    return 1;
  return 0;
}

//----- (021DC7C8) --------------------------------------------------------
int __fastcall Function_21dc7c8(void (__fastcall *a1)(int), int a2)
{
  void (__fastcall *v2)(int);
  int v3;
  int v5;

  v2 = a1;
  v3 = a2;
  if ( Function_21d7708()
    || !Function_21e4a34()
    || *(uchar *)(Function_21e4a34() + 21) != 2
    || Function_21d9a40() != 5 && Function_21d9a40() != 6 )
  {
    return 0;
  }
  if ( *(uint *)(Function_21e4a34() + 416) == 10 )
  {
    v5 = Function_21e4a34();
    *(uchar *)(v5 + 22) = *(uchar *)(Function_21e4a34() + 13);
    Function_21deb94();
    if ( v2 )
      v2(v3);
  }
  else
  {
    *(uint *)(Function_21e4a34() + 1148) = v2;
    *(uint *)(Function_21e4a34() + 1152) = v3;
    *(uchar *)(Function_21e4a34() + 430) = 1;
  }
  return 1;
}

//----- (021DC87C) --------------------------------------------------------
int __fastcall Function_21dc87c(uint a1, char *a2, int a3)
{
  bool v3;
  char *v4;
  int v5;
  int v6;
  int result;
  int v8;
  int *v9;
  int v10;
  int v11;
  int v12;
  uchar *v13;

  v4 = a2;
  v3 = a2 == 0;
  v5 = a3;
  v6 = a1;
  if ( a2 )
    v3 = a3 == 0;
  if ( v3 )
    return 0;
  if ( a1 >= 0x64 && (v8 = 3 * (a1 - 100), LOBYTE(dword_221A400[v8 + 178])) )
  {
    v9 = (int *)dword_221A400[v8 + 179];
    if ( v9 && Function_20d8d14(v9, a2) )
      return 0;
  }
  else
  {
    v6 = Function_21e2f70();
    if ( !v6 )
      return 0;
  }
  v10 = 3 * (v6 - 100);
  LOBYTE(dword_221A400[v10 + 178]) = v6;
  *(uchar *)(v10 * 4 + 35759817) = 1;
  *(ushort *)(v10 * 4 + 35759818) = 0;
  v11 = dword_221A400[v10 + 179];
  if ( v11 )
    Function_4_21d77c4(4, v11);
  v12 = strlen(v4);
  v13 = (uchar *)Function_4_21d7780(4, v12 + 1);
  dword_221A400[v10 + 179] = (int)v13;
  if ( v13 )
  {
    Function_20d8b7c(v13, (int *)v4);
    dword_221A400[v10 + 180] = v5;
    Function_21fd4e0(v6, dword_221A400[v10 + 179]);
    result = v6;
  }
  else
  {
    Function_21de3bc(9, -80001);
    result = 0;
  }
  return result;
}

//----- (021DC9AC) --------------------------------------------------------
int __fastcall Function_21dc9ac(int a1, int a2)
{
  int v2;
  int v3;
  int result;
  uchar *v5;
  int v6;
  int v7;

  v2 = a1;
  v3 = a2;
  if ( !Function_21e4a34() )
    return 1;
  if ( !v3 )
    return 3;
  if ( v2 )
  {
    if ( v2 == 1 )
    {
      LOBYTE(dword_221A400[177]) = *(uint *)v3 != 0;
      result = 0;
      LOWORD(dword_221A400[177]) = LOBYTE(dword_221A400[177]);
    }
    else
    {
      result = 2;
    }
  }
  else if ( *(uint *)(Function_21e4a34() + 416) == 19 )
  {
    result = 1;
  }
  else if ( *(uchar *)v3 && *(uchar *)(v3 + 1) <= 1u )
  {
    result = 3;
  }
  else
  {
    v5 = (uchar *)dword_221A400[170];
    if ( dword_221A400[170] || (v5 = (uchar *)Function_4_21d7780(4, 32), (dword_221A400[170] = (int)v5) != 0) )
    {
      *v5 = *(uchar *)v3;
      *(uchar *)(dword_221A400[170] + 1) = *(uchar *)(v3 + 1);
      *(uchar *)(dword_221A400[170] + 2) = 0;
      *(uchar *)(dword_221A400[170] + 3) = 0;
      *(uint *)(dword_221A400[170] + 4) = *(uint *)(v3 + 4);
      *(uint *)(dword_221A400[170] + 8) = 0;
      *(uint *)(dword_221A400[170] + 12) = 0;
      *(uint *)(dword_221A400[170] + 16) = OS_GetTick();
      *(uint *)(dword_221A400[170] + 20) = v6;
      *(uint *)(dword_221A400[170] + 24) = OS_GetTick();
      *(uint *)(dword_221A400[170] + 28) = v7;
      result = 0;
    }
    else
    {
      result = 4;
    }
  }
  return result;
}

//----- (021DCAF8) --------------------------------------------------------
int __fastcall Function_21dcaf8(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8)
{
  int v8;
  int v9;
  int v10;
  int v11;
  uint *v12;
  int v13;
  int v14;
  int v15;
  int v16;
  int v17;
  int v18;
  int v19;
  int v20;
  int v21;
  int v22;
  int v23;
  int v24;
  int v25;
  int v26;
  int v27;
  int v28;
  int v29;
  ushort *v30;
  int v31;
  int v32;
  int v33;
  int v34;
  int v35;
  int v36;
  int v37;
  int v38;

  v8 = a2;
  v9 = a3;
  v10 = a4;
  v11 = Function_21e4a24();
  v12 = (uint *)Function_21e4a34(v11);
  *v12 = v8;
  v13 = Function_21e4a34(v12);
  *(uint *)(v13 + 4) = v9;
  v14 = Function_21e4a34(v13);
  *(uint *)(v14 + 8) = v10;
  v15 = Function_21e4a34(v14);
  *(uint *)(v15 + 16) = 0;
  v16 = Function_21e4a34(v15);
  *(uint *)(v16 + 28) = 0;
  v17 = Function_21e4a34(v16);
  *(ushort *)(v17 + 26) = 0;
  *(uint *)(Function_21e4a34(v17) + 228) = 0;
  v18 = Function_21e4a44(0);
  v19 = Function_21e4a34(v18);
  *(uchar *)(v19 + 15) = 0;
  v20 = Function_21e4a34(v19);
  *(uchar *)(v20 + 25) = 0;
  v21 = Function_21e4a34(v20);
  *(uchar *)(v21 + 431) = 0;
  v22 = Function_21e4a34(v21) + 256;
  *(ushort *)(v22 + 182) = 0;
  v23 = Function_21e4a34(v22);
  *(uint *)(v23 + 476) = 0;
  v24 = Function_21e4a34(v23);
  *(uint *)(v24 + 512) = 0;
  v25 = Function_21e4a34(v24);
  *(uint *)(v25 + 756) = a5;
  v26 = Function_21e4a34(v25);
  *(uint *)(v26 + 760) = a6;
  v27 = Function_21e4a34(v26);
  *(uint *)(v27 + 764) = a7;
  v28 = Function_21e4a34(v27);
  *(uint *)(v28 + 768) = a8;
  v29 = Function_21e4a34(v28);
  v30 = MI_CpuFill8((ushort *)(v29 + 772), 0, 0x40u);
  v31 = Function_21e4a34(v30);
  *(uint *)(v31 + 836) = 0;
  v32 = Function_21e4a34(v31);
  *(uint *)(v32 + 1124) = 0;
  v33 = Function_21e4a34(v32);
  *(uint *)(v33 + 1128) = 0;
  v34 = Function_21e4a34(v33);
  *(uint *)(v34 + 1140) = 0;
  v35 = Function_21e4a34(v34);
  *(uint *)(v35 + 1144) = 0;
  v36 = Function_21e4a34(v35);
  *(uint *)(v36 + 1148) = 0;
  v37 = Function_21e4a34(v36);
  *(uint *)(v37 + 1152) = 0;
  v38 = Function_21e4a34(v37);
  *(uint *)(v38 + 372) = 0;
  *(uint *)(v38 + 376) = 0;
  Function_21e2fb0();
  dword_221A400[177] = 0;
  return Function_21decf4();
}

//----- (021DCC74) --------------------------------------------------------
int __fastcall Function_21dcc74(int a1)
{
  int v1;
  int v3;
  int v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;
  int v14;
  int v15;
  int v16;
  int v17;
  int v18;
  int v19;
  int v20;
  int v21;
  int v22;
  int v23;
  int v24;
  int v25;
  int v26;
  int v27;

  v1 = a1;
  if ( *(uint *)(Function_21e4a34(a1) + 16) )
    return 0;
  v3 = Function_21e4a34(0);
  *(uint *)(v3 + 512) = v1;
  v4 = 0;
  do
  {
    v5 = Function_21e4a34(v3);
    v6 = v5;
    v7 = Function_21e4a34(v5);
    v8 = Function_21f876c(**(uint **)(v7 + 4));
    v9 = v8;
    v10 = Function_21e4a34(v8);
    v11 = Function_21f8754(**(uint **)(v10 + 4));
    v12 = v11;
    v13 = Function_21e4a34(v11);
    v14 = v13;
    v15 = Function_21e4a34(v13);
    v3 = Function_21fbd94(
           v6 + 16,
           v9,
           v12,
           *(uint *)(v14 + 756),
           *(uint *)(v15 + 760),
           1,
           1,
           Function_21e41f0,
           Function_21e4338,
           Function_21e433c,
           Function_21e4340,
           Function_21e43e4,
           Function_21e43ec,
           0);
    v16 = v3;
    if ( !v3 )
      break;
    v17 = Function_21e4a34(v3);
    v18 = Function_21fc1f0(*(uint *)(v17 + 16));
    v3 = Function_21e4a34(v18);
    *(uint *)(v3 + 16) = 0;
    if ( v16 != 3 || v4 == 4 )
    {
      Function_21e3858(v16);
      return v16;
    }
    ++v4;
  }
  while ( v4 < 5 );
  v19 = Function_21e4a34(v3);
  *(uint *)(v19 + 28) = 0;
  v20 = Function_21e4a34(v19);
  *(ushort *)(v20 + 26) = 0;
  v21 = Function_21e4a34(v20);
  v22 = Function_21fbf88(*(uint *)(v21 + 16), Function_21e43f8);
  v23 = Function_21e4a34(v22);
  v24 = Function_21fbf58(*(uint *)(v23 + 16), Function_21e4418);
  v25 = Function_21e4a34(v24);
  v26 = Function_21fbf70(*(uint *)(v25 + 16), Function_21e44cc);
  v27 = Function_21e4a34(v26);
  Function_21fc194(*(uint *)(v27 + 16));
  return v16;
}

//----- (021DCE10) --------------------------------------------------------
int __fastcall Function_21dce10(int a1, int a2, int a3, int a4, int a5, int a6)
{
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  uint v13;
  int result;
  int v15;
  int v16;
  int v17;
  int v18;
  int v19;
  int v20;
  int v21;
  int v22;
  int v23;
  int v24;
  int v25;
  int v26;
  char v27;
  int v28;

  v28 = a4;
  v6 = a2;
  v7 = a1;
  v8 = a3;
  v9 = a4;
  if ( dword_221A400[172] )
  {
    Function_4_21d77c4(4, dword_221A400[172]);
    dword_221A400[172] = 0;
  }
  if ( v6 )
  {
    v10 = Function_21df3cc(&v27, -1, 32, 3);
    v11 = 256 - v10 - strlen(" and ()");
    v12 = Function_4_21d7780(4, v11);
    dword_221A400[172] = v12;
    if ( !v12 )
      return Function_21de3bc(9, -80001);
    MI_CpuCopy8(v6, v12, v11, v13);
    *(uchar *)(dword_221A400[172] + v11 - 1) = 0;
  }
  v15 = Function_21df08c(0, v7, v8, v9);
  v16 = Function_21e4a34(v15);
  *(uint *)(v16 + 1140) = a5;
  *(uint *)(Function_21e4a34(v16) + 1144) = a6;
  v17 = Function_21e4a44(2);
  v18 = *(uint *)(Function_21e4a34(v17) + 228);
  if ( !v18 )
  {
    v19 = Function_21e4a34(0);
    v20 = Function_21e4a34(v19);
    v21 = Function_21e4a34(v20);
    v22 = Function_21e4a34(v21);
    v18 = Function_21feae8(*(uint *)(v20 + 756), *(uint *)(v21 + 756), *(uint *)(v22 + 760));
    *(uint *)(v19 + 228) = v18;
  }
  if ( *(uint *)(Function_21e4a34(v18) + 228) || (result = Function_21e37c4(5)) == 0 )
  {
    v23 = Function_21db978(3, (int)&dword_22174E0, 0);
    v24 = Function_21e4a34(v23);
    v25 = Function_21df1d0(*(uint *)(v24 + 512));
    result = Function_21e37c4(v25);
    if ( !result )
    {
      if ( !*(uint *)(Function_21e4a34(0) + 16) )
      {
        v26 = Function_21e4a34(0);
        Function_21dcc74(*(uint *)(v26 + 512));
      }
      result = Function_21e32b4(0);
    }
  }
  return result;
}

//----- (021DCFFC) --------------------------------------------------------
int __fastcall Function_21dcffc(int a1, int a2, int a3, int a4, int a5)
{
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;
  int v14;
  int result;
  int v16;

  v5 = a4;
  v6 = Function_21df08c(2, a1, a2, a3);
  v7 = Function_21e4a34(v6);
  *(uint *)(v7 + 1132) = v5;
  v8 = Function_21e4a34(v7);
  *(uint *)(v8 + 1136) = a5;
  v9 = Function_21e4a34(v8);
  v10 = v9;
  v11 = *(uint *)(Function_21e4a34(v9) + 512);
  *(uint *)(v10 + 244) = v11;
  v12 = Function_21e4a34(v11);
  *(uint *)(v12 + 752) = 1;
  *(uchar *)(Function_21e4a34(v12) + 14) = 0;
  BYTE1(dword_221A400[177]) = 0;
  v13 = Function_21e4a44(10);
  v14 = Function_21deb94(v13);
  result = Function_21e3750(v14);
  if ( !result )
  {
    result = *(uint *)(Function_21e4a34(0) + 16);
    if ( !result )
    {
      v16 = *(uint *)(Function_21e4a34(0) + 512);
      result = Function_21dcc74(v16);
    }
  }
  return result;
}

//----- (021DD0A4) --------------------------------------------------------
int __fastcall Function_21dd0a4(int a1, int a2, int a3, int a4, int a5)
{
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;
  int v14;
  int v15;
  int v16;
  int v17;
  int v18;
  int v19;
  int result;
  int v21;
  int v22;
  int v23;
  int v24;

  v5 = a1;
  v6 = a4;
  v7 = Function_21df08c(3, 0, a2, a3);
  v8 = Function_21e4a34(v7);
  *(uint *)(v8 + 1132) = v6;
  v9 = Function_21e4a34(v8);
  *(uint *)(v9 + 1136) = a5;
  v10 = Function_21e4a34(v9);
  *(uchar *)(v10 + 23) = 1;
  v11 = Function_21e4a34(v10);
  v12 = v11;
  v13 = *(uint *)(Function_21e4a34(v11) + 512);
  *(uint *)(v12 + 32) = v13;
  *(uint *)(Function_21e4a34(v13) + 244) = v5;
  v14 = Function_21e4a44(4);
  v15 = *(uint *)(Function_21e4a34(v14) + 228);
  if ( !v15 )
  {
    v16 = Function_21e4a34(0);
    v17 = Function_21e4a34(v16);
    v18 = Function_21e4a34(v17);
    v19 = Function_21e4a34(v18);
    v15 = Function_21feae8(*(uint *)(v17 + 756), *(uint *)(v18 + 756), *(uint *)(v19 + 760));
    *(uint *)(v16 + 228) = v15;
  }
  if ( *(uint *)(Function_21e4a34(v15) + 228) || (result = Function_21e37c4(5)) == 0 )
  {
    v21 = Function_21db978(5, (int)&dword_22174E0, 0);
    result = Function_21e3750(v21);
    if ( !result )
    {
      result = *(uint *)(Function_21e4a34(0) + 16);
      if ( result || (v22 = Function_21e4a34(0), (result = Function_21dcc74(*(uint *)(v22 + 512))) == 0) )
      {
        v23 = Function_21e4a34(result);
        v24 = Function_21e1034(*(uint *)(v23 + 244), 0);
        result = Function_21e1008(v24);
      }
    }
  }
  return result;
}

//----- (021DD20C) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x21DD25C for case 0"

//----- (021DD25C) --------------------------------------------------------
// jumptable 021DD254 case 0
int __fastcall Function_21dd25c(int a1, int a2, int a3, int a4, int a5, int (*a6)(void))
{
  return a6();
}

//----- (021DD260) --------------------------------------------------------
void Function_21dd260()
{
  JUMPOUT(&loc_21DD28C);
}

//----- (021DD264) --------------------------------------------------------
void Function_21dd264()
{
  JUMPOUT(&loc_21DD28C);
}

//----- (021DD268) --------------------------------------------------------
void Function_21dd268()
{
  JUMPOUT(&loc_21DD28C);
}

//----- (021DD26C) --------------------------------------------------------
void Function_21dd26c()
{
  JUMPOUT(&loc_21DD28C);
}

//----- (021DD270) --------------------------------------------------------
// jumptable 021DD254 case 5
int __fastcall Function_21dd270(int a1, int a2, int a3, int a4, int a5, int (*a6)(void))
{
  return a6();
}

//----- (021DD274) --------------------------------------------------------
void Function_21dd274()
{
  JUMPOUT(&loc_21DD28C);
}

//----- (021DD278) --------------------------------------------------------
// jumptable 021DD254 case 7
int __fastcall Function_21dd278(int a1, int a2, int a3, int a4, int a5, int (*a6)(void))
{
  return a6();
}

//----- (021DD27C) --------------------------------------------------------
// jumptable 021DD254 case 8
int __fastcall Function_21dd27c(int a1, int a2, int a3, int a4, int a5, int (*a6)(void))
{
  return a6();
}

//----- (021DD280) --------------------------------------------------------
// jumptable 021DD254 case 9
int __fastcall Function_21dd280(int a1, int a2, int a3, int a4, int a5, int (*a6)(void))
{
  return a6();
}

//----- (021DD284) --------------------------------------------------------
// jumptable 021DD254 case 10
int __fastcall Function_21dd284(int a1, int a2, int a3, int a4, int a5, int (*a6)(void))
{
  return a6();
}

//----- (021DD288) --------------------------------------------------------
void __fastcall Function_21dd288(int a1)
{
  int v1;
  int v2;

  v1 = Function_21e4a34(a1);
  Function_21fc194(*(uint *)(v1 + 16));
  JUMPOUT(__CS__, v2);
}

//----- (021DD2BC) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x21DDA64 for case 0"

//----- (021DD360) --------------------------------------------------------
void Function_21dd360()
{
  JUMPOUT(&loc_21DDA64);
}

//----- (021DD364) --------------------------------------------------------
void Function_21dd364()
{
  JUMPOUT(&loc_21DD96C);
}

//----- (021DD368) --------------------------------------------------------
void Function_21dd368()
{
  JUMPOUT(&loc_21DD514);
}

//----- (021DD36C) --------------------------------------------------------
void Function_21dd36c()
{
  JUMPOUT(&loc_21DD514);
}

//----- (021DD370) --------------------------------------------------------
void Function_21dd370()
{
  JUMPOUT(&loc_21DD398);
}

//----- (021DD374) --------------------------------------------------------
void Function_21dd374()
{
  JUMPOUT(&loc_21DD514);
}

//----- (021DD378) --------------------------------------------------------
void Function_21dd378()
{
  JUMPOUT(&loc_21DDA64);
}

//----- (021DD37C) --------------------------------------------------------
void Function_21dd37c()
{
  JUMPOUT(&loc_21DD5D4);
}

//----- (021DD380) --------------------------------------------------------
void Function_21dd380()
{
  JUMPOUT(&loc_21DDA64);
}

//----- (021DD384) --------------------------------------------------------
void Function_21dd384()
{
  JUMPOUT(&loc_21DDA64);
}

//----- (021DD388) --------------------------------------------------------
void Function_21dd388()
{
  JUMPOUT(&loc_21DDA64);
}

//----- (021DD38C) --------------------------------------------------------
void Function_21dd38c()
{
  JUMPOUT(&loc_21DD758);
}

//----- (021DD390) --------------------------------------------------------
void Function_21dd390()
{
  JUMPOUT(&loc_21DDA64);
}

//----- (021DD394) --------------------------------------------------------
void __fastcall Function_21dd394(int a1)
{
  uint v1;
  int v2;
  int v3;
  int v4;
  bool v5;
  bool v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;
  int v14;
  int v15;
  int v16;
  int v17;
  int v18;
  int v19;
  int v20;
  int v21;
  long long v22;
  int v23;
  int v24;
  bool v25;
  bool v26;
  ull v27;
  int v28;
  int v29;
  int v30;
  int v31;
  int v32;
  ull v33;
  ull v34;
  int v35;
  int *v36;
  int v37;
  int v38;
  int v39;
  int v40;
  uint v41;
  int v42;
  bool v43;
  bool v44;
  int v45;
  int v46;
  int v47;
  int v48;
  int v49;
  int v50;
  int v51;
  int v52;
  int v53;
  int v54;
  int v55;
  int v56;

  v1 = *(uchar *)(Function_21e4a34(a1) + 972);
  if ( v1 == 8 )
  {
    v2 = OS_GetTick();
    v3 = *(uint *)(Function_21e4a34(v2) + 1116);
    ll_udiv();
    v5 = 1;
    v6 = v4 == 0;
    if ( !v4 )
    {
      v5 = v1 >= 0x7530;
      v6 = v1 == 30000;
    }
    if ( !v6 && v5 )
    {
      v7 = Function_21e4a34(v1);
      ++*(uchar *)(v7 + 973);
      if ( *(uchar *)(Function_21e4a34(v7) + 973) )
      {
        v8 = Function_21de39c();
        if ( *(uchar *)(Function_21e4a34(v8) + 21) == 2 )
        {
          v9 = Function_21e4a34(2);
          v10 = v9;
          v11 = Function_21e4a34(v9);
          v1 = Function_21e15d8(*(uint *)(v10 + 4 * *(uchar *)(v11 + 13) + 244));
          if ( !v1 )
            JUMPOUT(__CS__, v56);
        }
        else
        {
          v1 = Function_21e249c();
        }
      }
      else
      {
        v12 = Function_21e4a34(0);
        v13 = v12;
        v14 = Function_21e4a34(v12);
        v15 = v14;
        v16 = Function_21e4a34(v14);
        v17 = v16;
        v18 = Function_21e4a34(v16);
        v19 = v18;
        v20 = Function_21e4a34(v18);
        v21 = Function_21df7dc(
                8,
                *(uint *)(v13 + 1108),
                *(uint *)(v15 + 976),
                *(ushort *)(v17 + 974),
                v19 + 980,
                *(uint *)(v20 + 1112));
        v1 = Function_21e1008(v21);
        if ( v1 )
          JUMPOUT(__CS__, v56);
      }
    }
  }
  LODWORD(v22) = *(uint *)(Function_21e4a34(v1) + 416);
  if ( (uint)v22 == 11 || (LODWORD(v22) = *(uint *)(Function_21e4a34(v22) + 416), (uint)v22 == 6) )
  {
    v22 = *(ull *)(Function_21e4a34(v22) + 388);
    if ( v22 )
    {
      v23 = OS_GetTick();
      v24 = *(uint *)(Function_21e4a34(v23) + 388);
      ll_udiv();
      v25 = 1;
      v26 = HIDWORD(v22) == 0;
      if ( !HIDWORD(v22) )
      {
        v25 = (uint)v22 >= 0x2710;
        v26 = (uint)v22 == 10000;
      }
      if ( !v26 && v25 )
      {
        Function_21e4a34(v22);
        LODWORD(v22) = Function_21e45dc(1);
      }
    }
  }
  LODWORD(v27) = *(uint *)(Function_21e4a34(v22) + 228);
  if ( (uint)v27 )
  {
    dword_221A400[176] = 0;
    dword_221A400[175] = 0;
    v28 = Function_21e4a34(&dword_221A400[170]);
    Function_21fee10(*(uint *)(v28 + 228));
    v29 = dword_221A400[175];
    if ( dword_221A400[175] )
    {
      v30 = Function_21e4a34(dword_221A400[175]);
      v31 = Function_21febbc(*(uint *)(v30 + 228));
      v29 = Function_21e4a34(v31);
      *(uint *)(v29 + 228) = 0;
    }
    LODWORD(v27) = *(uint *)(Function_21e4a34(v29) + 228);
    if ( (uint)v27 )
    {
      v32 = Function_21e4a34(v27);
      LODWORD(v27) = Function_21fee5c(*(uint *)(v32 + 228));
      if ( (uint)v27 )
      {
        v27 = *(ull *)(Function_21e4a34(v27) + 372);
        if ( v27 )
        {
          LODWORD(v33) = OS_GetTick();
          v34 = v33;
          v27 = *(ull *)(Function_21e4a34(v33) + 372);
          if ( v34 > v27 )
            LODWORD(v27) = Function_21de3bc(6, -85010);
        }
      }
    }
  }
  v35 = Function_21e4a34(v27);
  Function_21dd20c(*(uint *)(v35 + 16));
  dword_221A400[173] = 0;
  dword_221A400[174] = 1;
  Function_21fb89c();
  v36 = &dword_221A400[170];
  dword_221A400[174] = 0;
  if ( dword_221A400[173] == 1 )
  {
    dword_221A400[173] = 0;
    v36 = (int *)Function_21fb018();
  }
  v37 = *(uint *)(Function_21e4a34(v36) + 4);
  if ( v37 )
  {
    v38 = Function_21e4a34(v37);
    v37 = Function_21f849c(**(uint **)(v38 + 4));
  }
  if ( *(uint *)(Function_21e4a34(v37) + 416) == 18 )
  {
    v39 = OS_GetTick();
    v40 = *(uint *)(Function_21e4a34(v39) + 496);
    ll_udiv();
    v43 = 1;
    v44 = v42 == 0;
    if ( !v42 )
    {
      v43 = v41 >= 0xBB8;
      v44 = v41 == 3000;
    }
    if ( !v44 && v43 && Function_21e24d0() )
      JUMPOUT(__CS__, v56);
  }
  if ( !Function_21e285c() )
    JUMPOUT(__CS__, v56);
  if ( !Function_21e2d70() )
    JUMPOUT(__CS__, v56);
  v45 = Function_21e3324();
  v46 = *(uchar *)(Function_21e4a34(v45) + 430);
  if ( !v46 )
    JUMPOUT(__CS__, v56);
  if ( *(uint *)(Function_21e4a34(v46) + 416) != 10 )
    JUMPOUT(__CS__, v56);
  v47 = Function_21e4a34(10);
  v48 = v47;
  v49 = *(uchar *)(Function_21e4a34(v47) + 13);
  *(uchar *)(v48 + 22) = v49;
  v50 = Function_21deb94(v49);
  v51 = Function_21e4a34(v50);
  *(uchar *)(v51 + 430) = 0;
  v52 = *(uint *)(Function_21e4a34(v51) + 1148);
  if ( !v52 )
    JUMPOUT(__CS__, v56);
  v53 = Function_21e4a34(v52);
  v54 = v53;
  v55 = Function_21e4a34(v53);
  (*(void (__fastcall **)(uint))(v54 + 1148))(*(uint *)(v55 + 1152));
  JUMPOUT(__CS__, v56);
}

//----- (021DDD58) --------------------------------------------------------
int __fastcall Function_21ddd58(int a1, int a2, short a3, uchar *a4, int a5)
{
  uchar *v5;
  bool v6;
  int v7;
  short v8;
  int v10;
  int v11;
  bool v12;
  int v13;
  int v14;
  char v15;
  char v16;
  short v17;
  int v18;

  v5 = a4;
  v6 = a5 == 0;
  if ( a5 )
    v6 = a4 == 0;
  v7 = a2;
  v8 = a3;
  if ( v6 )
    return 0;
  MIi_CpuClear32(0, &v15, 8);
  v10 = HIBYTE(v8) | (ushort)((v8 << 8) & 0xFF00);
  v16 = 2;
  v17 = HIBYTE(v8) | (v8 << 8) & 0xFF00;
  v18 = v7;
  v11 = *v5;
  v12 = v11 == 254;
  if ( v11 == 254 )
  {
    v10 = v5[1];
    v12 = v10 == 253;
  }
  if ( v12 || v11 == 92 )
  {
    v13 = *(uint *)(Function_21e4a34(v10) + 16);
    if ( v13 )
    {
      v14 = Function_21e4a34(v13);
      Function_21fcf60(*(uint *)(v14 + 16), v5, a5, &v15);
    }
  }
  else
  {
    if ( Function_20d5190(v5, (uchar *)&byte_22197A8, 6) )
      return 0;
    Function_21fbc34(v5, a5, &v15);
  }
  return 1;
}

//----- (021DDE4C) --------------------------------------------------------
int __fastcall Function_21dde4c(int a1, int a2, int a3, int a4, int a5, uchar *a6)
{
  int v6;
  int v7;
  int v8;
  int v9;
  int v11;
  int v12;
  int v13;
  int v14;
  int v15;
  int v16;
  int v17;
  int v18;
  int v19;
  int v20;
  int v21;
  int v22;
  int v23;
  int v24;
  int v25;
  int v26;
  int v27;
  int v28;
  int *v29;
  int *v30;
  int *v31;
  int v32;
  int v33;

  v6 = a2;
  v7 = a3;
  v8 = a4;
  v9 = Function_21e4a34(a1);
  if ( !v9 || *(uint *)(Function_21e4a34(v9) + 416) != 7 || *(uchar *)(Function_21e4a34(7) + 425) )
    return Function_21f84e4(v6, "Init state", -1);
  v11 = Function_21d9ba8();
  v12 = v11;
  if ( v11 == -1 )
  {
    Function_21f84e4(v6, "Server full", -1);
    return Function_21de3bc(6, -87100);
  }
  v13 = Function_21e4a34(v11);
  v14 = *(uint *)(v13 + 4 * *(uchar *)(Function_21e4a34(v13) + 13) + 528);
  if ( v7 != v14
    || (v16 = Function_21e4a34(v14),
        v17 = *(ushort *)(v16 + 2 * *(uchar *)(Function_21e4a34(v16) + 13) + 656),
        v8 != v17) )
  {
    if ( !*a6 )
      return Function_21f84e4(v6, "Unknown connect attempt", -1);
    Function_20dacac((int)a6, 0, 10, v15);
    v19 = v18;
    v20 = Function_21e4a34(v18);
    v21 = *(uint *)(v20 + 4 * *(uchar *)(Function_21e4a34(v20) + 13) + 244);
    if ( v19 != v21 )
      return Function_21f84e4(v6, "Unknown connect attempt", -1);
    v22 = Function_21e4a34(v21);
    v23 = v22 + 4 * *(uchar *)(Function_21e4a34(v22) + 13);
    *(uint *)(v23 + 528) = v7;
    v24 = Function_21e4a34(v23);
    v17 = v24 + 2 * *(uchar *)(Function_21e4a34(v24) + 13) + 512;
    *(ushort *)(v17 + 144) = v8;
  }
  v25 = Function_21e4a34(v17);
  *(uint *)(v25 + 396) = 0;
  *(uint *)(v25 + 400) = 0;
  v26 = Function_21e4a34(v25);
  if ( !Function_21f84d8(v6, *(uint *)(v26 + 8)) )
    return Function_21de3bc(6, -80410);
  v27 = Function_21de39c();
  if ( !*(uchar *)(Function_21e4a34(v27) + 13) )
  {
    v28 = a5 >> 1;
    if ( a5 >> 1 >= 0xFFFF )
      LOWORD(v28) = -1;
    *(ushort *)(Function_21e4a34(0xFFFF) + 432) = v28;
  }
  v29 = Function_21d9c04(v12);
  v30 = Function_21d9c7c(v12);
  *v29 = v6;
  v31 = v30;
  v32 = Function_21e4a34(v30);
  ++*(uchar *)(v32 + 13);
  *(uchar *)v31 = v12;
  v33 = Function_21e4a34(v32);
  *((uchar *)v31 + 1) = *(uchar *)(v33 + *(uchar *)(Function_21e4a34(v33) + 13) - 1 + 720);
  *((ushort *)v31 + 1) = 0;
  v31[1] = 0;
  Function_21f877c(v6, v31);
  return Function_21e1998(2);
}

//----- (021DE094) --------------------------------------------------------
int __fastcall Function_21de094(int a1, int a2)
{
  int v2;
  int v3;
  int result;
  int v5;
  uint v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;
  int v14;
  int v15;
  int v16;
  int v17;
  int v18;
  int v19;
  int v20;
  int v21;
  int v22;
  int v23;
  int v24;
  int v25;
  int v26;
  int v27;
  int v28;
  int v29;
  int v30;
  int v31;
  int *v32;
  int *v33;
  int *v34;
  int v35;
  int v36;
  int v37;
  char v38;

  v2 = a1;
  v3 = a2;
  result = Function_21e4a34(a1);
  if ( result )
  {
    result = *(uint *)(Function_21e4a34(result) + 416);
    if ( result == 7 || (result = *(uint *)(Function_21e4a34(result) + 416), result == 12) )
    {
      if ( v3 )
      {
        if ( v3 != 5 )
        {
          if ( v3 == 6 )
          {
            v5 = Function_21e4a34(result);
            ++*(uchar *)(v5 + 12);
            v6 = *(uchar *)(Function_21e4a34(v5) + 12);
            if ( v6 <= 5 )
            {
              v11 = Function_21e4a34(v6);
              v12 = OS_SNPrintf(&v38, 12, &dword_22174E4, *(uint *)(v11 + 512));
              v13 = Function_21e4a34(v12);
              v14 = v13;
              v15 = Function_21e4a34(v13);
              v16 = v15;
              v17 = Function_21e4a34(v15);
              v18 = v17;
              v19 = Function_21e4a34(v17);
              v20 = v19;
              v21 = Function_21e4a34(v19);
              v22 = Function_21fabfc(
                      *(uint *)(v16 + 4 * *(uchar *)(v18 + 20) + 528),
                      *(ushort *)(v20 + 2 * *(uchar *)(v21 + 20) + 656),
                      0);
              v23 = *(uint *)(Function_21e4a34(v22) + 8);
              result = Function_21f84f0(**(uint **)(v14 + 4));
              if ( result == 1 )
              {
                result = Function_21e39ec();
              }
              else if ( result )
              {
                v24 = Function_21e4a34(result);
                v25 = v24;
                v26 = Function_21e4a34(v24);
                result = Function_21e15d8(*(uint *)(v25 + 4 * *(uchar *)(v26 + 20) + 244));
              }
            }
            else
            {
              v7 = Function_21e4a34(v6);
              *(uchar *)(v7 + 12) = 0;
              v8 = Function_21e4a34(v7);
              v9 = v8;
              v10 = Function_21e4a34(v8);
              result = Function_21e15d8(*(uint *)(v9 + 4 * *(uchar *)(v10 + 20) + 244));
            }
          }
          else
          {
            v27 = Function_21e4a34(result);
            v28 = v27;
            v29 = Function_21e4a34(v27);
            result = Function_21e15d8(*(uint *)(v28 + 4 * (*(uchar *)(v29 + 13) + 1) + 244));
          }
        }
      }
      else
      {
        v30 = Function_21d9ba8();
        v31 = v30;
        if ( v30 == -1 )
        {
          result = Function_21de3bc(6, -87100);
        }
        else
        {
          v32 = Function_21d9c04(v30);
          v33 = Function_21d9c7c(v31);
          *v32 = v2;
          v34 = v33;
          v35 = Function_21e4a34(v33);
          ++*(uchar *)(v35 + 13);
          *(uchar *)v34 = v31;
          *((ushort *)v34 + 1) = 0;
          v34[1] = 0;
          v36 = Function_21e4a34(v35);
          *((uchar *)v34 + 1) = *(uchar *)(v36 + *(uchar *)(Function_21e4a34(v36) + 13) + 720);
          v37 = Function_21f877c(v2, v34);
          if ( *(uint *)(Function_21e4a34(v37) + 416) == 12 )
            result = Function_21e1998(0);
          else
            result = Function_21e1998(1);
        }
      }
    }
  }
  return result;
}

//----- (021DE318) --------------------------------------------------------
int __fastcall Function_21de318(int a1, int a2, uchar *a3, int a4)
{
  int v4;
  int v5;
  uchar *v6;
  int v7;
  int v8;
  char v10;
  char v11[512];
  int v12;

  v12 = a4;
  v4 = 0;
  v5 = a2;
  v6 = a3;
  do
  {
    if ( Function_21dfb7c(&v10, v6 + 1, v4) == -1 )
      break;
    Function_20dacac((int)&v10, 0, 10, v7);
    *(uint *)&v11[4 * v4++] = v8;
  }
  while ( v4 < 128 );
  return Function_21dfc18(*v6, v5);
}

//----- (021DE39C) --------------------------------------------------------
int __fastcall Function_21de39c(int a1)
{
  int v1;
  int result;

  v1 = Function_21e4a34(a1);
  *(uchar *)(v1 + 972) = -1;
  result = Function_21e4a34(v1);
  *(uchar *)(result + 973) = 0;
  return result;
}

//----- (021DE3BC) --------------------------------------------------------
int __fastcall Function_21de3bc(int a1, int a2)
{
  int v2;
  int v3;
  int result;
  bool v5;
  int v6;
  int v7;
  BOOL v8;
  int v9;
  BOOL v10;
  int v11;
  int v12;
  int v13;
  int v14;
  int v15;
  int v16;
  int v17;

  v2 = a1;
  v3 = a2;
  result = Function_21e4a34(a1);
  v5 = result == 0;
  if ( result )
    v5 = v2 == 0;
  if ( !v5 )
  {
    Function_21e2600();
    Function_21d7724(v2, v3);
    v6 = Function_21db978(1, (int)&dword_22174E0, 0);
    v7 = *(uchar *)(Function_21e4a34(v6) + 21);
    v8 = v7 == 2;
    v9 = *(uint *)(Function_21e4a34(v7) + 524);
    v10 = v9 == 0;
    v11 = Function_21e4a34(v9);
    v12 = v11;
    v13 = Function_21e4a34(v11);
    v14 = Function_21db8dc(*(uint *)(v13 + 524));
    v15 = v14;
    v16 = Function_21e4a34(v14);
    v17 = (*(int (__fastcall **)(int, uint, BOOL, BOOL, int, uint))(v12 + 1124))(
            v2,
            0,
            v10,
            v8,
            v15,
            *(uint *)(v16 + 1128));
    result = Function_21df134(v17);
  }
  return result;
}

//----- (021DE478) --------------------------------------------------------
int __fastcall Function_21de478(int a1)
{
  int result;
  int v2;
  int v3;
  int v4;

  result = *(uchar *)(Function_21e4a34(a1) + 21);
  if ( result != 2 )
  {
    v2 = Function_21e4a34(result);
    *(uchar *)(v2 + 20) = 0;
    v3 = Function_21e4a34(v2);
    *(uchar *)(v3 + 22) = 0;
    v4 = Function_21e4a34(v3);
    result = Function_21fc194(*(uint *)(v4 + 16));
  }
  return result;
}

//----- (021DE4B4) --------------------------------------------------------
int __fastcall Function_21de4b4(int result, int a2, uchar *a3)
{
  int v3;
  uchar *v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;
  int v14;
  int v15;
  int v16;
  int v17;
  int v18;
  int v19;
  int v20;
  int v21;
  int v22;
  int v23;

  v3 = result;
  v4 = a3;
  switch ( a2 )
  {
    case 2:
      if ( *(uint *)(Function_21e4a34(result) + 416) == 1 )
      {
        v5 = *v4;
        if ( v5 == 1 )
        {
          v5 = Function_21e4a34(1);
          *(uint *)(v5 + 524) = 0;
        }
        v6 = v4[1];
        v7 = Function_21e4a34(v5) + v6;
        *(uchar *)(v7 + 720) = v4[2];
        v8 = Function_21e4a34(v7);
        v9 = *(uint *)(Function_21e4a34(v8) + 512);
        v10 = v8 + 4 * v6;
        *(uint *)(v10 + 244) = v9;
        v11 = *(uchar *)(Function_21e4a34(v10) + 21);
        if ( !v11 || (v11 = *(uchar *)(Function_21e4a34(v11) + 21), v11 == 1) )
        {
          v12 = Function_21e4a34(v11);
          v13 = v12;
          v11 = *(uchar *)(Function_21e4a34(v12) + 13);
          *(uchar *)(v13 + 22) = v11;
        }
        *(uchar *)(Function_21e4a34(v11) + 429) = 0;
        Function_21e4a44(9);
      }
      result = Function_21e276c(v3, 3);
      break;
    case 3:
      if ( *(uint *)(Function_21e4a34(result) + 416) == 16 )
      {
        v14 = Function_21e4a34(16);
        *(uint *)(v14 + 468) |= 1 << v3;
        v15 = v4[1];
        v16 = *v4 | (v15 << 8);
        v17 = *(ushort *)(Function_21e4a34(v15) + 432);
        if ( v16 > v17 )
          *(ushort *)(Function_21e4a34(v17) + 432) = v16;
        v18 = Function_21e3228(0);
        v19 = v18;
        result = *(uint *)(Function_21e4a34(v18) + 468);
        if ( v19 == result )
        {
          v20 = 1;
          v21 = *(uchar *)(Function_21e4a34(result) + 13);
          if ( v21 >= 1 )
          {
            do
            {
              v22 = Function_21e4a34(v21);
              v23 = Function_21e276c(*(uchar *)(v22 + v20++ + 720), 4);
              v21 = *(uchar *)(Function_21e4a34(v23) + 13);
            }
            while ( v20 <= v21 );
          }
          result = Function_21e4a44(17);
        }
      }
      else
      {
        result = Function_21e276c(v3, 4);
      }
      break;
    case 4:
      result = *(uint *)(Function_21e4a34(result) + 416);
      if ( result == 9 )
        result = Function_21e1998(4);
      break;
  }
  return result;
}

//----- (021DE66C) --------------------------------------------------------
int __fastcall Function_21de66c(int a1, int a2)
{
  int v2;
  int v3;
  int result;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;
  int v14;
  int v15;
  int v16;
  int v17;
  int v18;
  int v19;

  v2 = a1;
  v3 = a2;
  if ( Function_21d9a40() != 5 )
    return 0;
  v5 = *(uchar *)(Function_21e4a34(5) + 21);
  if ( v5 == 2 )
    return 1;
  if ( v2 )
  {
    Function_21de3bc(v2, v3 - 80000);
    result = 1;
  }
  else
  {
    v6 = Function_21e4a34(v5);
    *(uchar *)(v6 + 720) = 0;
    v7 = *(uchar *)(Function_21e4a34(v6) + 425);
    if ( v7 != 1
      && (v8 = *(uchar *)(Function_21e4a34(v7) + 424), v8 != 1)
      && (v9 = *(uchar *)(Function_21e4a34(v8) + 424), v9 != 2) )
    {
      v10 = *(uint *)(Function_21e4a34(v9) + 412);
      if ( v10 )
      {
        v11 = Function_21e4a34(v10);
        v12 = Function_21fb674(*(uint *)(v11 + 412));
        v10 = Function_21e4a34(v12);
        *(uint *)(v10 + 412) = 0;
      }
      v13 = *(uchar *)(Function_21e4a34(v10) + 13);
      if ( v13 )
      {
        if ( !*(uchar *)(Function_21e4a34(v13) + 424) )
        {
          v14 = Function_21e4a34(0);
          *(uchar *)(v14 + 424) = 3;
          v15 = Function_21e4a34(v14);
          Function_21f8710(**(uint **)(v15 + 4));
        }
      }
      else
      {
        v16 = *(uchar *)(Function_21e4a34(0) + 21);
        if ( v16 == 3 )
        {
          Function_21de3bc(6, -80430);
        }
        else if ( *(uint *)(Function_21e4a34(v16) + 520) )
        {
          Function_21e24d0();
        }
        else if ( *(uint *)(Function_21e4a34(0) + 416) == 1 )
        {
          v17 = Function_21e4a44(18);
          v18 = Function_21e4a34(v17);
          *(uint *)(v18 + 496) = OS_GetTick();
          *(uint *)(v18 + 500) = v19;
        }
        else
        {
          Function_21e239c(1);
        }
      }
      result = 1;
    }
    else
    {
      result = 1;
    }
  }
  return result;
}

//----- (021DE7E8) --------------------------------------------------------
int __fastcall Function_21de7e8(int a1)
{
  int v1;
  int result;

  v1 = a1;
  result = *(uchar *)(Function_21e4a34(a1) + 424);
  if ( result != 2 )
    result = Function_21e15d8(v1);
  return result;
}

//----- (021DE80C) --------------------------------------------------------
int __fastcall Function_21de80c(int a1, int a2)
{
  int v2;
  int v3;
  int v4;
  int v6;

  v2 = a1;
  v3 = a2;
  v4 = Function_21e4a34(a1);
  if ( !v4 )
    return 0;
  v6 = 0;
  if ( v3 <= 0 )
    return 0;
  while ( 1 )
  {
    v4 = *(uint *)(Function_21e4a34(v4) + 4 * v6 + 244);
    if ( v2 == v4 )
      break;
    if ( ++v6 >= v3 )
      return 0;
  }
  Function_21de870(v6, v3);
  return 1;
}

//----- (021DE870) --------------------------------------------------------
int __fastcall Function_21de870(int a1, int a2)
{
  int v2;
  int v3;
  int v4;
  int v6;
  int v7;
  int v8;
  int v9;
  int i;
  int v11;
  int v12;
  int v13;
  int v14;
  int v15;
  int v16;
  short v17;
  int v18;
  int v19;
  int v20;
  int v21;
  int v22;
  int v23;
  int v24;
  int v25;
  short v26;
  int v27;
  int v28;
  int v29;
  int v30;
  int v31;
  int v32;
  int v33;
  int v34;

  v2 = a1;
  v3 = a2;
  v4 = Function_21e4a34(a1);
  if ( !v4 )
    return 0;
  v6 = Function_21e4a34(v4) + 4 * v2;
  v7 = *(uint *)(v6 + 244);
  v8 = Function_21e4a34(v6);
  *(uint *)(v8 + 752) &= ~(1 << *(uchar *)(Function_21e4a34(v8) + v2 + 720));
  Function_21dea68();
  v9 = v3 - 1;
  if ( v2 < v3 - 1 )
  {
    v9 = v3 - v2;
    for ( i = 0; i < v3 - v2 - 1; ++i )
    {
      v11 = v2 + i;
      v12 = v2 + i + 1;
      v13 = Function_21e4a34(v9);
      v14 = *(uint *)(Function_21e4a34(v13) + 4 * v12 + 36);
      v15 = v13 + 4 * (v2 + i);
      *(uint *)(v15 + 36) = v14;
      v16 = Function_21e4a34(v15);
      v17 = *(ushort *)(Function_21e4a34(v16) + 2 * v12 + 164);
      v18 = v16 + 2 * (v2 + i);
      *(ushort *)(v18 + 164) = v17;
      v19 = Function_21e4a34(v18);
      v20 = v19;
      v21 = *(uint *)(Function_21e4a34(v19) + 4 * v12 + 244);
      *(uint *)(v20 + 4 * v11 + 244) = v21;
      v22 = Function_21e4a34(v21);
      v23 = v22;
      v24 = *(uint *)(Function_21e4a34(v22) + 4 * v12 + 528);
      *(uint *)(v23 + 4 * v11 + 528) = v24;
      v25 = Function_21e4a34(v24);
      v26 = *(ushort *)(Function_21e4a34(v25) + 2 * v12 + 656);
      v27 = v25 + 2 * (v2 + i) + 512;
      *(ushort *)(v27 + 144) = v26;
      v28 = Function_21e4a34(v27);
      v29 = *(uchar *)(i + v2 + Function_21e4a34(v28) + 721);
      v9 = i + v2 + v28;
      *(uchar *)(v9 + 720) = v29;
    }
  }
  if ( v3 > 0 )
  {
    v30 = Function_21e4a34(v9) + 4 * (v3 - 1);
    *(uint *)(v30 + 36) = 0;
    v31 = Function_21e4a34(v30) + 2 * (v3 - 1);
    *(ushort *)(v31 + 164) = 0;
    v32 = Function_21e4a34(v31) + 4 * (v3 - 1);
    *(uint *)(v32 + 244) = 0;
    v33 = Function_21e4a34(v32) + 4 * (v3 - 1);
    *(uint *)(v33 + 528) = 0;
    v34 = Function_21e4a34(v33) + 2 * (v3 - 1) + 512;
    *(ushort *)(v34 + 144) = 0;
    *(uchar *)(Function_21e4a34(v34) + v3 - 1 + 720) = 0;
  }
  return v7;
}

//----- (021DEA28) --------------------------------------------------------
int __fastcall Function_21dea28(int a1)
{
  int v1;
  int result;

  v1 = Function_21e4a34(a1);
  if ( v1 )
    result = *(uchar *)(Function_21e4a34(v1) + 13);
  else
    result = 0;
  return result;
}

//----- (021DEA48) --------------------------------------------------------
int __fastcall Function_21dea48(int a1)
{
  int v1;
  int result;

  v1 = Function_21e4a34(a1);
  if ( v1 )
    result = *(uchar *)(Function_21e4a34(v1) + 14);
  else
    result = 0;
  return result;
}

//----- (021DEA68) --------------------------------------------------------
int __fastcall Function_21dea68(int a1)
{
  int v1;
  int v2;
  bool v3;
  int result;

  v1 = -1;
  v2 = 0;
  do
  {
    a1 = *(uint *)(Function_21e4a34(a1) + 752);
    v3 = (a1 & (1 << v2++)) == 0;
    if ( !v3 )
      ++v1;
  }
  while ( v2 < 32 );
  if ( v1 == -1 )
  {
    result = Function_21e4a34(-1);
    *(uchar *)(result + 14) = 0;
  }
  else
  {
    result = Function_21e4a34(-1);
    *(uchar *)(result + 14) = v1;
  }
  return result;
}

//----- (021DEABC) --------------------------------------------------------
int __fastcall Function_21deabc(int *a1)
{
  int *v1;
  int v2;
  int v4;

  v1 = a1;
  v2 = Function_21e4a34(a1);
  if ( !v2 )
    return 0;
  v4 = Function_21e4a34(v2) + 720;
  *v1 = v4;
  return *(uchar *)(Function_21e4a34(v4) + 13) + 1;
}

//----- (021DEAF0) --------------------------------------------------------
int __fastcall Function_21deaf0(uint *a1)
{
  uint *v1;
  ushort *v3;
  int v4;
  int v5;
  int *v6;
  int v7;
  int v8;
  int v9;
  int v10;

  v1 = a1;
  if ( !Function_21e4a34(a1) )
    return 0;
  v3 = MI_CpuFill8(&dword_221A400[640], 0, 0x20u);
  v4 = 0;
  v5 = *(uchar *)(Function_21e4a34(v3) + 14);
  if ( v5 >= 0 )
  {
    v6 = &dword_221A400[640];
    do
    {
      v7 = Function_21e4a34(v5);
      v8 = v7;
      v9 = *(uchar *)(Function_21e4a34(v7) + v4 + 720);
      if ( !(*(uint *)(v8 + 752) & (1 << v9)) )
        break;
      v10 = *(uchar *)(Function_21e4a34(v9) + v4++ + 720);
      *(uchar *)v6 = v10;
      v6 = (int *)((char *)v6 + 1);
      v5 = *(uchar *)(Function_21e4a34(v10) + 14);
    }
    while ( v4 <= v5 );
  }
  *v1 = &dword_221A400[640];
  return *(uchar *)(Function_21e4a34(&dword_221A400[640]) + 14) + 1;
}

//----- (021DEB94) --------------------------------------------------------
int __fastcall Function_21deb94(int a1)
{
  int v2;
  int v3;
  int v4;
  char v5;
  char v6;

  if ( *(uchar *)(Function_21e4a34(a1) + 21) != 2 )
    return 0;
  v2 = Function_21e4a34(2);
  OS_SNPrintf(&v6, 12, &dword_22174E4, *(uchar *)(v2 + 22) + 1);
  v3 = Function_21d8948((int)"SCM", (int)&v6, &v5);
  v4 = Function_21e4a34(v3);
  OS_SNPrintf(&v6, 12, &dword_22174E4, *(uchar *)(v4 + 13) + 1);
  Function_21d8980((int)"SCN", (int)&v6, &v5);
  OS_SNPrintf(&v6, 12, &dword_22174E4, 3);
  Function_21d8980((int)&dword_22174F0, (int)&v6, &v5);
  return Function_21db978(6, (int)&v5, 0);
}

//----- (021DEC64) --------------------------------------------------------
int *Function_21dec64()
{
  int *result;

  Function_21e4a24(0);
  if ( dword_221A400[172] )
  {
    Function_4_21d77c4(4, dword_221A400[172]);
    dword_221A400[172] = 0;
  }
  Function_21e2fb0();
  if ( dword_221A400[170] )
  {
    Function_4_21d77c4(4, dword_221A400[170]);
    dword_221A400[170] = 0;
  }
  result = &dword_221A400[170];
  LOWORD(dword_221A400[177]) = 0;
  return result;
}

//----- (021DECDC) --------------------------------------------------------
BOOL __fastcall Function_21decdc(int a1)
{
  return Function_21e4a34(a1) == 0;
}

//----- (021DECF4) --------------------------------------------------------
int __fastcall Function_21decf4(int a1)
{
  int v1;
  int v2;
  int v3;
  int v4;
  uint v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;
  int v14;
  int v15;
  int v16;
  int v17;
  int v18;
  int v19;
  int v20;
  int v21;
  int v22;
  int v23;
  int v24;
  int v25;
  int v26;
  int result;
  int v28;
  int v29;
  int v30;
  int v31;
  int v32;
  int v33;
  int v34;
  int v35;
  int v36;
  int v37;
  int v38;
  int v39;
  int v40;
  int v41;
  int v42;
  int v43;
  int v44;
  int v45;
  int v46;
  int v47;
  int v48;
  int v49;
  int v50;
  int v51;
  int v52;
  int v53;
  int v54;
  int v55;
  int v56;
  ushort *v57;
  int v58;
  int v59;
  int v60;
  int v61;
  int v62;
  int v63;
  int v64;
  int v65;
  int v66;
  int v67;
  int v68;
  int v69;

  v1 = a1;
  v2 = Function_21e4a34(a1);
  *(uchar *)(v2 + 12) = 0;
  v3 = Function_21e4a34(v2);
  *(uchar *)(v3 + 380) = 0;
  v4 = Function_21e4a34(v3);
  v5 = Function_21d8abc(0x10000u);
  *(ushort *)(v4 + 382) = v5;
  v6 = Function_21e4a34(v5);
  *(uint *)(v6 + 384) = 0;
  v7 = Function_21e4a34(v6);
  *(uint *)(v7 + 388) = 0;
  *(uint *)(v7 + 392) = 0;
  v8 = Function_21e4a34(v7);
  *(uint *)(v8 + 396) = 0;
  *(uint *)(v8 + 400) = 0;
  v9 = Function_21e4a34(v8);
  *(uchar *)(v9 + 420) = 0;
  v10 = Function_21e4a34(v9);
  *(uchar *)(v10 + 425) = 0;
  v11 = Function_21e4a34(v10);
  *(uchar *)(v11 + 426) = 0;
  v12 = Function_21e4a34(v11);
  *(uchar *)(v12 + 427) = 0;
  v13 = Function_21e4a34(v12);
  *(uchar *)(v13 + 428) = 0;
  v14 = Function_21e4a34(v13);
  *(uchar *)(v14 + 423) = 0;
  v15 = Function_21e4a34(v14);
  *(uchar *)(v15 + 424) = 0;
  v16 = Function_21e4a34(v15) + 256;
  *(ushort *)(v16 + 178) = 0;
  v17 = Function_21e4a34(v16) + 256;
  *(ushort *)(v17 + 180) = 0;
  v18 = Function_21e4a34(v17);
  *(uint *)(v18 + 440) = 0;
  v19 = Function_21e4a34(v18);
  *(uint *)(v19 + 480) = 0;
  *(uint *)(v19 + 484) = 0;
  v20 = Function_21e4a34(v19);
  *(uint *)(v20 + 496) = 0;
  *(uint *)(v20 + 500) = 0;
  v21 = Function_21e4a34(v20);
  v22 = MIi_CpuClear32(0, (uint *)(v21 + 972), 152);
  if ( v1 == 2 )
  {
    v23 = Function_21e4a34(v22);
    v24 = v23;
    v25 = *(uchar *)(Function_21e4a34(v23) + 13);
    *(uchar *)(v24 + 20) = v25;
    v26 = *(uchar *)(Function_21e4a34(v25) + 21);
    if ( v26 == 3 )
    {
      result = Function_21e4a44(1);
    }
    else
    {
      result = *(uchar *)(Function_21e4a34(v26) + 21);
      if ( result == 2 )
        result = Function_21e4a44(10);
    }
  }
  else
  {
    v28 = Function_21e4a34(v22);
    *(uchar *)(v28 + 13) = 0;
    v29 = Function_21e4a34(v28);
    *(uchar *)(v29 + 14) = 0;
    v30 = Function_21e4a34(v29);
    *(uchar *)(v30 + 20) = 0;
    v31 = Function_21e4a34(v30);
    *(uchar *)(v31 + 23) = 0;
    v32 = Function_21e4a34(v31);
    *(uint *)(v32 + 32) = 0;
    v33 = Function_21e4a34(v32);
    *(uint *)(v33 + 232) = 0;
    v34 = Function_21e4a34(v33);
    *(uchar *)(v34 + 421) = 0;
    v35 = Function_21e4a34(v34) + 256;
    *(ushort *)(v35 + 176) = 0;
    v36 = Function_21e4a34(v35);
    *(uint *)(v36 + 444) = 0;
    v37 = Function_21e4a34(v36);
    *(uint *)(v37 + 448) = 0;
    *(uint *)(v37 + 452) = 0;
    v38 = Function_21e4a34(v37);
    *(uint *)(v38 + 456) = 0;
    v39 = Function_21e4a34(v38);
    *(uint *)(v39 + 460) = 0;
    *(uint *)(v39 + 464) = 0;
    v40 = Function_21e4a34(v39);
    *(uint *)(v40 + 468) = 0;
    v41 = Function_21e4a34(v40);
    *(uint *)(v41 + 516) = 0;
    v42 = Function_21e4a34(v41);
    *(uint *)(v42 + 520) = 0;
    v43 = Function_21e4a34(v42);
    *(uint *)(v43 + 752) = 0;
    v44 = Function_21e4a34(v43);
    v45 = MIi_CpuClear32(0, (uint *)(v44 + 36), 128);
    v46 = Function_21e4a34(v45);
    v47 = MIi_CpuClear16(0, v46 + 164, 64);
    v48 = Function_21e4a34(v47);
    v49 = MIi_CpuClear32(0, (uint *)(v48 + 244), 128);
    v50 = Function_21e4a34(v49);
    v51 = MIi_CpuClear32(0, (uint *)(v50 + 404), 12);
    v52 = Function_21e4a34(v51);
    v53 = MIi_CpuClear32(0, (uint *)(v52 + 528), 128);
    v54 = Function_21e4a34(v53);
    v55 = MIi_CpuClear16(0, v54 + 656, 64);
    v56 = Function_21e4a34(v55);
    v57 = MI_CpuFill8((ushort *)(v56 + 720), 0, 0x20u);
    v58 = Function_21e4a34(v57);
    v59 = MIi_CpuClear32(0, (uint *)(v58 + 840), 132);
    if ( v1 == 1 )
    {
      v60 = *(uchar *)(Function_21e4a34(v59) + 21);
      if ( v60 )
      {
        result = *(uchar *)(Function_21e4a34(v60) + 21);
        if ( result == 1 )
          result = Function_21e4a44(4);
      }
      else
      {
        result = Function_21e4a44(3);
      }
    }
    else
    {
      v61 = Function_21e4a34(v59);
      *(uchar *)(v61 + 21) = 0;
      v62 = Function_21e4a34(v61);
      *(uchar *)(v62 + 22) = 0;
      v63 = Function_21e4a34(v62);
      *(uchar *)(v63 + 24) = 0;
      v64 = Function_21e4a34(v63);
      *(uint *)(v64 + 524) = 0;
      v65 = Function_21e4a34(v64);
      *(uchar *)(v65 + 422) = 0;
      v66 = Function_21e4a34(v65);
      *(uchar *)(v66 + 430) = 0;
      v67 = Function_21e4a34(v66);
      *(uchar *)(v67 + 429) = 0;
      v68 = Function_21e4a34(v67);
      *(uint *)(v68 + 504) = 0;
      *(uint *)(v68 + 508) = 0;
      v69 = Function_21e4a34(v68);
      *(uint *)(v69 + 1132) = 0;
      result = Function_21e4a34(v69);
      *(uint *)(result + 1136) = 0;
    }
  }
  return result;
}

//----- (021DF08C) --------------------------------------------------------
int __fastcall Function_21df08c(char a1, char a2, int a3, int a4)
{
  char v4;
  char v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;

  v4 = a1;
  v5 = a2;
  v6 = a3;
  v7 = a4;
  v8 = Function_21decf4(0);
  v9 = Function_21e4a34(v8);
  *(uchar *)(v9 + 21) = v4;
  v10 = Function_21e4a34(v9);
  *(uchar *)(v10 + 22) = v5;
  v11 = Function_21e4a34(v10);
  *(uint *)(v11 + 1124) = v6;
  v12 = Function_21e4a34(v11);
  *(uint *)(v12 + 1128) = v7;
  v13 = Function_21e4a34(v12);
  *(uchar *)(v13 + 381) = 0;
  *(uchar *)(Function_21e4a34(v13) + 720) = 0;
  Function_21fd4e0(50, "dwc_pid");
  Function_21fd4e0(51, "dwc_mtype");
  Function_21fd4e0(52, "dwc_mresv");
  Function_21fd4e0(53, "dwc_mver");
  return Function_21fd4e0(54, "dwc_eval");
}

//----- (021DF134) --------------------------------------------------------
int __fastcall Function_21df134(int a1)
{
  int result;
  int v2;
  int v3;
  int v4;

  result = Function_21e4a34(a1);
  if ( result )
  {
    if ( *(uint *)(Function_21e4a34(result) + 228) )
    {
      if ( dword_221A400[176] )
      {
        dword_221A400[175] = 1;
      }
      else
      {
        v2 = Function_21e4a34(&dword_221A400[170]);
        v3 = Function_21febbc(*(uint *)(v2 + 228));
        *(uint *)(Function_21e4a34(v3) + 228) = 0;
      }
    }
    Function_21dc734();
    Function_21e4a44(0);
    if ( dword_221A400[172] )
    {
      Function_4_21d77c4(4, dword_221A400[172]);
      dword_221A400[172] = 0;
    }
    v4 = Function_21e2fb0();
    result = Function_21e4a34(v4);
    *(uchar *)(result + 24) = 1;
  }
  return result;
}

//----- (021DF1D0) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x21DF31C for case 0"

//----- (021DF278) --------------------------------------------------------
void Function_21df278()
{
  JUMPOUT(&loc_21DF31C);
}

//----- (021DF27C) --------------------------------------------------------
void Function_21df27c()
{
  JUMPOUT(&loc_21DF31C);
}

//----- (021DF280) --------------------------------------------------------
void Function_21df280()
{
  JUMPOUT(&loc_21DF2FC);
}

//----- (021DF284) --------------------------------------------------------
void Function_21df284()
{
  JUMPOUT(&loc_21DF290);
}

//----- (021DF288) --------------------------------------------------------
void Function_21df288()
{
  JUMPOUT(&loc_21DF2FC);
}

//----- (021DF28C) --------------------------------------------------------
void Function_21df28c()
{
  int v0;
  int v1;
  int v2;
  int v3;
  int v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  char v11;
  char v12;
  int v13;

  v2 = OS_SNPrintf(&v12, 256, "%s = %u", "dwc_pid", v0);
  v3 = Function_21e4a34(v2);
  *(uint *)(v3 + 516) = v0;
  v4 = Function_21e4a34(v3);
  v5 = Function_21fee44(*(uint *)(v4 + 228));
  v6 = 0;
  do
  {
    v7 = Function_21e4a34(v5);
    v5 = Function_21fed10(*(uint *)(v7 + 228), 1, 0, &v11, v1, &v12, 6);
    if ( !v5 )
      break;
    if ( v5 != 2 )
      break;
    ++v6;
  }
  while ( v6 < 5 );
  if ( !v5 )
  {
    v8 = Function_21e4a34(0);
    v9 = OS_GetTick();
    *(uint *)(v8 + 372) = v9 + 15709687;
    *(uint *)(v8 + 376) = __CFADD__(v9, 15709687) + v10;
  }
  JUMPOUT(__CS__, v13);
}

//----- (021DF3CC) --------------------------------------------------------
int __fastcall Function_21df3cc(uchar *a1, int a2, int a3, int a4)
{
  return OS_SNPrintf(
           a1,
           256,
           "%s = %d and %s != %u and maxplayers = %d and numplayers < %d and %s = %d and %s != %s",
           "dwc_mver",
           3,
           "dwc_pid",
           a2,
           a3,
           a3,
           "dwc_mtype",
           a4,
           "dwc_mresv",
           "dwc_pid");
}

//----- (021DF434) --------------------------------------------------------
int __fastcall Function_21df434(int a1, int a2, int a3, int a4)
{
  int v4;
  int v5;
  int v6;
  int v7;
  bool v8;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;
  int v14;
  int v15;
  uint v16;
  int v17;
  int v18;
  int v19;
  ushort v20;
  int v21;
  int v22;
  int v23;
  int v24;
  uint v25;
  int v26;
  int v27;
  uint *v28;
  int v29;
  int v30;
  int v31;
  int v32;
  int v33;
  int v34;
  int v36;
  int v37;
  int v38;
  int v39;
  int v40;
  int v41;
  int v42;
  int v43;
  int v44;
  int v45;
  int v46;
  int v47;
  int v48;
  int v49;
  int v50;
  int v51;
  int v52;
  int v53;
  int v54;

  v54 = a4;
  v4 = a1;
  v5 = a2;
  v6 = a3;
  v7 = Function_21e4a34(a1);
  v8 = v4 == 0;
  v9 = *(uchar *)(v7 + 20);
  v10 = 0;
  if ( v8 )
  {
    v11 = Function_21e4a34(v7);
    v12 = (*(ushort *)(Function_21e4a34(v11) + 382) << 16) | *(uint *)(v11 + 512) & 0xFFFF;
    if ( Function_21fe384(v6) )
    {
      v13 = Function_21fe350(v6);
      v14 = v13;
      v15 = Function_21e4a34(v13);
      v16 = Function_21feec0(*(uint *)(v15 + 228));
      if ( v14 == v16 )
      {
        v17 = Function_21e4a34(v16);
        v18 = Function_21fe39c(v6);
        *(uint *)(v17 + 4 * v9 + 528) = v18;
        v19 = Function_21e4a34(v18);
        v16 = Function_21fe3a4(v6);
        *(ushort *)(v19 + 2 * v9 + 656) = v16;
        v46 = 0;
      }
      else
      {
        v46 = 1;
      }
    }
    else
    {
      v20 = Function_22086a0();
      v16 = v20;
      if ( v20 != 43200
        && ((uchar)v20 != 172 || (v16 = v20 & 0xFF00, v16 < 0x1000) || v16 > 0x1F00)
        && (uchar)v20 != 10 )
      {
        v21 = Function_21e4a34(v16);
        v22 = Function_21fe350(v6);
        *(uint *)(v21 + 4 * v9 + 528) = v22;
        v23 = Function_21e4a34(v22);
        v16 = Function_21fe358(v6);
        *(ushort *)(v23 + 2 * v9 + 656) = v16;
        v46 = 0;
      }
      else
      {
        v46 = 1;
      }
    }
    if ( v46 )
    {
      v24 = Function_21e4a34(v16);
      v25 = Function_21d8abc(0x10000u);
      *(ushort *)(v24 + 382) = v25;
      v26 = Function_21e4a34(v25);
      *(uint *)(v26 + 412) = v12;
    }
    else
    {
      v27 = Function_22086a0();
      v52 = v27;
      v28 = *(uint **)(Function_21e4a34(v27) + 4);
      v53 = Function_21f8754(*v28);
      v29 = Function_21e4a34(v53);
      v30 = Function_21fe350(v6);
      v31 = Function_21fe358(v6);
      v32 = Function_21df7dc(6, *(uint *)(v29 + 4 * v9 + 244), v30, v31, &v52, 2);
      v33 = v32;
      v34 = Function_21e4a34(v32);
      *(uchar *)(v34 + 973) = 0;
      if ( v33 )
        return 2;
      v26 = Function_21e4a34(v34);
      *(uint *)(v26 + 412) = 0;
    }
    v36 = Function_21e4a34(v26);
    *(uchar *)(v36 + 404) = 0;
    v37 = Function_21e4a34(v36);
    *(uchar *)(v37 + 405) = 0;
    v38 = Function_21e4a34(v37);
    v39 = Function_21fe358(v6);
    *(ushort *)(v38 + 406) = v39;
    v40 = Function_21e4a34(v39);
    v45 = Function_21fe350(v6);
    *(uint *)(v40 + 408) = v45;
  }
  else
  {
    v41 = Function_21e4a34(v7);
    *(uchar *)(v41 + 404) = 1;
    v42 = Function_21e4a34(v41);
    *(uchar *)(v42 + 405) = 0;
    v43 = Function_21e4a34(v42) + 256;
    *(ushort *)(v43 + 150) = 0;
    v44 = Function_21e4a34(v43);
    *(uint *)(v44 + 408) = 0;
    v45 = Function_21e4a34(v44);
    *(uint *)(v45 + 412) = v5;
    v46 = 1;
  }
  if ( v46 )
  {
    v47 = Function_21e4a34(v45);
    v10 = Function_21df720(v47 + 404);
  }
  else
  {
    v48 = Function_21e4a34(v45);
    v49 = Function_21f876c(**(uint **)(v48 + 4));
    Function_21e4a34(v49);
    v50 = Function_21e45dc(0);
    v51 = Function_21e4a34(v50);
    *(uint *)(v51 + 396) = 0;
    *(uint *)(v51 + 400) = 0;
  }
  return v10;
}

//----- (021DF720) --------------------------------------------------------
int __fastcall Function_21df720(uchar *a1)
{
  uchar *v1;
  int result;
  int v3;
  int v4;
  int v5;
  int v6;
  int v7;
  int v8;

  v1 = a1;
  result = *a1;
  if ( !result )
  {
    v3 = Function_21e4a34(0);
    v4 = Function_21fabfc(*((uint *)v1 + 1), 0, 0);
    v5 = Function_21fed9c(*(uint *)(v3 + 228), v4, *((ushort *)v1 + 1), *((uint *)v1 + 2));
    result = Function_21e37c4(v5);
    if ( result )
      return 2;
  }
  v6 = 0;
  do
  {
    v7 = Function_21e4a34(result);
    v8 = Function_21f876c(**(uint **)(v7 + 4));
    result = Function_21fb5ac(v8, *((uint *)v1 + 2), *v1, Function_21e45d8, Function_21e45dc, v1);
    if ( !result )
      break;
    if ( result != 3 )
      break;
    ++v6;
  }
  while ( v6 < 5 );
  return result;
}

//----- (021DF7DC) --------------------------------------------------------
uint __fastcall Function_21df7dc(int a1, int a2, int a3, int a4, int *a5, int a6)
{
  int v6;
  int v7;
  int v8;
  int v9;
  uint v10;
  uint v11;
  bool v12;
  int i;
  uint v14;
  int v15;
  uint *v16;
  bool v17;
  int v18;
  int v19;
  int v20;
  int v21;
  int v22;
  int v23;
  bool v24;
  int v25;
  int v26;
  int v28;
  int v29;
  int v30;
  char v31;
  char v32[512];
  int v33;

  v33 = a4;
  v30 = a4;
  v6 = a1;
  v28 = a2;
  v29 = a3;
  v7 = 0;
  v8 = *(uchar *)(Function_21e4a34(a1) + 21);
  if ( v8
    && ((v9 = *(uchar *)(Function_21e4a34(v8) + 21), v9 != 3) && !*(uchar *)(Function_21e4a34(v9) + 422)
     || v6 != 6) )
  {
    v12 = a5 == 0;
    if ( a5 )
      v12 = a6 == 0;
    if ( !v12 )
    {
      v7 = OS_SNPrintf(v32, 512, &dword_22174E4, *a5);
      for ( i = 1; i < a6; v7 += v15 )
      {
        v15 = OS_SNPrintf(&v31, 16, "/%u", a5[i]);
        if ( (uint)(v7 + v15 + 1) > 0x200 )
          break;
        MI_CpuCopy8((int)&v31, (uint)&v32[v7], v15, v14);
        ++i;
      }
    }
    v32[v7] = 0;
    v16 = (uint *)Function_21e4a34(v32);
    v10 = Function_21dfab8(*v16, v6, v28, v32);
    v11 = v10;
  }
  else
  {
    v10 = Function_21df9a0(v6, v29, v30, a5, a6);
    v11 = v10;
  }
  v17 = v6 == 2;
  if ( v6 != 2 )
    v17 = v6 == 6;
  if ( v17 || (v10 = (uchar)(v6 - 8), v10 <= 1) )
  {
    v18 = Function_21e4a34(v10);
    *(uchar *)(v18 + 972) = v6;
    *(ushort *)(Function_21e4a34(v18) + 974) = v30;
    v19 = Function_21e4a34(v30);
    *(uint *)(v19 + 976) = v29;
    v20 = Function_21e4a34(v19);
    *(uint *)(v20 + 1108) = v28;
    v21 = Function_21e4a34(v20);
    *(uint *)(v21 + 1112) = a6;
    v22 = Function_21e4a34(v21);
    v23 = OS_GetTick();
    *(uint *)(v22 + 1116) = v23;
    v24 = a5 == 0;
    *(uint *)(v22 + 1120) = v25;
    if ( a5 )
      v24 = a6 == 0;
    if ( !v24 )
    {
      v26 = Function_21e4a34(v23);
      MI_CpuCopy32(a5, (uint *)(v26 + 980), 4 * a6);
    }
  }
  return v11;
}

//----- (021DF9A0) --------------------------------------------------------
int __fastcall Function_21df9a0(char a1, int a2, int a3, int *a4, uint a5)
{
  int v5;
  char v6;
  bool v7;
  int v8;
  int v9;
  int v10;
  int result;
  int v12;
  int v13;
  int v14;
  char v15;
  int v16;
  char v17;
  uchar v18;
  short v19;
  int v20;
  int v21;
  char v22;
  int *v23;

  v23 = a4;
  v5 = a5;
  v6 = a1;
  if ( a5 > 0x20 )
    v5 = 32;
  v7 = a4 == 0;
  if ( a4 )
    v7 = v5 == 0;
  v8 = a2;
  v9 = a3;
  if ( v7 )
    v5 = 0;
  else
    MI_CpuCopy32(a4, &v22, 4 * v5);
  strcpy(&v15, "SBCM");
  v16 = 3;
  v17 = v6;
  v18 = 4 * v5;
  v10 = *(ushort *)(Function_21e4a34(4 * v5) + 26);
  v19 = v10;
  v20 = *(uint *)(Function_21e4a34(v10) + 28);
  result = *(uint *)(Function_21e4a34(v20) + 512);
  v12 = 0;
  v21 = result;
  do
  {
    v13 = Function_21e4a34(result);
    v14 = Function_21fabfc(v8, 0, 0);
    result = Function_21fed44(*(uint *)(v13 + 228), v14, v9, &v15, v18 + 20);
    if ( !result )
      break;
    if ( result != 2 )
      break;
    ++v12;
  }
  while ( v12 < 5 );
  return result;
}

//----- (021DFAB8) --------------------------------------------------------
int __fastcall Function_21dfab8(int a1, char a2, int a3, int a4)
{
  int v4;
  int v5;
  char *v6;
  char v7;
  int v8;
  uint v9;
  int v10;
  char v12;
  char v13[511];
  int v14;

  v14 = a4;
  v4 = a1;
  v5 = a3;
  v6 = (char *)a4;
  v7 = a2;
  v8 = OS_SNPrintf(&v12, 512, "%s%dv%s", "GPCM", 3, "MAT");
  *(&v12 + v8) = v7;
  v13[v8] = 0;
  if ( v6 )
  {
    v10 = strlen(v6);
    if ( (uint)(v8 + 2 + v10) > 0x200 )
      v10 = 510 - v8;
    MI_CpuCopy8((int)v6, (uint)&v13[v8], v10, v9);
    v13[v8 + v10] = 0;
  }
  return Function_21ebd58(v4, v5, &v12);
}

//----- (021DFB7C) --------------------------------------------------------
int __fastcall Function_21dfb7c(uint a1, char *a2, int a3)
{
  char *v3;
  uint v4;
  int v5;
  char *v6;
  int v7;
  char *v8;
  int result;
  char *v10;
  uint v11;
  int v12;

  v3 = a2;
  v4 = a1;
  v5 = a3;
  v6 = strchr(a2, 0);
  v7 = 0;
  if ( v5 <= 0 )
  {
LABEL_5:
    v10 = strchr(v3, 47);
    if ( !v10 )
      v10 = v6;
    if ( v3 == v10 )
    {
      result = -1;
    }
    else
    {
      v12 = v10 - v3;
      MI_CpuCopy8((int)v3, v4, v10 - v3, v11);
      result = v12;
      *(uchar *)(v4 + v12) = 0;
    }
  }
  else
  {
    while ( 1 )
    {
      v8 = strchr(v3, 47);
      if ( !v8 )
        break;
      ++v7;
      v3 = v8 + 1;
      if ( v7 >= v5 )
        goto LABEL_5;
    }
    result = -1;
  }
  return result;
}

//----- (021DFC18) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x21E0AE8 for case 0"

//----- (021DFCAC) --------------------------------------------------------
void Function_21dfcac()
{
  JUMPOUT(&loc_21E0AE8);
}

//----- (021DFCB0) --------------------------------------------------------
void Function_21dfcb0()
{
  JUMPOUT(&loc_21DFD38);
}

//----- (021DFCB4) --------------------------------------------------------
void Function_21dfcb4()
{
  JUMPOUT(&loc_21DFF08);
}

//----- (021DFCB8) --------------------------------------------------------
void Function_21dfcb8()
{
  JUMPOUT(&loc_21E00DC);
}

//----- (021DFCBC) --------------------------------------------------------
void Function_21dfcbc()
{
  JUMPOUT(&loc_21E013C);
}

//----- (021DFCC0) --------------------------------------------------------
void Function_21dfcc0()
{
  JUMPOUT(&loc_21E025C);
}

//----- (021DFCC4) --------------------------------------------------------
void Function_21dfcc4()
{
  JUMPOUT(&loc_21E02D8);
}

//----- (021DFCC8) --------------------------------------------------------
void Function_21dfcc8()
{
  JUMPOUT(&loc_21E03E8);
}

//----- (021DFCCC) --------------------------------------------------------
void Function_21dfccc()
{
  JUMPOUT(&loc_21E0500);
}

//----- (021DFCD0) --------------------------------------------------------
void Function_21dfcd0()
{
  JUMPOUT(&loc_21E0680);
}

//----- (021DFCD4) --------------------------------------------------------
void Function_21dfcd4()
{
  JUMPOUT(&loc_21E06D4);
}

//----- (021DFCD8) --------------------------------------------------------
void Function_21dfcd8()
{
  JUMPOUT(&loc_21DFD38);
}

//----- (021DFCDC) --------------------------------------------------------
void Function_21dfcdc()
{
  JUMPOUT(&loc_21E077C);
}

//----- (021DFCE0) --------------------------------------------------------
void Function_21dfce0()
{
  JUMPOUT(&loc_21E07F0);
}

//----- (021DFCE4) --------------------------------------------------------
void Function_21dfce4()
{
  JUMPOUT(&loc_21E07F0);
}

//----- (021DFCE8) --------------------------------------------------------
void Function_21dfce8()
{
  JUMPOUT(&loc_21E07F0);
}

//----- (021DFCEC) --------------------------------------------------------
void Function_21dfcec()
{
  JUMPOUT(&loc_21E0814);
}

//----- (021DFCF0) --------------------------------------------------------
void Function_21dfcf0()
{
  JUMPOUT(&loc_21E0864);
}

//----- (021DFCF4) --------------------------------------------------------
void Function_21dfcf4()
{
  JUMPOUT(&loc_21E0904);
}

//----- (021DFCF8) --------------------------------------------------------
void Function_21dfcf8()
{
  JUMPOUT(&loc_21E0960);
}

//----- (021DFCFC) --------------------------------------------------------
void Function_21dfcfc()
{
  JUMPOUT(&loc_21E0AE8);
}

//----- (021DFD00) --------------------------------------------------------
void Function_21dfd00()
{
  JUMPOUT(&loc_21E0AE8);
}

//----- (021DFD04) --------------------------------------------------------
void Function_21dfd04()
{
  JUMPOUT(&loc_21E0AE8);
}

//----- (021DFD08) --------------------------------------------------------
void Function_21dfd08()
{
  JUMPOUT(&loc_21E0AE8);
}

//----- (021DFD0C) --------------------------------------------------------
void Function_21dfd0c()
{
  JUMPOUT(&loc_21E0AE8);
}

//----- (021DFD10) --------------------------------------------------------
void Function_21dfd10()
{
  JUMPOUT(&loc_21E0AE8);
}

//----- (021DFD14) --------------------------------------------------------
void Function_21dfd14()
{
  JUMPOUT(&loc_21E0AE8);
}

//----- (021DFD18) --------------------------------------------------------
void Function_21dfd18()
{
  JUMPOUT(&loc_21E0AE8);
}

//----- (021DFD1C) --------------------------------------------------------
void Function_21dfd1c()
{
  JUMPOUT(&loc_21E0AE8);
}

//----- (021DFD20) --------------------------------------------------------
void Function_21dfd20()
{
  JUMPOUT(&loc_21E0AE8);
}

//----- (021DFD24) --------------------------------------------------------
void Function_21dfd24()
{
  JUMPOUT(&loc_21E0AE8);
}

//----- (021DFD28) --------------------------------------------------------
void Function_21dfd28()
{
  JUMPOUT(&loc_21E0AE8);
}

//----- (021DFD2C) --------------------------------------------------------
void __fastcall Function_21dfd2c(int a1)
{
  uint *v1;
  int v2;
  int v3;
  int v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;

  if ( *(uchar *)(Function_21e4a34(a1) + 21) == 1 && !*(uchar *)(Function_21e4a34(1) + 422) )
  {
    v3 = 1;
    v4 = *(uchar *)(Function_21e4a34(0) + 13);
    if ( v4 >= 1 )
    {
      while ( 1 )
      {
        v5 = *(uint *)(Function_21e4a34(v4) + 4 * v3 + 244);
        if ( v2 == v5 )
          break;
        ++v3;
        v4 = *(uchar *)(Function_21e4a34(v5) + 13);
        if ( v3 > v4 )
          goto LABEL_15;
      }
      if ( *v1 )
      {
        v12 = Function_21e4a34(*v1);
        *(uint *)(v12 + 476) |= 1 << Function_21e31c4(v2, 0);
      }
      else
      {
        v6 = *(uint *)(Function_21e4a34(0) + 416);
        if ( v6 == 11 || (v7 = *(uint *)(Function_21e4a34(v6) + 416), v7 == 12) )
        {
          v8 = Function_21e22c8();
          v7 = Function_21e1008(v8);
          if ( v7 )
            JUMPOUT(__CS__, v13);
        }
        v9 = *(uint *)(Function_21e4a34(v7) + 412);
        if ( v9 )
        {
          v10 = Function_21e4a34(v9);
          v11 = Function_21fb674(*(uint *)(v10 + 412));
          *(uint *)(Function_21e4a34(v11) + 412) = 0;
        }
        Function_21e249c();
      }
    }
  }
LABEL_15:
  JUMPOUT(__CS__, v13);
}

//----- (021E0AFC) --------------------------------------------------------
int __fastcall Function_21e0afc(int a1, int a2, int a3, int a4, int a5)
{
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  uint *v11;
  int v12;
  int v13;
  int v14;
  int v15;
  int v16;
  int v17;
  int v18;
  int v19;
  int v20;
  int v21;
  int v22;
  int v23;
  bool v24;
  int v25;
  int v26;
  int v27;
  int v28;
  int v29;
  int v30;
  uint *v32;
  int v33;
  int v34;
  int *v35;
  bool v36;
  bool v37;

  v6 = a1;
  v7 = a2;
  v8 = a3;
  v9 = a4;
  v10 = *(uchar *)(Function_21e4a34(a1) + 21);
  if ( v10 )
  {
    if ( v10 != 1 )
    {
      if ( v10 == 2 )
      {
        v32 = (uint *)Function_21e4a34(2);
        v33 = Function_21eba88(*v32, v6);
        if ( v33 )
        {
          if ( v9 == 3
            && (v34 = Function_21e4a34(v33),
                *(uchar *)(v34 + 20) != *(uchar *)(Function_21e4a34(v34) + 22)) )
          {
            v35 = &dword_221A400[170];
            v36 = LOBYTE(dword_221A400[177]) == 1;
            if ( LOBYTE(dword_221A400[177]) == 1 )
            {
              v35 = (int *)BYTE1(dword_221A400[177]);
              v36 = BYTE1(dword_221A400[177]) == 1;
            }
            if ( v36 )
            {
              v5 = 19;
            }
            else
            {
              if ( *(uint *)(Function_21e4a34(v35) + 416) != 10
                || !*(uint *)(Function_21e4a34(10) + 28) && !*(ushort *)(Function_21e4a34(0) + 26) )
              {
                goto LABEL_63;
              }
              v37 = v7 == 0;
              if ( !v7 )
                v37 = v8 == 0;
              if ( !v37 )
                v5 = 2;
              else
LABEL_63:
                v5 = 4;
            }
          }
          else
          {
            v5 = 3;
          }
        }
        else
        {
          v5 = 255;
        }
      }
      return v5;
    }
    v11 = (uint *)Function_21e4a34(1);
    if ( !Function_21eba88(*v11, v6) )
      return 255;
    v10 = Function_21e3078(v6);
    if ( !v10 )
      return 3;
  }
  v12 = *(uchar *)(Function_21e4a34(v10) + 21);
  if ( v9 != v12 )
    goto LABEL_64;
  v12 = *(uchar *)(Function_21e4a34(v12) + 425);
  if ( v12
    || (v13 = Function_21e4a34(0),
        v14 = v13,
        v12 = *(uchar *)(Function_21e4a34(v13) + 22),
        *(uchar *)(v14 + 20) == v12)
    || (v12 = *(uchar *)(Function_21e4a34(v12) + 23)) != 0
    && (v15 = Function_21e4a34(v12),
        v16 = v15,
        v12 = *(uint *)(Function_21e4a34(v15) + 512),
        *(uint *)(v16 + 32) == v12) )
  {
LABEL_64:
    v5 = 3;
    if ( !*(uchar *)(Function_21e4a34(v12) + 21) && !*(uint *)(*(uint *)(Function_21e4a34(0) + 16) + 180) )
    {
      v17 = *(uchar *)(Function_21e4a34(0) + 23);
      if ( v17 )
      {
        v18 = Function_21e4a34(v17);
        v19 = v18;
        v20 = *(uint *)(Function_21e4a34(v18) + 512);
        if ( *(uint *)(v19 + 32) == v20 )
        {
          v21 = Function_21e4a34(v20);
          Function_21fc194(*(uint *)(v21 + 16));
        }
      }
    }
  }
  else
  {
    v22 = *(uint *)(Function_21e4a34(v12) + 416);
    if ( v22 != 3 )
    {
      v22 = *(uint *)(Function_21e4a34(v22) + 416);
      if ( v22 != 4 )
        goto LABEL_65;
    }
    v23 = *(uint *)(Function_21e4a34(v22) + 28);
    if ( !v23 )
    {
      v23 = *(ushort *)(Function_21e4a34(0) + 26);
      if ( !v23 )
        goto LABEL_65;
    }
    v24 = v7 == 0;
    if ( !v7 )
      v24 = v8 == 0;
    if ( !v24 )
    {
      v25 = *(uint *)(Function_21e4a34(v23) + 516);
      if ( v25 )
      {
        if ( v6 == *(uint *)(Function_21e4a34(v25) + 516) )
        {
          if ( a5
            || (v26 = *(uint *)(Function_21e4a34(0) + 512), v26 < v6)
            && v6 != *(uint *)(Function_21e4a34(v26) + 520) )
          {
            v5 = 2;
          }
          else
          {
            v5 = 255;
          }
        }
        else
        {
          v27 = a5;
          if ( !a5
            && ((v28 = *(uint *)(Function_21e4a34(a5) + 512), v28 >= v6)
             || (v27 = *(uint *)(Function_21e4a34(v28) + 520)) != 0) )
          {
            v5 = 3;
          }
          else
          {
            v29 = Function_21e4a34(v27);
            v30 = Function_21e1584(*(uint *)(v29 + 516));
            if ( Function_21e1008(v30) )
              return 255;
            v5 = 2;
          }
        }
      }
      else
      {
        v5 = 2;
      }
    }
    else
    {
LABEL_65:
      v5 = 4;
    }
  }
  return v5;
}

//----- (021E0DF8) --------------------------------------------------------
uint __fastcall Function_21e0df8(int a1, int a2, short a3, int a4)
{
  int v4;
  int v5;
  short v6;
  int v7;
  uint result;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;
  int v14;
  int v15;
  int v16;
  int v17;
  int v18;
  int v19;
  int v20;
  int v21;
  int v22;
  int v23;
  int v24;
  int v25;
  int v26;
  int v27;
  int v28;
  int v29;
  int v30;
  int v31;
  int v32;
  int v33;
  int v34;
  int v35;
  int v36;
  int v37;

  v37 = a4;
  v4 = a1;
  v5 = a2;
  v6 = a3;
  v7 = *(uchar *)(Function_21e4a34(a1) + 23);
  if ( v7 )
  {
    v7 = *(uint *)(Function_21e4a34(v7) + 32);
    if ( v4 == v7 )
      return 0;
  }
  v9 = Function_21e4a34(v7);
  *(uchar *)(v9 + 23) = 1;
  v10 = Function_21e4a34(v9);
  *(uint *)(v10 + 32) = v4;
  v11 = Function_21e4a34(v10);
  *(uint *)(v11 + 444) = 0;
  v12 = Function_21e4a34(v11);
  *(uint *)(v12 + 456) = 0;
  v13 = Function_21e4a34(v12);
  v14 = Function_21fc194(*(uint *)(v13 + 16));
  v15 = Function_21e4a34(v14);
  *(uint *)(v15 + 516) = 0;
  v16 = Function_21e4a34(v15);
  v17 = v16 + 4 * (*(uchar *)(Function_21e4a34(v16) + 20) + 1);
  *(uint *)(v17 + 244) = v4;
  v18 = Function_21e4a34(v17);
  v19 = v18 + 4 * (*(uchar *)(Function_21e4a34(v18) + 20) + 1);
  *(uint *)(v19 + 36) = v5;
  v20 = Function_21e4a34(v19);
  v21 = v20 + 2 * (*(uchar *)(Function_21e4a34(v20) + 20) + 1);
  *(ushort *)(v21 + 164) = v6;
  v22 = Function_21e4a34(v21);
  *(uint *)(v22 + 440) = v5;
  v23 = Function_21e4a34(v22) + 256;
  *(ushort *)(v23 + 180) = v6;
  v24 = Function_21e4a34(v23);
  v25 = Function_21e4a34(v24);
  v26 = Function_21e3008();
  *(uchar *)(v24 + *(uchar *)(v25 + 20) + 1 + 720) = v26;
  v35 = v4;
  v27 = Function_21e4a34(v26);
  v28 = 1;
  v36 = *(uchar *)(v27 + *(uchar *)(Function_21e4a34(v27) + 20) + 1 + 720);
  v29 = *(uchar *)(Function_21e4a34(v36) + 20);
  if ( v29 < 1 )
  {
LABEL_7:
    Function_21e32b4(1);
    result = 0;
  }
  else
  {
    while ( 1 )
    {
      v30 = Function_21e4a34(v29);
      v31 = v30;
      v32 = Function_21e4a34(v30);
      v33 = v32;
      v34 = Function_21e4a34(v32);
      result = Function_21df7dc(
                 7,
                 *(uint *)(v31 + 4 * v28 + 244),
                 *(uint *)(v33 + 4 * v28 + 36),
                 *(ushort *)(v34 + 2 * v28 + 164),
                 &v35,
                 2);
      if ( result )
        break;
      ++v28;
      v29 = *(uchar *)(Function_21e4a34(0) + 20);
      if ( v28 > v29 )
        goto LABEL_7;
    }
  }
  return result;
}

//----- (021E0FB8) --------------------------------------------------------
int __fastcall Function_21e0fb8(int *a1, uint *a2)
{
  uint *v2;
  uint v3;
  int *v4;
  int v5;
  int v6;
  int v7;
  int result;

  v2 = a2;
  v3 = *a2;
  v4 = a1;
  v5 = v3 + 2;
  if ( v3 != 0 && v3 < 0xFFFFFFFE )
  {
    v6 = Function_21e4a34(a1);
    a1 = MI_CpuCopy32((int *)v2 + 1, (uint *)(v6 + 848), 4 * (v5 - 2));
  }
  v7 = Function_21e4a34(a1);
  *(uint *)(v7 + 840) = v5 - 1;
  result = Function_21e4a34(v7);
  *(uint *)(result + 844) = v4;
  return result;
}

//----- (021E1008) --------------------------------------------------------
int __fastcall Function_21e1008(int a1)
{
  int v1;
  int result;

  v1 = a1;
  if ( *(uchar *)(Function_21e4a34(a1) + 21) )
    result = Function_21e3750(v1);
  else
    result = Function_21e37c4(v1);
  return result;
}

//----- (021E1034) --------------------------------------------------------
uint __fastcall Function_21e1034(int a1, int a2)
{
  int v2;
  int v3;
  int v4;
  int v5;
  int v6;
  uint result;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;
  int v14;
  int v15;
  int v16;
  int v17;
  int v18;
  int v19;
  int v20;
  int v21;
  int v22;
  int v23;
  int v24;
  int v25;
  int v26;
  int v27;
  int v28;
  int v29;
  int v30;
  int v31;
  int v32;
  int v33;
  int v34;
  int v35;

  v2 = a1;
  if ( !a2
    && ((a1 = *(uint *)(Function_21e4a34(a1) + 28)) != 0 || (a1 = *(ushort *)(Function_21e4a34(0) + 26)) != 0) )
  {
    v8 = *(uchar *)(Function_21e4a34(a1) + 21);
    if ( v8 )
    {
      v21 = *(uchar *)(Function_21e4a34(v8) + 21);
      if ( v21 == 1 )
      {
        v21 = Function_21e4a34(1);
        *(uint *)(v21 + 244) = v2;
      }
      v22 = Function_21e4a34(v21);
      *(uint *)(v22 + 516) = v2;
      v34 = *(uint *)(Function_21e4a34(v22) + 28);
      v19 = *(ushort *)(Function_21e4a34(v34) + 26);
      v20 = 3;
      v35 = v19;
    }
    else
    {
      v9 = Function_21e4a34(0);
      v10 = Function_21fee90(*(uint *)(v9 + 228), 0);
      v11 = Function_21e4a34(v10);
      v12 = Function_21fe28c(v10, "dwc_pid", 0);
      *(uint *)(v11 + 244) = v12;
      v13 = Function_21e4a34(v12);
      v14 = Function_21fe350(v10);
      *(uint *)(v13 + 36) = v14;
      v15 = Function_21e4a34(v14);
      v16 = Function_21fe358(v10);
      *(ushort *)(v15 + 164) = v16;
      v17 = Function_21e4a34(v16);
      v18 = v17;
      v19 = *(uint *)(Function_21e4a34(v17) + 244);
      v20 = 1;
      *(uint *)(v18 + 516) = v19;
    }
    v23 = Function_21e4a34(v19);
    *(uint *)(v23 + 456) = 6000;
    v24 = Function_21e4a34(v23);
    v25 = OS_GetTick();
    *(uint *)(v24 + 460) = v25;
    *(uint *)(v24 + 464) = v26;
    v27 = Function_21e4a34(v25);
    *(uint *)(v27 + 444) = 0;
    v28 = *(uint *)(Function_21e4a34(v27) + 520);
    if ( v28 )
      v29 = 11;
    else
      v29 = 1;
    v33 = *(uchar *)(Function_21e4a34(v28) + 21);
    v30 = Function_21e4a34(v33);
    v31 = v30;
    v32 = Function_21e4a34(v30);
    result = Function_21df7dc(v29, v2, *(uint *)(v31 + 36), *(ushort *)(v32 + 164), &v33, v20);
  }
  else
  {
    v3 = Function_21e4a34(a1);
    *(uint *)(v3 + 444) = 1;
    v4 = Function_21e4a34(v3);
    v5 = OS_GetTick();
    *(uint *)(v4 + 448) = v5;
    *(uint *)(v4 + 452) = v6;
    *(uint *)(Function_21e4a34(v5) + 244) = v2;
    result = 0;
  }
  return result;
}

//----- (021E11E4) --------------------------------------------------------
uint __fastcall Function_21e11e4(int a1, int a2, int a3, int a4)
{
  int v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  BOOL v12;
  bool v13;
  int v14;
  int v15;
  int v16;
  int v17;
  int v18;
  int v19;
  int v20;
  int v21;
  int v23;
  int v24;
  int v25;
  int v26;
  int v27;
  int v28;
  int v29;
  bool v30;
  int v31;
  int v32;
  int v33;
  int v34;
  int v35;
  int v36;
  int v37;
  int v38;
  uint *v39;
  int v40;
  int v41;
  uint *v42;
  bool v43;
  int v44;
  int v45;
  int v46;
  bool v47;
  bool v48;
  int v49;
  int v50;
  int v51;
  char v52;
  int v53;
  char v54;
  char v55;
  char v56;
  int v57;
  char v58;
  int v59;

  v59 = a4;
  v4 = a2;
  v5 = a1;
  v6 = a3;
  if ( a2 )
  {
    v7 = Function_21e4a34(a1);
    v8 = *(uchar *)(v7 + 421);
  }
  else
  {
    v9 = Function_21e4a34(a1);
    v10 = v9;
    v7 = *(uint *)(Function_21e4a34(v9) + 836) - 1;
    if ( *(uchar *)(v10 + 421) < v7 )
    {
      v7 = *(uchar *)(Function_21e4a34(v7) + 421);
      v8 = v7 + 1;
    }
    else
    {
      v8 = 0;
    }
  }
  v11 = 0;
  v12 = v4 == 0;
  while ( 1 )
  {
    v13 = v12 == 0;
    if ( !v12 )
      v13 = v11 == 0;
    if ( !v13 )
    {
      v14 = Function_21e4a34(v7);
      ++*(uchar *)(v14 + 421);
      v15 = Function_21e4a34(v14);
      v16 = v15;
      v7 = *(uint *)(Function_21e4a34(v15) + 836);
      if ( *(uchar *)(v16 + 421) >= v7 )
      {
        v7 = Function_21e4a34(v7);
        *(uchar *)(v7 + 421) = 0;
      }
    }
    if ( v11 )
    {
      v17 = *(uchar *)(Function_21e4a34(v7) + 421);
      if ( v8 == v17 )
      {
        v18 = Function_21e4a34(v17);
        *(uint *)(v18 + 456) = 3000;
        v19 = Function_21e4a34(v18);
        v20 = OS_GetTick();
        *(uint *)(v19 + 460) = v20;
        *(uint *)(v19 + 464) = v21;
        *(uint *)(Function_21e4a34(v20) + 444) = 0;
        return 0;
      }
    }
    v11 = 1;
    v23 = Function_21da87c();
    v24 = v23;
    v25 = Function_21e4a34(v23);
    v26 = v25;
    v27 = Function_21e4a34(v25);
    v28 = v27;
    v29 = Function_21e4a34(v27);
    v7 = Function_20a4698(
           v24,
           (uint *)(*(uint *)(v26 + 764) + 12 * *(uchar *)(v28 + *(uchar *)(v29 + 421) + 772)));
    v31 = v7;
    v30 = v7 == 0;
    if ( v7 )
    {
      v7 = -1;
      v30 = v31 == -1;
    }
    if ( !v30 )
    {
      v32 = Function_21e4a34(v7);
      v33 = v32;
      v34 = Function_21e4a34(v32);
      v35 = v34;
      v36 = Function_21e4a34(v34);
      v7 = Function_20a44b0((uint *)(*(uint *)(v33 + 764)
                                     + 12 * *(uchar *)(v35 + *(uchar *)(v36 + 421) + 772)));
      if ( v7 )
      {
        v37 = 1;
        v38 = *(uchar *)(Function_21e4a34(v7) + 13);
        if ( v38 >= 1 )
        {
          do
          {
            v38 = *(uint *)(Function_21e4a34(v38) + 4 * v37 + 244);
            if ( v31 == v38 )
              break;
            ++v37;
            v38 = *(uchar *)(Function_21e4a34(v38) + 13);
          }
          while ( v37 <= v38 );
        }
        v7 = *(uchar *)(Function_21e4a34(v38) + 13);
        if ( v37 > v7 )
        {
          v39 = (uint *)Function_21e4a34(v7);
          v40 = Function_21eba18(*v39, v31, &v53);
          v41 = v40;
          v42 = (uint *)Function_21e4a34(v40);
          v7 = v41 | Function_21eb8d8(*v42, v53, &v56);
          v43 = v7 == 0;
          if ( !v7 )
          {
            v7 = v57;
            v43 = v57 == 4;
          }
          if ( v43 )
          {
            v44 = Function_21d89c0((char *)&dword_22174F0, &v55, &v58, 47);
            v45 = Function_21d89c0((char *)&dword_22174E8, &v54, &v58, 47);
            v7 = Function_21d89c0((char *)&dword_22174EC, &v52, &v58, 47);
            v47 = v44 == 0;
            v48 = v44 < 0;
            if ( v44 > 0 )
            {
              v47 = v45 == 0;
              v48 = v45 < 0;
            }
            if ( !v48 && !v47 )
            {
              v47 = v7 == 0;
              v48 = v7 < 0;
            }
            if ( !v48 && !v47 )
            {
              Function_20dacac((int)&v55, 0, 10, v46);
              if ( v7 == 3 )
              {
                Function_20dacac((int)&v54, 0, 10, v49);
                v51 = v50;
                v7 = *(uchar *)(Function_21e4a34(v50) + 22);
                if ( v51 == v7 )
                  break;
              }
            }
          }
        }
      }
    }
  }
  if ( v31 == v6 )
    v5 = 1;
  return Function_21e1034(v31, v5);
}

//----- (021E14AC) --------------------------------------------------------
int __fastcall Function_21e14ac(int a1)
{
  int v1;
  int v2;
  int v3;
  int v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v11;
  int v12;
  int v13;

  v1 = a1;
  v2 = Function_21e4a34(a1);
  *(uint *)(v2 + 520) = 0;
  v3 = Function_21e4a34(v2);
  *(uint *)(v3 + 516) = 0;
  v4 = Function_21e4a34(v3);
  *(uchar *)(v4 + 423) = 0;
  v5 = Function_21e4a34(v4);
  v6 = OS_GetTick();
  *(uint *)(v5 + 460) = v6;
  *(uint *)(v5 + 464) = v7;
  v8 = *(uchar *)(Function_21e4a34(v6) + 21);
  if ( v8 )
  {
    v11 = *(uchar *)(Function_21e4a34(v8) + 21);
    if ( v11 == 1 )
    {
      v13 = Function_21e11e4(0, 0, v1, v12);
      if ( Function_21e1008(v13) )
        return 0;
    }
    else if ( *(uchar *)(Function_21e4a34(v11) + 21) == 3 )
    {
      Function_21de3bc(6, -80410);
      return 0;
    }
  }
  else
  {
    Function_21e4a44(3);
    v9 = Function_21df1d0(0);
    if ( Function_21e37c4(v9) )
      return 0;
  }
  return 1;
}

//----- (021E1584) --------------------------------------------------------
uint __fastcall Function_21e1584(int a1)
{
  int v1;
  int v2;
  int v3;
  int v4;
  uint v5;
  uint v6;

  v1 = a1;
  v2 = Function_21e4a34(a1);
  v3 = v2;
  v4 = Function_21e4a34(v2);
  v5 = Function_21df7dc(5, v1, *(uint *)(v3 + 36), *(ushort *)(v4 + 164), 0, 0);
  v6 = v5;
  *(uint *)(Function_21e4a34(v5) + 516) = 0;
  return v6;
}

//----- (021E15D8) --------------------------------------------------------
int __fastcall Function_21e15d8(int a1)
{
  int v1;
  int v2;
  int v3;
  int v4;
  BOOL v5;
  int v6;
  int v7;
  int v8;
  uint v9;
  int v10;
  int v11;
  int v12;
  int v13;
  int v14;
  int v15;
  int v16;
  int v17;
  int v18;
  int v19;
  int v20;
  int v21;
  int v22;
  int v23;
  int v24;
  int v25;
  int v26;
  int v27;
  int v28;
  int v29;
  int v30;
  int v31;
  int v32;

  v1 = a1;
  v2 = *(uchar *)(Function_21e4a34(a1) + 23);
  v5 = 1;
  if ( v2 )
  {
    v3 = Function_21e4a34(v2);
    v4 = v3;
    v2 = *(uint *)(Function_21e4a34(v3) + 512);
    if ( *(uint *)(v4 + 32) == v2 )
      v5 = 0;
  }
  if ( v5 )
  {
    v6 = Function_21e4a34(v2);
    *(uchar *)(v6 + 23) = 0;
    v7 = Function_21e4a34(v6);
    *(uint *)(v7 + 32) = 0;
    v8 = Function_21e4a34(v7);
    v2 = Function_21fc194(*(uint *)(v8 + 16));
  }
  v9 = *(uchar *)(Function_21e4a34(v2) + 13);
  if ( v9 < 0x1F )
  {
    v10 = Function_21e4a34(v9);
    v9 = v10 + 4 * (*(uchar *)(Function_21e4a34(v10) + 13) + 1);
    *(uint *)(v9 + 244) = 0;
  }
  v11 = Function_21e4a34(v9);
  *(uchar *)(v11 + 972) = -1;
  v12 = *(uint *)(Function_21e4a34(v11) + 412);
  if ( v12 )
  {
    v13 = Function_21e4a34(v12);
    v14 = Function_21fb674(*(uint *)(v13 + 412));
    v12 = Function_21e4a34(v14);
    *(uint *)(v12 + 412) = 0;
  }
  v15 = Function_21e4a34(v12);
  v16 = v15;
  v17 = *(uchar *)(Function_21e4a34(v15) + 13);
  *(uchar *)(v16 + 20) = v17;
  v18 = Function_21e4a34(v17);
  *(uint *)(v18 + 516) = 0;
  if ( !v5 )
  {
    if ( *(uchar *)(Function_21e4a34(v18) + 21) != 3 )
      Function_21e249c();
    return 1;
  }
  v19 = *(uchar *)(Function_21e4a34(v18) + 21);
  if ( !v19 )
  {
    v20 = Function_21e4a44(3);
    v21 = Function_21e4a34(v20);
    *(uint *)(v21 + 232) = 2;
    v22 = Function_21e4a34(v21);
    *(uint *)(v22 + 236) = OS_GetTick();
    *(uint *)(v22 + 240) = v23;
    return 1;
  }
  v24 = *(uchar *)(Function_21e4a34(v19) + 21);
  if ( v24 == 1 )
  {
    Function_21e4a44(4);
    Function_21e11e4(1, 0, 0, v25);
    return 1;
  }
  if ( *(uchar *)(Function_21e4a34(v24) + 21) != 2 )
    return 1;
  v26 = Function_21e4a44(14);
  v27 = Function_21e4a34(v26);
  *(uint *)(v27 + 472) = 0;
  *(ushort *)(Function_21e4a34(v27) + 434) = 0;
  v28 = Function_21e2590(v1);
  v29 = 1;
  v30 = *(uchar *)(Function_21e4a34(v28) + 13);
  if ( v30 < 1 )
  {
LABEL_23:
    if ( !*(uchar *)(Function_21e4a34(v30) + 13) )
      Function_21e239c(2);
    return 1;
  }
  while ( 1 )
  {
    v31 = Function_21e4a34(v30);
    v32 = Function_21e2acc(*(uint *)(v31 + 4 * v29 + 244), 13);
    if ( !v32 )
      return 0;
    ++v29;
    v30 = *(uchar *)(Function_21e4a34(v32) + 13);
    if ( v29 > v30 )
      goto LABEL_23;
  }
}

//----- (021E17F4) --------------------------------------------------------
int __fastcall Function_21e17f4(int a1)
{
  int v1;
  int v2;
  int result;
  int v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;

  v1 = 1;
  v2 = *(uchar *)(Function_21e4a34(a1) + 21);
  if ( v2 == 3 )
  {
    if ( *(uchar *)(Function_21e4a34(3) + 13) )
      Function_21e2600();
    Function_21de3bc(6, -80430);
    result = 0;
  }
  else
  {
    v4 = Function_21e4a34(v2);
    v5 = v4;
    v6 = *(uchar *)(Function_21e4a34(v4) + 13);
    *(uchar *)(v5 + 20) = v6;
    v7 = Function_21e4a34(v6);
    *(uint *)(v7 + 520) = 0;
    v8 = *(uint *)(Function_21e4a34(v7) + 412);
    if ( v8 )
    {
      v9 = Function_21e4a34(v8);
      v10 = Function_21fb674(*(uint *)(v9 + 412));
      v8 = Function_21e4a34(v10);
      *(uint *)(v8 + 412) = 0;
    }
    if ( *(uchar *)(Function_21e4a34(v8) + 13) )
    {
      Function_21e249c();
    }
    else
    {
      Function_21e4a44(4);
      v1 = Function_21e14ac(0);
    }
    result = v1;
  }
  return result;
}

//----- (021E18B4) --------------------------------------------------------
uint __fastcall Function_21e18b4(int a1)
{
  int v1;
  int v2;
  int v3;
  int v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  uint result;
  int v13;
  int v14;
  int v15;
  int v16;
  int v17;

  v1 = 1;
  v2 = *(uchar *)(Function_21e4a34(a1) + 13);
  if ( v2 < 1 )
  {
LABEL_4:
    v13 = Function_21e4a34(v2);
    *(uchar *)(v13 + 23) = 0;
    v14 = Function_21e4a34(v13);
    *(uint *)(v14 + 32) = 0;
    v15 = Function_21e4a34(v14);
    *(uchar *)(v15 + 424) = 1;
    v16 = Function_21e4a34(v15);
    v17 = Function_21f8710(**(uint **)(v16 + 4));
    *(uchar *)(Function_21e4a34(v17) + 424) = 0;
    result = 0;
  }
  else
  {
    while ( 1 )
    {
      v3 = Function_21e4a34(v2);
      v4 = v3;
      v5 = Function_21e4a34(v3);
      v6 = v5;
      v7 = Function_21e4a34(v5);
      v8 = v7;
      v9 = Function_21e4a34(v7);
      v10 = v9;
      v11 = Function_21e4a34(v9);
      result = Function_21df7dc(
                 10,
                 *(uint *)(v4 + 4 * v1 + 244),
                 *(uint *)(v6 + 4 * v1 + 36),
                 *(ushort *)(v8 + 2 * v1 + 164),
                 (int *)(v10 + 840),
                 *(uint *)(v11 + 840) + 1);
      if ( result )
        break;
      ++v1;
      v2 = *(uchar *)(Function_21e4a34(0) + 13);
      if ( v1 > v2 )
        goto LABEL_4;
    }
  }
  return result;
}

//----- (021E1998) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x21E19C8 for case 0"

//----- (021E19B4) --------------------------------------------------------
void Function_21e19b4()
{
  JUMPOUT(&loc_21E19C8);
}

//----- (021E19B8) --------------------------------------------------------
void Function_21e19b8()
{
  JUMPOUT(&loc_21E1D68);
}

//----- (021E19BC) --------------------------------------------------------
void Function_21e19bc()
{
  JUMPOUT(&loc_21E1DAC);
}

//----- (021E19C0) --------------------------------------------------------
void Function_21e19c0()
{
  JUMPOUT(&loc_21E1E70);
}

//----- (021E19C4) --------------------------------------------------------
void __fastcall Function_21e19c4(int a1)
{
  int v1;
  int v2;
  int v3;
  int v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;
  int v14;
  int *v15;
  int v16;
  int v17;
  int v18;
  int v19;
  int v20;
  int v21;

  v2 = *(uchar *)(Function_21e4a34(a1) + 21);
  if ( v2 != 2 )
    v2 = Function_21db978(2, (int)&dword_22174E0, v1);
  v3 = *(uint *)(Function_21e4a34(v2) + 524);
  v4 = Function_21e4a34(v3);
  v5 = v4;
  v6 = Function_21e4a34(v4);
  v7 = Function_21db8dc(*(uint *)(v6 + 524));
  v8 = *(uint *)(Function_21e4a34(v7) + 1128);
  v9 = (*(int (__cdecl **)(uint, uint))(v5 + 1124))(0, 0);
  v10 = *(uchar *)(Function_21e4a34(v9) + 21);
  if ( v10 && (v10 = *(uchar *)(Function_21e4a34(v10) + 21), v10 != 1) )
  {
    v12 = *(uint *)(Function_21e4a34(v10) + 228);
    if ( v12 )
    {
      v13 = Function_21e4a34(v12);
      v14 = Function_21febbc(*(uint *)(v13 + 228));
      *(uint *)(Function_21e4a34(v14) + 228) = 0;
    }
    v15 = Function_21dc734();
    if ( *(uchar *)(Function_21e4a34(v15) + 21) == 2 )
    {
      v16 = Function_21deb94(2);
      if ( Function_21e3750(v16) )
        JUMPOUT(__CS__, v21);
      if ( LOBYTE(dword_221A400[177]) == 1 )
        BYTE1(dword_221A400[177]) = 1;
      v17 = Function_21e4a44(10);
    }
    else
    {
      v17 = Function_21e4a44(1);
    }
    v11 = Function_21e4a34(v17);
    *(uint *)(v11 + 524) = 0;
  }
  else
  {
    v11 = Function_21df134(v10);
  }
  v18 = Function_21e4a34(v11);
  *(uchar *)(v18 + 425) = 0;
  if ( !v1 )
    JUMPOUT(__CS__, v21);
  v19 = *(uchar *)(Function_21e4a34(v18) + 21);
  if ( v19 == 3 )
    JUMPOUT(__CS__, v21);
  v20 = Function_21e4a34(v19);
  Function_21fee44(*(uint *)(v20 + 228));
  JUMPOUT(__CS__, v21);
}

//----- (021E1FF8) --------------------------------------------------------
int __fastcall Function_21e1ff8(int a1, uint a2)
{
  int v2;
  uint v3;
  int v4;
  int v6;
  int v7;
  int v8;

  v2 = a1;
  v3 = a2;
  v4 = *(uchar *)(Function_21e4a34(a1) + 422);
  if ( v4 && *(uint *)(Function_21e4a34(v4) + 416) == 4 )
    return 1;
  v6 = 0;
  if ( !v3 )
    return 1;
  while ( 1 )
  {
    v7 = Function_21e3078(*(uint *)(v2 + 4 * v6));
    if ( !v7 )
      return 0;
    v8 = *(uchar *)(Function_21e4a34(v7) + 422);
    if ( v8 )
    {
      if ( *(uint *)(Function_21e4a34(v8) + 416) == 1 )
        break;
    }
    if ( ++v6 >= v3 )
      return 1;
  }
  return 1;
}

//----- (021E2080) --------------------------------------------------------
int __fastcall Function_21e2080(int a1)
{
  int v1;
  int v2;
  int result;
  int v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;
  int v14;
  int v15;
  int v16;
  int v17;
  int v18;
  int v19;
  int v20;

  v1 = Function_21e4a34(a1);
  *(uint *)(v1 + 524) = 0;
  v2 = *(uint *)(Function_21e4a34(v1) + 416);
  if ( v2 == 2 )
    return Function_21e2208(2);
  v4 = Function_21e4a34(v2);
  *(uchar *)(v4 + 425) = 1;
  v5 = *(uchar *)(Function_21e4a34(v4) + 21);
  if ( v5 == 3 )
  {
    v6 = Function_21e4a34(3);
    *(uchar *)(v6 + 425) = 1;
    v7 = *(uchar *)(Function_21e4a34(v6) + 13);
    if ( v7 )
    {
      v8 = Function_21e4a34(v7);
      result = Function_21f8710(**(uint **)(v8 + 4));
    }
    else
    {
      v9 = Function_21e4a34(0);
      v10 = Function_21e1584(*(uint *)(v9 + 244));
      result = Function_21e1008(v10);
      if ( result )
        return result;
    }
    result = Function_21e2208(result);
  }
  else
  {
    result = *(uint *)(Function_21e4a34(v5) + 416);
    if ( result != 4 )
    {
      result = *(uint *)(Function_21e4a34(result) + 416);
      if ( result != 5 )
      {
        result = *(uint *)(Function_21e4a34(result) + 416);
        if ( result != 6 )
        {
          result = *(uint *)(Function_21e4a34(result) + 416);
          if ( result != 7 )
          {
            result = *(uint *)(Function_21e4a34(result) + 416);
            if ( result != 11 )
            {
              result = *(uint *)(Function_21e4a34(result) + 416);
              if ( result != 12 )
                goto LABEL_24;
            }
          }
        }
      }
    }
    v11 = *(uint *)(Function_21e4a34(result) + 516);
    if ( !v11
      || (v12 = Function_21e4a34(v11),
          v13 = Function_21e1584(*(uint *)(v12 + 244)),
          (result = Function_21e1008(v13)) == 0) )
    {
      v14 = Function_21e22c8();
      result = Function_21e1008(v14);
      if ( !result )
      {
LABEL_24:
        v15 = *(uint *)(Function_21e4a34(result) + 412);
        if ( v15 )
        {
          v16 = Function_21e4a34(v15);
          v17 = Function_21fb674(*(uint *)(v16 + 412));
          v15 = Function_21e4a34(v17);
          *(uint *)(v15 + 412) = 0;
        }
        v18 = *(uchar *)(Function_21e4a34(v15) + 13);
        if ( v18 )
        {
          v19 = Function_21e4a34(v18);
          *(uchar *)(v19 + 425) = 1;
          v20 = Function_21e4a34(v19);
          v18 = Function_21f8710(**(uint **)(v20 + 4));
        }
        result = Function_21e2208(v18);
      }
    }
  }
  return result;
}

//----- (021E2208) --------------------------------------------------------
int Function_21e2208()
{
  int v0;
  int result;
  int v2;
  int v3;
  BOOL v4;
  int v5;
  BOOL v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;

  v0 = Function_21db978(1, (int)&dword_22174E0, 0);
  result = Function_21e3750(v0);
  if ( !result )
  {
    v2 = Function_21df134(0);
    v3 = *(uint *)(Function_21e4a34(v2) + 524);
    if ( v3 )
    {
      v4 = 1;
    }
    else
    {
      v3 = *(uchar *)(Function_21e4a34(0) + 21);
      v4 = v3 == 2;
    }
    v5 = *(uint *)(Function_21e4a34(v3) + 524);
    v6 = v5 == 0;
    v7 = Function_21e4a34(v5);
    v8 = v7;
    v9 = Function_21e4a34(v7);
    v10 = Function_21db8dc(*(uint *)(v9 + 524));
    v11 = v10;
    v12 = Function_21e4a34(v10);
    v13 = (*(int (__fastcall **)(uint, int, BOOL, BOOL, int, uint))(v8 + 1124))(
            0,
            1,
            v6,
            v4,
            v11,
            *(uint *)(v12 + 1128));
    result = Function_21e4a34(v13);
    *(uchar *)(result + 425) = 0;
  }
  return result;
}

//----- (021E22C8) --------------------------------------------------------
uint __fastcall Function_21e22c8(int a1)
{
  uint v1;
  int v2;
  int v3;
  int v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;
  int v14;
  int v15;
  uint v16;
  int v17;
  int v19;

  v1 = 0;
  v19 = 0;
  v2 = *(uchar *)(Function_21e4a34(a1) + 23);
  if ( v2 )
  {
    v3 = *(uint *)(Function_21e4a34(v2) + 32);
    if ( v3 )
    {
      v4 = Function_21e4a34(v3);
      v5 = v4;
      v6 = *(uint *)(Function_21e4a34(v4) + 512);
      if ( *(uint *)(v5 + 32) != v6 )
      {
        v7 = Function_21e4a34(v6);
        v8 = v7;
        v9 = Function_21e4a34(v7);
        v10 = v9;
        v11 = Function_21e4a34(v9);
        v12 = v11;
        v13 = Function_21e4a34(v11);
        v14 = v13;
        v15 = Function_21e4a34(v13);
        v16 = Function_21df7dc(
                12,
                *(uint *)(v8 + 32),
                *(uint *)(v10 + 4 * (*(uchar *)(v12 + 13) + 1) + 36),
                *(ushort *)(v14 + 2 * (*(uchar *)(v15 + 13) + 1) + 164),
                &v19,
                1);
        v1 = v16;
        v17 = Function_21e4a34(v16);
        *(uchar *)(v17 + 23) = 0;
        *(uint *)(Function_21e4a34(v17) + 32) = 0;
      }
    }
  }
  return v1;
}

//----- (021E239C) --------------------------------------------------------
int __fastcall Function_21e239c(int a1)
{
  int v1;
  int result;
  int v3;
  int v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  bool v13;

  v1 = a1;
  if ( !a1 )
    return Function_21e2208();
  v3 = Function_21decf4(a1);
  v4 = *(uchar *)(Function_21e4a34(v3) + 21);
  if ( v4 != 2 && (v4 = *(uchar *)(Function_21e4a34(v4) + 21), v4 != 3) )
  {
    result = *(uchar *)(Function_21e4a34(v4) + 21);
    if ( result )
    {
      result = *(uchar *)(Function_21e4a34(result) + 21);
      v13 = result == 1;
      if ( result == 1 )
        v13 = v1 == 1;
      if ( v13 )
        result = Function_21e11e4(0, 0, 0, v12);
    }
    else if ( v1 == 1 )
    {
      v11 = Function_21df1d0(0);
      result = Function_21e37c4(v11);
    }
  }
  else
  {
    v5 = *(uint *)(Function_21e4a34(v4) + 524);
    v6 = Function_21e4a34(v5);
    v7 = v6;
    v8 = Function_21e4a34(v6);
    v9 = Function_21db8dc(*(uint *)(v8 + 524));
    v10 = *(uint *)(Function_21e4a34(v9) + 1128);
    result = (*(int (__cdecl **)(uint, int))(v7 + 1124))(0, 1);
  }
  return result;
}

//----- (021E249C) --------------------------------------------------------
int __fastcall Function_21e249c(int a1)
{
  int result;

  result = *(uchar *)(Function_21e4a34(a1) + 21);
  if ( result != 2 )
  {
    result = *(uchar *)(Function_21e4a34(result) + 21);
    if ( result != 3 )
    {
      Function_21e2600();
      result = Function_21e239c(1);
    }
  }
  return result;
}

//----- (021E24D0) --------------------------------------------------------
int __fastcall Function_21e24d0(int a1)
{
  int v1;
  int v2;
  int v3;
  int v4;
  int v5;
  int v6;
  int v8;
  int v9;
  int v10;

  v1 = Function_21e4a34(a1);
  *(uchar *)(v1 + 23) = 0;
  v2 = Function_21e4a34(v1);
  *(uint *)(v2 + 32) = 0;
  v3 = Function_21e4a34(v2);
  *(uchar *)(v3 + 424) = 0;
  v4 = *(uint *)(Function_21e4a34(v3) + 520);
  if ( v4 )
  {
    v5 = *(uchar *)(Function_21e4a34(v4) + 21);
    if ( v5 )
    {
      if ( *(uchar *)(Function_21e4a34(v5) + 21) == 1 )
      {
        v8 = Function_21e4a44(4);
        v9 = Function_21e4a34(v8);
        v10 = Function_21e1034(*(uint *)(v9 + 520), 0);
        if ( Function_21e1008(v10) )
          return v10;
      }
    }
    else
    {
      Function_21e4a44(3);
      v6 = Function_21df1d0(0);
      if ( Function_21e37c4(v6) )
        return v6;
    }
  }
  else
  {
    Function_21e239c(1);
  }
  return 0;
}

//----- (021E2590) --------------------------------------------------------
int __fastcall Function_21e2590(int a1)
{
  int v1;
  int v2;
  int v3;
  int *v4;
  int *v5;
  int v6;
  int result;
  int v8;

  v1 = a1;
  v2 = Function_21e4a34(a1);
  *(uint *)(v2 + 524) = v1;
  v3 = Function_21e4a34(v2);
  v4 = Function_21d9c14(v1, *(uchar *)(v3 + 13) + 1);
  v5 = v4;
  if ( v4 )
  {
    *(uchar *)(Function_21e4a34(v4) + 424) = 2;
    v6 = Function_21f86f0(*v5);
    *(uchar *)(Function_21e4a34(v6) + 424) = 0;
    result = 1;
  }
  else
  {
    v8 = Function_21e4a34(0);
    Function_21de80c(v1, *(uchar *)(v8 + 13) + 1);
    result = 0;
  }
  return result;
}

//----- (021E2600) --------------------------------------------------------
int __fastcall Function_21e2600(int a1)
{
  int v1;
  int v2;
  int v3;
  int result;

  v1 = Function_21e4a34(a1);
  *(uchar *)(v1 + 424) = 2;
  v2 = Function_21e4a34(v1);
  v3 = Function_21f8710(**(uint **)(v2 + 4));
  result = Function_21e4a34(v3);
  *(uchar *)(result + 424) = 0;
  return result;
}

//----- (021E2630) --------------------------------------------------------
int __fastcall Function_21e2630(int a1)
{
  int v1;
  int v2;
  int v3;
  int v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int result;
  int v11;
  int i;
  char v13[128];
  int v14[1];

  v1 = 0;
  v2 = a1;
  v3 = 0;
  v4 = 1;
  v5 = *(uchar *)(Function_21e4a34(a1) + 13);
  if ( v5 >= 1 )
  {
    do
    {
      v6 = *(uchar *)(Function_21e4a34(v5) + v4 + 720);
      if ( v2 & (1 << v6) )
      {
        v7 = *(uint *)(Function_21e4a34(v6) + 4 * v4 + 244);
        *(uint *)&v13[4 * v3++] = v7;
      }
      else
      {
        v7 = *(uint *)(Function_21e4a34(v6) + 4 * v4 + 244);
        v14[v1++] = v7;
      }
      ++v4;
      v5 = *(uchar *)(Function_21e4a34(v7) + 13);
    }
    while ( v4 <= v5 );
  }
  v8 = 0;
  if ( v3 <= 0 )
  {
LABEL_10:
    v11 = Function_21e4a34(v5);
    *(uchar *)(v11 + 424) = 2;
    for ( i = 0; i < v1; ++i )
    {
      v11 = Function_21e31c4(v14[i], 0);
      if ( v11 != 255 )
        v11 = Function_21d97f4(v11);
    }
    *(uchar *)(Function_21e4a34(v11) + 424) = 0;
    result = 1;
  }
  else
  {
    while ( 1 )
    {
      v9 = Function_21df7dc(16, *(uint *)&v13[4 * v8], 0, 0, v14, v1);
      v5 = Function_21e1008(v9);
      if ( v5 )
        break;
      if ( ++v8 >= v3 )
        goto LABEL_10;
    }
    result = 0;
  }
  return result;
}

//----- (021E276C) --------------------------------------------------------
int __fastcall Function_21e276c(int a1, int a2, int a3, int a4)
{
  int v4;
  int v5;
  int v6;
  uint v7;
  int v8;
  uint v9;
  int v10;
  int v11;
  int v12;
  int v13;
  int result;
  int v15;
  char v16;
  char v17;
  char v18;
  int v19;

  v19 = a4;
  v4 = a2;
  v5 = a1;
  if ( a2 == 2 )
  {
    v6 = Function_21e4a34(a1);
    v7 = 1;
    if ( v5 == *(uchar *)(v6 + *(uchar *)(Function_21e4a34(v6) + 13) + 720) )
    {
      v8 = 1;
      v16 = 1;
    }
    else
    {
      v8 = 0;
      v16 = 0;
    }
    v9 = *(uchar *)(Function_21e4a34(v8) + 13);
    if ( v9 >= 1 )
    {
      while ( v5 != *(uchar *)(Function_21e4a34(v9) + v7 + 720) )
      {
        v10 = v7 + 1;
        v7 = (v7 + 1) & 0xFF;
        v9 = *(uchar *)(Function_21e4a34(v10) + 13);
        if ( v7 > v9 )
          goto LABEL_13;
      }
      v17 = v7;
      v18 = v5;
    }
  }
  else if ( a2 == 3 )
  {
    v11 = *(ushort *)(Function_21e4a34(a1) + 432);
    v16 = v11;
    v17 = *(ushort *)(Function_21e4a34(v11) + 432) >> 8;
  }
LABEL_13:
  v12 = Function_21e4b08(v4, v5, &v16, 4, *(uint *)&v16, v19);
  v13 = Function_21e4a34(v12);
  result = OS_GetTick();
  *(uint *)(v13 + 480) = result;
  *(uint *)(v13 + 484) = v15;
  return result;
}

//----- (021E285C) --------------------------------------------------------
int __fastcall Function_21e285c(int a1)
{
  int v1;
  int v2;
  int v3;
  int v4;
  ull v5;
  ull v6;
  int v8;
  bool v9;
  bool v10;
  uint v11;
  int v12;
  int v13;
  int v14;
  int v15;
  int v16;
  bool v17;
  bool v18;
  int v19;
  uint v20;
  int v21;
  int v22;
  int v23;
  int v24;
  int v25;
  int v26;
  int v27;
  int v28;
  int v29;
  int v30;
  int v31;
  int v32;
  int v33;
  int v34;
  int v35;
  int v36;

  v1 = *(uint *)(Function_21e4a34(a1) + 416);
  if ( v1 != 9 )
  {
    v2 = *(uint *)(Function_21e4a34(v1) + 416);
    if ( v2 != 16 && *(uint *)(Function_21e4a34(v2) + 416) != 17 )
      return 1;
  }
  v3 = OS_GetTick();
  v4 = *(uint *)(Function_21e4a34(v3) + 480);
  ll_udiv();
  v6 = v5;
  v8 = *(uint *)(Function_21e4a34(v5) + 416);
  if ( v8 == 9 )
  {
    v9 = 1;
    v10 = HIDWORD(v6) == 0;
    if ( !HIDWORD(v6) )
    {
      v9 = (uint)v6 >= 0x1770;
      v10 = (uint)v6 == 6000;
    }
    if ( !v10 && v9 )
    {
      v11 = Function_21d9a40();
      if ( v11 != 5 || (v11 = *(uchar *)(Function_21e4a34(5) + 429), v11 < 5) )
      {
        v13 = Function_21e4a34(v11);
        ++*(uchar *)(v13 + 429);
        v14 = Function_21e4a34(v13);
        Function_21e276c(*(uchar *)(v14 + 720), 3, v15, v16);
      }
      else
      {
        v12 = Function_21e4a34(v11);
        if ( !Function_21e17f4(*(uint *)(v12 + 244)) )
          return 0;
      }
    }
  }
  else if ( v8 == 16 )
  {
    v17 = 1;
    v18 = HIDWORD(v6) == 0;
    if ( !HIDWORD(v6) )
    {
      v17 = (uint)v6 >= 0x1770;
      v18 = (uint)v6 == 6000;
    }
    if ( !v18 && v17 )
    {
      v19 = Function_21e4a34(6000);
      ++*(uchar *)(v19 + 427);
      v20 = *(uchar *)(Function_21e4a34(v19) + 427);
      if ( v20 <= 5 )
      {
        v29 = 1;
        v30 = *(uchar *)(Function_21e4a34(v20) + 13);
        if ( v30 >= 1 )
        {
          do
          {
            v31 = Function_21e4a34(v30);
            v32 = v31;
            v33 = *(uchar *)(Function_21e4a34(v31) + v29 + 720);
            if ( !(*(uint *)(v32 + 468) & (1 << v33)) )
            {
              v34 = Function_21e4a34(v33);
              v33 = Function_21e276c(*(uchar *)(v34 + v29 + 720), 2, v35, v36);
            }
            ++v29;
            v30 = *(uchar *)(Function_21e4a34(v33) + 13);
          }
          while ( v29 <= v30 );
        }
      }
      else
      {
        v21 = *(uchar *)(Function_21e4a34(v20) + 21);
        if ( v21 && (v21 = *(uchar *)(Function_21e4a34(v21) + 21), v21 != 1) )
        {
          v22 = Function_21e4a34(v21);
          v23 = Function_21e2630(*(uint *)(v22 + 468));
          if ( !v23 )
            return 0;
          v24 = *(uchar *)(Function_21e4a34(v23) + 13);
          if ( v24 )
          {
            v25 = Function_21e4a34(v24);
            *(uchar *)(v25 + 427) = 0;
            v26 = Function_21e4a34(v25);
            *(uint *)(v26 + 480) = OS_GetTick();
            *(uint *)(v26 + 484) = v27;
          }
          else
          {
            v28 = Function_21e4a34(0);
            if ( !Function_21e15d8(*(uint *)(v28 + 524)) )
              return 0;
          }
        }
        else
        {
          Function_21e2600(v21);
          Function_21e239c(1);
        }
      }
    }
  }
  else if ( v8 == 17 && v6 > *(ushort *)(Function_21e4a34(17) + 432) )
  {
    Function_21e1998(4);
  }
  return 1;
}

//----- (021E2ACC) --------------------------------------------------------
int __fastcall Function_21e2acc(int a1, int a2, int a3, int a4)
{
  int v4;
  int v5;
  int v6;
  int v7;
  int v9;
  int v10;
  int v11;
  int v12;

  v12 = a4;
  v4 = a2;
  v5 = a1;
  if ( a2 == 13 )
  {
    v6 = 1;
    v11 = *(uint *)(Function_21e4a34(a1) + 524);
  }
  else
  {
    v6 = 0;
  }
  v7 = Function_21df7dc(v4, v5, 0, 0, &v11, v6);
  if ( Function_21e1008(v7) )
    return 0;
  v9 = Function_21e4a34(0);
  *(uint *)(v9 + 488) = OS_GetTick();
  *(uint *)(v9 + 492) = v10;
  return 1;
}

//----- (021E2B4C) --------------------------------------------------------
int __fastcall Function_21e2b4c(int a1, int a2, int a3)
{
  int v3;
  int v4;
  int v5;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  uint v13;
  uint v14;
  bool v15;
  bool v16;
  uint v17;
  int v18;
  uint v19;
  uint v20;
  uint v21;
  int v22;
  int v23;
  int v24;
  char v25;
  int v26;
  int v27;
  int v28;
  int v29;
  int v30;
  int v31;
  int v32;
  int v33;
  int v34;
  int v35;

  v3 = a1;
  v4 = a2;
  v5 = a3;
  if ( Function_21d9a40() != 6 )
    return 1;
  if ( v4 == 13 )
  {
    if ( *(uint *)(Function_21e4a34(6) + 416) != 8 )
    {
      Function_21e4a44(8);
      Function_21e2590(v5);
    }
    if ( !Function_21e2acc(v3, 14, v7, v8) )
      return 0;
    return 1;
  }
  if ( v4 != 14 )
  {
    if ( v4 == 15 && *(uint *)(Function_21e4a34(6) + 416) == 8 )
      Function_21e239c(2);
    return 1;
  }
  if ( *(uint *)(Function_21e4a34(6) + 416) != 14 )
  {
    if ( !Function_21e2acc(v3, 15, v9, v10) )
      return 0;
    return 1;
  }
  v11 = OS_GetTick();
  v12 = *(uint *)(Function_21e4a34(v11) + 488);
  ll_udiv();
  v15 = 1;
  v16 = v13 >> 1 == 0;
  v17 = (v14 >> 1) | (v13 << 31);
  if ( !(v13 >> 1) )
  {
    v15 = v17 >= 0x12C;
    v16 = v17 == 300;
  }
  if ( !v16 && v15 )
  {
    v18 = *(uint *)(Function_21e4a34(v13 >> 1) + 488);
    ll_udiv();
    v21 = (__PAIR__(v20 >> 1, (v19 >> 1) | (v20 << 31)) - 300) >> 32;
    v22 = ((v19 >> 1) | (v20 << 31)) - 300;
    v23 = *(ushort *)(Function_21e4a34(-300) + 434);
    if ( __PAIR__(v21, v22) > v23 )
      *(ushort *)(Function_21e4a34(v23) + 434) = v22;
  }
  v24 = Function_21e31c4(v3, 0);
  v25 = v24;
  if ( v24 != 255 )
  {
    v26 = Function_21e4a34(v24);
    *(uint *)(v26 + 472) |= 1 << v25;
  }
  v27 = Function_21e3228(1);
  v28 = v27;
  v29 = *(uint *)(Function_21e4a34(v27) + 472);
  if ( v28 != v29 )
    return 1;
  v30 = 1;
  v31 = *(uchar *)(Function_21e4a34(v29) + 13);
  if ( v31 < 1 )
  {
LABEL_25:
    Function_21e4a44(15);
    return 1;
  }
  while ( 1 )
  {
    v32 = Function_21e4a34(v31);
    v35 = Function_21e2acc(*(uint *)(v32 + 4 * v30 + 244), 15, v33, v34);
    if ( !v35 )
      return 0;
    ++v30;
    v31 = *(uchar *)(Function_21e4a34(v35) + 13);
    if ( v30 > v31 )
      goto LABEL_25;
  }
}

//----- (021E2D70) --------------------------------------------------------
int __fastcall Function_21e2d70(int a1)
{
  int v1;
  int v2;
  int v3;
  int v4;
  ull v5;
  ull v6;
  int v8;
  bool v9;
  bool v10;
  int v11;
  int v12;
  int v13;
  bool v14;
  bool v15;
  int v16;
  uint v17;
  int v18;
  int v19;
  int v20;
  int v21;
  int v22;
  int v23;
  int v24;
  int v25;
  int v26;
  int v27;
  int v28;
  int v29;
  int v30;
  int v31;

  v1 = *(uint *)(Function_21e4a34(a1) + 416);
  if ( v1 != 8 )
  {
    v2 = *(uint *)(Function_21e4a34(v1) + 416);
    if ( v2 != 14 && *(uint *)(Function_21e4a34(v2) + 416) != 15 )
      return 1;
  }
  v3 = OS_GetTick();
  v4 = *(uint *)(Function_21e4a34(v3) + 488);
  ll_udiv();
  v6 = v5;
  v8 = *(uint *)(Function_21e4a34(v5) + 416);
  if ( v8 == 8 )
  {
    v9 = 1;
    v10 = HIDWORD(v6) == 0;
    if ( !HIDWORD(v6) )
    {
      v9 = (uint)v6 >= 0x1770;
      v10 = (uint)v6 == 6000;
    }
    if ( !v10 && v9 )
    {
      v11 = Function_21e4a34(6000);
      if ( !Function_21e2acc(*(uint *)(v11 + 244), 14, v12, v13) )
        return 0;
    }
    return 1;
  }
  if ( v8 != 14 )
  {
    if ( v8 == 15 && v6 > *(ushort *)(Function_21e4a34(15) + 434) )
      Function_21e239c(2);
    return 1;
  }
  v14 = 1;
  v15 = HIDWORD(v6) == 0;
  if ( !HIDWORD(v6) )
  {
    v14 = (uint)v6 >= 0x1770;
    v15 = (uint)v6 == 6000;
  }
  if ( v15 || !v14 )
    return 1;
  v16 = Function_21e4a34(6000);
  ++*(uchar *)(v16 + 428);
  v17 = *(uchar *)(Function_21e4a34(v16) + 428);
  if ( v17 > 5 )
  {
    v18 = Function_21e4a34(v17);
    v19 = Function_21e2630(*(uint *)(v18 + 472));
    if ( !v19 )
      return 0;
    v20 = *(uchar *)(Function_21e4a34(v19) + 13);
    if ( v20 )
    {
      v21 = Function_21e4a34(v20);
      *(uchar *)(v21 + 428) = 0;
      v22 = Function_21e4a34(v21);
      *(uint *)(v22 + 488) = OS_GetTick();
      *(uint *)(v22 + 492) = v23;
    }
    else
    {
      Function_21e239c(2);
    }
    return 1;
  }
  v24 = 1;
  v25 = *(uchar *)(Function_21e4a34(v17) + 13);
  if ( v25 < 1 )
    return 1;
  while ( 1 )
  {
    v26 = Function_21e4a34(v25);
    v27 = v26;
    v28 = *(uchar *)(Function_21e4a34(v26) + v24 + 720);
    if ( !(*(uint *)(v27 + 472) & (1 << v28)) )
    {
      v29 = Function_21e4a34(v28);
      v28 = Function_21e2acc(*(uint *)(v29 + 4 * v24 + 244), 13, v30, v31);
      if ( !v28 )
        break;
    }
    ++v24;
    v25 = *(uchar *)(Function_21e4a34(v28) + 13);
    if ( v24 > v25 )
      return 1;
  }
  return 0;
}

//----- (021E2F70) --------------------------------------------------------
int Function_21e2f70()
{
  uint v0;

  v0 = 0;
  do
  {
    if ( !LOBYTE(dword_221A400[3 * v0 + 178]) )
      return (uchar)(v0 + 100);
    v0 = (v0 + 1) & 0xFF;
  }
  while ( v0 < 0x9A );
  return 0;
}

//----- (021E2FB0) --------------------------------------------------------
int Function_21e2fb0()
{
  int v0;
  int *v1;
  int v2;

  v0 = 0;
  v1 = &dword_221A400[178];
  do
  {
    v2 = v1[1];
    if ( v2 )
      Function_4_21d77c4(4, v2);
    ++v0;
    v1 += 3;
  }
  while ( v0 < 154 );
  return MIi_CpuClear32(0, &dword_221A400[178], 1848);
}

//----- (021E3008) --------------------------------------------------------
uint __fastcall Function_21e3008(int a1)
{
  uint v1;
  int v2;
  int v3;

  v1 = 0;
  do
  {
    v2 = 0;
    v3 = *(uchar *)(Function_21e4a34(a1) + 20);
    if ( v3 >= 0 )
    {
      do
      {
        v3 = *(uchar *)(Function_21e4a34(v3) + v2 + 720);
        if ( v1 == v3 )
          break;
        ++v2;
        v3 = *(uchar *)(Function_21e4a34(v3) + 20);
      }
      while ( v2 <= v3 );
    }
    if ( v2 > *(uchar *)(Function_21e4a34(v3) + 20) )
      break;
    a1 = v1 + 1;
    v1 = (v1 + 1) & 0xFF;
  }
  while ( v1 < 0x20 );
  return v1;
}

//----- (021E3078) --------------------------------------------------------
int __fastcall Function_21e3078(int a1)
{
  int v1;
  int v2;
  int v4;
  int v5;
  int v6;
  int v7;

  v1 = a1;
  v2 = *(uint *)(Function_21e4a34(a1) + 764);
  if ( !v2 )
    return 0;
  v4 = 0;
  v5 = *(uint *)(Function_21e4a34(v2) + 836);
  if ( v5 <= 0 )
    return 0;
  while ( 1 )
  {
    v6 = Function_21e4a34(v5);
    v7 = Function_21db894(*(uchar *)(v6 + v4 + 772));
    if ( v7 > 0 && v7 == v1 )
      break;
    ++v4;
    v5 = *(uint *)(Function_21e4a34(v7) + 836);
    if ( v4 >= v5 )
      return 0;
  }
  return 1;
}

//----- (021E30E8) --------------------------------------------------------
int __fastcall Function_21e30e8(int a1)
{
  int v1;

  v1 = a1;
  if ( Function_21fe28c(a1, "numplayers", -1) == -1 )
    return 0;
  if ( Function_21fe28c(v1, "maxplayers", -1) == -1 )
    return 0;
  if ( Function_21fe28c(v1, "dwc_mtype", -1) == -1 )
    return 0;
  if ( Function_21fe28c(v1, "dwc_mresv", -1) == -1 && !Function_21fe28c(v1, "dwc_mresv", 0) )
    return 0;
  if ( Function_21fe28c(v1, "dwc_mver", -1) == -1 )
    return 0;
  return Function_21fe28c(v1, "dwc_pid", 0);
}

//----- (021E31C4) --------------------------------------------------------
int __fastcall Function_21e31c4(int a1, int a2)
{
  int v2;
  int v3;
  int v4;
  int v5;

  if ( !a2 )
    v2 = 1;
  v3 = a1;
  if ( a2 )
    v2 = 0;
  v4 = *(uchar *)(Function_21e4a34(a1) + 13);
  if ( v2 > v4 )
    return 255;
  while ( 1 )
  {
    v5 = *(uint *)(Function_21e4a34(v4) + 4 * v2 + 244);
    if ( v3 == v5 )
      break;
    ++v2;
    v4 = *(uchar *)(Function_21e4a34(v5) + 13);
    if ( v2 > v4 )
      return 255;
  }
  return *(uchar *)(Function_21e4a34(v5) + v2 + 720);
}

//----- (021E3228) --------------------------------------------------------
uint __fastcall Function_21e3228(int a1)
{
  int v1;
  int v3;
  int v4;
  int v5;

  v1 = 0;
  if ( a1 )
    return *(uint *)(Function_21e4a34(a1) + 752) & 0xFFFFFFFE;
  v3 = 1;
  v4 = *(uchar *)(Function_21e4a34(0) + 13);
  if ( v4 >= 1 )
  {
    do
    {
      v5 = *(uchar *)(Function_21e4a34(v4) + v3++ + 720);
      v1 |= 1 << v5;
      v4 = *(uchar *)(Function_21e4a34(v5) + 13);
    }
    while ( v3 <= v4 );
  }
  return v1;
}

//----- (021E328C) --------------------------------------------------------
int __fastcall Function_21e328c(int a1)
{
  int v1;
  int v2;
  int result;
  int v4;

  v1 = Function_21e4a34(a1);
  *(uchar *)(v1 + 429) = 0;
  v2 = Function_21e4a34(v1);
  result = OS_GetTick();
  *(uint *)(v2 + 504) = result;
  *(uint *)(v2 + 508) = v4;
  return result;
}

//----- (021E32B4) --------------------------------------------------------
int __fastcall Function_21e32b4(int result)
{
  int v1;
  bool v2;
  int v3;
  int v4;

  v1 = result;
  v2 = dword_221A400[170] == 0;
  if ( dword_221A400[170] )
  {
    result = *(uchar *)dword_221A400[170];
    v2 = result == 0;
  }
  if ( !v2 )
  {
    *(uint *)(dword_221A400[170] + 8) = 0;
    *(uint *)(dword_221A400[170] + 12) = 0;
    *(uchar *)(dword_221A400[170] + 2) = 0;
    result = OS_GetTick();
    *(uint *)(dword_221A400[170] + 24) = result;
    *(uint *)(dword_221A400[170] + 28) = v3;
    if ( !v1 )
    {
      result = OS_GetTick();
      *(uint *)(dword_221A400[170] + 16) = result;
      *(uint *)(dword_221A400[170] + 20) = v4;
    }
  }
  return result;
}

//----- (021E3324) --------------------------------------------------------
void Function_21e3324()
{
  int v0;
  bool v1;
  int v2;
  int v3;
  int v4;
  uint v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;
  int v14;
  int v15;
  uint v16;
  long long v17;
  ull v18;
  int v19;
  int v20;
  int v21;
  int v22;
  int v23;
  int v24;
  int v25;
  int v26;
  int v27;
  int v28;
  int v29;
  int v30;
  long long v31;
  uint v32;
  bool v33;
  int v34;
  long long v35;
  bool v36;
  int v37;
  int v38;
  int v39;
  int v40;
  int v41;
  int v42;
  int v43;
  int v44;
  int v45;
  int v46;
  int v47;
  int v48;
  int v49;
  int v50;

  v0 = dword_221A400[170];
  v1 = dword_221A400[170] == 0;
  if ( dword_221A400[170] )
  {
    v0 = *(uchar *)dword_221A400[170];
    v1 = v0 == 0;
  }
  if ( !v1 )
  {
    v2 = *(uchar *)(Function_21e4a34(v0) + 21);
    if ( v2 != 2 )
    {
      v3 = *(uchar *)(Function_21e4a34(v2) + 21);
      if ( v3 != 3 )
      {
        v4 = *(uint *)(Function_21e4a34(v3) + 416);
        if ( v4 == 19 )
        {
          v5 = Function_21e3228(0);
          if ( *(uint *)(dword_221A400[170] + 8) == v5 )
          {
            if ( *(uint *)(dword_221A400[170] + 12) == v5 )
            {
              v6 = Function_21e4a34(v5);
              v7 = v6;
              v8 = *(uchar *)(Function_21e4a34(v6) + 13);
              *(uchar *)(v7 + 22) = v8;
              v9 = Function_21e4a34(v8);
              *(uchar *)(v9 + 420) = *(uchar *)(Function_21e4a34(v9) + 13) - 1;
              Function_21e1998(0);
            }
            else
            {
              *(uint *)(dword_221A400[170] + 24) = OS_GetTick();
              *(uint *)(dword_221A400[170] + 28) = v10;
              *(uint *)(dword_221A400[170] + 8) = 0;
              if ( *(uchar *)(Function_21e4a34(0) + 21) )
              {
                Function_21e4a44(4);
                Function_21e11e4(1, 0, 0, v15);
              }
              else
              {
                v11 = Function_21e4a44(3);
                v12 = Function_21e4a34(v11);
                *(uint *)(v12 + 232) = 2;
                v13 = Function_21e4a34(v12);
                *(uint *)(v13 + 236) = OS_GetTick();
                *(uint *)(v13 + 240) = v14;
              }
            }
          }
          else
          {
            v16 = *(uchar *)(dword_221A400[170] + 2);
            LODWORD(v17) = OS_GetTick();
            HIDWORD(v17) = (v17 - *(ull *)(dword_221A400[170] + 24)) >> 26;
            ll_udiv();
            if ( v18 >= (int)(6000 * v16) )
            {
              if ( v16 <= 5 )
              {
                v20 = 1;
                v21 = *(uchar *)(Function_21e4a34(v18) + 13);
                if ( v21 < 1 )
                {
LABEL_21:
                  ++*(uchar *)(dword_221A400[170] + 2);
                }
                else
                {
                  while ( 1 )
                  {
                    v22 = *(uchar *)(Function_21e4a34(v21) + v20 + 720);
                    if ( !(*(uint *)(dword_221A400[170] + 8) & (1 << v22)) )
                    {
                      v23 = Function_21e4a34(v22);
                      v24 = v23;
                      v25 = Function_21e4a34(v23);
                      v26 = v25;
                      v27 = Function_21e4a34(v25);
                      v28 = Function_21df7dc(
                              17,
                              *(uint *)(v24 + 4 * v20 + 244),
                              *(uint *)(v26 + 4 * v20 + 36),
                              *(ushort *)(v27 + 2 * v20 + 164),
                              0,
                              0);
                      v22 = Function_21e1008(v28);
                      if ( v22 )
                        break;
                    }
                    ++v20;
                    v21 = *(uchar *)(Function_21e4a34(v22) + 13);
                    if ( v20 > v21 )
                      goto LABEL_21;
                  }
                }
              }
              else
              {
                v19 = Function_21e32b4(1);
                Function_21e2600(v19);
                Function_21e239c(1);
              }
            }
          }
        }
        else
        {
          v29 = *(uint *)(Function_21e4a34(v4) + 416);
          if ( v29 == 4 || *(uint *)(Function_21e4a34(v29) + 416) == 3 )
          {
            v30 = dword_221A400[170];
            if ( *(uchar *)(Function_21e4a34(&dword_221A400[170]) + 13) >= *(uchar *)(dword_221A400[170] + 1)
                                                                                   - 1 )
            {
              if ( !*(uchar *)(dword_221A400[170] + 2) )
              {
                v30 = dword_221A400[170];
                LODWORD(v31) = OS_GetTick();
                HIDWORD(v31) = (v31 - *(ull *)(dword_221A400[170] + 16)) >> 26;
                ll_udiv();
                v33 = 1;
                if ( !v34 )
                  v33 = v32 >= *(uint *)(dword_221A400[170] + 4);
                if ( v33 )
                  goto LABEL_42;
              }
              if ( *(uchar *)(v30 + 2) )
              {
                LODWORD(v35) = OS_GetTick();
                HIDWORD(v35) = (v35 - *(ull *)(dword_221A400[170] + 24)) >> 26;
                ll_udiv();
                v36 = 1;
                if ( !v37 )
                  v36 = v32 >= *(uint *)(dword_221A400[170] + 4) >> 2;
                if ( v36 )
                {
LABEL_42:
                  v38 = *(uint *)(Function_21e4a34(v32) + 516);
                  if ( !v38
                    || (v39 = Function_21e4a34(v38),
                        v40 = Function_21e1584(*(uint *)(v39 + 516)),
                        !Function_21e1008(v40)) )
                  {
                    v41 = Function_21e4a44(19);
                    v42 = 1;
                    v43 = *(uchar *)(Function_21e4a34(v41) + 13);
                    if ( v43 < 1 )
                    {
LABEL_39:
                      *(uint *)(dword_221A400[170] + 24) = OS_GetTick();
                      *(uint *)(dword_221A400[170] + 28) = v50;
                      *(uchar *)(dword_221A400[170] + 2) = 1;
                    }
                    else
                    {
                      while ( 1 )
                      {
                        v44 = Function_21e4a34(v43);
                        v45 = v44;
                        v46 = Function_21e4a34(v44);
                        v47 = v46;
                        v48 = Function_21e4a34(v46);
                        v49 = Function_21df7dc(
                                17,
                                *(uint *)(v45 + 4 * v42 + 244),
                                *(uint *)(v47 + 4 * v42 + 36),
                                *(ushort *)(v48 + 2 * v42 + 164),
                                0,
                                0);
                        if ( Function_21e1008(v49) )
                          break;
                        ++v42;
                        v43 = *(uchar *)(Function_21e4a34(0) + 13);
                        if ( v42 > v43 )
                          goto LABEL_39;
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}

//----- (021E3750) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x21E37AC for case 0"

//----- (021E376C) --------------------------------------------------------
void Function_21e376c()
{
  JUMPOUT(&loc_21E37AC);
}

//----- (021E3770) --------------------------------------------------------
void Function_21e3770()
{
  JUMPOUT(&loc_21E3780);
}

//----- (021E3774) --------------------------------------------------------
void Function_21e3774()
{
  JUMPOUT(&loc_21E378C);
}

//----- (021E3778) --------------------------------------------------------
void Function_21e3778()
{
  JUMPOUT(&loc_21E3798);
}

//----- (021E377C) --------------------------------------------------------
void Function_21e377c()
{
  int v0;

  Function_21de3bc(6, -81020);
  JUMPOUT(__CS__, v0);
}

//----- (021E37C4) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x21E3840 for case 0"

//----- (021E37E0) --------------------------------------------------------
void Function_21e37e0()
{
  JUMPOUT(&loc_21E3840);
}

//----- (021E37E4) --------------------------------------------------------
void Function_21e37e4()
{
  JUMPOUT(&loc_21E37FC);
}

//----- (021E37E8) --------------------------------------------------------
void Function_21e37e8()
{
  JUMPOUT(&loc_21E3808);
}

//----- (021E37EC) --------------------------------------------------------
void Function_21e37ec()
{
  JUMPOUT(&loc_21E3814);
}

//----- (021E37F0) --------------------------------------------------------
void Function_21e37f0()
{
  JUMPOUT(&loc_21E3820);
}

//----- (021E37F4) --------------------------------------------------------
void Function_21e37f4()
{
  JUMPOUT(&loc_21E382C);
}

//----- (021E37F8) --------------------------------------------------------
void Function_21e37f8()
{
  int v0;

  Function_21de3bc(9, -85002);
  JUMPOUT(__CS__, v0);
}

//----- (021E3858) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x21E38C4 for case 0"

//----- (021E3874) --------------------------------------------------------
void Function_21e3874()
{
  JUMPOUT(&loc_21E38C4);
}

//----- (021E3878) --------------------------------------------------------
void Function_21e3878()
{
  JUMPOUT(&loc_21E388C);
}

//----- (021E387C) --------------------------------------------------------
void Function_21e387c()
{
  JUMPOUT(&loc_21E3898);
}

//----- (021E3880) --------------------------------------------------------
void Function_21e3880()
{
  JUMPOUT(&loc_21E38A4);
}

//----- (021E3884) --------------------------------------------------------
void Function_21e3884()
{
  JUMPOUT(&loc_21E38B0);
}

//----- (021E3888) --------------------------------------------------------
void Function_21e3888()
{
  int v0;
  int v1;

  v0 = Function_21d9a40();
  switch ( v0 )
  {
    case 2:
      Function_21da898(6, -64020);
      break;
    case 4:
      Function_21db710(6, -74020);
      break;
    case 5:
      Function_21de3bc(6, -84020);
      break;
    default:
      Function_21d7724(6, -94020);
      break;
  }
  JUMPOUT(__CS__, v1);
}

//----- (021E3940) --------------------------------------------------------
int __fastcall Function_21e3940(int a1, int a2, int a3)
{
  int v3;

  v3 = a1;
  switch ( a1 )
  {
    case 0:
      return 0;
    case 1:
      a1 = 9;
      a3 = -1;
      break;
    case 2:
      a1 = 6;
      a3 = -50;
      break;
    case 3:
      a1 = 6;
      a3 = -30;
      break;
  }
  Function_21de3bc(a1, a3 - 86000);
  return v3;
}

//----- (021E399C) --------------------------------------------------------
int __fastcall Function_21e399c(int a1)
{
  int v1;

  v1 = a1;
  switch ( a1 )
  {
    case 0:
      return 0;
    case 1:
      return 1;
    case 2:
      return 2;
  }
  Function_21de3bc(6, -86009);
  return v1;
}

//----- (021E39EC) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x21E3A70 for case 0"

//----- (021E3A08) --------------------------------------------------------
void Function_21e3a08()
{
  JUMPOUT(&loc_21E3A70);
}

//----- (021E3A0C) --------------------------------------------------------
void Function_21e3a0c()
{
  JUMPOUT(&loc_21E3A28);
}

//----- (021E3A10) --------------------------------------------------------
void Function_21e3a10()
{
  JUMPOUT(&loc_21E3A34);
}

//----- (021E3A14) --------------------------------------------------------
void Function_21e3a14()
{
  JUMPOUT(&loc_21E3A44);
}

//----- (021E3A18) --------------------------------------------------------
void Function_21e3a18()
{
  JUMPOUT(&loc_21E3A50);
}

//----- (021E3A1C) --------------------------------------------------------
void Function_21e3a1c()
{
  JUMPOUT(&loc_21E3A34);
}

//----- (021E3A20) --------------------------------------------------------
void Function_21e3a20()
{
  JUMPOUT(&loc_21E3A5C);
}

//----- (021E3A24) --------------------------------------------------------
void Function_21e3a24()
{
  int v0;

  Function_21de3bc(6, -87080);
  JUMPOUT(__CS__, v0);
}

//----- (021E3A90) --------------------------------------------------------
int *__fastcall Function_21e3a90(int a1, int a2, int a3)
{
  int v3;
  int v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;
  int v14;
  int i;
  int v16;
  int v17;
  int v18;
  int v19;
  int v20;
  int v21;
  int v22;
  int v23;
  int v24;
  int v25;
  int v26;
  int v27;
  int v28;
  int v29;
  int v30;
  int v31;
  int v32;
  int v33;
  int v34;
  int v35;
  int v36;
  int v37;
  int v38;
  int v39;
  int v40;
  int v41;
  int v42;
  int v43;
  int v44;
  int v45;
  int v46;
  int v47;
  int v48;
  int v49;
  int v50;
  int v51;
  int v52;
  int v53;
  int v54;
  int v55;
  int v56;
  int v57;
  int v58;
  int v59;
  int *result;

  v3 = a1;
  v4 = a2;
  ++dword_221A400[176];
  v5 = a3;
  if ( *(ull *)(Function_21e4a34(dword_221A400[176] + 1) + 372) )
  {
    v6 = v4 - 4;
    if ( (uint)(v4 - 4) > 1 )
    {
      v8 = Function_21e4a34(v6);
      v9 = OS_GetTick();
      *(uint *)(v8 + 372) = v9 + 15709687;
      *(uint *)(v8 + 376) = __CFADD__(v9, 15709687) + v10;
    }
    else
    {
      v7 = Function_21e4a34(v6);
      *(uint *)(v7 + 372) = 0;
      *(uint *)(v7 + 376) = 0;
    }
  }
  if ( v4 )
  {
    if ( v4 != 4 )
      goto LABEL_45;
    v11 = 0;
    v12 = Function_21feea0(v3);
    if ( v12 > 0 )
    {
      do
      {
        v13 = Function_21fee90(v3, v11);
        if ( !Function_21e30e8(v13) )
        {
          Function_21fede4(v3, v13);
          --v11;
        }
        ++v11;
        v12 = Function_21feea0(v3);
      }
      while ( v11 < v12 );
    }
    v14 = *(uint *)(Function_21e4a34(v12) + 416);
    switch ( v14 )
    {
      case 2:
        for ( i = 0; i < Function_21feea0(v3); ++i )
        {
          v16 = Function_21fee90(v3, i);
          v17 = v16;
          v18 = *(uint *)(Function_21e4a34(v16) + 28);
          if ( v18 )
          {
            v19 = Function_21e4a34(v18);
            v20 = Function_21fe350(v17);
            if ( *(uint *)(v19 + 28) == v20 )
            {
              v21 = *(ushort *)(Function_21e4a34(v20) + 26);
              if ( v21 )
              {
                v22 = Function_21e4a34(v21);
                if ( *(ushort *)(v22 + 26) == Function_21fe358(v17) )
                  break;
              }
            }
          }
        }
        v23 = Function_21feea0(v3);
        if ( i >= v23 )
        {
          v28 = Function_21e4a34(v23);
          *(uint *)(v28 + 232) = 2;
          v29 = Function_21e4a34(v28);
          *(uint *)(v29 + 236) = OS_GetTick();
          *(uint *)(v29 + 240) = v30;
        }
        else
        {
          v24 = Function_21e4a44(3);
          v25 = Function_21e4a34(v24);
          *(uint *)(v25 + 516) = 0;
          v26 = Function_21e4a34(v25);
          v27 = Function_21df1d0(*(uint *)(v26 + 516));
          Function_21e37c4(v27);
        }
        break;
      case 3:
        v31 = Function_21e3ea8(1);
        Function_21e4080(v31);
        if ( Function_21feea0(v3) )
        {
          v32 = Function_21e1034(0, 0);
          if ( !Function_21e1008(v32) )
          {
            v33 = Function_21e4a44(4);
            *(uint *)(Function_21e4a34(v33) + 232) = 0;
          }
        }
        else
        {
          v34 = Function_21e4a34(0);
          *(uint *)(v34 + 232) = 2;
          v35 = Function_21e4a34(v34);
          *(uint *)(v35 + 236) = OS_GetTick();
          *(uint *)(v35 + 240) = v36;
        }
        break;
      case 5:
        while ( Function_21feea0(v3) )
        {
          v37 = Function_21fee90(v3, 0);
          v38 = v37;
          v39 = Function_21fe350(v37);
          if ( v39 == *(uint *)(Function_21e4a34(v39) + 440) )
          {
            v40 = Function_21fe358(v38);
            if ( v40 == *(ushort *)(Function_21e4a34(v40) + 436) )
              break;
          }
          Function_21fede4(v3, v38);
        }
        if ( !Function_21feea0(v3) )
        {
          v57 = Function_21e4a34(0);
          *(uint *)(v57 + 232) = 2;
          v58 = Function_21e4a34(v57);
          *(uint *)(v58 + 236) = OS_GetTick();
          *(uint *)(v58 + 240) = v59;
          break;
        }
        v41 = Function_21fee90(v3, 0);
        v42 = Function_21fe28c(v41, "dwc_pid", 0);
        if ( *(uchar *)(Function_21e4a34(v42) + 21) != 1 || v42 != *(uint *)(Function_21e4a34(1) + 244) )
          goto LABEL_43;
        v43 = Function_21e3ea8(0);
        if ( v43 )
        {
          v44 = *(uchar *)(Function_21e4a34(v43) + 13);
          if ( !v44 || (v45 = Function_21e18b4(v44), !Function_21e1008(v45)) )
          {
LABEL_43:
            Function_21e4a44(6);
            v52 = Function_21fee90(v3, 0);
            v54 = Function_21df434(0, 0, v52, v53);
            Function_21e3940(v54, v55, v56);
            break;
          }
        }
        else
        {
          v46 = Function_21e4a34(0);
          v47 = Function_21e1584(*(uint *)(v46 + 244));
          if ( !Function_21e1008(v47) )
          {
            v48 = Function_21e4a44(4);
            v49 = Function_21e4a34(v48);
            v51 = Function_21e11e4(0, 0, *(uint *)(v49 + 244), v50);
            Function_21e1008(v51);
          }
        }
        break;
      default:
        break;
    }
  }
  else
  {
    Function_21e3ea4(v5);
  }
LABEL_45:
  result = &dword_221A400[170];
  --dword_221A400[176];
  return result;
}

//----- (021E3EA4) --------------------------------------------------------
void Function_21e3ea4()
{
  ;
}

//----- (021E3EA8) --------------------------------------------------------
BOOL __fastcall Function_21e3ea8(int a1)
{
  int v1;
  int v2;
  int v3;
  int v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;
  int v14;
  int v15;
  int v16;
  int v17;
  int v18;
  int v19;
  int v20;
  int v21;
  uint v22;
  int v23;
  uint v24;
  int v25;
  int v26;
  int v27;
  int v28;
  BOOL result;

  v1 = 0;
  v2 = a1;
  v3 = 0;
  v4 = Function_21e4a34(a1);
  v5 = Function_21feea0(*(uint *)(v4 + 228));
  if ( v5 > 0 )
  {
    do
    {
      v6 = Function_21e4a34(v5);
      v7 = Function_21fee90(*(uint *)(v6 + 228), v3);
      v8 = v7;
      v9 = *(uchar *)(Function_21e4a34(v7) + 21);
      if ( v9 )
        goto LABEL_25;
      v10 = Function_21fe28c(v8, "dwc_pid", 0);
      v11 = v10;
      v12 = 0;
      v13 = 1;
      v9 = *(uchar *)(Function_21e4a34(v10) + 13);
      if ( v9 >= 1 )
      {
        while ( 1 )
        {
          v14 = *(uint *)(Function_21e4a34(v9) + 4 * v13 + 244);
          if ( v11 == v14 )
            break;
          ++v13;
          v9 = *(uchar *)(Function_21e4a34(v14) + 13);
          if ( v13 > v9 )
            goto LABEL_7;
        }
        v15 = Function_21e4a34(v14);
        v9 = Function_21fede4(*(uint *)(v15 + 228), v8);
        --v3;
        v12 = 1;
      }
LABEL_7:
      if ( !v12 )
      {
LABEL_25:
        v16 = *(uint *)(Function_21e4a34(v9) + 1140);
        if ( v16 )
        {
          v17 = Function_21e4a34(v16);
          v18 = v17;
          v19 = Function_21e4a34(v17);
          v20 = (*(int (__fastcall **)(int, uint))(v18 + 1140))(v3, *(uint *)(v19 + 1144));
          v21 = v20;
          if ( v20 <= 0 )
          {
            v23 = Function_21e4a34(v20);
            v9 = Function_21fede4(*(uint *)(v23 + 228), v8);
            --v3;
            v1 = 1;
          }
          else
          {
            if ( v20 > 0x7FFFFF )
              v21 = 0x7FFFFF;
            v22 = Function_21d8abc(0x100u);
            v9 = Function_21fe1e8(v8, "dwc_eval", v22 | (v21 << 8));
          }
        }
        else
        {
          v24 = Function_21d8abc(0x80u);
          v9 = Function_21fe1e8(v8, "dwc_eval", v24);
        }
      }
      ++v3;
      v25 = Function_21e4a34(v9);
      v5 = Function_21feea0(*(uint *)(v25 + 228));
    }
    while ( v3 < v5 );
  }
  if ( v2 )
  {
    v26 = Function_21e4a34(v5);
    v5 = Function_21feea0(*(uint *)(v26 + 228));
    if ( v5 )
    {
      v27 = Function_21e4a34(v5);
      v5 = Function_21feeb0(*(uint *)(v27 + 228));
    }
  }
  result = 1;
  if ( v1 )
  {
    v28 = Function_21e4a34(v5);
    if ( !Function_21feea0(*(uint *)(v28 + 228)) )
      result = 0;
  }
  return result;
}

//----- (021E4080) --------------------------------------------------------
int __fastcall Function_21e4080(int a1, int a2, int a3, int a4)
{
  int v4;
  int v5;
  int v6;
  int v7;
  int result;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;
  int v14;
  int v15;
  int v16;
  uint v17;
  uint v18;
  int v19;
  int v20;
  int v21;
  int v22;
  uint v23;
  int v24;
  int v25;
  int v26;
  int v27;
  int v28;
  char v29[24];
  int v30;

  v30 = a4;
  v5 = 0;
  v6 = 0;
  v7 = Function_21e4a34(a1);
  result = Function_21feea0(*(uint *)(v7 + 228));
  if ( result > 1 )
  {
    v9 = 0;
    v10 = Function_21e4a34(result);
    v11 = Function_21feea0(*(uint *)(v10 + 228));
    if ( v11 > 0 )
    {
      do
      {
        v12 = Function_21e4a34(v11);
        v13 = Function_21fee90(*(uint *)(v12 + 228), v9);
        v14 = Function_21fe28c(v13, "dwc_eval", -1);
        if ( v14 > v5 )
          v5 = v14;
        v15 = dword_2215880[v9++];
        v6 += v15;
        v16 = Function_21e4a34(v15);
        v11 = Function_21feea0(*(uint *)(v16 + 228));
      }
      while ( v9 < v11 );
    }
    v17 = Function_21d8abc(0x64u);
    v18 = v17;
    v19 = 0;
    v20 = Function_21e4a34(v17);
    v21 = Function_21feea0(*(uint *)(v20 + 228));
    if ( v21 > 0 )
    {
      do
      {
        v22 = Function_21e4a34(v21);
        if ( v19 == Function_21feea0(*(uint *)(v22 + 228)) - 1 )
          break;
        if ( v19 > 0 )
          v4 = *(uint *)&v29[4 * v19 - 4];
        if ( v19 <= 0 )
          v4 = 0;
        v23 = s32_div_f(100 * dword_2215880[v19], v6) + v4;
        *(uint *)&v29[4 * v19] = v23;
        if ( v18 < v23 )
          break;
        ++v19;
        v24 = Function_21e4a34(v23);
        v21 = Function_21feea0(*(uint *)(v24 + 228));
      }
      while ( v19 < v21 );
    }
    if ( v5 < 0x7FFFFFFF )
      ++v5;
    v25 = Function_21e4a34(0x7FFFFFFF);
    v26 = Function_21fee90(*(uint *)(v25 + 228), v19);
    v27 = Function_21fe1e8(v26, "dwc_eval", v5);
    v28 = Function_21e4a34(v27);
    result = Function_21feeb0(*(uint *)(v28 + 228));
  }
  return result;
}

//----- (021E41F0) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x21E4280 for case 0"

//----- (021E4234) --------------------------------------------------------
void Function_21e4234()
{
  JUMPOUT(&loc_21E4280);
}

//----- (021E4238) --------------------------------------------------------
void Function_21e4238()
{
  JUMPOUT(&loc_21E4294);
}

//----- (021E423C) --------------------------------------------------------
void Function_21e423c()
{
  JUMPOUT(&loc_21E42A8);
}

//----- (021E4240) --------------------------------------------------------
void Function_21e4240()
{
  int v0;
  int v1;

  Function_21fc2a0(v0, 1);
  JUMPOUT(__CS__, v1);
}

//----- (021E4338) --------------------------------------------------------
void Function_21e4338()
{
  ;
}

//----- (021E433C) --------------------------------------------------------
void Function_21e433c()
{
  ;
}

//----- (021E4340) --------------------------------------------------------
int __fastcall Function_21e4340(int result, int a2)
{
  int v2;
  int *v3;
  int v4;

  v2 = a2;
  if ( !result )
  {
    Function_21fc274(a2, 8);
    Function_21fc274(v2, 10);
    Function_21fc274(v2, 50);
    Function_21fc274(v2, 51);
    Function_21fc274(v2, 52);
    Function_21fc274(v2, 53);
    result = Function_21fc274(v2, 54);
    v3 = &dword_221A400[178];
    v4 = 0;
    do
    {
      if ( *(uchar *)v3 )
        result = Function_21fc274(v2, *(uchar *)v3);
      ++v4;
      v3 += 3;
    }
    while ( v4 < 154 );
  }
  return result;
}

//----- (021E43E4) --------------------------------------------------------
int Function_21e43e4()
{
  return 0;
}

//----- (021E43EC) --------------------------------------------------------
int __fastcall Function_21e43ec(int a1)
{
  return Function_21e3858(a1);
}

//----- (021E43F8) --------------------------------------------------------
int __fastcall Function_21e43f8(int a1, short a2)
{
  int v2;
  short v3;
  int v4;
  int result;

  v2 = a1;
  v3 = a2;
  v4 = Function_21e4a34(a1);
  *(uint *)(v4 + 28) = v2;
  result = Function_21e4a34(v4);
  *(ushort *)(result + 26) = v3;
  return result;
}

//----- (021E4418) --------------------------------------------------------
int __fastcall Function_21e4418(int a1)
{
  int v1;
  int v2;
  int result;
  int v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;

  v1 = a1;
  v2 = *(uint *)(Function_21e4a34(a1) + 416);
  if ( v2 == 1 )
  {
    result = Function_21e4a44(6);
  }
  else
  {
    result = *(uint *)(Function_21e4a34(v2) + 416);
    if ( result != 6 )
    {
      result = *(uint *)(Function_21e4a34(result) + 416);
      if ( result != 11 )
        return result;
    }
  }
  v4 = *(uint *)(Function_21e4a34(result) + 384);
  if ( v1 == v4 )
  {
    v5 = Function_21e4a34(v4);
    ++*(uchar *)(v5 + 380);
  }
  else
  {
    v6 = Function_21e4a34(v4);
    *(uchar *)(v6 + 380) = 0;
    v5 = Function_21e4a34(v6);
    *(uint *)(v5 + 384) = v1;
  }
  v7 = Function_21e4a34(v5);
  *(uint *)(v7 + 388) = 0;
  *(uint *)(v7 + 392) = 0;
  v9 = Function_21df434(1, v1, 0, v8);
  result = Function_21e3940(v9, v10, v11);
  if ( !result )
  {
    result = Function_21e4a34(0);
    *(uchar *)(result + 972) = -1;
  }
  return result;
}

//----- (021E44CC) --------------------------------------------------------
int __fastcall Function_21e44cc(int a1, uint a2)
{
  int v2;
  uint v3;
  int v4;
  int result;
  uint v6;
  uint v7;
  bool v8;
  char v9;
  int v10;
  uchar v11;
  uchar v12;
  int v13;
  char v14;

  v2 = a1;
  v3 = a2;
  v4 = 0;
  result = Function_21d9a40();
  if ( result == 5
    || (result = Function_21d9a40(), result == 6)
    && ((result = *(uchar *)(Function_21e4a34(6) + 21), result == 2)
     || (result = *(uchar *)(Function_21e4a34(result) + 21), result == 3)) )
  {
    if ( v3 >= 0x14 )
    {
      do
      {
        MI_CpuCopy8(v2, (uint)&v9, 0x14u, v6);
        result = Function_20d8e28((uchar *)&v9, "SBCM", 4);
        v8 = result == 0;
        if ( !result )
        {
          result = v10;
          v8 = v10 == 3;
        }
        if ( !v8 )
          break;
        MI_CpuCopy8(v2 + 20, (uint)&v14, v12, v7);
        result = Function_21dfc18(v11, v13);
        if ( !result )
          break;
        v4 += v12 + 20;
        result = v4 + 20;
      }
      while ( v4 + 20 <= v3 );
    }
  }
  return result;
}

//----- (021E45D8) --------------------------------------------------------
void Function_21e45d8()
{
  ;
}

//----- (021E45DC) --------------------------------------------------------
uint __fastcall Function_21e45dc(int a1, int a2, int a3, int a4)
{
  int v4;
  int v5;
  uchar *v6;
  uint result;
  int v8;
  int v9;
  int v10;
  int v11;
  short v12;
  int v13;
  int v14;
  int v15;
  int v16;
  int v17;
  int v18;
  int v19;
  int v20;
  int v21;
  int v22;
  int v23;
  int v24;
  int v25;
  int v26;
  int v27;
  int v28;
  int v29;
  int v30;
  int v31;
  int v32;
  int v33;
  short v34;
  int v35;
  int v36;
  uint v37;
  bool v38;
  int v39;
  int v40;
  int v41;
  int v42;
  int v43;
  int v44;
  int v45;
  int v46;
  int v47;
  int v48;
  int v49;
  int v50;
  int v51;
  int v52;
  int v53;
  char v54;
  int v55;

  v55 = a4;
  v4 = a1;
  v5 = a3;
  v6 = (uchar *)a4;
  result = *(uint *)(Function_21e4a34(a1) + 416);
  if ( result == 6 || (result = *(uint *)(Function_21e4a34(result) + 416), result == 11) )
  {
    if ( v6 )
    {
      if ( v4 )
      {
        result = *((uint *)v6 + 2);
        if ( result )
        {
          result = Function_21e399c(v4);
          v37 = result;
          v38 = result == 2;
          if ( result != 2 )
            v38 = result == 1;
          if ( v38 )
          {
            if ( *v6 )
            {
              v45 = Function_21e4a34(*v6);
              result = OS_GetTick();
              *(uint *)(v45 + 388) = result;
              *(uint *)(v45 + 392) = v46;
              if ( v37 == 1 || v37 == 2 && (result = *(uchar *)(Function_21e4a34(result) + 380), result >= 1) )
              {
                *((uint *)v6 + 2) = 0;
                v47 = *(uchar *)(Function_21e4a34(0) + 21);
                if ( v47 != 3 && *(uchar *)(Function_21e4a34(v47) + 21) != 2 )
                {
                  result = Function_21e49b4(0);
                  if ( !result )
                    return result;
                }
                else
                {
                  result = Function_21e49b4(1);
                  if ( !result )
                    return result;
                }
                v48 = Function_21e4a34(result);
                *(uchar *)(v48 + 380) = 0;
                v49 = Function_21e4a34(v48);
                *(uint *)(v49 + 384) = 0;
                v50 = Function_21e4a34(v49);
                *(uint *)(v50 + 388) = 0;
                *(uint *)(v50 + 392) = 0;
                v51 = Function_21e4a34(v50);
                v52 = v51;
                v53 = Function_21e4a34(v51);
                return Function_21e15d8(*(uint *)(v52 + 4 * (*(uchar *)(v53 + 13) + 1) + 244));
              }
            }
            else if ( result != 1 && (result != 2 || v6[1] < 1u) )
            {
              ++v6[1];
              v42 = Function_21df720(v6);
              result = Function_21e3940(v42, v43, v44);
            }
            else
            {
              *((uint *)v6 + 2) = 0;
              result = Function_21e49b4(0);
              if ( result )
              {
                v39 = Function_21e4a34(result);
                v40 = v39;
                v41 = Function_21e4a34(v39);
                result = Function_21e17f4(*(uint *)(v40 + 4 * *(uchar *)(v41 + 13) + 244));
              }
            }
          }
        }
      }
      else
      {
        *((uint *)v6 + 2) = 0;
        v8 = Function_21e4a34(0);
        ++*(uchar *)(v8 + 20);
        v9 = Function_21e4a34(v8);
        v10 = *(uchar *)(v9 + 20);
        if ( *v6 )
        {
          v11 = Function_21e4a34(v9) + 4 * v10;
          *(uint *)(v11 + 528) = *(uint *)(v5 + 4);
          v12 = *(ushort *)(v5 + 2);
          v13 = Function_21e4a34(v11) + 2 * v10 + 512;
          *(ushort *)(v13 + 144) = HIBYTE(v12) | (v12 << 8) & 0xFF00;
          v14 = Function_21e4a34(v13);
          *(uchar *)(v14 + 380) = 0;
          v15 = Function_21e4a34(v14);
          *(uint *)(v15 + 384) = 0;
          v16 = Function_21e4a34(v15);
          *(uint *)(v16 + 388) = 0;
          *(uint *)(v16 + 392) = 0;
          if ( *(uint *)(Function_21e4a34(v16) + 416) == 11 )
            v17 = Function_21e4a44(12);
          else
            v17 = Function_21e4a44(7);
          v18 = Function_21e4a34(v17);
          *(uchar *)(v18 + 12) = 0;
          v19 = Function_21e4a34(v18);
          v20 = OS_SNPrintf(&v54, 12, &dword_22174E4, *(uint *)(v19 + 512));
          v21 = Function_21e4a34(v20);
          v22 = v21;
          v23 = Function_21e4a34(v21);
          v24 = v23;
          v25 = Function_21e4a34(v23);
          v26 = Function_21fabfc(*(uint *)(v24 + 4 * v10 + 528), *(ushort *)(v25 + 2 * v10 + 656), 0);
          v27 = *(uint *)(Function_21e4a34(v26) + 8);
          result = Function_21f84f0(**(uint **)(v22 + 4));
          if ( result == 1 )
          {
            result = Function_21e39ec(1, v28, v29, v30);
          }
          else if ( result )
          {
            v31 = Function_21e4a34(result);
            result = Function_21e15d8(*(uint *)(v31 + 4 * v10 + 244));
          }
        }
        else
        {
          if ( v5 )
          {
            v32 = v10 - 1;
            v33 = Function_21e4a34(v9) + 4 * v32;
            *(uint *)(v33 + 528) = *(uint *)(v5 + 4);
            v34 = *(ushort *)(v5 + 2);
            v9 = Function_21e4a34(v33) + 2 * v32 + 512;
            *(ushort *)(v9 + 144) = HIBYTE(v34) | (v34 << 8) & 0xFF00;
          }
          v35 = Function_21e4a34(v9);
          *(uint *)(v35 + 396) = OS_GetTick();
          *(uint *)(v35 + 400) = v36;
          result = Function_21e4a44(7);
        }
      }
    }
  }
  return result;
}

//----- (021E49B4) --------------------------------------------------------
int __fastcall Function_21e49b4(int a1)
{
  int v2;
  int v3;

  if ( a1 )
    return 1;
  v2 = *(uchar *)(Function_21e4a34(0) + 21);
  if ( v2 != 3 )
  {
    v2 = Function_21e4a34(v2);
    ++*(uchar *)(v2 + 381);
  }
  v3 = *(uchar *)(Function_21e4a34(v2) + 21);
  if ( v3 != 3 && *(uchar *)(Function_21e4a34(v3) + 381) < 5u )
    return 1;
  Function_21de3bc(6, -86420);
  return 0;
}

//----- (021E4A24) --------------------------------------------------------
int __fastcall Function_21e4a24(int result)
{
  dword_221A400[171] = result;
  return result;
}

//----- (021E4A34) --------------------------------------------------------
int Function_21e4a34()
{
  return dword_221A400[171];
}

//----- (021E4A44) --------------------------------------------------------
int __fastcall Function_21e4a44(int result)
{
  *(uint *)(dword_221A400[171] + 416) = result;
  return result;
}

//----- (021E4A58) --------------------------------------------------------
int __fastcall Function_21e4a58(int a1)
{
  return Function_21e4a68(a1, 1);
}

//----- (021E4A68) --------------------------------------------------------
BOOL __fastcall Function_21e4a68(int a1, int a2)
{
  int v2;
  int v3;
  int v5;

  v2 = a1;
  v3 = a2;
  if ( Function_21d7708() || v3 == 1 && !Function_21d9a08(v2) || !Function_21d9c8c(v2) )
    return 0;
  if ( Function_21e51ac(v2) == 1 )
    return 0;
  v5 = Function_21e5568(v2);
  return v5 >= Function_21e4e40(v3);
}

//----- (021E4AE8) --------------------------------------------------------
int __fastcall Function_21e4ae8(int a1, int a2, int a3, int a4)
{
  return Function_21e4b08(1, a1, a2, a3, a4);
}

//----- (021E4B08) --------------------------------------------------------
int __fastcall Function_21e4b08(int a1, int a2, int a3, int a4, int a5)
{
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v11;
  int v12;
  void (*v13)(void);
  char v14;
  int v15;

  v15 = a4;
  v5 = a2;
  v6 = a1;
  v7 = a3;
  v8 = a4;
  v9 = Function_21e5194(a2);
  if ( !Function_21e4a68(v5, v6) )
    return 0;
  *(uchar *)(v9 + 28) = 1;
  *(uint *)v9 = v7;
  *(uint *)(v9 + 12) = 0;
  *(uint *)(v9 + 20) = v8;
  Function_21e4dd4(&v14, v6, v8);
  Function_21e51e4(v5, &v14, 8, 1);
  v11 = *(ushort *)(dword_221A400[648] + 1552);
  if ( v8 <= v11 )
    v11 = v8;
  if ( v11 > Function_21e5568(v5) )
    return 1;
  Function_21e51e4(v5, v7, v11, 1);
  v12 = *(uint *)(v9 + 12) + v11;
  *(uint *)(v9 + 12) = v12;
  if ( v12 == *(uint *)(v9 + 20) )
  {
    *(uchar *)(v9 + 28) = 0;
    *(uint *)v9 = 0;
    *(uint *)(v9 + 12) = 0;
    *(uint *)(v9 + 20) = 0;
    v13 = *(void (**)(void))(dword_221A400[648] + 1536);
    if ( v13 )
    {
      if ( v6 == 1 )
        v13();
    }
  }
  return 1;
}

//----- (021E4C28) --------------------------------------------------------
int __fastcall Function_21e4c28(int a1, int a2, int a3)
{
  int v3;
  int v4;
  int v5;
  uint v6;
  int v7;
  int v8;

  v3 = a1;
  v4 = a2;
  v5 = a3;
  v6 = 0;
  do
  {
    if ( v6 )
      v7 = 1 << v6;
    else
      v7 = 1;
    if ( v3 & v7 && v6 != Function_21d9968() && !Function_21e4ae8(v6, v4, v5, v8) )
      v3 &= ~v7;
    v6 = (v6 + 1) & 0xFF;
  }
  while ( v6 < 0x20 );
  return v3;
}

//----- (021E4C98) --------------------------------------------------------
int __fastcall Function_21e4c98(int a1, int a2, int a3)
{
  int v3;
  int v4;
  int v5;
  void (__fastcall *v7)(int, int);

  v3 = a1;
  v4 = a2;
  v5 = a3;
  if ( Function_21d7708() )
    return 0;
  if ( !Function_21d9a08(v3) )
    return 0;
  if ( v5 > *(ushort *)(dword_221A400[648] + 1552) )
    return 0;
  Function_21e51e4(v3, v4, v5, 0);
  v7 = *(void (__fastcall **)(int, int))(dword_221A400[648] + 1536);
  if ( v7 )
    v7(v5, v3);
  return 1;
}

//----- (021E4D28) --------------------------------------------------------
int __fastcall Function_21e4d28(int a1, int a2, int a3)
{
  int v3;
  int v4;
  int v5;
  int v6;
  int result;

  v3 = a1;
  v4 = a2;
  v5 = a3;
  v6 = Function_21e5194(a1);
  if ( Function_21e51c8(v3) == 2 )
    return 0;
  *(uint *)(v6 + 4) = v4;
  *(uint *)(v6 + 8) = v5;
  result = 1;
  *(uchar *)(v6 + 29) = 1;
  *(uint *)(v6 + 16) = 0;
  *(uint *)(v6 + 24) = 0;
  return result;
}

//----- (021E4D74) --------------------------------------------------------
int __fastcall Function_21e4d74(int a1)
{
  if ( !dword_221A400[648] )
    return 0;
  *(uint *)(dword_221A400[648] + 1536) = a1;
  return 1;
}

//----- (021E4D94) --------------------------------------------------------
int __fastcall Function_21e4d94(int a1)
{
  if ( !dword_221A400[648] )
    return 0;
  *(uint *)(dword_221A400[648] + 1540) = a1;
  return 1;
}

//----- (021E4DB4) --------------------------------------------------------
int __fastcall Function_21e4db4(int a1)
{
  if ( !dword_221A400[648] )
    return 0;
  *(uint *)(dword_221A400[648] + 1544) = a1;
  return 1;
}

//----- (021E4DD4) --------------------------------------------------------
uchar *__fastcall Function_21e4dd4(int a1, short a2, int a3)
{
  int v3;
  short v4;
  int v5;
  uchar *result;

  v3 = a1;
  v4 = a2;
  v5 = a3;
  result = strncpy((uchar *)(a1 + 6), "DT", 2);
  *(ushort *)(v3 + 4) = v4;
  *(uint *)v3 = v5;
  return result;
}

//----- (021E4E04) --------------------------------------------------------
int __fastcall Function_21e4e04(int a1, int a2, int a3, uint a4)
{
  int result;
  char v5;
  ushort v6;
  char v7;
  uint v8;

  v8 = a4;
  MI_CpuCopy8(a1, (uint)&v5, 8u, a4);
  if ( Function_20d5190((uchar *)&v7, "DT", 2) )
    result = 0;
  else
    result = v6;
  return result;
}

//----- (021E4E40) --------------------------------------------------------
int __fastcall Function_21e4e40(int a1)
{
  bool v1;
  int result;

  v1 = a1 == 2;
  if ( a1 != 2 )
    v1 = a1 == 3;
  if ( v1 || a1 == 4 )
    result = 12;
  else
    result = 8;
  return result;
}

//----- (021E4E60) --------------------------------------------------------
int __fastcall Function_21e4e60(int a1, int a2)
{
  int v3;
  int v4;
  int v5;
  int v6;

  if ( !dword_221A400[648] )
    return 0;
  v3 = 48 * a1;
  *(uint *)(dword_221A400[648] + 48 * a1 + 44) = a2;
  v4 = OS_GetTick();
  v5 = dword_221A400[648] + v3;
  *(uint *)(v5 + 36) = v4;
  *(uint *)(v5 + 40) = v6;
  return 1;
}

//----- (021E4EAC) --------------------------------------------------------
int __fastcall Function_21e4eac(ushort *a1)
{
  int result;

  dword_221A400[648] = (int)a1;
  MI_CpuFill8(a1, 0, 0x614u);
  result = dword_221A400[648] + 1536;
  *(ushort *)(dword_221A400[648] + 1552) = 1465;
  return result;
}

//----- (021E4EE8) --------------------------------------------------------
int __fastcall Function_21e4ee8(int a1, int a2, int a3, int a4)
{
  bool v4;
  int result;

  if ( dword_221A400[648] )
  {
    v4 = a2 == 0;
    if ( a2 )
      v4 = a3 == 0;
    if ( !v4 )
    {
      if ( a4 )
        result = Function_21e520c();
      else
        result = Function_21e5300();
    }
  }
  return result;
}

//----- (021E4F24) --------------------------------------------------------
void __fastcall Function_21e4f24(int a1, int a2)
{
  int v2;
  int v3;

  v2 = a2;
  if ( *(uint *)(dword_221A400[648] + 1548) )
  {
    v3 = Function_21d9b88();
    (*(void (__fastcall **)(int, int))(dword_221A400[648] + 1548))(v2, v3);
  }
}

//----- (021E4F64) --------------------------------------------------------
int __fastcall Function_21e4f64(int a1, int a2, int a3, int a4)
{
  int result;
  int v5;
  int i;
  int v7;
  int v8;
  int v9;
  bool v10;
  long long v11;
  int v12;
  int v13;
  uint v14;
  int v15;
  int v16;
  int v17;
  int v18;
  int v19;
  int (*v20)(void);
  int v21;

  v21 = a4;
  result = dword_221A400[648];
  if ( dword_221A400[648] )
  {
    result = Function_21d9984(&v21);
    v5 = result;
    for ( i = 0; i < v5; ++i )
    {
      v7 = *(uchar *)(v21 + i);
      if ( Function_21d9a08(*(uchar *)(v21 + i)) )
      {
        v8 = Function_21e5194(v7);
        v9 = *(uint *)(dword_221A400[648] + 1544);
        v10 = v9 == 0;
        if ( v9 )
          v10 = *(uint *)(v8 + 44) == 0;
        if ( !v10 )
        {
          LODWORD(v11) = OS_GetTick();
          v12 = HIDWORD(v11);
          v13 = v11;
          HIDWORD(v11) = (v11 - *(ull *)(v8 + 36)) >> 26;
          ll_udiv();
          if ( v14 > *(uint *)(v8 + 44) )
          {
            (*(void (__fastcall **)(int))(dword_221A400[648] + 1544))(v7);
            *(uint *)(v8 + 36) = v13;
            *(uint *)(v8 + 40) = v12;
          }
        }
      }
      result = Function_21d9968();
      if ( v7 != result )
      {
        result = Function_21e51ac(v7);
        if ( result == 1 )
        {
          v15 = Function_21e5194(v7);
          v16 = *(uint *)(v15 + 20);
          v17 = *(uint *)(v15 + 12);
          v18 = *(ushort *)(dword_221A400[648] + 1552);
          if ( v16 - v17 <= v18 )
            v18 = v16 - v17;
          result = Function_21e5568(v7);
          if ( result >= v18 )
          {
            Function_21e51e4(v7, *(uint *)v15 + *(uint *)(v15 + 12), v18, 1);
            v19 = *(uint *)(v15 + 12) + v18;
            *(uint *)(v15 + 12) = v19;
            result = *(uint *)(v15 + 20);
            if ( v19 == result )
            {
              *(uchar *)(v15 + 28) = 0;
              *(uint *)v15 = 0;
              *(uint *)(v15 + 12) = 0;
              *(uint *)(v15 + 20) = 0;
              v20 = *(int (**)(void))(dword_221A400[648] + 1536);
              if ( v20 )
                result = v20();
            }
          }
        }
      }
    }
  }
  return result;
}

//----- (021E50F8) --------------------------------------------------------
int __fastcall Function_21e50f8(int result)
{
  int v1;

  if ( dword_221A400[648] )
  {
    v1 = 48 * result;
    *(uint *)(dword_221A400[648] + 48 * result + 12) = 0;
    *(uint *)(dword_221A400[648] + v1 + 16) = 0;
    *(uint *)(dword_221A400[648] + v1 + 20) = 0;
    *(uint *)(dword_221A400[648] + v1 + 24) = 0;
    *(uchar *)(dword_221A400[648] + v1 + 28) = 0;
    if ( *(uchar *)(dword_221A400[648] + 29 + 48 * result) )
      *(uchar *)(dword_221A400[648] + 29 + v1) = 1;
    result = dword_221A400[648] + v1;
    *(ushort *)(dword_221A400[648] + v1 + 34) = 0;
  }
  return result;
}

//----- (021E5180) --------------------------------------------------------
int *Function_21e5180()
{
  int *result;

  result = &dword_221A400[648];
  dword_221A400[648] = 0;
  return result;
}

//----- (021E5194) --------------------------------------------------------
int __fastcall Function_21e5194(int a1)
{
  return dword_221A400[648] + 48 * a1;
}

//----- (021E51AC) --------------------------------------------------------
int __fastcall Function_21e51ac(int a1)
{
  return *(uchar *)(dword_221A400[648] + 48 * a1 + 28);
}

//----- (021E51C8) --------------------------------------------------------
int __fastcall Function_21e51c8(int a1)
{
  return *(uchar *)(dword_221A400[648] + 48 * a1 + 29);
}

//----- (021E51E4) --------------------------------------------------------
int __fastcall Function_21e51e4(int a1, int a2, int a3, int a4)
{
  int v4;
  int v5;
  int v6;
  int v7;

  v4 = a2;
  v5 = a3;
  v6 = a4;
  v7 = Function_21d9b24(a1);
  return Function_21f866c(v7, v4, v5, v6);
}

//----- (021E520C) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x21E5244 for case 0"

//----- (021E5230) --------------------------------------------------------
void Function_21e5230()
{
  JUMPOUT(&loc_21E5244);
}

//----- (021E5234) --------------------------------------------------------
void Function_21e5234()
{
  JUMPOUT(&loc_21E5270);
}

//----- (021E5238) --------------------------------------------------------
void Function_21e5238()
{
  JUMPOUT(&loc_21E5284);
}

//----- (021E523C) --------------------------------------------------------
void Function_21e523c()
{
  JUMPOUT(&loc_21E5298);
}

//----- (021E5240) --------------------------------------------------------
void Function_21e5240()
{
  int v0;
  int v1;

  *(uchar *)(dword_221A400[648] + 48 * v0 + 29) = 1;
  *(uint *)(dword_221A400[648] + 48 * v0 + 16) = 0;
  *(uint *)(dword_221A400[648] + 48 * v0 + 24) = 0;
  JUMPOUT(__CS__, v1);
}

//----- (021E5300) --------------------------------------------------------
int __fastcall Function_21e5300(int a1, int a2, int a3)
{
  int v3;
  int result;
  uint *v5;
  void (*v6)(void);
  bool v7;
  int v8;

  v3 = a3;
  result = Function_21d9b88();
  v5 = (uint *)(dword_221A400[648] + 48 * result);
  if ( v5[1] && v5[2] >= v3 )
  {
    v6 = *(void (**)(void))(dword_221A400[648] + 1540);
    if ( v6 )
      v6();
    result = *(uint *)(dword_221A400[648] + 1544);
    v7 = result == 0;
    if ( result )
    {
      result = v5[11];
      v7 = result == 0;
    }
    if ( !v7 )
    {
      result = OS_GetTick();
      v5[9] = result;
      v5[10] = v8;
    }
  }
  return result;
}

//----- (021E5380) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x21E5438 for case 0"

//----- (021E53C0) --------------------------------------------------------
void Function_21e53c0()
{
  JUMPOUT(&loc_21E5438);
}

//----- (021E53C4) --------------------------------------------------------
void Function_21e53c4()
{
  JUMPOUT(&loc_21E53D4);
}

//----- (021E53C8) --------------------------------------------------------
void Function_21e53c8()
{
  JUMPOUT(&loc_21E5430);
}

//----- (021E53CC) --------------------------------------------------------
void Function_21e53cc()
{
  JUMPOUT(&loc_21E5430);
}

//----- (021E53D0) --------------------------------------------------------
void Function_21e53d0()
{
  int v0;
  short v1;
  int v2;

  *(uchar *)(v0 + 29) = 3;
  *(ushort *)(v0 + 34) = v1;
  JUMPOUT(__CS__, v2);
}

//----- (021E5448) --------------------------------------------------------
int __fastcall Function_21e5448(int a1, int a2, uint a3)
{
  int v3;
  int v4;
  int v5;
  uint v6;
  uint v7;
  int result;
  int v9;
  void (__fastcall *v10)(int, uint);
  bool v11;
  int v12;

  v3 = a1;
  v4 = dword_221A400[648] + 48 * a1;
  v5 = a2;
  v6 = a3;
  if ( Function_21e51c8(a1) == 2 )
  {
    v7 = *(uint *)(v4 + 16);
    if ( (int)(v7 + v6) > *(uint *)(v4 + 8) )
      return Function_21d7724(6, -97620);
    MI_CpuCopy8(v5, *(uint *)(v4 + 4) + v7, v6, v7);
  }
  v9 = *(uint *)(v4 + 16) + v6;
  *(uint *)(v4 + 16) = v9;
  if ( v9 == *(uint *)(v4 + 24) )
  {
    *(uchar *)(v4 + 29) = 1;
    *(uint *)(v4 + 16) = 0;
    *(uint *)(v4 + 24) = 0;
    v10 = *(void (__fastcall **)(int, uint))(dword_221A400[648] + 1540);
    if ( v10 )
      v10(v3, *(uint *)(v4 + 4));
  }
  result = *(uint *)(dword_221A400[648] + 1544);
  v11 = result == 0;
  if ( result )
  {
    result = *(uint *)(v4 + 44);
    v11 = result == 0;
  }
  if ( !v11 )
  {
    result = OS_GetTick();
    *(uint *)(v4 + 36) = result;
    *(uint *)(v4 + 40) = v12;
  }
  return result;
}

//----- (021E552C) --------------------------------------------------------
int __fastcall Function_21e552c(int a1, uchar *a2)
{
  int v2;
  uchar *v3;
  int result;
  int v5;
  bool v6;

  v2 = a1;
  v3 = a2;
  result = Function_21e5194(a1);
  *(uchar *)(result + 29) = *(uchar *)(result + 30);
  v5 = *(ushort *)(result + 34);
  v6 = v5 == 2;
  if ( v5 != 2 )
    v6 = v5 == 3;
  if ( v6 || v5 == 4 )
    result = Function_21de4b4(v2, v5, v3);
  return result;
}

//----- (021E5568) --------------------------------------------------------
int __fastcall Function_21e5568(int a1)
{
  int v1;
  int result;

  v1 = Function_21d9b24(a1);
  result = Function_21f875c(v1) - 519;
  if ( result <= 0 )
    result = 0;
  return result;
}

//----- (021E558C) --------------------------------------------------------
int Function_4_21e558c()
{
  int result;

  ((void (*)(void))dword_221F800[1901])();
  result = 1;
  ++dword_221A400[650];
  return result;
}

//----- (021E55B0) --------------------------------------------------------
int Function_4_21e55b0()
{
  if ( dword_221A400[650] <= 0 )
    return 1;
  ((void (__fastcall *)(int))dword_221F800[1922])(dword_221A400[650]);
  if ( --dword_221A400[650] == 1 )
    Function_21e5bc4();
  return 1;
}

//----- (021E55F0) --------------------------------------------------------
int Function_4_21e55f0()
{
  if ( Function_21d7708() )
    return 0;
  ((void (*)(void))dword_221F800[2107])();
  return 1;
}

//----- (021E5610) --------------------------------------------------------
BOOL __fastcall Function_21e5610(int a1, int a2, int a3, int a4, uint *a5)
{
  int v5;
  void (*v6)(void);
  int v7;
  int v8;
  int v9;

  v5 = a2;
  v6 = (void (*)(void))a5[1];
  v7 = a5[3];
  if ( v6 )
  {
    if ( a2 )
    {
      Function_21e5988(a2);
      v8 = *a5;
      v6();
    }
    else
    {
      ((void (__fastcall *)(int, int, uint, int))v6)(a3, a4, 0, *a5);
    }
  }
  if ( v5 || v7 == 1 )
  {
    v9 = a5[4];
    if ( v9 )
      Function_4_21d77c4(4, v9);
    else
      v7 = 1;
  }
  Function_21e5b40(a5);
  return v7 != 0;
}

//----- (021E56AC) --------------------------------------------------------
int __fastcall Function_21e56ac(int a1, int a2, int a3, int a4, int a5, int a6, uint *a7)
{
  int (__fastcall *v7)(int, int, int, int, int, uint);
  int result;

  v7 = (int (__fastcall *)(int, int, int, int, int, uint))a7[2];
  if ( v7 )
    result = v7(a2, a3, a4, a5, a6, *a7);
  return result;
}

//----- (021E56F4) --------------------------------------------------------
int __fastcall Function_4_21e56f4(int a1, void (*a2)(void), int a3, int a4)
{
  int v4;
  void (*v5)(void);
  int v6;
  int result;
  int v8;
  int v9;
  int v10;
  int v11;
  void (*v12)(void);
  int v13;
  int v14;
  int v15;

  v15 = a4;
  v4 = a1;
  v5 = a2;
  v6 = a3;
  if ( Function_21d7708() )
    return -8;
  v11 = v6;
  v12 = v5;
  v13 = 0;
  v14 = 1;
  v8 = Function_21e5ae4(&v11);
  if ( v8 )
  {
    v9 = ((int (__fastcall *)(int, uint, BOOL (__fastcall *)(int, int, int, int, uint *), int))dword_221F800[1945])(
           v4,
           0,
           Function_21e5610,
           v8);
    v10 = v9;
    if ( v9 < 0 )
    {
      Function_21e5988(v9);
      v5();
      Function_21e5b40(v8);
    }
    result = v10;
    *(uint *)(v8 + 20) = v10;
  }
  else
  {
    Function_21e5988(-5);
    v5();
    result = -5;
  }
  return result;
}

//----- (021E57BC) --------------------------------------------------------
int __fastcall Function_21e57bc(int a1, int a2, int a3, int *a4, int a5, void (*a6)(void), int a7)
{
  int v7;
  int v8;
  int v9;
  int *v10;
  int result;
  int v12;
  int v13;
  int v14;
  int v15;
  int v16;
  int v17;
  int v18;
  void (*v19)(void);
  int v20;
  int v21;

  v7 = a1;
  v8 = a2;
  v9 = a3;
  v10 = a4;
  if ( Function_21d7708() )
    return -8;
  v18 = a7;
  v19 = a6;
  v20 = a5;
  v21 = v9;
  v12 = Function_21e5ae4(&v18);
  if ( !v12 )
  {
    Function_21e5988(-5);
    a6();
    return -5;
  }
  if ( v8 > 0 )
  {
    v13 = Function_4_21d7780(4, v8);
    if ( !v13 )
    {
      Function_21e5988(-5);
      a6();
      Function_21e5b40(v12);
      return -5;
    }
    *(uint *)(v12 + 16) = v13;
  }
  if ( v10 )
    v14 = *v10;
  v15 = ((int (__fastcall *)(int))dword_221F800[1960])(v7);
  v16 = v15;
  if ( v15 < 0 )
  {
    Function_21e5988(v15);
    a6();
    v17 = *(uint *)(v12 + 16);
    if ( v17 )
      Function_4_21d77c4(4, v17);
    Function_21e5b40(v12);
  }
  result = v16;
  *(uint *)(v12 + 20) = v16;
  return result;
}

//----- (021E5960) --------------------------------------------------------
int __fastcall Function_21e5960(int a1, int a2, int a3, int a4, void (*a5)(void), int a6)
{
  return Function_21e57bc(a1, a2, a3, 0, a4, a5, a6);
}

//----- (021E5988) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x21E5A1C for case 0"

//----- (021E59B0) --------------------------------------------------------
void Function_21e59b0()
{
  JUMPOUT(&loc_21E5A1C);
}

//----- (021E59B4) --------------------------------------------------------
void Function_21e59b4()
{
  JUMPOUT(&loc_21E5A24);
}

//----- (021E59B8) --------------------------------------------------------
void Function_21e59b8()
{
  JUMPOUT(&loc_21E5A30);
}

//----- (021E59BC) --------------------------------------------------------
void Function_21e59bc()
{
  JUMPOUT(&loc_21E5A38);
}

//----- (021E59C0) --------------------------------------------------------
void Function_21e59c0()
{
  JUMPOUT(&loc_21E5A38);
}

//----- (021E59C4) --------------------------------------------------------
void Function_21e59c4()
{
  JUMPOUT(&loc_21E5A38);
}

//----- (021E59C8) --------------------------------------------------------
void Function_21e59c8()
{
  JUMPOUT(&loc_21E5A40);
}

//----- (021E59CC) --------------------------------------------------------
void Function_21e59cc()
{
  JUMPOUT(&loc_21E5ABC);
}

//----- (021E59D0) --------------------------------------------------------
void Function_21e59d0()
{
  JUMPOUT(&loc_21E5A4C);
}

//----- (021E59D4) --------------------------------------------------------
void Function_21e59d4()
{
  JUMPOUT(&loc_21E5A58);
}

//----- (021E59D8) --------------------------------------------------------
void Function_21e59d8()
{
  JUMPOUT(&loc_21E5A60);
}

//----- (021E59DC) --------------------------------------------------------
void Function_21e59dc()
{
  JUMPOUT(&loc_21E5A6C);
}

//----- (021E59E0) --------------------------------------------------------
void Function_21e59e0()
{
  JUMPOUT(&loc_21E5A74);
}

//----- (021E59E4) --------------------------------------------------------
void Function_21e59e4()
{
  JUMPOUT(&loc_21E5A7C);
}

//----- (021E59E8) --------------------------------------------------------
void Function_21e59e8()
{
  JUMPOUT(&loc_21E5A84);
}

//----- (021E59EC) --------------------------------------------------------
void Function_21e59ec()
{
  JUMPOUT(&loc_21E5A8C);
}

//----- (021E59F0) --------------------------------------------------------
void Function_21e59f0()
{
  JUMPOUT(&loc_21E5A8C);
}

//----- (021E59F4) --------------------------------------------------------
void Function_21e59f4()
{
  JUMPOUT(&loc_21E5A8C);
}

//----- (021E59F8) --------------------------------------------------------
void Function_21e59f8()
{
  JUMPOUT(&loc_21E5A7C);
}

//----- (021E59FC) --------------------------------------------------------
void Function_21e59fc()
{
  JUMPOUT(&loc_21E5A7C);
}

//----- (021E5A00) --------------------------------------------------------
void Function_21e5a00()
{
  JUMPOUT(&loc_21E5A98);
}

//----- (021E5A04) --------------------------------------------------------
void Function_21e5a04()
{
  JUMPOUT(&loc_21E5A98);
}

//----- (021E5A08) --------------------------------------------------------
void Function_21e5a08()
{
  JUMPOUT(&loc_21E5AA0);
}

//----- (021E5A0C) --------------------------------------------------------
void Function_21e5a0c()
{
  JUMPOUT(&loc_21E5AAC);
}

//----- (021E5A10) --------------------------------------------------------
void Function_21e5a10()
{
  JUMPOUT(&loc_21E5AB4);
}

//----- (021E5A14) --------------------------------------------------------
void Function_21e5a14()
{
  JUMPOUT(&loc_21E5ABC);
}

//----- (021E5A18) --------------------------------------------------------
void __fastcall Function_21e5a18(int a1, int a2)
{
  int v2;

  Function_21d7724(9, a2 - 1);
  JUMPOUT(__CS__, v2);
}

//----- (021E5AE4) --------------------------------------------------------
uint *__fastcall Function_21e5ae4(uint *a1)
{
  uint *v1;
  uint *result;
  int v3;
  int v4;
  int v5;

  v1 = a1;
  result = (uint *)Function_4_21d7780(4, 28);
  if ( !result )
    return 0;
  v3 = v1[1];
  v4 = v1[2];
  v5 = v1[3];
  *result = *v1;
  result[1] = v3;
  result[2] = v4;
  result[3] = v5;
  result[6] = 0;
  result[4] = 0;
  if ( dword_221A400[649] )
    result[6] = dword_221A400[649];
  dword_221A400[649] = (int)result;
  return result;
}

//----- (021E5B40) --------------------------------------------------------
int *__fastcall Function_21e5b40(int *result)
{
  int v1;
  int v2;
  int *v3;
  int v4;

  v1 = dword_221A400[649];
  if ( dword_221A400[649] )
  {
    if ( (int *)dword_221A400[649] == result )
    {
      v2 = *(uint *)(dword_221A400[649] + 24);
      Function_4_21d77c4(4, dword_221A400[649]);
      result = &dword_221A400[649];
      dword_221A400[649] = v2;
    }
    else
    {
      v3 = *(int **)(dword_221A400[649] + 24);
      if ( v3 )
      {
        while ( v3 != result )
        {
          v1 = (int)v3;
          v3 = (int *)v3[6];
          if ( !v3 )
            return result;
        }
        v4 = *(uint *)(v1 + 24);
        *(uint *)(v1 + 24) = *(uint *)(v4 + 24);
        result = (int *)Function_4_21d77c4(4, v4);
      }
    }
  }
  return result;
}

//----- (021E5BC4) --------------------------------------------------------
int *Function_21e5bc4()
{
  int v0;
  int v1;
  int v2;
  int *result;

  v0 = dword_221A400[649];
  while ( v0 )
  {
    v1 = v0;
    v2 = *(uint *)(v0 + 16);
    v0 = *(uint *)(v0 + 24);
    if ( v2 )
      Function_4_21d77c4(4, v2);
    Function_4_21d77c4(4, v1);
  }
  result = &dword_221A400[649];
  dword_221A400[649] = 0;
  return result;
}

//----- (021E5C34) --------------------------------------------------------
int __fastcall Function_21e5c34(int (__fastcall **a1)(int, int))
{
  int (__fastcall **v1)(int, int);
  char v2;
  int v3;

  v1 = a1;
  dword_221A400[654] = (*a1)(1, 36);
  MIi_CpuClear32(0, (uint *)dword_221A400[654], 36);
  *(uint *)dword_221A400[654] = *v1;
  *(uint *)(dword_221A400[654] + 4) = v1[1];
  *(uchar *)(dword_221A400[654] + 9) = 1;
  *(uchar *)(dword_221A400[654] + 22) = 1;
  *(uchar *)(dword_221A400[654] + 8) = 1;
  dword_221A400[655] = Function_21e6124(16, 3352);
  dword_221A400[651] = Function_21e6124(2, 8960);
  dword_221A400[652] = Function_21e6124(4, 88);
  dword_221A400[653] = Function_21e6124(8, 12);
  MIi_CpuClear32(0, (uint *)dword_221A400[655], 3352);
  MIi_CpuClear32(0, (uint *)dword_221A400[651], 8960);
  MIi_CpuClear32(0, (uint *)dword_221A400[652], 88);
  MIi_CpuClear32(0, (uint *)dword_221A400[653], 12);
  *(uchar *)(dword_221A400[655] + 3338) = *((uchar *)v1 + 8);
  *(uchar *)(dword_221A400[655] + 3339) = *(uchar *)(dword_221A400[655] + 3339) & 0xFC | *((uchar *)v1 + 9) & 3;
  *(uint *)dword_221A400[653] = *v1;
  *(uint *)(dword_221A400[653] + 4) = v1[1];
  *(uint *)(dword_221A400[653] + 8) = 0;
  v2 = *(uchar *)(dword_221A400[655] + 3340) & 0xF0 | *((uchar *)v1 + 10) & 0xF;
  *(uchar *)(dword_221A400[655] + 3340) = v2;
  *(uchar *)(dword_221A400[655] + 3340) = v2 & 0xCF | 16 * *((uchar *)v1 + 11) & 0x3F;
  Function_20a2810(dword_221A400[655]);
  v3 = Function_4_2212cc8(dword_221A400[651], 8960);
  if ( v3 != 1 && v3 <= 4 )
    return 1;
  Function_21e61c8();
  return 0;
}

//----- (021E5DDC) --------------------------------------------------------
int Function_21e5ddc()
{
  uint v0;
  int v1;
  int v2;
  int v3;
  int v4;
  int result;

  v0 = Function_21e63a4();
  v1 = v0;
  if ( v0 == 1 )
  {
    v1 = Function_21e80b0();
  }
  else if ( v0 >= 7 )
  {
    if ( v0 >= 9 )
    {
      if ( v0 >= 0xA )
      {
        if ( v0 >= 0x10 )
        {
          if ( v0 == 17 )
            v1 = Function_21e7210();
        }
        else
        {
          v1 = Function_21e8138();
        }
      }
      else
      {
        v1 = Function_21e7804();
      }
    }
    else
    {
      v1 = Function_21e6b90();
    }
  }
  else
  {
    v2 = OS_DisableInterrupts();
    v1 = Function_21e78e0();
    ((void (*)(void))Function_21e6344)();
    OS_RestoreInterrupts(v2);
  }
  v3 = Function_21e6344(v1);
  if ( v1 == 16 )
  {
    v4 = Function_21e64e8(v3);
    Function_21e64b0(v4);
    result = v4;
  }
  else if ( v1 == 18 )
  {
    Function_21e64b0(v3);
    result = -1;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (021E5EAC) --------------------------------------------------------
int Function_21e5eac()
{
  uint v0;

  v0 = Function_21e63a4();
  if ( v0 <= 1 )
    return 0;
  if ( v0 < 7 )
    return 1;
  if ( v0 == 9 )
    return 4;
  if ( v0 < 0xA )
    return 2;
  if ( v0 == 11 )
    return 4;
  if ( v0 < 0x10 )
    return 3;
  if ( v0 == 16 )
    return 5;
  if ( v0 == 17 )
    return 4;
  return Function_21e7234();
}

//----- (021E5F18) --------------------------------------------------------
int Function_21e5f18()
{
  int v0;
  uint v1;

  v0 = 255;
  v1 = Function_21e63a4();
  if ( v1 >= 0xA && v1 <= 0x10 )
    v0 = *(uchar *)(dword_221A400[654] + 23);
  return v0;
}

//----- (021E5F48) --------------------------------------------------------
int __fastcall Function_21e5f48(uint a1)
{
  uint v1;
  int v2;
  uint v3;
  uint v4;
  int v5;
  bool v6;

  v1 = a1;
  v2 = 0;
  v3 = Function_21e63a4();
  if ( v3 >= 0xA && v3 <= 0x10 )
  {
    v5 = *(uchar *)(dword_221A400[654] + 23);
    v6 = v5 == 4;
    if ( v5 != 4 )
      v6 = v5 == 8;
    if ( v6 )
    {
      MI_CpuCopy8(dword_221A400[654] + 24, v1, 0xAu, v4);
      v2 = 1;
    }
  }
  return v2;
}

//----- (021E5FA0) --------------------------------------------------------
int __fastcall Function_21e5fa0(int a1, int a2, int a3, int a4)
{
  bool v4;
  int result;
  int v6;

  v6 = a4;
  LOBYTE(v6) = Function_21e63a4(a1);
  v4 = (uchar)v6 == 0;
  if ( (uchar)v6 )
    v4 = (uchar)v6 == 18;
  if ( v4 )
  {
    Function_21e61c8((uchar)v6);
    result = 1;
  }
  else
  {
    Function_21e70c8(&v6);
    Function_21e6344((uchar)v6);
    result = 0;
  }
  return result;
}

//----- (021E5FDC) --------------------------------------------------------
int __fastcall Function_21e5fdc(int a1, int a2, int a3, int a4, char a5)
{
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  uint v10;
  int v11;

  v5 = a1;
  v6 = a4;
  v7 = a2;
  v8 = a3;
  v9 = Function_21e62ec(1);
  v11 = v9;
  if ( v6 )
    MI_CpuCopy8(v6, v9 + 24, 0xAu, v10);
  else
    MI_CpuFill8((ushort *)(v9 + 24), 0, 0xAu);
  *(uchar *)(v11 + 34) = a5;
  return Function_21e6040(v5, v7, v8);
}

//----- (021E6040) --------------------------------------------------------
int __fastcall Function_21e6040(int a1, int a2, int a3)
{
  int v3;
  int v4;
  int v5;
  int v6;
  uint v7;
  int v8;
  char v9;
  int v10;
  bool v11;
  int result;
  uint v13;

  v3 = a1;
  v4 = a2;
  v5 = a3;
  v6 = Function_21e62ec(16);
  *(uchar *)(v6 + 3340) = *(uchar *)(v6 + 3340) & 0xF0 | 1;
  MI_CpuFill8((ushort *)v6, 0, 0xF0u);
  v8 = 0;
  do
  {
    v9 = *(uchar *)(v3 + v8);
    if ( !*(uchar *)(v3 + v8) )
      break;
    v10 = v6 + v8++;
    *(uchar *)(v10 + 64) = v9;
  }
  while ( v8 < 32 );
  v11 = v4 == 0;
  if ( v4 )
    v11 = v5 == 0;
  if ( v11 )
  {
    result = *(uchar *)(v6 + 230) & 0xFC;
    *(uchar *)(v6 + 230) = result;
  }
  else
  {
    if ( v5 == 1 )
    {
      v13 = 5;
    }
    else if ( v5 == 2 )
    {
      v13 = 13;
    }
    else
    {
      v13 = 16;
    }
    MI_CpuCopy8(v4, v6 + 128, v13, v7);
    result = (uchar)(*(uchar *)(v6 + 230) & 0xFC) | v5 & 3;
    *(uchar *)(v6 + 230) = result;
  }
  return result;
}

//----- (021E60F8) --------------------------------------------------------
int *__fastcall Function_21e60f8(int a1, int *a2)
{
  int v2;
  int *v3;
  int v4;

  v2 = a1;
  v3 = a2;
  v4 = Function_21e62ec(16);
  return MI_CpuCopy32(v3, (uint *)(v4 + (v2 << 8)), 240);
}

//----- (021E6124) --------------------------------------------------------
int __fastcall Function_21e6124(int a1, int a2)
{
  int v2;
  int v3;
  int v4;
  int v5;

  v2 = a1;
  v3 = a2;
  v4 = Function_21e62ec(1);
  v5 = *(uchar *)(v4 + 8);
  if ( v5 & v2 )
    return 0;
  *(uchar *)(v4 + 8) = v5 | v2;
  return (*(int (__fastcall **)(int, int))v4)(v2, v3);
}

//----- (021E6164) --------------------------------------------------------
int *__fastcall Function_21e6164(int a1, int a2, int a3)
{
  int v3;
  int v4;
  int v5;
  int *result;
  int v7;

  v3 = a1;
  v4 = a2;
  v5 = a3;
  result = (int *)Function_21e62ec(1);
  if ( result )
  {
    v7 = *((uchar *)result + 8);
    if ( v7 & v3 )
    {
      *((uchar *)result + 8) = v7 & ~(uchar)v3;
      result = (int *)((int (__fastcall *)(int, int, int))result[1])(v3, v4, v5);
      if ( v3 == 1 )
      {
        result = &dword_221A400[651];
        dword_221A400[654] = 0;
      }
    }
  }
  return result;
}

//----- (021E61C8) --------------------------------------------------------
int *Function_21e61c8()
{
  int *result;
  int *v1;
  int v2;
  int v3;
  int v4;
  int v5;

  result = (int *)Function_21e62ec(1);
  v1 = result;
  if ( result )
  {
    if ( result[2] & 0x10 )
    {
      v2 = Function_21e62ec(16);
      *((uchar *)v1 + 8) &= 0xEFu;
      ((void (__fastcall *)(int, int, int))v1[1])(16, v2, 3352);
    }
    if ( v1[2] & 8 )
    {
      v3 = Function_21e62ec(8);
      *((uchar *)v1 + 8) &= 0xF7u;
      ((void (__fastcall *)(int, int, int))v1[1])(8, v3, 12);
    }
    if ( v1[2] & 4 )
    {
      v4 = Function_21e62ec(4);
      *((uchar *)v1 + 8) &= 0xFBu;
      ((void (__fastcall *)(int, int, int))v1[1])(4, v4, 88);
    }
    if ( v1[2] & 2 )
    {
      v5 = Function_21e62ec(2);
      *((uchar *)v1 + 8) &= 0xFDu;
      ((void (__fastcall *)(int, int, int))v1[1])(2, v5, 8960);
    }
    result = (int *)*((uchar *)v1 + 8);
    if ( (uchar)result & 1 )
    {
      *((uchar *)v1 + 8) = (uchar)result & 0xFE;
      ((void (__fastcall *)(int, int *, int))v1[1])(1, v1, 36);
      result = &dword_221A400[651];
      dword_221A400[654] = 0;
    }
  }
  return result;
}

//----- (021E62EC) --------------------------------------------------------
int __fastcall Function_21e62ec(char a1)
{
  if ( a1 & 1 )
    return dword_221A400[654];
  if ( a1 & 2 )
    return dword_221A400[651];
  if ( a1 & 4 )
    return dword_221A400[652];
  if ( a1 & 8 )
    return dword_221A400[653];
  if ( a1 & 0x10 )
    return dword_221A400[655];
  return 0;
}

//----- (021E6344) --------------------------------------------------------
uint __fastcall Function_21e6344(uint a1)
{
  uint v1;
  uchar *v2;
  uint result;
  uint v4;
  bool v5;
  bool v6;

  v1 = a1;
  v2 = (uchar *)Function_21e62ec(1);
  result = Function_21e62ec(16);
  v4 = result;
  v2[9] = v1;
  if ( v1 < 0x10 )
  {
    result = (uchar)v2[22];
    v5 = v1 >= result;
    v6 = v1 == result;
    if ( v1 > result )
    {
      v2[22] = v1;
      v5 = v1 >= 7;
      v6 = v1 == 7;
    }
    if ( !v6 && v5 )
    {
      v2[21] = Function_21e64a0(*(uchar *)(v4 + 3341));
      result = *(uchar *)(v4 + 4 * *(uchar *)(v4 + 3347) + 1092);
      v2[20] = result;
    }
  }
  return result;
}

//----- (021E63A4) --------------------------------------------------------
int Function_21e63a4()
{
  int result;

  if ( dword_221A400[654] )
    result = *(uchar *)(dword_221A400[654] + 9);
  else
    result = 0;
  return result;
}

//----- (021E63C0) --------------------------------------------------------
int __fastcall Function_21e63c0(int a1)
{
  int v1;
  int v2;
  int v3;
  int result;

  v1 = a1;
  v2 = Function_21e62ec(1);
  v3 = v2;
  *(uint *)(v2 + 12) = v1;
  result = Function_21e63a4();
  *(uchar *)(v3 + 10) = result;
  return result;
}

//----- (021E63E4) --------------------------------------------------------
int Function_21e63e4()
{
  return *(uint *)(dword_221A400[654] + 12);
}

//----- (021E63F8) --------------------------------------------------------
int __fastcall Function_21e63f8(int a1)
{
  char v1;
  int v2;
  int v3;
  int v4;
  int v5;
  int result;

  v1 = *(uchar *)(dword_221A400[654] + 34);
  if ( !*(uchar *)(dword_221A400[654] + 34) )
    v1 = Function_21e64a0(a1);
  *(uchar *)(dword_221A400[654] + 23) = v1;
  v2 = Function_22153dc(0);
  v3 = v2;
  if ( v2 )
  {
    DC_InvalidateRange(v2, 32);
    Function_21e8654(v3, dword_221A400[654] + 24);
  }
  v4 = 0;
  v5 = dword_221A400[654];
  while ( 1 )
  {
    result = *(char *)(v5 + 24);
    if ( result < 32 || result > 126 )
      break;
    ++v4;
    ++v5;
    if ( v4 >= 10 )
      return result;
  }
  return (int)MI_CpuFill8((ushort *)(dword_221A400[654] + 24), 0, 0xAu);
}

//----- (021E64A0) --------------------------------------------------------
uint __fastcall Function_21e64a0(uint result)
{
  if ( result > 2 )
    result = (uchar)(result - 3);
  return result;
}

//----- (021E64B0) --------------------------------------------------------
int *Function_21e64b0()
{
  Function_21e6164(8, dword_221A400[653], 12);
  return Function_21e6164(16, dword_221A400[655], 3352);
}

//----- (021E64E8) --------------------------------------------------------
int Function_21e64e8()
{
  int v0;
  int v1;
  uint v3;
  uint v4;

  v0 = *(uchar *)(dword_221A400[655] + 3347);
  v1 = 192 * v0;
  if ( *(uchar *)(dword_221A400[655] + 3341) >= 6u )
    return 1;
  v3 = *(uchar *)(dword_221A400[655] + 3346);
  v4 = 0;
  if ( !*(uchar *)(dword_221A400[655] + 3346) )
    return 1;
  while ( v4 == v0
       || *(uchar *)(dword_221A400[655] + 4 * v4 + 1093) >= 6u
       || Function_20d8e28(
            (uchar *)(dword_221A400[655] + 1140 + v1),
            (uchar *)(dword_221A400[655] + 1140 + 192 * v4),
            *(ushort *)(dword_221A400[655] + 192 * v4 + 1146)) )
  {
    v4 = (v4 + 1) & 0xFF;
    if ( v4 >= v3 )
      return 1;
  }
  return 2;
}

//----- (021E6588) --------------------------------------------------------
int __fastcall Function_21e6588(int a1)
{
  int v1;
  int v2;
  uchar *v3;
  int result;
  int v5;
  int v6;
  bool v7;
  bool v8;
  int v9;
  int v10;
  int v11;

  v1 = a1;
  v2 = -1;
  v3 = (uchar *)Function_21e62ec(16);
  *(uchar *)(Function_21e62ec(1) + 11) = 1;
  result = Function_21e63a4();
  switch ( result )
  {
    case 3:
      v5 = *(ushort *)(v1 + 10);
      v6 = v3[3345];
      v7 = v5 == 0;
      if ( *(ushort *)(v1 + 10) )
      {
        result = *(uchar *)(v1 + 12);
        v7 = result == 0;
      }
      if ( v7 )
      {
        result = Function_21e79a4(*(ushort *)(v1 + 54));
      }
      else
      {
        v8 = v5 == 1;
        if ( v5 == 1 )
          v8 = result == 32;
        if ( v8 )
          Function_21e79a4(*(ushort *)(v1 + 54));
        result = Function_21e6788(v1, v3[3344], v3 + 768);
        v2 = result;
      }
      break;
    case 4:
      v6 = (*(ushort *)&v3[192 * v3[3343] + 1190] - 1) & 0xFF;
      result = Function_21e6804(v1, v3);
      v2 = result;
      if ( result >= 0 )
      {
        v9 = v3[3343];
        result = v3[4 * v9 + 1095] | 0x80;
        v3[4 * v9 + 1095] = result;
      }
      break;
    case 5:
      v6 = v3[3345];
      result = Function_21e6788(v1, 1, &v3[36 * v3[3343] + 768]);
      v2 = result;
      if ( result >= 0 )
      {
        v10 = 36 * v3[3343];
        result = (uchar)(v3[v10 + 768] & 0xF0) | 1;
        v3[v10 + 768] = result;
      }
      break;
    default:
      return result;
  }
  if ( v2 >= 0 )
  {
    v11 = Function_21e6894(v2, v1, v6, v3);
    result = Function_21e6a14(v11, v3);
  }
  return result;
}

//----- (021E66F4) --------------------------------------------------------
int __fastcall Function_21e66f4(int a1)
{
  int v1;
  int v2;
  int v3;
  bool v4;
  int v5;
  int result;
  bool v7;

  v1 = a1;
  v2 = Function_21e62ec(16);
  v3 = v2;
  v5 = *(uchar *)(v2 + 3340) & 0xF;
  v4 = v5 == 0;
  if ( v5 )
    v4 = v5 == 4;
  if ( v4 && (((int)*(ushort *)(v1 + 44) >> 4) & 1) == 1 && Function_21e86a0(v1 + 12) == 1 )
    return 6;
  v7 = (*(uchar *)(v3 + 3340) & 0xF) == 0;
  if ( *(uchar *)(v3 + 3340) & 0xF )
    v7 = (*(uchar *)(v3 + 3340) & 0xF) == 5;
  if ( v7 && (((int)*(ushort *)(v1 + 44) >> 4) & 1) == 1 && Function_21e85f4(v1 + 12) == 1 )
    result = 7;
  else
    result = -1;
  return result;
}

//----- (021E6788) --------------------------------------------------------
int __fastcall Function_21e6788(int a1, int a2, uchar *a3)
{
  int v3;
  int v4;
  uchar *v5;
  int result;
  int v7;
  int v8;

  v3 = a1;
  v4 = a2;
  v5 = a3;
  if ( *(ushort *)(a1 + 10) != 32 || (result = Function_21e66f4(a1), result <= 0) )
  {
    v7 = 0;
    if ( v4 <= 0 )
    {
LABEL_9:
      result = -1;
    }
    else
    {
      v8 = *(ushort *)(v3 + 10);
      while ( (uchar)v8 != v5[3] || Function_20d8e28((uchar *)(v3 + 12), v5 + 4, v8) )
      {
        ++v7;
        v5 += 36;
        if ( v7 >= v4 )
          goto LABEL_9;
      }
      result = v5[1];
    }
  }
  return result;
}

//----- (021E6804) --------------------------------------------------------
int __fastcall Function_21e6804(int a1, int a2)
{
  int v2;
  int v3;
  int result;
  int v5;
  int v6;
  int v7;
  int v8;
  uchar *v9;

  v2 = a1;
  v3 = a2;
  if ( *(ushort *)(a1 + 10) != 32 || (result = Function_21e66f4(a1), result <= 0) )
  {
    v5 = *(uchar *)(v3 + 3346);
    v6 = 0;
    if ( v5 <= 0 )
    {
LABEL_9:
      result = -1;
    }
    else
    {
      v7 = *(ushort *)(v2 + 10);
      v8 = v3;
      v9 = (uchar *)(v3 + 1148);
      while ( v7 != *(ushort *)(v8 + 1146) || Function_20d8e28((uchar *)(v2 + 12), v9, v7) )
      {
        ++v6;
        v8 += 192;
        v9 += 192;
        if ( v6 >= v5 )
          goto LABEL_9;
      }
      result = *(uchar *)(v3 + 4 * v6 + 1093);
    }
  }
  return result;
}

//----- (021E6894) --------------------------------------------------------
int __fastcall Function_21e6894(uchar a1, uchar *a2, int a3, int a4)
{
  int v4;
  int v5;
  int v6;
  int v7;
  int v8;
  uchar *v9;
  int v10;
  bool v11;
  uint v12;

  v4 = a4;
  v5 = *(uchar *)(a4 + 3346);
  v6 = -1;
  v7 = 0;
  if ( v5 > 0 )
  {
    v8 = a2[4];
    v9 = (uchar *)(v4 + 1140);
    while ( 1 )
    {
      v10 = *v9;
      v11 = v8 == v10;
      if ( v8 == v10 )
        v11 = a2[5] == v9[1];
      if ( v11 && a2[6] == v9[2] && a2[7] == v9[3] && a2[8] == v9[4] && a2[9] == v9[5] )
        break;
      ++v7;
      v9 += 192;
      if ( v7 >= v5 )
        goto LABEL_12;
    }
    v6 = v7;
  }
LABEL_12:
  if ( v6 == -1 )
  {
    Function_21e695c(a1);
    v12 = *(uchar *)(v4 + 3346);
    v6 = 10;
    if ( v12 < 0xA )
      *(uchar *)(v4 + 3346) = v12 + 1;
  }
  else
  {
    Function_21e69a8(v6);
  }
  return v6;
}

//----- (021E695C) --------------------------------------------------------
int *__fastcall Function_21e695c(char a1, int a2, char a3, int a4)
{
  int v4;
  char v5;
  bool v6;
  int v7;

  *(uchar *)(a4 + 1133) = a1;
  v4 = *(ushort *)(a2 + 2);
  v5 = a3 & 0x7F;
  v6 = (v4 & 2) == 0;
  v7 = v4 >> 2;
  if ( v6 )
    LOBYTE(v7) = v7 + 25;
  *(uchar *)(a4 + 1134) = v7;
  *(uchar *)(a4 + 1135) = *(uchar *)(a4 + 1135) & 0x80 | v5;
  return MI_CpuCopy32((int *)a2, (uint *)(a4 + 3056), 192);
}

//----- (021E69A8) --------------------------------------------------------
int *__fastcall Function_21e69a8(int a1, int a2, char a3, int a4)
{
  int v4;
  int v5;
  bool v6;
  int v7;
  int v8;
  int v9;

  v4 = *(ushort *)(a2 + 2);
  v5 = 192 * a1;
  v6 = (v4 & 2) == 0;
  v7 = a4 + 1092 + 4 * a1;
  v8 = v4 >> 2;
  if ( v6 )
    LOBYTE(v8) = v8 + 25;
  v9 = a4 + 1136;
  if ( (uchar)v8 > (uint)*(uchar *)(v7 + 2) )
  {
    *(uchar *)(v7 + 2) = v8;
    *(uchar *)(v7 + 3) = *(uchar *)(v7 + 3) & 0x80 | a3 & 0x7F;
  }
  return MI_CpuCopy32((int *)a2, (uint *)(v9 + v5), 192);
}

//----- (021E6A14) --------------------------------------------------------
int __fastcall Function_21e6a14(int a1, int a2)
{
  int v2;
  int v3;
  int v4;
  int v5;
  int *v6;
  int *v7;
  int v9;
  char v10;

  v2 = a1;
  v3 = a2 + 1092;
  v4 = a2 + 1136;
  v5 = a1 - 1;
  if ( a1 - 1 >= 0 )
  {
    v6 = (int *)(v4 + 192 * v5);
    v7 = (int *)(v3 + 4 * v5);
    do
    {
      if ( *(uchar *)(v3 + 4 * v2 + 2) < (uint)*(uchar *)(v3 + 4 * v5 + 2) )
        break;
      MI_CpuCopy32(v7, &v9, 4);
      MI_CpuCopy32((int *)(v3 + 4 * v2), v7, 4);
      MI_CpuCopy32(&v9, (uint *)(v3 + 4 * v2), 4);
      MI_CpuCopy32(v6, &v10, 192);
      MI_CpuCopy32((int *)(v4 + 192 * v2), v6, 192);
      MI_CpuCopy32((int *)&v10, (uint *)(v4 + 192 * v2), 192);
      v2 = v5;
      --v7;
      v6 -= 48;
      --v5;
    }
    while ( v5 >= 0 );
  }
  MIi_CpuClear32(0, (uint *)(v3 + 40), 4);
  return MIi_CpuClear32(0, (uint *)(v4 + 1920), 192);
}

//----- (021E6B04) --------------------------------------------------------
int __fastcall Function_21e6b04(short *a1)
{
  short *v1;
  int result;
  int v3;
  int v4;

  v1 = a1;
  result = Function_21e62ec(16);
  v3 = *v1;
  if ( v3 == 5 )
  {
    if ( v1[1] )
    {
      v4 = *((uint *)v1 + 2);
      switch ( v4 )
      {
        case 13:
          *(uchar *)(result + 3348) = 1;
          break;
        case 15:
          *(uchar *)(result + 3348) = 2;
          break;
        case 17:
          *(uchar *)(result + 3348) = 3;
          break;
        default:
          *(uchar *)(result + 3348) = 4;
          break;
      }
    }
  }
  else if ( v3 == 7 )
  {
    result = Function_21e6588(*((uint *)v1 + 1));
  }
  return result;
}

//----- (021E6B90) --------------------------------------------------------
int Function_21e6b90()
{
  int v0;
  int v1;

  v0 = Function_21e63a4();
  v1 = Function_21e62ec(16);
  if ( v0 == 7 )
    return Function_21e6bd4(v1);
  if ( v0 == 8 )
    v0 = Function_21e6ccc(v1);
  return v0;
}

//----- (021E6BD4) --------------------------------------------------------
int __fastcall Function_21e6bd4(int a1)
{
  int v1;
  int v2;
  char v3;
  int result;
  int v5;
  bool v6;

  v1 = a1;
  v2 = a1 + 1136 + 192 * *(uchar *)(a1 + 3347);
  *(uchar *)(a1 + 3341) = Function_21e6e08();
  MI_CpuFill8((ushort *)(v1 + 3256), 0, 0x52u);
  v6 = Function_21e6fdc(v1, *(uchar *)(v1 + 3341), v1 + 3256) == 0;
  v3 = *(uchar *)(v1 + 3339) & 0xF3;
  if ( v6 )
  {
    *(uchar *)(v1 + 3339) = v3;
    if ( (((int)*(ushort *)(v2 + 44) >> 4) & 1) == 1 )
    {
      result = 9;
      *(uchar *)(v1 + 4 * *(uchar *)(v1 + 3347) + 1092) = 3;
      return result;
    }
  }
  else
  {
    *(uchar *)(v1 + 3339) = v3 | 4;
    if ( !(((int)*(ushort *)(v2 + 44) >> 4) & 1) )
    {
      result = 9;
      *(uchar *)(v1 + 4 * *(uchar *)(v1 + 3347) + 1092) = 3;
      return result;
    }
    v5 = *(uchar *)(v1 + 3341);
    v6 = v5 == 6;
    if ( v5 == 6 )
      v6 = *(uchar *)(v2 + 21) == 0;
    if ( v6 )
    {
      result = 9;
      *(uchar *)(v1 + 4 * *(uchar *)(v1 + 3347) + 1092) = 3;
      return result;
    }
  }
  *(uchar *)(v1 + 3349) = 0;
  *(uchar *)(v1 + 3348) = 0;
  return 8;
}

//----- (021E6CCC) --------------------------------------------------------
int __fastcall Function_21e6ccc(int a1)
{
  int v1;
  int v2;
  int v3;
  int v4;
  uchar v5;
  int v6;
  int result;
  int v8;
  int v9;
  int v10;

  v1 = a1;
  v2 = Function_4_2213898();
  v3 = 192 * *(uchar *)(v1 + 3347);
  if ( v2 == 3 )
  {
    v4 = Function_21e6fa4(v1);
    v5 = *(uchar *)(v1 + 3349) + 1;
    v6 = v5;
    *(uchar *)(v1 + 3349) = v5;
    if ( v5 > 3u )
    {
      *(uchar *)(v1 + 3349) = 0;
      result = 9;
      *(uchar *)(v1 + 4 * *(uchar *)(v1 + 3347) + 1092) = 1;
      return result;
    }
    if ( v5 != 1 )
    {
      v8 = *(uchar *)(v1 + 3348);
      switch ( v8 )
      {
        case 1:
          *(uchar *)(v1 + 3339) &= 0xF3u;
          break;
        case 2:
          *(uchar *)(v1 + 3349) = 0;
          result = 9;
          *(uchar *)(v1 + 4 * *(uchar *)(v1 + 3347) + 1092) = 3;
          return result;
        case 3:
          *(uchar *)(v1 + 3349) = 0;
          result = 9;
          *(uchar *)(v1 + 4 * *(uchar *)(v1 + 3347) + 1092) = 4;
          return result;
        default:
          if ( v6 == 3 )
            *(uchar *)(v1 + 3339) &= 0xF3u;
          break;
      }
    }
    v9 = Function_21e6fc0(v1);
    Function_4_2213368(v1 + 1136 + v3, v1 + 3256, v4 | v9);
  }
  else if ( v2 == 9 )
  {
    *(uchar *)(v1 + 3349) = 0;
    *(uint *)(v1 + 3248) = OS_GetTick();
    *(uint *)(v1 + 3252) = v10;
    return 10;
  }
  return 8;
}

//----- (021E6E08) --------------------------------------------------------
int __fastcall Function_21e6e08(uchar *a1)
{
  uchar *v1;
  int v2;
  int v3;
  int v4;
  int v5;
  bool v6;
  bool v7;
  int v8;
  bool v9;
  int v10;
  uchar *v11;
  uchar *v12;
  uchar *v13;
  int v14;
  int v15;
  int v16;
  uchar *v17;
  uchar *v18;
  int v19;
  uchar v21;

  v1 = a1;
  v2 = (int)&a1[192 * a1[3347] + 1136];
  v21 = 0;
  if ( (uint)a1[3340] << 24 >> 30 )
  {
    v15 = 0;
    v16 = 0;
    if ( (int)a1[3344] > 0 )
    {
      v17 = a1;
      v18 = a1 + 768;
      do
      {
        v19 = (uchar)*v18;
        if ( (uint)(v19 << 24) >> 28 == 1 )
        {
          if ( !v16 )
          {
            *v18 = v19 & 0xF;
            v21 = v17[769];
          }
          ++v16;
        }
        ++v15;
        v18 += 36;
        v17 += 36;
      }
      while ( v15 < v1[3344] );
    }
    if ( v16 == 1 )
      v1[3340] &= 0x3Fu;
  }
  else
  {
    v3 = *(ushort *)(v2 + 10);
    v4 = 0;
    if ( v3 == 32 )
    {
      v5 = Function_21e66f4(v2);
      v6 = v5 == 0;
      v7 = v5 < 0;
      v21 = v5;
      if ( v5 > 0 )
        v4 = 1;
      else
        LOBYTE(v5) = 0;
      if ( v7 || v6 )
        v21 = v5;
    }
    else if ( v3 == 8 )
    {
      v8 = Function_21e7490(v2);
      v9 = v8 == 0;
      v21 = v8;
      if ( v8 )
        v4 = 1;
      else
        LOBYTE(v8) = 0;
      if ( v9 )
        v21 = v8;
    }
    v10 = 0;
    if ( (int)v1[3344] > 0 )
    {
      v11 = v1;
      v12 = v1 + 772;
      v13 = v1 + 768;
      do
      {
        v14 = *(ushort *)(v2 + 10);
        if ( v14 == v11[771] && !Function_20d8e28((uchar *)(v2 + 12), v12, v14) )
        {
          if ( v4 )
          {
            *v13 = *v13 & 0xF | 0x10;
            v1[3340] = v1[3340] & 0x3F | 0x40;
          }
          else
          {
            v21 = v11[769];
          }
          ++v4;
        }
        ++v10;
        v11 += 36;
        v12 += 36;
        v13 += 36;
      }
      while ( v10 < v1[3344] );
    }
  }
  return v21;
}

//----- (021E6FA4) --------------------------------------------------------
int __fastcall Function_21e6fa4(int a1)
{
  int result;

  if ( (*(uchar *)(a1 + 3339) & 3) == 1 )
    result = 196608;
  else
    result = 0x20000;
  return result;
}

//----- (021E6FC0) --------------------------------------------------------
int __fastcall Function_21e6fc0(int a1)
{
  int result;

  if ( (uint)*(uchar *)(a1 + 3339) << 28 >> 30 == 1 )
    result = 786432;
  else
    result = 0x80000;
  return result;
}

//----- (021E6FDC) --------------------------------------------------------
BOOL __fastcall Function_21e6fdc(int a1, int a2, uchar *a3)
{
  uchar *v3;
  char v4;

  v3 = a3;
  switch ( a2 )
  {
    case 0:
      goto LABEL_4;
    case 1:
      goto LABEL_3;
    case 2:
      a1 += 256;
LABEL_3:
      a1 += 256;
LABEL_4:
      v4 = *(uchar *)(a1 + 230);
      *v3 = v4 & 3;
      MI_CpuCopy8(a1 + 128, (uint)(v3 + 2), 0x10u, v4 & 3);
      return *v3 != 0;
    case 3:
      goto LABEL_7;
    case 4:
      goto LABEL_6;
    case 5:
      a1 += 256;
LABEL_6:
      a1 += 256;
LABEL_7:
      *a3 = 1;
      MI_CpuCopy8(a1 + 209, (uint)(a3 + 2), 5u, 1u);
      break;
    case 6:
      *a3 = 2;
      Function_21e86c4(a1 + 1148 + 192 * *(uchar *)(a1 + 3347), a3 + 2);
      break;
    case 7:
      *a3 = 2;
      Function_21e862c(a1 + 1148 + 192 * *(uchar *)(a1 + 3347), a3 + 2);
      break;
    default:
      return *v3 != 0;
  }
  return *v3 != 0;
}

//----- (021E70C8) --------------------------------------------------------
int __fastcall Function_21e70c8(uchar *a1)
{
  uchar *v1;
  uint v2;
  int v3;

  v1 = a1;
  v2 = *a1;
  if ( v2 > 0xA )
  {
    if ( v2 == 14 )
    {
      Function_21d59f0();
      Function_21d58f8();
      *v1 = 12;
    }
    else if ( v2 < 0x12 && Function_21e71e0() == 1 )
    {
      *v1 = 10;
    }
  }
  else
  {
    v3 = Function_21e7150();
    if ( v3 == 1 )
    {
      *v1 = 0;
      return 1;
    }
    if ( v3 == -1 )
    {
      *v1 = 18;
      return 1;
    }
  }
  return 0;
}

//----- (021E7150) --------------------------------------------------------
int Function_21e7150()
{
  switch ( Function_4_2213898() )
  {
    case 0:
      return 1;
    case 1:
      Function_4_2212de0();
      return 0;
    case 3:
      Function_4_221303c();
      return 0;
    case 6:
      Function_22132c4();
      return 0;
    case 9:
      Function_4_221356c();
      return 0;
    case 11:
      Function_21e63c0(0);
      return -1;
    case 12:
      Function_2213688();
      break;
    default:
      return 0;
  }
  return 0;
}

//----- (021E71E0) --------------------------------------------------------
int Function_21e71e0()
{
  int v1;
  bool v2;

  if ( Function_2207edc() )
    return 0;
  v1 = Function_4_22089e8();
  v2 = v1 == 0;
  if ( v1 )
    v2 = v1 == -39;
  return v2 != 0;
}

//----- (021E7210) --------------------------------------------------------
int Function_21e7210()
{
  int v0;
  int result;

  v0 = Function_21e62ec(1);
  if ( Function_21e70c8((uchar *)(v0 + 10)) == 1 )
    result = 18;
  else
    result = 17;
  return result;
}

//----- (021E7234) --------------------------------------------------------
int Function_21e7234()
{
  int v0;
  int v1;

  v0 = Function_21e62ec(1);
  v1 = Function_21e63e4();
  if ( v1 < 4 )
    return Function_21e7284();
  if ( v1 < 5 )
    return Function_21e72c8();
  if ( v1 == 5 )
    return Function_21e72d0(v0);
  return Function_21e72ec(v0);
}

//----- (021E7284) --------------------------------------------------------
int __fastcall Function_21e7284(int a1)
{
  int result;

  switch ( a1 )
  {
    case 0:
      result = -10;
      break;
    case 1:
      result = -9;
      break;
    case 2:
      result = -8;
      break;
    case 3:
      result = -7;
      break;
    default:
      result = 0;
      break;
  }
  return result;
}

//----- (021E72C8) --------------------------------------------------------
int Function_21e72c8()
{
  return -6;
}

//----- (021E72D0) --------------------------------------------------------
int __fastcall Function_21e72d0(int a1)
{
  int result;

  if ( *(uchar *)(a1 + 11) )
    result = -51099;
  else
    result = -50099;
  return result;
}

//----- (021E72EC) --------------------------------------------------------
int __fastcall Function_21e72ec(int a1)
{
  int v1;
  uint v2;
  int v3;
  int result;

  v1 = *(uchar *)(a1 + 34);
  v2 = *(uchar *)(a1 + 22);
  if ( !*(uchar *)(a1 + 34) )
    v1 = *(uchar *)(a1 + 21);
  if ( v2 >= 0xA )
  {
    if ( v2 >= 0xD )
    {
      result = *(uint *)(a1 + 16);
      if ( result )
      {
        switch ( result )
        {
          case -1:
            result = -52100 - v1;
            break;
          case -2:
            result = -52200 - v1;
            break;
          case -3:
            result = -52300 - v1;
            break;
          case -4:
            result = -53000 - v1;
            break;
          case -5:
            result = -53100 - v1;
            break;
          case -6:
            result = -53200 - v1;
            break;
        }
      }
      else
      {
        result = -50000 - v1;
      }
    }
    else
    {
      result = -52000 - v1;
    }
  }
  else
  {
    v3 = *(uchar *)(a1 + 20);
    if ( v3 == 3 )
    {
      result = -51100 - v1;
    }
    else if ( v3 == 4 )
    {
      result = -51200 - v1;
    }
    else
    {
      result = -51300 - v1;
    }
  }
  return result;
}

//----- (021E73FC) --------------------------------------------------------
int __fastcall Function_21e73fc(int a1)
{
  int v1;
  int v2;
  int v3;

  v1 = a1;
  v2 = Function_21e62ec(16);
  v3 = v2;
  if ( v1 )
  {
    if ( v1 == 1 )
    {
      *(uchar *)(v2 + 3344) = Function_21e7730();
      *(uchar *)(v3 + 3343) = Function_21e77c0(v3);
    }
    else if ( v1 == 2 )
    {
      MIi_CpuClear32(0, (uint *)(v2 + 768), 324);
      *(uchar *)(v3 + 3343) = 0;
      *(uchar *)(v3 + 3344) = Function_21e753c(v3);
    }
  }
  else
  {
    MIi_CpuClear32(0, (uint *)(v2 + 768), 324);
    *(uchar *)(v3 + 3344) = Function_21e74dc(v3);
  }
  return *(uchar *)(v3 + 3344);
}

//----- (021E7490) --------------------------------------------------------
int __fastcall Function_21e7490(int a1)
{
  int v1;
  bool v2;
  int v3;
  int result;

  v1 = a1;
  v3 = *(uchar *)(Function_21e62ec(16) + 3340) & 0xF;
  v2 = v3 == 0;
  if ( v3 )
    v2 = v3 == 6;
  if ( !v2 || Function_20d8e28((uchar *)(v1 + 12), "FREESPOTNINTENDOWFC", 8) )
    result = 0;
  else
    result = 8;
  return result;
}

//----- (021E74DC) --------------------------------------------------------
int __fastcall Function_21e74dc(int a1)
{
  int v1;
  int v2;
  int v3;
  uint v4;
  char v5;
  int v6;
  int v7;
  bool v8;

  v1 = a1;
  v2 = a1 + 768;
  v3 = Function_21e7628();
  v5 = *(uchar *)(v1 + 3340);
  v6 = v3;
  v7 = v2 + 36 * v3;
  v8 = (v5 & 0xF) == 0;
  if ( v5 & 0xF )
    v8 = (v5 & 0xF) == 6;
  if ( v8 )
  {
    MI_CpuCopy8((int)"FREESPOTNINTENDOWFC", v7 + 4, 8u, v4);
    *(uchar *)(v7 + 3) = 8;
    *(uchar *)(v7 + 1) = 8;
    v6 = (v6 + 1) & 0xFF;
  }
  return v6;
}

//----- (021E753C) --------------------------------------------------------
int __fastcall Function_21e753c(int a1)
{
  int v1;
  int v2;
  uint v3;
  int v4;
  int v5;
  bool v6;
  bool v7;
  bool v8;

  v1 = a1;
  v2 = a1 + 768;
  v4 = Function_21e7628();
  v5 = v2 + 36 * v4;
  v6 = (*(uchar *)(v1 + 3340) & 0xF) == 0;
  if ( *(uchar *)(v1 + 3340) & 0xF )
    v6 = (*(uchar *)(v1 + 3340) & 0xF) == 4;
  if ( v6 )
  {
    MI_CpuCopy8((int)"NWCUSBAP", v5 + 4, 8u, v3);
    *(uchar *)(v5 + 3) = 8;
    *(uchar *)(v5 + 1) = 6;
    v4 = (v4 + 1) & 0xFF;
    v5 += 36;
  }
  v7 = (*(uchar *)(v1 + 3340) & 0xF) == 0;
  if ( *(uchar *)(v1 + 3340) & 0xF )
    v7 = (*(uchar *)(v1 + 3340) & 0xF) == 7;
  if ( v7 )
  {
    MI_CpuCopy8((int)dword_2215898, v5 + 4, 8u, v3);
    *(uchar *)(v5 + 3) = 8;
    *(uchar *)(v5 + 1) = 9;
    v4 = (v4 + 1) & 0xFF;
    v5 += 36;
  }
  v8 = (*(uchar *)(v1 + 3340) & 0xF) == 0;
  if ( *(uchar *)(v1 + 3340) & 0xF )
    v8 = (*(uchar *)(v1 + 3340) & 0xF) == 8;
  if ( v8 )
  {
    MI_CpuCopy8((int)"NINTENDOWFC", v5 + 4, 0xBu, v3);
    *(uchar *)(v5 + 3) = 11;
    *(uchar *)(v5 + 1) = 10;
    v4 = (v4 + 1) & 0xFF;
  }
  return v4;
}

//----- (021E7628) --------------------------------------------------------
int __fastcall Function_21e7628(int a1)
{
  int v1;
  int v2;
  int v3;
  int v4;
  bool v5;
  uint v6;
  char v7;
  int v8;
  int v9;
  uint v10;
  char v11;
  int v12;
  int v13;

  v1 = 0;
  v2 = a1;
  v3 = 0;
  v4 = a1 + 768;
  do
  {
    v5 = (*(uchar *)(a1 + 3340) & 0xF) == 0;
    if ( *(uchar *)(a1 + 3340) & 0xF )
      v5 = (*(uchar *)(a1 + 3340) & 0xF) == v3 + 1;
    if ( v5 && *(uchar *)(v2 + 231) != 255 )
    {
      v6 = 0;
      do
      {
        v7 = *(uchar *)(v2 + v6 + 64);
        if ( !*(uchar *)(v2 + v6 + 64) )
          break;
        v8 = v4 + v6;
        v6 = (v6 + 1) & 0xFF;
        *(uchar *)(v8 + 4) = v7;
      }
      while ( v6 < 0x20 );
      if ( v6 )
      {
        *(uchar *)(v4 + 3) = v6;
        *(uchar *)(v4 + 1) = v3;
        v9 = 1;
      }
      else
      {
        v9 = 0;
      }
      if ( v9 )
      {
        v1 = (uchar)(v1 + 1);
        v4 += 36;
      }
      if ( *(uchar *)(v2 + 231) == 1 )
      {
        v10 = 0;
        do
        {
          v11 = *(uchar *)(v2 + v10 + 96);
          if ( !*(uchar *)(v2 + v10 + 96) )
            break;
          v12 = v4 + v10;
          v10 = (v10 + 1) & 0xFF;
          *(uchar *)(v12 + 4) = v11;
        }
        while ( v10 < 0x20 );
        if ( v10 )
        {
          *(uchar *)(v4 + 3) = v10;
          *(uchar *)(v4 + 1) = v3 + 3;
          v13 = 1;
        }
        else
        {
          v13 = 0;
        }
        if ( v13 )
        {
          v1 = (uchar)(v1 + 1);
          v4 += 36;
        }
      }
    }
    ++v3;
    v2 += 256;
  }
  while ( v3 < 3 );
  return v1;
}

//----- (021E7730) --------------------------------------------------------
int __fastcall Function_21e7730(int a1)
{
  int v1;
  int v2;
  int v3;
  uchar *v4;

  v1 = 0;
  v2 = 0;
  if ( (int)*(uchar *)(a1 + 3346) > 0 )
  {
    v3 = a1;
    v4 = (uchar *)(a1 + 1095);
    do
    {
      if ( *(uchar *)(a1 + 4 * v2 + 1092) || *(ushort *)(v3 + 1190) - 1 == (*v4 & 0x7F) )
      {
        *v4 |= 0x80u;
      }
      else
      {
        *v4 &= 0x7Fu;
        v1 = (uchar)(v1 + 1);
      }
      ++v2;
      v4 += 4;
      v3 += 192;
    }
    while ( v2 < *(uchar *)(a1 + 3346) );
  }
  return v1;
}

//----- (021E77C0) --------------------------------------------------------
uint __fastcall Function_21e77c0(int a1)
{
  uint v1;
  uint v2;

  v1 = 0;
  v2 = 0;
  if ( *(uchar *)(a1 + 3346) )
  {
    while ( *(uchar *)(a1 + 4 * v2 + 1095) & 0x80 )
    {
      v2 = (v2 + 1) & 0xFF;
      if ( v2 >= *(uchar *)(a1 + 3346) )
        return v1;
    }
    v1 = v2;
  }
  return v1;
}

//----- (021E7804) --------------------------------------------------------
uint Function_21e7804()
{
  uchar *v0;
  uint v1;

  v0 = (uchar *)Function_21e62ec(16);
  v1 = 9;
  switch ( Function_4_2213898() )
  {
    case 3:
      v1 = v0[3342];
      if ( (uint)v0[3340] << 24 >> 30 == 1 )
      {
        v1 = 7;
        v0[4 * v0[3347] + 1092] = 0;
      }
      else if ( v1 >= 3 && v1 <= 5 )
      {
        Function_21e7a40(v0[3342]);
      }
      break;
    case 6:
      Function_22132c4();
      break;
    case 9:
      Function_4_221356c();
      break;
    case 11:
      Function_21e63c0(0);
      v1 = 17;
      break;
    case 12:
      Function_2213688();
      Function_21e63c0(4);
      v1 = 17;
      break;
    default:
      return v1;
  }
  return v1;
}

//----- (021E78E0) --------------------------------------------------------
int Function_21e78e0()
{
  int v0;
  int v1;
  int v2;
  bool v3;
  bool v4;
  int v5;

  v0 = Function_21e62ec(16);
  v1 = Function_21e63a4();
  v2 = Function_4_2213898();
  v3 = v1 == 2;
  if ( v1 == 2 )
    v3 = v2 == 3;
  if ( v3 )
    return Function_21e7b20(v0);
  if ( v1 == 6 )
    return Function_21e7f68(v0, 6);
  v4 = v2 == 3;
  if ( v2 != 3 )
    v4 = v2 == 6;
  if ( v4 )
  {
    v5 = Function_21e7f68(v0, v1);
    v1 = v5;
    if ( v5 != 7 )
    {
      switch ( v5 )
      {
        case 3:
          v1 = Function_21e7b70(v0);
          break;
        case 4:
          v1 = Function_21e7c5c(v0);
          break;
        case 5:
          v1 = Function_21e7d84(v0);
          break;
      }
    }
  }
  return v1;
}

//----- (021E79A4) --------------------------------------------------------
int __fastcall Function_21e79a4(uint a1)
{
  uint v1;
  int result;

  v1 = a1;
  result = Function_21e62ec(16) + 3328;
  if ( v1 > 0xD )
    LOBYTE(v1) = 13;
  *(ushort *)(result + 22) |= 1 << (v1 - 1);
  return result;
}

//----- (021E79D8) --------------------------------------------------------
int __fastcall Function_21e79d8(int a1)
{
  int v1;
  int v2;
  uint v4;
  int v5;

  v1 = a1;
  v2 = Function_21e62ec(16) + 3328;
  if ( !*(ushort *)(v2 + 22) )
    return -1;
  v4 = 0;
  v5 = 0;
  do
  {
    if ( *(ushort *)(v2 + 22) & (1 << v4) )
    {
      if ( v5 == v1 )
        return (char)v4;
      v5 = (v5 + 1) & 0xFF;
    }
    v4 = (v4 + 1) & 0xFF;
  }
  while ( v4 < 0xD );
  return -1;
}

//----- (021E7A40) --------------------------------------------------------
int __fastcall Function_21e7a40(int a1)
{
  int v1;
  int result;
  int v3;
  int v4;
  int v5;
  int v6;

  v1 = a1;
  result = Function_21e62ec(16);
  v3 = result;
  switch ( v1 )
  {
    case 3:
      *(uint *)(result + 3248) = OS_GetTick();
      *(uint *)(v3 + 3252) = v4;
      result = Function_21e808c(dword_2215E48, dword_2215E50, *(char *)(v3 + 3345), 0x200000);
      break;
    case 4:
      *(uint *)(result + 3248) = OS_GetTick();
      *(uint *)(v3 + 3252) = v5;
      result = Function_21e808c(
                 v3 + 1140 + 192 * *(uchar *)(v3 + 3343),
                 v3 + 1148 + 192 * *(uchar *)(v3 + 3343),
                 *(ushort *)(v3 + 192 * *(uchar *)(v3 + 3343) + 1190) - 1,
                 3145728);
      break;
    case 5:
      *(uint *)(result + 3248) = OS_GetTick();
      *(uint *)(v3 + 3252) = v6;
      result = Function_21e808c(
                 dword_2215E48,
                 v3 + 772 + 36 * *(uchar *)(v3 + 3343),
                 *(char *)(v3 + 3345),
                 3145728);
      break;
  }
  return result;
}

//----- (021E7B20) --------------------------------------------------------
int __fastcall Function_21e7b20(int a1)
{
  int v1;
  int v2;
  int v3;

  v1 = a1;
  *(uint *)(a1 + 3248) = OS_GetTick();
  *(uint *)(v1 + 3252) = v2;
  *(uchar *)(v1 + 3345) = 0;
  *(uint *)(v1 + 3248) = OS_GetTick();
  *(uint *)(v1 + 3252) = v3;
  Function_21e808c(dword_2215E48, dword_2215E50, *(char *)(v1 + 3345), 0x200000);
  return 3;
}

//----- (021E7B70) --------------------------------------------------------
int __fastcall Function_21e7b70(int a1)
{
  int v1;
  long long v2;
  uint v3;
  bool v4;
  int v5;
  int v7;

  v1 = a1;
  LODWORD(v2) = OS_GetTick();
  HIDWORD(v2) = (v2 - *(ull *)(v1 + 3248)) >> 26;
  ll_udiv();
  v4 = 1;
  if ( !v5 )
    v4 = v3 >= 0x12C;
  if ( v4 )
  {
    *(uchar *)(v1 + 3345) += 2;
    if ( *(char *)(v1 + 3345) >= 13 )
      return Function_21e7ea4(v1, 3);
    *(uint *)(v1 + 3248) = OS_GetTick();
    *(uint *)(v1 + 3252) = v7;
    Function_21e808c(dword_2215E48, dword_2215E50, *(char *)(v1 + 3345), 0x200000);
  }
  return 3;
}

//----- (021E7C14) --------------------------------------------------------
int __fastcall Function_21e7c14(int a1)
{
  int v1;

  v1 = a1;
  *(uchar *)(a1 + 3349) = 0;
  *(uchar *)(v1 + 3339) = *(uchar *)(v1 + 3339) & 0xF | 16
                                                      * (((uint)*(uchar *)(v1 + 3339) << 24 >> 28) + 1);
  Function_21e73fc(0);
  *(uchar *)(v1 + 3345) = 1;
  return 3;
}

//----- (021E7C5C) --------------------------------------------------------
int __fastcall Function_21e7c5c(int a1)
{
  int v1;
  long long v2;
  uint v3;
  bool v4;
  int v5;
  uint v6;
  uint v7;
  uchar v8;
  int v10;

  v1 = a1;
  LODWORD(v2) = OS_GetTick();
  HIDWORD(v2) = (v2 - *(ull *)(v1 + 3248)) >> 26;
  ll_udiv();
  v4 = 1;
  if ( !v5 )
    v4 = v3 >= 0x96;
  if ( v4 || (uint)*(uchar *)(v1 + 4 * *(uchar *)(v1 + 3343) + 1095) << 24 >> 31 == 1 )
  {
    *(uchar *)(v1 + 1095 + 4 * *(uchar *)(v1 + 3343)) |= 0x80u;
    v6 = *(uchar *)(v1 + 3346);
    v7 = *(uchar *)(v1 + 3343);
    if ( v7 < v6 )
    {
      do
      {
        if ( !(*(uchar *)(v1 + 4 * v7 + 1095) & 0x80) )
          break;
        v8 = *(uchar *)(v1 + 3343) + 1;
        *(uchar *)(v1 + 3343) = v8;
        v6 = *(uchar *)(v1 + 3346);
        v7 = v8;
      }
      while ( v8 < v6 );
    }
    if ( v6 <= v7 )
    {
      *(uchar *)(v1 + 3343) = 0;
      return Function_21e7ea4(v1, 4);
    }
    *(uint *)(v1 + 3248) = OS_GetTick();
    *(uint *)(v1 + 3252) = v10;
    Function_21e808c(
      v1 + 1140 + 192 * *(uchar *)(v1 + 3343),
      v1 + 1148 + 192 * *(uchar *)(v1 + 3343),
      *(ushort *)(v1 + 192 * *(uchar *)(v1 + 3343) + 1190) - 1,
      3145728);
  }
  return 4;
}

//----- (021E7D84) --------------------------------------------------------
int __fastcall Function_21e7d84(int a1)
{
  int v1;
  long long v2;
  uint v3;
  bool v4;
  int v5;
  uchar v6;
  int v8;

  v1 = a1;
  LODWORD(v2) = OS_GetTick();
  HIDWORD(v2) = (v2 - *(ull *)(v1 + 3248)) >> 26;
  ll_udiv();
  v4 = 1;
  if ( !v5 )
    v4 = v3 >= 0x96;
  if ( v4 || (*(uchar *)(v1 + 36 * *(uchar *)(v1 + 3343) + 768) & 0xF) == 1 )
  {
    *(uchar *)(v1 + 768 + 36 * *(uchar *)(v1 + 3343)) &= 0xF0u;
    v6 = *(uchar *)(v1 + 3343) + 1;
    *(uchar *)(v1 + 3343) = v6;
    if ( *(uchar *)(v1 + 3344) <= (uint)v6 )
    {
      ++*(uchar *)(v1 + 3349);
      *(uchar *)(v1 + 3343) = 0;
      *(uchar *)(v1 + 3345) = Function_21e79d8(*(uchar *)(v1 + 3349));
    }
    if ( *(char *)(v1 + 3345) < 0 )
    {
      *(uchar *)(v1 + 3349) = 0;
      return Function_21e7ea4(v1, 5);
    }
    *(uint *)(v1 + 3248) = OS_GetTick();
    *(uint *)(v1 + 3252) = v8;
    Function_21e808c(dword_2215E48, v1 + 772 + 36 * *(uchar *)(v1 + 3343), *(char *)(v1 + 3345), 3145728);
  }
  return 5;
}

//----- (021E7EA4) --------------------------------------------------------
int __fastcall Function_21e7ea4(int a1, int a2)
{
  int v2;
  int v3;
  bool v4;

  v2 = a2;
  v3 = a1;
  switch ( a2 )
  {
    case 3:
      v4 = *(uchar *)(a1 + 3346) == 0;
      if ( !*(uchar *)(a1 + 3346) )
        v4 = *(ushort *)(a1 + 3350) == 0;
      if ( v4 )
      {
        if ( (uint)*(uchar *)(a1 + 3339) << 24 >> 28 < 1 )
          v2 = Function_21e7c14(a1);
        else
          v2 = 6;
      }
      else if ( Function_21e73fc(1) )
      {
        v2 = 4;
      }
      else
      {
        v2 = Function_21e802c(v3);
      }
      break;
    case 4:
      v2 = Function_21e802c(a1);
      break;
    case 5:
      if ( (uint)*(uchar *)(a1 + 3339) << 24 >> 28 < 1 )
        v2 = Function_21e7c14(a1);
      else
        v2 = 6;
      break;
  }
  Function_21e7a40(v2);
  return v2;
}

//----- (021E7F68) --------------------------------------------------------
int __fastcall Function_21e7f68(int a1, int a2)
{
  int v2;
  int v3;
  uint v5;
  uint v6;

  v2 = a2;
  v3 = a1;
  if ( a2 == 17 )
    return a2;
  v5 = *(uchar *)(a1 + 3346);
  v6 = 0;
  if ( *(uchar *)(a1 + 3346) )
  {
    do
    {
      if ( !*(uchar *)(a1 + 4 * v6 + 1092) )
        break;
      v6 = (v6 + 1) & 0xFF;
    }
    while ( v6 < v5 );
  }
  if ( v2 == 6 )
  {
    if ( v5 == v6 )
    {
      if ( v6 )
        Function_21e63c0(6);
      else
        Function_21e63c0(5);
      return 17;
    }
  }
  else
  {
    if ( !*(uchar *)(a1 + 3346) )
      return v2;
    if ( v5 == v6 )
      return v2;
    if ( *(uchar *)(a1 + 4 * v6 + 1094) < 0x14u )
      return v2;
  }
  *(uchar *)(a1 + 3347) = v6;
  if ( Function_22132c4() != 1 )
  {
    *(uchar *)(v3 + 3342) = v2;
    v2 = 7;
  }
  return v2;
}

//----- (021E802C) --------------------------------------------------------
int __fastcall Function_21e802c(int a1)
{
  int v1;
  int result;

  v1 = a1;
  if ( *(ushort *)(a1 + 3350) && Function_21e73fc(2) )
  {
    *(uchar *)(v1 + 3345) = Function_21e79d8(0);
    result = 5;
  }
  else if ( (uint)*(uchar *)(v1 + 3339) << 24 >> 28 < 1 )
  {
    result = Function_21e7c14(v1);
  }
  else
  {
    result = 6;
  }
  return result;
}

//----- (021E808C) --------------------------------------------------------
int __fastcall Function_21e808c(int a1, int a2, int a3, int a4)
{
  if ( a3 > 12 )
    a3 = 12;
  return Function_4_221312c(a1, a2, a4 | dword_22158B4[a3]);
}

//----- (021E80B0) --------------------------------------------------------
int Function_21e80b0()
{
  int v0;
  int v1;
  int v2;
  int v4;
  int v5;
  int v6;
  int v7;

  v0 = Function_4_2213898();
  v1 = Function_21e62ec(16);
  if ( v0 != 1 )
    return 1;
  v4 = *(uchar *)(v1 + 3338);
  v5 = 0;
  v6 = 0;
  v7 = 0;
  Function_21e73fc(0);
  v2 = Function_4_2212e38(&v4, Function_21e6b04);
  if ( v2 != 1 && v2 < 4 )
    return 2;
  Function_21e63c0(1);
  return 17;
}

//----- (021E8138) --------------------------------------------------------
int Function_21e8138()
{
  int v0;
  int v1;

  v0 = Function_21e63a4();
  v1 = Function_21e62ec(16);
  if ( Function_4_2213898() != 9 )
  {
    switch ( v0 )
    {
      case 11:
        return Function_21e83d4();
      case 14:
        Function_21d59f0();
        Function_21d58f8();
        break;
      case 15:
        return Function_21e83c0(v1);
    }
    v0 = 11;
    *(uchar *)(v1 + 4 * *(uchar *)(v1 + 3347) + 1092) = 2;
    return v0;
  }
  switch ( v0 )
  {
    case 10:
      v0 = Function_21e8234(v1);
      break;
    case 11:
      v0 = Function_21e83d4();
      break;
    case 12:
      v0 = Function_21e8298(v1);
      break;
    case 13:
      v0 = Function_21e8328();
      break;
    case 14:
      v0 = Function_21e8354(v1);
      break;
    case 15:
      v0 = Function_21e83c0(v1);
      break;
    default:
      return v0;
  }
  return v0;
}

//----- (021E8234) --------------------------------------------------------
int __fastcall Function_21e8234(int a1)
{
  int v1;
  int v2;
  int v3;

  v1 = a1;
  v2 = Function_21e62ec(1);
  v3 = Function_21e62ec(4);
  Function_21e8404(v2, v1, v3);
  dword_221A400[3580] = 4;
  if ( !Function_4_2208874(v3) )
    return 12;
  Function_21e63c0(2);
  return 17;
}

//----- (021E8298) --------------------------------------------------------
int __fastcall Function_21e8298(int a1)
{
  int v1;
  int result;
  long long v3;
  uint v4;
  bool v5;
  int v6;

  v1 = a1;
  if ( Function_22086a0() )
  {
    Function_21e856c(v1);
    if ( (uint)*(uchar *)(v1 + 3340) << 26 >> 30 == 1 )
      result = 15;
    else
      result = 13;
  }
  else
  {
    LODWORD(v3) = OS_GetTick();
    HIDWORD(v3) = (v3 - *(ull *)(v1 + 3248)) >> 26;
    ll_udiv();
    v5 = 1;
    if ( !v6 )
      v5 = v4 >= 0xA;
    if ( v5 )
    {
      result = 11;
      *(uchar *)(v1 + 4 * *(uchar *)(v1 + 3347) + 1092) = 1;
    }
    else
    {
      result = 12;
    }
  }
  return result;
}

//----- (021E8328) --------------------------------------------------------
int Function_21e8328()
{
  uint *v0;

  v0 = (uint *)Function_21e62ec(8);
  if ( !Function_21d5818(v0) )
    return 14;
  Function_21e63c0(3);
  return 17;
}

//----- (021E8354) --------------------------------------------------------
int __fastcall Function_21e8354(int a1)
{
  int v1;
  int v2;
  int v3;
  int result;

  v1 = a1;
  v2 = Function_21e62ec(1);
  v3 = Function_21d5a58();
  if ( !v3 )
    return 14;
  if ( *(uchar *)(v2 + 21) == Function_21e64a0(*(uchar *)(v1 + 3341)) )
    *(uint *)(v2 + 16) = Function_21d5a98();
  Function_21d58f8();
  if ( v3 == 11 )
    return 15;
  result = 11;
  *(uchar *)(v1 + 4 * *(uchar *)(v1 + 3347) + 1092) = 1;
  return result;
}

//----- (021E83C0) --------------------------------------------------------
int __fastcall Function_21e83c0(int a1)
{
  Function_21e63f8(*(uchar *)(a1 + 3341));
  return 16;
}

//----- (021E83D4) --------------------------------------------------------
int Function_21e83d4()
{
  int result;
  int v1;
  bool v2;

  if ( Function_2207edc() )
    return 11;
  v1 = Function_4_22089e8();
  v2 = v1 == 0;
  if ( v1 )
    v2 = v1 == -39;
  if ( v2 )
    result = 9;
  else
    result = 11;
  return result;
}

//----- (021E8404) --------------------------------------------------------
uint __fastcall Function_21e8404(uint *a1, int a2, uint a3, uint a4)
{
  uint *v4;
  uint *v5;
  int v6;
  uint result;
  uint v8;

  v4 = a1;
  v5 = (uint *)a3;
  v6 = a2;
  MI_CpuCopy8((int)dword_22158E8, a3, 0x58u, a4);
  v5[1] = *v4;
  v5[2] = v4[1];
  result = *(uchar *)(v6 + 3341);
  if ( result < 6 )
  {
    v8 = v6 + (Function_21e64a0(result) << 8);
    if ( *(uchar *)(v8 + 192) )
    {
      v5[3] = 0;
      v5[4] = Function_21e84c4(v8 + 192);
      v5[5] = Function_21e8518(*(uchar *)(v8 + 208));
      v5[6] = Function_21e84c4(v8 + 196);
      v5[7] = Function_21e84c4(v8 + 200);
      result = Function_21e84c4(v8 + 204);
      v5[8] = result;
    }
    else
    {
      v5[3] = 1;
      result = 0;
      v5[4] = 0;
      v5[5] = 0;
      v5[6] = 0;
      v5[7] = 0;
      v5[8] = 0;
    }
  }
  return result;
}

//----- (021E84C4) --------------------------------------------------------
uint __fastcall Function_21e84c4(uint *a1)
{
  uint v1;

  v1 = _byteswap_ulong(*a1);
  return (v1 << 24) & 0xFF000000 | (v1 << 8) & 0xFF0000 | HIBYTE(v1) | (v1 >> 8) & 0xFF00;
}

//----- (021E8518) --------------------------------------------------------
uint __fastcall Function_21e8518(int a1)
{
  int v1;
  bool v2;
  bool v3;
  uint v4;
  int v5;

  v1 = 32 - a1;
  v2 = a1 == 32;
  v3 = 32 - a1 < 0;
  v4 = -1;
  v5 = 0;
  if ( !v3 && !v2 )
  {
    do
    {
      ++v5;
      v4 *= 2;
    }
    while ( v5 < v1 );
  }
  return (v4 << 24) & 0xFF000000 | (v4 << 8) & 0xFF0000 | HIBYTE(v4) | (v4 >> 8) & 0xFF00;
}

//----- (021E856C) --------------------------------------------------------
uint __fastcall Function_21e856c(int a1)
{
  int v1;
  uint result;
  uint v3;
  uint v4;
  uint v5;

  v1 = a1;
  result = *(uchar *)(a1 + 3341);
  if ( result < 6 )
  {
    v3 = v1 + (Function_21e64a0(result) << 8);
    result = *(uchar *)(v3 + 203)
           + *(uchar *)(v3 + 202)
           + *(uchar *)(v3 + 200)
           + *(uchar *)(v3 + 201);
    if ( !*(uchar *)(v3 + 192) )
    {
      if ( result )
      {
        v5 = Function_21e84c4((uint *)(v3 + 200));
        v4 = Function_21e84c4((uint *)(v3 + 204));
        result = Function_22086d8(&v5, &v4);
      }
    }
  }
  return result;
}

//----- (021E85F4) --------------------------------------------------------
BOOL __fastcall Function_21e85f4(int a1, int a2, int a3, int a4)
{
  char v5;
  int v6;

  v6 = a4;
  Function_21e86d4(a1, &v5);
  return Function_20d5190((uchar *)&v5, "NDWCSHAP", 8) == 0;
}

//----- (021E862C) --------------------------------------------------------
int __fastcall Function_21e862c(int a1, int a2)
{
  int v2;
  char v4;

  v2 = a2;
  Function_21e86d4(a1, &v4);
  return Function_21e87d8(&v4, v2);
}

//----- (021E8654) --------------------------------------------------------
int __fastcall Function_21e8654(int a1, uint a2)
{
  uint v2;
  int result;
  uint v4;
  char v5;
  char v6;

  v2 = a2;
  Function_21e86d4(a1, &v5);
  result = Function_20d5190((uchar *)&v5, "NDWCSHAP", 8);
  if ( !result )
    result = MI_CpuCopy8((int)&v6, v2, 0xAu, v4);
  return result;
}

//----- (021E86A0) --------------------------------------------------------
BOOL __fastcall Function_21e86a0(uchar *a1)
{
  return Function_20d5190(a1, "NWCUSBAP", 8) == 0;
}

//----- (021E86C4) --------------------------------------------------------
int __fastcall Function_21e86c4(int a1)
{
  return Function_21e8824(a1 + 12);
}

//----- (021E86D4) --------------------------------------------------------
int *__fastcall Function_21e86d4(int a1, int a2, int a3, int a4)
{
  char *v4;
  char *v5;
  int v6;
  int v7;
  char v8;
  char v9;
  int v10;
  int v11;
  int v12;
  int v13;
  char v14;
  char *v15;
  int v16;
  char v17;
  int *result;
  int v19;
  char v20[24];
  int v21;

  v21 = a4;
  v4 = &byte_2215943;
  v5 = v20;
  v6 = a2;
  v7 = 12;
  do
  {
    v8 = *v4;
    v9 = v4[1];
    v4 += 2;
    *v5 = v8;
    v5[1] = v9;
    v5 += 2;
    --v7;
  }
  while ( v7 );
  Function_21e8a40(a1, v6, 32, 24);
  v10 = 0;
  do
  {
    *(uchar *)(v6 + v10) ^= *(uchar *)(v10 + 35747412);
    ++v10;
  }
  while ( v10 < 24 );
  v11 = 0;
  do
  {
    v12 = (uchar)v11;
    v13 = (uchar)v11;
    v14 = *(uchar *)(v6 + v11);
    if ( (uchar)v20[(uchar)v11] != 255 )
    {
      do
      {
        v15 = &v20[v13];
        v13 = (uchar)v20[v13];
        v16 = (uchar)v20[v12];
        v17 = *(uchar *)(v6 + v13);
        v12 = v13;
        *(uchar *)(v6 + v16) = v14;
        *v15 = -1;
        v14 = v17;
      }
      while ( (uchar)v20[v13] != 255 );
    }
    ++v11;
  }
  while ( v11 < 24 );
  result = &dword_2217624;
  v19 = 0;
  do
  {
    *(uchar *)(v6 + v19) ^= *(uchar *)(v19 + 35747440);
    ++v19;
  }
  while ( v19 < 24 );
  return result;
}

//----- (021E87D8) --------------------------------------------------------
int __fastcall Function_21e87d8(int a1, uint a2)
{
  int v2;
  uint v3;
  uint v4;
  char v6;
  char v7;
  char v8;

  v2 = a1;
  v3 = a2;
  DGT_Hash1Reset(&v8);
  DGT_Hash1SetSource((int *)&v8, v2, 0x18u);
  DGT_Hash1GetDigest_R((uint)&v6, (int)&v8);
  return MI_CpuCopy8((int)&v7, v3, 0xDu, v4);
}

//----- (021E8824) --------------------------------------------------------
int __fastcall Function_21e8824(int a1, int a2)
{
  int v2;
  int v3;
  int v4;
  int v5;
  char v6;
  char v7;
  int v8;
  char *v9;
  char *v10;
  int v11;
  char v12;
  char v13;
  int v14;
  int v15;
  int v16;
  int v17;
  uchar *v18;
  char v19;
  int v20;
  int result;
  char v22;

  v2 = a2;
  v3 = 0;
  do
  {
    *(uchar *)(v2 + v3) = *(uchar *)(a1 + v3) ^ *(uchar *)(a1 + v3 % 7 + 13);
    ++v3;
  }
  while ( v3 < 13 );
  v4 = 0;
  do
  {
    v5 = v2 + v4;
    v6 = *(uchar *)(v2 + v4 + 3);
    v7 = *(uchar *)(a1 + v4++ + 13);
    *(uchar *)(v5 + 3) = v6 ^ v7;
  }
  while ( v4 < 7 );
  v8 = 0;
  do
  {
    *(uchar *)(v2 + v8) ^= *(uchar *)(v8 + 35747380);
    ++v8;
  }
  while ( v8 < 13 );
  MI_CpuCopy8(v2, (uint)&v22, 0xDu, v8);
  v9 = &byte_221595C;
  v10 = &v22;
  v11 = 0;
  do
  {
    v13 = *v10++;
    v12 = v13;
    v14 = (uchar)*v9++;
    ++v11;
    *(uchar *)(v2 + v14) = v12;
  }
  while ( v11 < 13 );
  v15 = 0;
  do
  {
    *(uchar *)(v2 + v15) ^= *(uchar *)(v15 + 35747396);
    ++v15;
  }
  while ( v15 < 13 );
  v16 = 0;
  do
  {
    *(uchar *)(v2 + v16) = *((uchar *)dword_221596C + (*(uchar *)(v2 + v16) & 0xF)) | 16
                                                                                    * *((uchar *)dword_221596C
                                                                                      + (((int)*(uchar *)(v2 + v16) >> 4) & 0xF));
    ++v16;
  }
  while ( v16 < 13 );
  v17 = 0;
  do
  {
    v18 = (uchar *)(v2 + v17);
    *(uchar *)(v2 + v17) ^= *(uchar *)(v2 + v17 + 6);
    v19 = *(uchar *)(v2 + v17 + 3) ^ *(uchar *)(v2 + v17 + 9);
    v18[3] = v19;
    v18[6] = *(uchar *)(v2 + v17 + 6) ^ v19;
    v18[9] = *(uchar *)(v2 + v17 + 9) ^ *(uchar *)(v2 + v17);
    v20 = *(uchar *)(v2 + v17++);
    result = *(uchar *)(v2 + 12) ^ v20;
    *(uchar *)(v2 + 12) = result;
  }
  while ( v17 < 3 );
  return result;
}

//----- (021E89D0) --------------------------------------------------------
int __fastcall Function_21e89d0(uint a1)
{
  if ( a1 >= 0x41 && a1 <= 0x5A )
    return a1 - 65;
  if ( a1 >= 0x61 && a1 <= 0x7A )
    return a1 - 71;
  if ( a1 >= 0x30 && a1 <= 0x39 )
    return a1 + 4;
  if ( a1 == 43 )
    return 62;
  if ( a1 == 47 )
    return 63;
  return -(a1 != 61);
}

//----- (021E8A40) --------------------------------------------------------
int __fastcall Function_21e8a40(int a1, int a2, int a3, uint a4)
{
  int v4;
  int v6;
  int v7;
  int v8;
  int v9;
  uchar *v10;
  uint v11;
  int v12;
  uchar *v13;
  char v14;
  int v15;
  int v16;
  int v17;
  uchar *v18;
  uint v19;
  int v20;
  uchar *v21;
  char v22;
  int v23;
  int v24;
  uint v25;
  int v26;
  int v27;
  int v28;
  uint v29;

  v29 = a4;
  v23 = a1;
  v24 = a2;
  v25 = (uint)(3 * a3) >> 2;
  if ( a4 < v25 )
    return -1;
  v4 = a3 & 3;
  v26 = a3 - v4;
  v6 = 0;
  if ( a3 - (a3 & 3) > 0 )
  {
    v7 = 0;
    do
    {
      v8 = 0;
      v9 = 0;
      v10 = (uchar *)(v23 + v6);
      do
      {
        v11 = *v10++;
        v8 |= Function_21e89d0(v11) << 6 * (3 - v9++);
      }
      while ( v9 < 4 );
      v12 = 0;
      v28 = v8;
      v13 = (uchar *)(v24 + 3 * v7);
      do
      {
        v14 = *((uchar *)&v28 + 2 - v12++);
        *v13++ = v14;
      }
      while ( v12 < 3 );
      v6 += 4;
      ++v7;
    }
    while ( v6 < v26 );
  }
  if ( v4 )
  {
    v15 = 0;
    v16 = 0;
    v27 = 0;
    if ( v4 > 0 )
    {
      v17 = 0;
      v18 = (uchar *)(v23 + v26);
      do
      {
        v19 = *v18++;
        v15 |= Function_21e89d0(v19) << 6 * (3 - v16++);
        v17 |= v15;
      }
      while ( v16 < v4 );
      v27 = v17;
    }
    v20 = 0;
    if ( v4 > 0 )
    {
      v21 = (uchar *)(v24 + 3 * v26 / 4);
      do
      {
        v22 = *((uchar *)&v27 + 2 - v20++);
        *v21++ = v22;
      }
      while ( v20 < v4 );
    }
  }
  return v25;
}

//----- (021E8BA8) --------------------------------------------------------
int __fastcall Function_21e8ba8(int a1)
{
  bool v1;
  int result;

  v1 = (a1 & 2) == 0;
  result = a1 >> 2;
  if ( v1 )
    LOBYTE(result) = result + 25;
  return (uchar)result;
}

//----- (021E8BBC) --------------------------------------------------------
int __fastcall Function_21e8bbc(ushort *a1, int a2, int a3, int a4)
{
  ushort *v4;
  bool v5;
  uint v6;
  int v7;
  int v8;
  bool v9;
  int v10;
  int v11;
  uint v12;
  uint v13;
  int v14;
  int v15;
  int v16;
  int v17;
  int v18;
  bool v19;
  int result;
  int (__fastcall *v21)(ushort *);
  char v22;
  char v23;
  int v24[258];
  int v25;

  v25 = a4;
  v4 = a1;
  DC_InvalidateRange(dword_221A400[656] + 3840, 1024);
  v5 = v4[1] == 0;
  if ( !v4[1] )
    v5 = v4[4] == 5;
  if ( v5 )
  {
    v6 = 0;
    if ( v4[7] )
    {
      do
      {
        v7 = *(uint *)&v4[2 * v6 + 8];
        v8 = *(ushort *)(v7 + 64);
        v9 = v8 == 1;
        if ( v8 == 1 )
          v9 = *(uint *)(v7 + 68) == 2135;
        if ( v9 )
        {
          v10 = 0;
          v11 = 0;
          if ( *(uint *)(dword_221A400[656] + 6792) )
          {
            while ( *(ushort *)(dword_221A400[656] + 2 * v11 + 6760) != *(ushort *)(v7 + 72) )
            {
              if ( (uint)++v11 >= *(uint *)(dword_221A400[656] + 6792) )
                goto LABEL_14;
            }
            v10 = 1;
          }
LABEL_14:
          if ( v10 != 1 )
          {
            MI_CpuCopy8(
              v7 + 80,
              dword_221A400[656] + 4936 + 112 * *(uint *)(dword_221A400[656] + 6796),
              0x70u,
              *(uint *)(dword_221A400[656] + 6796));
            MI_CpuCopy8((int)&dword_221597C, (uint)&v22, 4u, v12);
            MI_CpuCopy8(*(uint *)&v4[2 * v6 + 8] + 6, (uint)&v23, 4u, v13);
            Function_20a490c(v24, (int)&v22, 8u);
            Function_20a4a34(
              v24,
              (char *)(dword_221A400[656] + 4936 + 112 * *(uint *)(dword_221A400[656] + 6796)),
              112,
              (uchar *)(dword_221A400[656] + 4936 + 112 * *(uint *)(dword_221A400[656] + 6796)));
            v14 = 112 * *(uint *)(dword_221A400[656] + 6796);
            Function_20d31f0(
              dword_221A400[656] + 6806,
              (ushort *)(dword_221A400[656] + 6804),
              (uchar *)(dword_221A400[656] + 4936 + v14),
              0x6Eu);
            v16 = Function_20d32d4(
                    dword_221A400[656] + 6806,
                    (uchar *)(dword_221A400[656] + 4936 + v14),
                    0x6Eu,
                    v15);
            v17 = 112 * *(uint *)(dword_221A400[656] + 6796);
            v18 = *(ushort *)(dword_221A400[656] + v17 + 5046);
            v19 = v16 == v18;
            if ( v16 != v18 )
              v19 = v18 == 0;
            if ( v19 )
            {
              *(ushort *)(dword_221A400[656] + 2 * *(uint *)(dword_221A400[656] + 6796) + 6728) = Function_21e8ba8(*(ushort *)(*(uint *)&v4[2 * v6 + 8] + 2) & 0xFF);
              *(ushort *)(dword_221A400[656] + 2 * *(uint *)(dword_221A400[656] + 6796) + 6760) = *(ushort *)(*(uint *)&v4[2 * v6 + 8] + 72);
              *(uint *)(dword_221A400[656] + 6796) = ((uint)(*(uint *)(dword_221A400[656] + 6796) + 1) >> 31)
                                                     + __ROR4__(
                                                         ((*(uint *)(dword_221A400[656] + 6796) + 1) << 28)
                                                       - ((uint)(*(uint *)(dword_221A400[656] + 6796) + 1) >> 31),
                                                         28);
              if ( ++*(uint *)(dword_221A400[656] + 6792) > 16 )
                *(uint *)(dword_221A400[656] + 6792) = 16;
            }
            else
            {
              MI_CpuFill8((ushort *)(dword_221A400[656] + 4936 + v17), 0, 0x70u);
            }
          }
        }
        ++v6;
      }
      while ( v6 < v4[7] );
    }
  }
  *(uint *)(dword_221A400[656] + 6800) = 2;
  result = dword_221A400[656] + 4096;
  v21 = *(int (__fastcall **)(ushort *))(dword_221A400[656] + 4932);
  if ( v21 )
    result = v21(v4);
  return result;
}

//----- (021E8E98) --------------------------------------------------------
int Function_21e8e98()
{
  return 7328;
}

//----- (021E8EA4) --------------------------------------------------------
int __fastcall Function_21e8ea4(int a1, int a2, uint a3)
{
  int v3;
  uint v4;
  int result;
  int v6;

  v3 = a2;
  v4 = a3;
  if ( !a2 )
    return -1;
  dword_221A400[656] = a1;
  v6 = Function_21e8e98();
  MI_CpuFill8((ushort *)dword_221A400[656], 0, v6);
  *(uint *)(dword_221A400[656] + 6800) = 0;
  *(ushort *)(dword_221A400[656] + 6804) = 0;
  Function_20d316c(dword_221A400[656] + 6806, 40961);
  result = Function_20cecc8(dword_221A400[656], v3, v4);
  if ( result == 2 )
    result = 0;
  return result;
}

//----- (021E8F34) --------------------------------------------------------
int __fastcall Function_21e8f34(int a1)
{
  int result;

  if ( !a1 )
    return -1;
  *(uint *)(dword_221A400[656] + 6800) = 3;
  dword_221A400[656] = 0;
  result = WM_End(a1, LOBYTE(dword_221A400[656]) + 4096, (int)&dword_221A400[656], 0);
  if ( result == 2 )
    result = 0;
  return result;
}

//----- (021E8F74) --------------------------------------------------------
int __fastcall Function_21e8f74(int a1)
{
  int v1;
  int result;
  int v3;
  int v4;
  uint v5;

  v1 = a1;
  if ( !a1 )
    return -1;
  *(uint *)(dword_221A400[656] + 4864) = dword_221A400[656] + 3840;
  *(ushort *)(dword_221A400[656] + 4868) = 1024;
  v3 = WM_GetAllowedChannel();
  *(ushort *)(dword_221A400[656] + 4870) = v3;
  *(ushort *)(dword_221A400[656] + 4872) = WM_GetDispersionScanPeriod(v3, dword_221A400[656] + 4864, v4, v5);
  *(ushort *)(dword_221A400[656] + 4880) = 1;
  MI_CpuFill8((ushort *)(dword_221A400[656] + 4874), 255, 6u);
  *(uint *)(dword_221A400[656] + 4932) = v1;
  *(uint *)(dword_221A400[656] + 6800) = 1;
  result = WM_StartScanEx((int)Function_21e8bbc, dword_221A400[656] + 4864);
  if ( result == 2 )
    result = 0;
  return result;
}

//----- (021E903C) --------------------------------------------------------
int __fastcall Function_21e903c(int a1, int a2, int a3, int a4)
{
  int result;

  if ( !a1 )
    return -1;
  *(uint *)(dword_221A400[656] + 6800) = 2;
  result = WM_EndScan(a1, dword_221A400[656] + 4096, 2, a4);
  if ( result == 2 )
    result = 0;
  return result;
}

//----- (021E9074) --------------------------------------------------------
int __fastcall Function_21e9074(int a1, ushort *a2)
{
  int v2;
  ushort *v3;

  v2 = a1;
  v3 = a2;
  if ( *(uint *)(dword_221A400[656] + 6800) != 2 )
    return -1;
  if ( a1 < 0 || a1 >= *(uint *)(dword_221A400[656] + 6792) )
    return -1;
  MI_CpuFill8(a2, 0, 0x78u);
  *(uint *)v3 = 1;
  v3[2] = *(ushort *)(dword_221A400[656] + 2 * v2 + 6728);
  MI_CpuCopy8(dword_221A400[656] + 4936 + 112 * v2, (uint)(v3 + 3), 0x70u, (uint)&dword_221A400[656]);
  return 0;
}

//----- (021E9110) --------------------------------------------------------
int __fastcall Function_21e9110(ushort *a1)
{
  ushort *v1;
  int v3;
  uint *v4;
  int v5;

  v1 = a1;
  if ( *(uint *)(dword_221A400[656] + 6800) != 2 )
    return -1;
  MI_CpuFill8(a1, 0, 0x780u);
  v3 = 0;
  v4 = v1;
  v5 = 0;
  do
  {
    ++v3;
    *v4 = 0;
    v4 += 30;
  }
  while ( v3 < 16 );
  if ( *(uint *)(dword_221A400[656] + 6792) > 0 )
  {
    do
    {
      if ( Function_21e9074(v5, v1) == -1 )
        break;
      ++v5;
      v1 += 60;
    }
    while ( v5 < *(uint *)(dword_221A400[656] + 6792) );
  }
  return 0;
}

//----- (021E91B4) --------------------------------------------------------
int __fastcall Function_21e91b4(int a1)
{
  int v1;
  int v2;
  int result;

  v1 = a1;
  v2 = Function_21e8e98();
  dword_221A400[658] = Function_4_21d7780(1, v2);
  dword_221A400[657] = Function_4_21d7780(1, 1936);
  MI_CpuFill8((ushort *)dword_221A400[657], 0, 0x790u);
  result = 1;
  *(uint *)dword_221A400[657] = v1;
  dword_221A400[659] = 0;
  return result;
}

//----- (021E9214) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x21E9278 for case 0"

//----- (021E9248) --------------------------------------------------------
void Function_21e9248()
{
  JUMPOUT(&loc_21E9278);
}

//----- (021E924C) --------------------------------------------------------
void Function_21e924c()
{
  JUMPOUT(&loc_21E9520);
}

//----- (021E9250) --------------------------------------------------------
void Function_21e9250()
{
  JUMPOUT(&loc_21E92A0);
}

//----- (021E9254) --------------------------------------------------------
void Function_21e9254()
{
  JUMPOUT(&loc_21E9520);
}

//----- (021E9258) --------------------------------------------------------
void Function_21e9258()
{
  JUMPOUT(&loc_21E92F8);
}

//----- (021E925C) --------------------------------------------------------
void Function_21e925c()
{
  JUMPOUT(&loc_21E935C);
}

//----- (021E9260) --------------------------------------------------------
void Function_21e9260()
{
  JUMPOUT(&loc_21E9520);
}

//----- (021E9264) --------------------------------------------------------
void Function_21e9264()
{
  JUMPOUT(&loc_21E9384);
}

//----- (021E9268) --------------------------------------------------------
void Function_21e9268()
{
  JUMPOUT(&loc_21E9520);
}

//----- (021E926C) --------------------------------------------------------
void Function_21e926c()
{
  JUMPOUT(&loc_21E9458);
}

//----- (021E9270) --------------------------------------------------------
void Function_21e9270()
{
  JUMPOUT(&loc_21E94F4);
}

//----- (021E9274) --------------------------------------------------------
void Function_21e9274()
{
  int v0;

  JUMPOUT(__CS__, v0);
}

//----- (021E9548) --------------------------------------------------------
int *Function_21e9548()
{
  int *result;

  if ( dword_221A400[658] )
  {
    Function_4_21d77c4(1, dword_221A400[658]);
    dword_221A400[658] = 0;
  }
  result = &dword_221A400[657];
  if ( dword_221A400[657] )
  {
    Function_4_21d77c4(1, dword_221A400[657]);
    result = &dword_221A400[657];
    dword_221A400[657] = 0;
  }
  return result;
}

//----- (021E95A4) --------------------------------------------------------
int __fastcall Function_21e95a4(int a1)
{
  int v1;
  uint v2;

  v1 = 0;
  do
  {
    v2 = *(uchar *)(a1 + v1);
    if ( v2 < 0x20 || v2 > 0x7E )
      return 0;
    ++v1;
  }
  while ( v1 < 10 );
  return 1;
}

//----- (021E95D8) --------------------------------------------------------
int *Function_21e95d8()
{
  int *result;

  result = &dword_221A400[657];
  dword_221A400[659] = 2;
  return result;
}

//----- (021E95EC) --------------------------------------------------------
int *Function_21e95ec()
{
  int *result;

  result = &dword_221A400[657];
  dword_221A400[659] = 4;
  return result;
}

//----- (021E9600) --------------------------------------------------------
int *Function_21e9600()
{
  int *result;

  result = &dword_221A400[657];
  dword_221A400[659] = 7;
  return result;
}

//----- (021E9614) --------------------------------------------------------
int *Function_21e9614()
{
  int *result;

  result = &dword_221A400[657];
  dword_221A400[659] = 9;
  return result;
}

//----- (021E9628) --------------------------------------------------------
int *Function_21e9628()
{
  int *result;

  result = &dword_221A400[657];
  dword_221A400[659] = 11;
  return result;
}

//----- (021E963C) --------------------------------------------------------
int __fastcall Function_21e963c(int a1, short a2, int a3)
{
  int v3;
  int v4;
  int v5;
  int v6;

  v3 = a3;
  *(uchar *)(a3 + 1) = 2;
  v4 = a1;
  *(ushort *)(a3 + 2) = HIBYTE(a2) | (a2 << 8) & 0xFF00;
  v5 = Function_21eaf1c();
  *(uint *)(v3 + 4) = v5;
  if ( v5 == -1 )
  {
    v6 = Function_220854c(v4);
    if ( !v6 )
      return 0;
    *(uint *)(v3 + 4) = ***(uint ***)(v6 + 12);
  }
  return 1;
}

//----- (021E96B0) --------------------------------------------------------
int Function_21e96b0()
{
  int v0;
  int result;

  v0 = Function_21eae5c(dword_221A400[661], &dword_221A400[664], dword_221A400[680], 0, &dword_221A400[662], 8);
  result = Function_21ea840(v0);
  dword_221A400[681] = result;
  return result;
}

//----- (021E9700) --------------------------------------------------------
int *__fastcall Function_21e9700(int *a1, int a2, int a3, int a4)
{
  char *v4;
  int *v5;
  int *result;
  int v7;
  char v8;
  int v9;

  v9 = a4;
  v4 = (char *)a1;
  Function_20d8b7c(&dword_221A400[699], a1);
  dword_221A400[661] = -1;
  Function_21ea8a4();
  v5 = &dword_221A400[683];
  if ( !LOBYTE(dword_221A400[683]) )
    v5 = (int *)Function_20d7510((int)&v8, "%s.available.gs.nintendowifi.net");
  if ( LOBYTE(dword_221A400[683]) )
    v5 = &dword_221A400[683];
  if ( !LOBYTE(dword_221A400[683]) )
    v5 = (int *)&v8;
  result = (int *)Function_21e963c((int)v5, 27900, (int)&dword_221A400[662]);
  if ( result )
  {
    result = (int *)Function_21eacdc();
    dword_221A400[661] = (int)result;
    if ( result != (int *)-1 )
    {
      LOBYTE(dword_221A400[664]) = 9;
      v7 = strlen(v4);
      memcpy((uchar *)&dword_221A400[665] + 1, v4, v7 + 1);
      dword_221A400[680] = v7 + 6;
      Function_21e96b0();
      result = &dword_221A400[660];
      dword_221A400[682] = 0;
    }
  }
  return result;
}

//----- (021E97F8) --------------------------------------------------------
int __fastcall Function_21e97f8(int a1, int a2, int a3, uint *a4)
{
  int v4;
  int v5;
  uint *v6;

  v4 = a1;
  v5 = a3;
  v6 = a4;
  if ( a2 < 7 )
    return 1;
  if ( Function_20d5190((uchar *)(a3 + 4), (uchar *)&dword_221A400[663], 4) )
    return 1;
  if ( *(ushort *)(v5 + 2) != HIWORD(dword_221A400[662]) )
    return 1;
  if ( Function_20d5190((uchar *)v4, (uchar *)&dword_22176C8, 3) )
    return 1;
  *v6 = (*(char *)(v4 + 3) << 24) & 0xFF000000 | (*(char *)(v4 + 4) << 16) & 0xFF0000 | (*(char *)(v4 + 5) << 8) & 0xFF00 | *(uchar *)(v4 + 6);
  return 0;
}

//----- (021E98B0) --------------------------------------------------------
int __fastcall Function_21e98b0(int a1, int a2, int a3, int a4)
{
  int result;
  int v5;
  int v6;
  int v7;
  int v8;
  char v9;
  char v10;
  int v11;

  v11 = a4;
  v8 = 8;
  if ( dword_221A400[661] == -1 )
  {
    result = 1;
    dword_221A400[660] = 1;
    return result;
  }
  v5 = Function_21eab6c(dword_221A400[661]);
  if ( !v5
    || (v6 = Function_21eae18(dword_221A400[661], &v10, 64, 0, &v9, &v8),
        (v5 = Function_21e97f8((int)&v10, v6, (int)&v9, (uint *)&v7)) != 0) )
  {
    if ( Function_21ea840(v5) > (uint)(dword_221A400[681] + 2000) )
    {
      if ( dword_221A400[682] == 1 )
      {
        Function_21eacf0(dword_221A400[661]);
        result = 1;
        dword_221A400[660] = 1;
        return result;
      }
      Function_21e96b0();
      ++dword_221A400[682];
    }
    result = 0;
  }
  else
  {
    Function_21eacf0(dword_221A400[661]);
    if ( v7 & 1 )
    {
      dword_221A400[660] = 2;
    }
    else if ( v7 & 2 )
    {
      dword_221A400[660] = 3;
    }
    else
    {
      dword_221A400[660] = 1;
    }
    result = dword_221A400[660];
  }
  return result;
}

//----- (021E99EC) --------------------------------------------------------
int __fastcall Function_21e99ec(int result)
{
  int v1;
  int v2;

  v1 = result;
  if ( *(uint *)(result + 16) )
  {
    v2 = Function_21e9bc4();
    result = (*(int (__fastcall **)(int))(v1 + 16))(v2);
  }
  return result;
}

//----- (021E9A10) --------------------------------------------------------
int __fastcall Function_21e9a10(uint *a1)
{
  uint *v1;
  int v2;
  int v3;
  int v4;
  int result;

  v1 = a1;
  v2 = a1[1] + a1[3];
  a1[1] = v2;
  v3 = v2 * a1[2];
  v4 = a1[5];
  result = Function_21d7894();
  v1[5] = result;
  if ( !result )
    result = Function_20d407c((int)"array->list", (int)"darray.c", (int)"ArrayGrow");
  return result;
}

//----- (021E9A68) --------------------------------------------------------
uchar *__fastcall Function_21e9a68(int a1, char *a2)
{
  char *v2;
  int v3;
  uchar *v4;

  v2 = a2;
  v3 = a1;
  v4 = (uchar *)Function_21e9bc4();
  return memcpy(v4, v2, *(uint *)(v3 + 8));
}

//----- (021E9A8C) --------------------------------------------------------
uint *__fastcall Function_21e9a8c(int a1, int a2, int a3)
{
  int v3;
  int v4;
  int v5;
  uint *v6;
  int v7;
  int v8;

  v3 = a1;
  v4 = a2;
  v5 = a3;
  v6 = (uint *)Function_21d7880(24);
  if ( !v6 )
    Function_20d407c((int)"array", (int)"darray.c", (int)"ArrayNew");
  if ( !v3 )
    Function_20d407c((int)"elemSize", (int)"darray.c", (int)"ArrayNew");
  if ( !v4 )
    v4 = 8;
  *v6 = 0;
  v6[1] = v4;
  v6[2] = v3;
  v6[3] = v4;
  v6[4] = v5;
  v7 = v6[1];
  if ( v7 )
  {
    v8 = Function_21d7880(v7 * v6[2]);
    v6[5] = v8;
    if ( !v8 )
      Function_20d407c((int)"array->list", (int)"darray.c", (int)"ArrayNew");
  }
  else
  {
    v6[5] = 0;
  }
  return v6;
}

//----- (021E9B50) --------------------------------------------------------
int __fastcall Function_21e9b50(uint *a1)
{
  uint *v1;
  int i;

  v1 = a1;
  if ( !a1 )
    Function_20d407c((int)"array", (int)"darray.c", (int)"ArrayFree");
  for ( i = 0; i < *v1; ++i )
    Function_21e99ec((int)v1);
  Function_21d78b0(v1[5]);
  return Function_21d78b0((int)v1);
}

//----- (021E9BBC) --------------------------------------------------------
int __fastcall Function_21e9bbc(int a1)
{
  return *(uint *)a1;
}

//----- (021E9BC4) --------------------------------------------------------
int __fastcall Function_21e9bc4(uint *a1, int a2)
{
  int v2;
  uint *v3;
  int result;

  v2 = a2;
  v3 = a1;
  if ( a2 < 0 || a2 >= *a1 )
    Function_20d407c((int)"(n >= 0) && (n < array->count)", (int)"darray.c", (int)"ArrayNth");
  if ( v2 >= 0 && v2 < *v3 )
    result = v3[5] + v3[2] * v2;
  else
    result = 0;
  return result;
}

//----- (021E9C2C) --------------------------------------------------------
int __fastcall Function_21e9c2c(int result, int a2)
{
  uint *v2;
  int v3;

  v2 = (uint *)result;
  v3 = a2;
  if ( !result )
    result = Function_20d407c((int)"array", (int)"darray.c", (int)"ArrayAppend");
  if ( v2 )
    result = Function_21e9c78(v2, v3, *v2);
  return result;
}

//----- (021E9C78) --------------------------------------------------------
uchar *__fastcall Function_21e9c78(int *a1, char *a2, int a3)
{
  int v3;
  int *v4;
  char *v5;
  int v6;
  char *v7;
  char *v8;

  v3 = a3;
  v4 = a1;
  v5 = a2;
  if ( a3 < 0 || a3 > *a1 )
    Function_20d407c((int)"(n >= 0) && (n <= array->count)", (int)"darray.c", (int)"ArrayInsertAt");
  if ( *v4 == v4[1] )
    Function_21e9a10(v4);
  v6 = (*v4)++;
  if ( v3 < v6 )
  {
    v7 = (char *)Function_21e9bc4(v4, v3 + 1);
    v8 = (char *)Function_21e9bc4(v4, v3);
    Function_20d50d8(v7, v8, v4[2] * (v6 - v3));
  }
  return Function_21e9a68((int)v4, v5);
}

//----- (021E9D30) --------------------------------------------------------
uchar *__fastcall Function_21e9d30(int *a1, char *a2, int a3, int a4)
{
  int v4;
  int *v5;
  char *v6;
  int v7;
  int v8;
  char v10;
  int v11;

  v11 = a4;
  v4 = a3;
  v5 = a1;
  v6 = a2;
  if ( !a3 )
    Function_20d407c((int)"comparator", (int)"darray.c", (int)"ArrayInsertSorted");
  v7 = Function_21ea198(v6, v5[5], *v5, v5[2], v4, &v10);
  v8 = s32_div_f(v7 - v5[5], v5[2]);
  return Function_21e9c78(v5, v6, v8);
}

//----- (021E9DB0) --------------------------------------------------------
int __fastcall Function_21e9db0(int *a1, int a2)
{
  int v2;
  int *v3;
  int v4;
  char *v5;
  char *v6;
  int result;

  v2 = a2;
  v3 = a1;
  if ( a2 < 0 || a2 >= *a1 )
    Function_20d407c((int)"(n >= 0) && (n < array->count)", (int)"darray.c", (int)"ArrayRemoveAt");
  v4 = *v3 - 1;
  if ( v2 < v4 )
  {
    v5 = (char *)Function_21e9bc4(v3, v2);
    v6 = (char *)Function_21e9bc4(v3, v2 + 1);
    Function_20d50d8(v5, v6, v3[2] * (v4 - v2));
  }
  result = *v3 - 1;
  *v3 = result;
  return result;
}

//----- (021E9E40) --------------------------------------------------------
int __fastcall Function_21e9e40(int *a1, int a2)
{
  int v2;
  int *v3;

  v2 = a2;
  v3 = a1;
  if ( a2 < 0 || a2 >= *a1 )
    Function_20d407c((int)"(n >= 0) && (n < array->count)", (int)"darray.c", (int)"ArrayDeleteAt");
  Function_21e99ec((int)v3);
  return Function_21e9db0(v3, v2);
}

//----- (021E9E98) --------------------------------------------------------
uchar *__fastcall Function_21e9e98(uint *a1, char *a2, int a3)
{
  int v3;
  char *v4;

  v3 = (int)a1;
  v4 = a2;
  if ( a3 < 0 || a3 >= *a1 )
    Function_20d407c((int)"(n >= 0) && (n < array->count)", (int)"darray.c", (int)"ArrayReplaceAt");
  Function_21e99ec(v3);
  return Function_21e9a68(v3, v4);
}

//----- (021E9EF8) --------------------------------------------------------
int __fastcall Function_21e9ef8(int a1, int (__fastcall *a2)(uint, int))
{
  return Function_20d753c(*(uint *)(a1 + 20), *(uint *)a1, *(uint *)(a1 + 8), a2);
}

//----- (021E9F18) --------------------------------------------------------
uint __fastcall Function_21e9f18(uint *a1, int a2, int a3, int a4, int a5)
{
  int v5;
  bool v6;
  uint *v7;
  int v8;
  int v9;
  int v10;
  uint result;
  int v12;
  int v13;
  int v14;
  bool v15;
  int v16;
  int v17;

  v17 = a4;
  v7 = a1;
  v6 = a1 == 0;
  v16 = 1;
  if ( a1 )
    v5 = *a1;
  v8 = a2;
  if ( a1 )
    v6 = v5 == 0;
  v9 = a3;
  v10 = a4;
  if ( v6 )
    return -1;
  if ( a5 )
  {
    v12 = Function_21e9bc4(a1, a4);
    v13 = Function_21ea198(v8, v12, v5 - v10, v7[2], v9, &v16);
  }
  else
  {
    v14 = Function_21e9bc4(a1, a4);
    v13 = Function_21ea140(v8, v14, v5 - v10, v7[2], v9);
  }
  v15 = v13 == 0;
  if ( v13 )
    v15 = v16 == 0;
  if ( v15 )
    result = -1;
  else
    result = s32_div_f(v13 - v7[5], v7[2]);
  return result;
}

//----- (021E9FD0) --------------------------------------------------------
int __fastcall Function_21e9fd0(int *a1, void (__fastcall *a2)(int, int), int a3)
{
  void (__fastcall *v3)(int, int);
  int *v4;
  int v5;
  int result;
  int i;
  int v8;

  v3 = a2;
  v4 = a1;
  v5 = a3;
  if ( !a2 )
    Function_20d407c((int)"fn", (int)"darray.c", (int)"ArrayMap");
  result = *v4;
  for ( i = 0; i < *v4; ++i )
  {
    v8 = Function_21e9bc4(v4, i);
    v3(v8, v5);
    result = *v4;
  }
  return result;
}

//----- (021EA03C) --------------------------------------------------------
int __fastcall Function_21ea03c(int *a1, int (__fastcall *a2)(int, int), int a3)
{
  int (__fastcall *v3)(int, int);
  int *v4;
  int v5;
  int result;
  int i;
  int v8;

  v3 = a2;
  v4 = a1;
  v5 = a3;
  if ( !a2 )
    Function_20d407c((int)"fn", (int)"darray.c", (int)"ArrayMapBackwards");
  result = *v4;
  for ( i = *v4 - 1; i >= 0; --i )
  {
    v8 = Function_21e9bc4(v4, i);
    result = v3(v8, v5);
  }
  return result;
}

//----- (021EA09C) --------------------------------------------------------
int __fastcall Function_21ea09c(uint *a1, int (*a2)(void))
{
  int (*v2)(void);
  uint *v3;
  int v4;
  int v5;

  v2 = a2;
  v3 = a1;
  if ( !a2 )
    Function_20d407c((int)"fn", (int)"darray.c", (int)"ArrayMapBackwards2");
  v4 = *v3 - 1;
  if ( v4 < 0 )
    return 0;
  while ( 1 )
  {
    v5 = Function_21e9bc4(v3, v4);
    if ( !v2() )
      break;
    if ( --v4 < 0 )
      return 0;
  }
  return v5;
}

//----- (021EA114) --------------------------------------------------------
int __fastcall Function_21ea114(int a1)
{
  int *v1;
  int result;
  int i;

  v1 = (int *)a1;
  result = Function_21e9bbc(a1);
  for ( i = result - 1; i >= 0; --i )
    result = Function_21e9e40(v1, i);
  return result;
}

//----- (021EA140) --------------------------------------------------------
int __fastcall Function_21ea140(int a1, int a2, int a3, int a4, int (__fastcall *a5)(int, int))
{
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;

  v5 = a3;
  v6 = a1;
  v7 = a2;
  v8 = a4;
  v9 = 0;
  if ( a3 <= 0 )
    return 0;
  v10 = 0;
  while ( a5(v6, v7 + v10) )
  {
    ++v9;
    v10 += v8;
    if ( v9 >= v5 )
      return 0;
  }
  return v7 + v8 * v9;
}

//----- (021EA198) --------------------------------------------------------
int __fastcall Function_21ea198(int a1, int a2, int a3, int a4, int (__fastcall *a5)(int, int), uint *a6)
{
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;

  v6 = 0;
  v7 = a1;
  v8 = a2;
  v9 = a4;
  *a6 = 0;
  v10 = a3 - 1;
  while ( v6 <= v10 )
  {
    v11 = (v6 + v10) >> 1;
    v12 = a5(v8 + v11 * v9, v7);
    if ( !v12 )
      *a6 = 1;
    if ( v12 >= 0 )
      v10 = v11 - 1;
    else
      v6 = v11 + 1;
  }
  return v8 + v6 * v9;
}

//----- (021EA1FC) --------------------------------------------------------
int __fastcall Function_21ea1fc(int a1, int a2, int a3, int a4, int a5)
{
  return Function_21ea224(a1, a2, 4, a3, a4, a5);
}

//----- (021EA224) --------------------------------------------------------
int *__fastcall Function_21ea224(int a1, int a2, int a3, int a4, int a5, int a6)
{
  int v6;
  int v7;
  int v8;
  int v9;
  int *v10;
  int v11;
  int i;
  int *result;

  v6 = a4;
  v7 = a1;
  v8 = a2;
  v9 = a3;
  if ( !a4 )
    Function_20d407c((int)"hashFn", (int)"hashtable.c", (int)"TableNew2");
  if ( !a5 )
    Function_20d407c((int)"compFn", (int)"hashtable.c", (int)"TableNew2");
  if ( !v7 )
    Function_20d407c((int)"elemSize", (int)"hashtable.c", (int)"TableNew2");
  if ( !v8 )
    Function_20d407c((int)"nBuckets", (int)"hashtable.c", (int)"TableNew2");
  v10 = (int *)Function_21d7880(20);
  if ( !v10 )
    Function_20d407c((int)"table", (int)"hashtable.c", (int)"TableNew2");
  v11 = Function_21d7880(4 * v8);
  *v10 = v11;
  if ( !v11 )
    Function_20d407c((int)"table->buckets", (int)"hashtable.c", (int)"TableNew2");
  for ( i = 0; i < v8; ++i )
    *(uint *)(*v10 + 4 * i) = Function_21e9a8c(v7, v9, a6);
  v10[1] = v8;
  v10[2] = a6;
  v10[4] = a5;
  result = v10;
  v10[3] = v6;
  return result;
}

//----- (021EA364) --------------------------------------------------------
int __fastcall Function_21ea364(int result)
{
  int *v1;
  int i;

  v1 = (int *)result;
  if ( !result )
    result = Function_20d407c((int)"table", (int)"hashtable.c", (int)"TableFree");
  if ( v1 )
  {
    for ( i = 0; i < v1[1]; ++i )
      Function_21e9b50(*(uint **)(*v1 + 4 * i));
    Function_21d78b0(*v1);
    result = Function_21d78b0((int)v1);
  }
  return result;
}

//----- (021EA3D8) --------------------------------------------------------
int __fastcall Function_21ea3d8(uint *a1)
{
  uint *v1;
  int v2;
  int i;
  int v5;

  v1 = a1;
  v2 = 0;
  if ( !a1 )
    Function_20d407c((int)"table", (int)"hashtable.c", (int)"TableCount");
  if ( !v1 )
    return 0;
  for ( i = 0; i < v1[1]; v2 += v5 )
    v5 = Function_21e9bbc(*(uint *)(*v1 + 4 * i++));
  return v2;
}

//----- (021EA44C) --------------------------------------------------------
uchar *__fastcall Function_21ea44c(uchar *result, char *a2)
{
  uchar *v2;
  char *v3;
  int v4;
  int v5;
  int v6;

  v2 = result;
  v3 = a2;
  if ( !result )
    result = (uchar *)Function_20d407c((int)"table", (int)"hashtable.c", (int)"TableEnter");
  if ( v2 )
  {
    v4 = (*((int (__fastcall **)(char *, uint))v2 + 3))(v3, *((uint *)v2 + 1));
    v5 = Function_21e9f18(*(uint **)(*(uint *)v2 + 4 * v4), (int)v3, *((uint *)v2 + 4), 0, 0);
    v6 = *(uint *)v2;
    if ( v5 == -1 )
      result = (uchar *)Function_21e9c2c(*(uint *)(v6 + 4 * v4), (int)v3);
    else
      result = Function_21e9e98(*(uint **)(v6 + 4 * v4), v3, v5);
  }
  return result;
}

//----- (021EA4F4) --------------------------------------------------------
int __fastcall Function_21ea4f4(int a1, int a2)
{
  int v2;
  int v3;
  int v5;
  int v6;

  v2 = a1;
  v3 = a2;
  if ( !a1 )
    Function_20d407c((int)"table", (int)"hashtable.c", (int)"TableRemove");
  if ( !v2 )
    return 0;
  v5 = (*(int (__fastcall **)(int, uint))(v2 + 12))(v3, *(uint *)(v2 + 4));
  v6 = Function_21e9f18(*(uint **)(*(uint *)v2 + 4 * v5), v3, *(uint *)(v2 + 16), 0, 0);
  if ( v6 == -1 )
    return 0;
  Function_21e9e40(*(int **)(*(uint *)v2 + 4 * v5), v6);
  return 1;
}

//----- (021EA598) --------------------------------------------------------
int __fastcall Function_21ea598(int a1, int a2)
{
  int v2;
  int v3;
  int result;
  int v5;
  int v6;

  v2 = a1;
  v3 = a2;
  if ( !a1 )
    Function_20d407c((int)"table", (int)"hashtable.c", (int)"TableLookup");
  if ( !v2 )
    return 0;
  v5 = (*(int (__fastcall **)(int, uint))(v2 + 12))(v3, *(uint *)(v2 + 4));
  v6 = Function_21e9f18(*(uint **)(*(uint *)v2 + 4 * v5), v3, *(uint *)(v2 + 16), 0, 0);
  if ( v6 == -1 )
    result = 0;
  else
    result = Function_21e9bc4(*(uint **)(*(uint *)v2 + 4 * v5), v6);
  return result;
}

//----- (021EA638) --------------------------------------------------------
int __fastcall Function_21ea638(int result, void (__fastcall *a2)(int, int), int a3)
{
  uint *v3;
  void (__fastcall *v4)(int, int);
  int v5;
  bool v6;
  int i;

  v3 = (uint *)result;
  v4 = a2;
  v5 = a3;
  if ( !result )
    result = Function_20d407c((int)"table", (int)"hashtable.c", (int)"TableMap");
  if ( !v4 )
    result = Function_20d407c((int)"fn", (int)"hashtable.c", (int)"TableMap");
  v6 = v3 == 0;
  if ( v3 )
    v6 = v4 == 0;
  if ( !v6 )
  {
    result = v3[1];
    for ( i = 0; i < result; ++i )
    {
      Function_21e9fd0(*(int **)(*v3 + 4 * i), v4, v5);
      result = v3[1];
    }
  }
  return result;
}

//----- (021EA6D0) --------------------------------------------------------
int __fastcall Function_21ea6d0(uint *a1, int (__fastcall *a2)(int, int), int a3)
{
  int (__fastcall *v3)(int, int);
  uint *v4;
  int v5;
  int result;
  int i;

  v3 = a2;
  v4 = a1;
  v5 = a3;
  if ( !a2 )
    Function_20d407c((int)"fn", (int)"hashtable.c", (int)"TableMapSafe");
  result = v4[1];
  for ( i = 0; i < result; ++i )
  {
    Function_21ea03c(*(int **)(*v4 + 4 * i), v3, v5);
    result = v4[1];
  }
  return result;
}

//----- (021EA73C) --------------------------------------------------------
int __fastcall Function_21ea73c(uint *a1, int (*a2)(void))
{
  int (*v2)(void);
  uint *v3;
  int v4;
  int result;

  v2 = a2;
  v3 = a1;
  if ( !a2 )
    Function_20d407c((int)"fn", (int)"hashtable.c", (int)"TableMapSafe2");
  v4 = 0;
  if ( v3[1] <= 0 )
    return 0;
  while ( 1 )
  {
    result = Function_21ea09c(*(uint **)(*v3 + 4 * v4), v2);
    if ( result )
      break;
    if ( ++v4 >= v3[1] )
      return 0;
  }
  return result;
}

//----- (021EA7B4) --------------------------------------------------------
uint __fastcall Function_21ea7b4(int a1, int a2)
{
  uint v2;
  int v3;
  int v4;
  int v5;
  int v6;
  uint result;

  v2 = 0;
  v3 = a1;
  v4 = a2;
  v5 = 0;
  do
  {
    v6 = *(uchar *)(v3 + v2);
    result = Function_20d7510(v4 + v5, "%02x");
    ++v2;
    v5 += 2;
  }
  while ( v2 < 0x10 );
  return result;
}

//----- (021EA7F4) --------------------------------------------------------
uint __fastcall Function_21ea7f4(int a1, int a2, int a3)
{
  int v3;
  int v4;
  int v5;
  char v7;
  char v8;

  v3 = a1;
  v4 = a2;
  v5 = a3;
  Call_DGT_Hash1Reset(&v8);
  Call_DGT_Hash1SetSource(&v8, v3, v4);
  Call_DGT_Hash1GetDigest_R(&v7, &v8);
  return Function_21ea7b4((int)&v7, v5);
}

//----- (021EA840) --------------------------------------------------------
void Function_21ea840()
{
  if ( Function_20c3808() != 1 )
    Function_20d407c((int)"OS_IsTickAvailable() == TRUE", (int)"nonport.c", (int)"current_time");
  OS_GetTick();
  ll_udiv();
}

//----- (021EA898) --------------------------------------------------------
uint __fastcall Function_21ea898(uint a1)
{
  return OS_Sleep(a1);
}

//----- (021EA8A4) --------------------------------------------------------
void Function_21ea8a4()
{
  ;
}

//----- (021EA8A8) --------------------------------------------------------
void Function_21ea8a8()
{
  ;
}

//----- (021EA8AC) --------------------------------------------------------
uchar *__fastcall Function_21ea8ac(char *a1)
{
  int *v1;
  int v3;
  uchar *v4;
  uchar *v5;

  v1 = (int *)a1;
  if ( !a1 )
    return 0;
  v3 = strlen(a1);
  v4 = (uchar *)Function_21d7880(v3 + 1);
  v5 = v4;
  if ( v4 )
    Function_20d8b7c(v4, v1);
  return v5;
}

//----- (021EA8E0) --------------------------------------------------------
uchar *__fastcall Function_21ea8e0(uchar *a1)
{
  int v1;
  uchar *v2;
  int v3;

  v1 = (char)*a1;
  v2 = a1;
  if ( *a1 )
  {
    do
    {
      if ( v1 >= 0 && v1 < 128 )
        LOBYTE(v1) = Unknown_20fe764[v1];
      *a1 = v1;
      v3 = (char)(a1++)[1];
      v1 = v3;
    }
    while ( v3 );
  }
  return v2;
}

//----- (021EA924) --------------------------------------------------------
BOOL __fastcall Function_21ea924(int a1, int a2)
{
  int v2;
  int v3;
  int v4;
  uint v5;

  v2 = a2;
  v3 = a1;
  v4 = ((int (*)(void))Function_22087cc)();
  if ( v2 )
    v5 = v4 & 0xFFFFFFFB;
  else
    v5 = v4 | 4;
  return Function_22087cc(v3, 4, v5) == 0;
}

//----- (021EA964) --------------------------------------------------------
BOOL __fastcall Function_21ea964(int a1, int a2, int a3, int a4)
{
  int varg_r1;
  int varg_r2;
  int varg_r3;

  varg_r1 = a2;
  varg_r2 = a3;
  varg_r3 = a4;
  return Function_21eaedc() != -1;
}

//----- (021EA9A8) --------------------------------------------------------
BOOL __fastcall Function_21ea9a8(int a1, int a2, int a3, int a4)
{
  int varg_r1;
  int varg_r2;
  int varg_r3;

  varg_r1 = a2;
  varg_r2 = a3;
  varg_r3 = a4;
  return Function_21eaedc() != -1;
}

//----- (021EA9E8) --------------------------------------------------------
int __fastcall Function_21ea9e8(int a1)
{
  int v1;
  int v2;
  int v4;
  int v5;

  v1 = Function_21eaeb4(a1, 0xFFFF, 4098, &v5, &v4, 4);
  v2 = -1;
  if ( v1 != -1 )
    v2 = v5;
  return v2;
}

//----- (021EAA30) --------------------------------------------------------
int __fastcall Function_21eaa30(int a1)
{
  int v1;
  int v2;
  int v4;
  int v5;

  v1 = Function_21eaeb4(a1, 0xFFFF, 4097, &v5, &v4, 4);
  v2 = -1;
  if ( v1 != -1 )
    v2 = v5;
  return v2;
}

//----- (021EAA74) --------------------------------------------------------
int __fastcall Function_21eaa74(int a1, uint *a2, uint *a3, uint *a4)
{
  uint *v4;
  uint *v5;
  uint *v6;
  int result;
  int v8;
  short v9;
  short v10;

  v4 = a2;
  v9 = 0;
  v8 = a1;
  if ( a2 )
    LOWORD(a1) = v9;
  v5 = a3;
  if ( a2 )
  {
    LOWORD(a1) = a1 | 1;
    v9 = a1;
  }
  if ( a3 )
    LOWORD(a1) = v9;
  v6 = a4;
  if ( a3 )
    v9 = a1 | 8;
  v10 = 0;
  result = Function_4_2208b18(&v8, 1);
  if ( result < 0 )
    return -1;
  if ( v4 )
    *v4 = result > 0 && v10 & 0x41;
  if ( v5 )
    *v5 = result > 0 && v10 & 8;
  if ( v6 )
    *v6 = result > 0 && v10 & 0x20;
  return result;
}

//----- (021EAB6C) --------------------------------------------------------
int __fastcall Function_21eab6c(int a1)
{
  int result;
  int v2;

  v2 = 0;
  if ( Function_21eaa74(a1, &v2, 0, 0) == 1 )
    result = v2;
  else
    result = 0;
  return result;
}

//----- (021EAB94) --------------------------------------------------------
int __fastcall Function_21eab94(int a1)
{
  int result;
  int v2;

  v2 = 0;
  if ( Function_21eaa74(a1, 0, &v2, 0) == 1 )
    result = v2;
  else
    result = 0;
  return result;
}

//----- (021EABBC) --------------------------------------------------------
int *Function_21eabbc()
{
  int v0;
  int *result;

  dword_221A400[717] = (int)"localhost";
  dword_221A400[718] = (int)&dword_221A400[715];
  dword_221A400[719] = 2;
  dword_221A400[720] = (int)&dword_221A400[726];
  dword_221A400[721] = 0;
  v0 = Function_4_2208088();
  Function_4_2208af8(v0, &dword_221A400[721]);
  if ( !dword_221A400[721] )
    return 0;
  dword_221A400[726] = (int)&dword_221A400[721];
  HIWORD(dword_221A400[719]) = 4;
  result = &dword_221A400[717];
  dword_221A400[727] = 0;
  return result;
}

//----- (021EAC48) --------------------------------------------------------
int __fastcall Function_21eac48(uint *a1)
{
  uint v1;
  bool v3;

  v1 = (*a1 << 24) & 0xFF000000 | (*a1 << 8) & 0xFF0000 | (uchar)(*a1 >> 24) | (*a1 >> 8) & 0xFF00;
  if ( HIBYTE(v1) == 10 )
    return 1;
  if ( HIBYTE(v1) == 172 && (int)BYTE2(v1) >= 16 && (int)BYTE2(v1) <= 31 )
    return 1;
  v3 = HIBYTE(v1) == 192;
  if ( HIBYTE(v1) == 192 )
    v3 = BYTE2(v1) == 168;
  return v3 != 0;
}

//----- (021EACC4) --------------------------------------------------------
int __fastcall Function_21eacc4(int result, int a2)
{
  if ( result < 0 )
  {
    dword_221A400[716] = result;
    result = a2;
  }
  return result;
}

//----- (021EACDC) --------------------------------------------------------
int Function_21eacdc()
{
  int v0;

  v0 = Function_4_2208324();
  return Function_21eacc4(v0, -1);
}

//----- (021EACF0) --------------------------------------------------------
int Function_21eacf0()
{
  int v0;

  v0 = Function_4_2208540();
  return Function_21eacc4(v0, -1);
}

//----- (021EAD04) --------------------------------------------------------
int Function_21ead04()
{
  int v0;

  v0 = Function_2208534();
  return Function_21eacc4(v0, -1);
}

//----- (021EAD18) --------------------------------------------------------
int __fastcall Function_21ead18(int a1, int a2, char a3)
{
  char *v4;
  int v5;
  char v6;
  char v7;
  int v8;
  char v9;

  if ( !*(ushort *)(a2 + 2) )
    return 0;
  v4 = &v9;
  v5 = 4;
  do
  {
    v6 = *(uchar *)a2;
    v7 = *(uchar *)(a2 + 1);
    a2 += 2;
    --v5;
    *v4 = v6;
    v4[1] = v7;
    v4 += 2;
  }
  while ( v5 );
  v9 = a3;
  v8 = Function_4_2208350(a1, &v9);
  return Function_21eacc4(v8, -1);
}

//----- (021EAD78) --------------------------------------------------------
int __fastcall Function_21ead78(int a1, char *a2, char a3)
{
  char *v3;
  int v4;
  char v5;
  char v6;
  int v7;
  char v9;

  v3 = &v9;
  v4 = 4;
  do
  {
    v5 = *a2;
    v6 = a2[1];
    a2 += 2;
    --v4;
    *v3 = v5;
    v3[1] = v6;
    v3 += 2;
  }
  while ( v4 );
  v9 = a3;
  v7 = Function_220837c(a1, &v9);
  return Function_21eacc4(v7, -1);
}

//----- (021EADC4) --------------------------------------------------------
int Function_21eadc4()
{
  int v0;

  v0 = Function_2208744();
  return Function_21eacc4(v0, -1);
}

//----- (021EADD8) --------------------------------------------------------
int __fastcall Function_21eadd8(int a1, uchar *a2, uint *a3)
{
  uint *v3;
  uchar *v4;
  int v5;

  v3 = a3;
  v4 = a2;
  *a2 = *a3;
  v5 = Function_2208750();
  *v3 = *v4;
  return Function_21eacc4(v5, -1);
}

//----- (021EAE04) --------------------------------------------------------
int Function_21eae04()
{
  int v0;

  v0 = Function_22083d8();
  return Function_21eacc4(v0, -1);
}

//----- (021EAE18) --------------------------------------------------------
int __fastcall Function_21eae18(int a1, int a2, int a3, int a4, uchar *a5, uint *a6)
{
  int v6;

  *a5 = *a6;
  v6 = Function_4_22083fc();
  *a6 = (uchar)*a5;
  return Function_21eacc4(v6, -1);
}

//----- (021EAE48) --------------------------------------------------------
int Function_21eae48()
{
  int v0;

  v0 = Function_220848c();
  return Function_21eacc4(v0, -1);
}

//----- (021EAE5C) --------------------------------------------------------
int __fastcall Function_21eae5c(int a1, int a2, int a3, int a4, char *a5, char a6)
{
  char *v6;
  char *v7;
  int v8;
  char v9;
  char v10;
  int v11;
  char v13;
  int v14;

  v14 = a4;
  v6 = a5;
  v7 = &v13;
  v8 = 4;
  do
  {
    v9 = *v6;
    v10 = v6[1];
    v6 += 2;
    --v8;
    *v7 = v9;
    v7[1] = v10;
    v7 += 2;
  }
  while ( v8 );
  v13 = a6;
  v11 = Function_4_22084b0(a1, a2);
  return Function_21eacc4(v11, -1);
}

//----- (021EAEB4) --------------------------------------------------------
int __fastcall Function_21eaeb4(int a1, int a2, int a3, ushort *a4, uint *a5)
{
  MI_CpuFill8(a4, 0, *a5);
  return Function_21eacc4(0, -1);
}

//----- (021EAEDC) --------------------------------------------------------
int Function_21eaedc()
{
  return Function_21eacc4(0, -1);
}

//----- (021EAEF0) --------------------------------------------------------
int __fastcall Function_21eaef0(int a1, uchar *a2, uint *a3)
{
  uint *v3;
  uchar *v4;
  int v5;

  v3 = a3;
  v4 = a2;
  *a2 = *a3;
  v5 = Function_220860c();
  *v3 = *v4;
  return Function_21eacc4(v5, -1);
}

//----- (021EAF1C) --------------------------------------------------------
int __fastcall Function_21eaf1c(int a1, int a2, int a3, int a4)
{
  int result;
  int v5;

  v5 = a4;
  if ( Function_2208a24(a1, &v5) )
    result = v5;
  else
    result = -1;
  return result;
}

//----- (021EAF38) --------------------------------------------------------
int Function_21eaf38()
{
  return dword_221A400[716];
}

//----- (021EAF48) --------------------------------------------------------
void __fastcall Function_21eaf48(uint *a1)
{
  uint *v1;
  int v2;

  v1 = a1;
  if ( Function_20c3808() != 1 )
    Function_20d407c((int)"OS_IsTickAvailable() == TRUE", (int)"nonport.c", (int)"time");
  OS_GetTick();
  ll_udiv();
  if ( v1 )
    *v1 = v2;
}

//----- (021EAFAC) --------------------------------------------------------
uint __fastcall Function_21eafac(uint a1)
{
  uint v1;
  uint v2;
  uint result;

  v1 = 16807 * (a1 >> 16);
  v2 = 16807 * (ushort)a1 + (-2092040192 * (a1 >> 16) >> 1);
  if ( v2 > 0x7FFFFFFF )
    v2 = (v2 & 0x7FFFFFFF) + 1;
  result = v2 + (v1 >> 15);
  if ( result > 0x7FFFFFFF )
    result = (result & 0x7FFFFFFF) + 1;
  return result;
}

//----- (021EAFF8) --------------------------------------------------------
uint Function_21eaff8()
{
  uint result;

  result = Function_21eafac(1u);
  dword_22178D8 = result;
  return result;
}

//----- (021EB018) --------------------------------------------------------
int *__fastcall Function_21eb018(int a1, int a2)
{
  bool v2;
  int *result;

  v2 = a1 == 0;
  if ( a1 )
    a2 = a1 & 0x7FFFFFFF;
  result = &dword_22178D8;
  if ( v2 )
    a2 = 1;
  dword_22178D8 = a2;
  return result;
}

//----- (021EB034) --------------------------------------------------------
int __fastcall Function_21eb034(int result, int a2)
{
  int v2;
  int v3;
  uint v4;
  int v5;

  v2 = result;
  v3 = a2 - result;
  if ( a2 != result )
  {
    v4 = Function_21eaff8();
    s32_div_f(v4, v3);
    result = v5 + v2;
  }
  return result;
}

//----- (021EB058) --------------------------------------------------------
int __fastcall Function_21eb058(int a1, uchar *a2, int a3, int a4)
{
  int v4;
  int *v5;
  char v6;
  char *v7;
  int result;
  int v9;

  v9 = a4;
  v4 = 0;
  if ( a3 > 0 )
  {
    v5 = &v9;
    do
    {
      v6 = *(uchar *)(a1 + v4++);
      *(uchar *)v5 = v6;
      v5 = (int *)((char *)v5 + 1);
    }
    while ( v4 < a3 );
  }
  if ( v4 < 3 )
  {
    v7 = (char *)&v9 + v4;
    do
    {
      ++v4;
      *v7++ = 0;
    }
    while ( v4 < 3 );
  }
  *a2 = (int)(uchar)v9 >> 2;
  a2[1] = ((int)BYTE1(v9) >> 4) | 16 * v9 & 0x3F;
  a2[2] = ((int)BYTE2(v9) >> 6) | 4 * BYTE1(v9) & 0x3F;
  result = BYTE2(v9) & 0x3F;
  a2[3] = result;
  return result;
}

//----- (021EB0F0) --------------------------------------------------------
int __fastcall Function_4_21eb0f0(int a1, uchar *a2, int a3, int a4)
{
  uchar *v4;
  int v5;
  int v6;
  uint v7;
  int v8;
  char *v9;
  int v10;
  uint v11;
  int result;

  v4 = a2;
  v5 = a3;
  v6 = a1;
  v7 = (uint)a2;
  v8 = a3;
  if ( a4 == 1 )
  {
    v9 = &byte_2215980;
  }
  else if ( a4 == 2 )
  {
    v9 = &byte_2215984;
  }
  else
  {
    v9 = &byte_2215988;
  }
  if ( a3 > 0 )
  {
    do
    {
      if ( v8 >= 3 )
        v10 = 3;
      else
        v10 = v8;
      Function_21eb058(v6, v4, v10, a4);
      v8 -= 3;
      v4 += 4;
      v6 += 3;
    }
    while ( v8 > 0 );
  }
  v11 = (uint)v4;
  if ( v5 % 3 == 1 )
  {
    v11 = (uint)(v4 - 2);
  }
  else if ( v5 % 3 == 2 )
  {
    v11 = (uint)(v4 - 1);
  }
  result = 0;
  *v4 = 0;
  while ( (uint)v4 > v7 )
  {
    if ( (uint)--v4 < v11 )
    {
      result = (char)*v4;
      if ( result > 25 )
      {
        if ( result > 51 )
        {
          if ( result > 61 )
          {
            if ( result == 62 )
            {
              result = *v9;
              *v4 = result;
            }
            else if ( result == 63 )
            {
              result = v9[1];
              *v4 = result;
            }
          }
          else
          {
            result -= 4;
            *v4 = result;
          }
        }
        else
        {
          result += 71;
          *v4 = result;
        }
      }
      else
      {
        result += 65;
        *v4 = result;
      }
    }
    else
    {
      result = v9[2];
      *v4 = result;
    }
  }
  return result;
}

//----- (021EB228) --------------------------------------------------------
int __fastcall Function_21eb228(int a1)
{
  if ( dword_221A400[660] != 1 )
    return 2;
  if ( a1 )
    return Function_21ebdcc();
  return 2;
}

//----- (021EB258) --------------------------------------------------------
uint *__fastcall Function_21eb258(uint *result)
{
  bool v1;

  v1 = result == 0;
  if ( result )
    v1 = *result == 0;
  if ( !v1 )
    result = (uint *)Function_21ebf14();
  return result;
}

//----- (021EB274) --------------------------------------------------------
int __fastcall Function_21eb274(int *a1, int a2)
{
  bool v2;

  v2 = a1 == 0;
  if ( a1 )
  {
    a2 = *a1;
    v2 = *a1 == 0;
  }
  if ( v2 )
    return 2;
  if ( *(uint *)(a2 + 264) )
    return 0;
  return Function_21ec3b0();
}

//----- (021EB2A8) --------------------------------------------------------
int __fastcall Function_21eb2a8(int *a1, int a2, int a3, int a4)
{
  int v4;
  bool v5;
  int result;
  int v7;

  v5 = a1 == 0;
  if ( a1 )
  {
    v4 = *a1;
    v5 = *a1 == 0;
  }
  if ( v5 )
    return 2;
  if ( a2 >= 0 && a2 < 6 )
  {
    v7 = v4 + 8 * a2;
    *(uint *)(v7 + 420) = a3;
    *(uint *)(v7 + 424) = a4;
    result = 0;
  }
  else
  {
    Function_21f5d68();
    result = 2;
  }
  return result;
}

//----- (021EB2F8) --------------------------------------------------------
int __fastcall Function_21eb2f8(int *a1, uchar *a2, uchar *a3, int a4, int a5, void (*a6)(void))
{
  int v6;
  bool v7;
  int result;
  bool v9;
  bool v10;
  int v11;
  int v12;
  int v13;
  int v14;
  int v15;
  int v16;
  int v17;
  int v18;
  int v19;

  v19 = a4;
  v7 = a1 == 0;
  if ( a1 )
  {
    v6 = *a1;
    v7 = *a1 == 0;
  }
  if ( v7 )
    return 2;
  v9 = a2 == 0;
  if ( a2 )
    v9 = *a2 == 0;
  if ( v9 )
    return 2;
  v10 = a3 == 0;
  if ( a3 )
    v10 = *a3 == 0;
  if ( v10 )
    return 2;
  if ( a6 )
  {
    if ( *(uint *)(v6 + 264) )
    {
      v11 = 0;
      v12 = 0;
      v13 = 0;
      v14 = 0;
      v15 = 0;
      v16 = 0;
      v17 = 0;
      v18 = 0;
      a6();
      result = 0;
    }
    else
    {
      result = Function_21ee6bc(a1, &dword_2217960, &dword_2217960, &dword_2217960, &dword_2217960, a2, a3, 0, a4);
    }
  }
  else
  {
    Function_21f5d68();
    result = 2;
  }
  return result;
}

//----- (021EB3FC) --------------------------------------------------------
uint *__fastcall Function_21eb3fc(uint *result, int a2)
{
  bool v2;
  uint *v3;

  v3 = result;
  v2 = result == 0;
  if ( result )
  {
    a2 = *result;
    v2 = *result == 0;
  }
  if ( !v2 && !*(uint *)(a2 + 264) )
  {
    Function_21ef75c();
    result = (uint *)Function_21ebf70(v3);
  }
  return result;
}

//----- (021EB430) --------------------------------------------------------
int __fastcall Function_21eb430(int *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, void (*a9)(void))
{
  int v9;
  bool v10;
  int result;
  int v12;
  int v13;
  int v14;
  int v15;
  int v16;

  v16 = a4;
  v10 = a1 == 0;
  if ( a1 )
  {
    v9 = *a1;
    v10 = *a1 == 0;
  }
  if ( v10 )
    return 2;
  if ( a9 )
  {
    if ( *(uint *)(v9 + 264) )
    {
      v12 = 0;
      v13 = 0;
      v15 = 0;
      v14 = 1537;
      a9();
      result = 0;
    }
    else
    {
      result = Function_21f3808(a1, a2, a3, a4, a5, a6, a7);
    }
  }
  else
  {
    Function_21f5d68();
    result = 2;
  }
  return result;
}

//----- (021EB4F8) --------------------------------------------------------
int __fastcall Function_21eb4f8(int *a1, int a2, int a3, int a4, void (__fastcall *a5)(int *, char *, int), int a6)
{
  int v6;
  bool v7;
  int result;
  char *v9;
  int v10;
  uint *v11;
  char v12;

  v7 = a1 == 0;
  if ( a1 )
  {
    v6 = *a1;
    v7 = *a1 == 0;
  }
  if ( !v7 )
    v7 = a2 == 0;
  if ( v7 )
    return 2;
  if ( a5 )
  {
    if ( *(uint *)(v6 + 264) )
    {
      v9 = &v12;
      v10 = 16;
      do
      {
        *(uint *)v9 = 0;
        *((uint *)v9 + 1) = 0;
        *((uint *)v9 + 2) = 0;
        *((uint *)v9 + 3) = 0;
        v11 = v9 + 16;
        *v11 = 0;
        v11[1] = 0;
        v11[2] = 0;
        v11[3] = 0;
        v9 = (char *)(v11 + 4);
        --v10;
      }
      while ( v10 );
      *(uint *)v9 = 0;
      a5(a1, &v12, a6);
      result = 0;
    }
    else if ( *(uint *)(v6 + 472) == 4 )
    {
      Function_21f5d68();
      result = 2;
    }
    else
    {
      result = Function_21f13c0(a1, a2);
    }
  }
  else
  {
    Function_21f5d68();
    result = 2;
  }
  return result;
}

//----- (021EB5D4) --------------------------------------------------------
int __fastcall Function_21eb5d4(int *a1)
{
  int v1;
  bool v2;

  v2 = a1 == 0;
  if ( a1 )
  {
    v1 = *a1;
    v2 = *a1 == 0;
  }
  if ( v2 )
    return 2;
  if ( *(uint *)(v1 + 264) )
    return 0;
  if ( *(uint *)(v1 + 472) != 4 )
    return Function_21f0b50();
  Function_21f5d68();
  return 2;
}

//----- (021EB624) --------------------------------------------------------
int __fastcall Function_21eb624(uint *a1, int a2, int a3, int a4)
{
  uint *v4;
  bool v5;
  uint *v6;
  int v7;
  int result;
  char *v9;
  int v10;
  char v11;
  int v12;

  v12 = a4;
  v6 = a1;
  v5 = a1 == 0;
  if ( a1 )
    v4 = (uint *)*a1;
  v7 = a2;
  if ( a1 )
    v5 = v4 == 0;
  if ( v5 )
    return 2;
  if ( v4[66] )
    return 0;
  if ( v4[118] == 4 )
  {
    Function_21f5d68();
    result = 2;
  }
  else if ( a3 )
  {
    Function_21f5820(&v11, a3, 1025);
    if ( v11 )
    {
      v9 = &v11;
      do
      {
        if ( *v9 == 92 )
          *v9 = 47;
        v10 = (v9++)[1];
      }
      while ( v10 );
    }
    Function_21ed5c4(v6, v4 + 125, "\\addbuddy\\");
    Function_21ed5c4(v6, v4 + 125, "\\sesskey\\");
    Function_21ed5f4(v6, v4 + 125, v4[102]);
    Function_21ed5c4(v6, v4 + 125, "\\newprofileid\\");
    Function_21ed5f4(v6, v4 + 125, v7);
    Function_21ed5c4(v6, v4 + 125, "\\reason\\");
    Function_21ed5c4(v6, v4 + 125, &v11);
    Function_21ed5c4(v6, v4 + 125, "\\final\\");
    result = 0;
  }
  else
  {
    Function_21f5d68();
    result = 2;
  }
  return result;
}

//----- (021EB798) --------------------------------------------------------
int __fastcall Function_21eb798(int *a1, int a2, int a3, int a4)
{
  bool v4;

  v4 = a1 == 0;
  if ( a1 )
  {
    a4 = *a1;
    v4 = *a1 == 0;
  }
  if ( v4 )
    return 2;
  if ( *(uint *)(a4 + 264) )
    return 0;
  if ( *(uint *)(a4 + 472) != 4 )
    return Function_21ed184();
  Function_21f5d68();
  return 2;
}

//----- (021EB7E8) --------------------------------------------------------
int __fastcall Function_21eb7e8(uint *a1, int a2, int a3, int a4)
{
  uint *v4;
  bool v5;
  uint *v6;
  int result;
  int v8;

  v8 = a4;
  v6 = a1;
  v5 = a1 == 0;
  if ( a1 )
  {
    v4 = (uint *)*a1;
    v5 = *a1 == 0;
  }
  if ( v5 )
    return 2;
  if ( v4[66] )
    return 0;
  if ( v4[118] == 4 )
  {
    Function_21f5d68();
    result = 2;
  }
  else if ( Function_21f32a8() )
  {
    --*(uint *)(v8 + 20);
    if ( !v4[64] && *(uint *)(v8 + 20) <= 0 )
    {
      Function_21d78b0(*(uint *)(v8 + 16));
      *(uint *)(v8 + 16) = 0;
      if ( Function_21f3490(v8) )
        Function_21f3318(v6, v8);
    }
    result = 0;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (021EB8A8) --------------------------------------------------------
int __fastcall Function_21eb8a8(int *a1, uint *a2, int a3)
{
  bool v3;
  int result;

  v3 = a1 == 0;
  if ( a1 )
  {
    a3 = *a1;
    v3 = *a1 == 0;
  }
  if ( v3 )
    return 2;
  result = 0;
  if ( *(uint *)(a3 + 264) )
    *a2 = 0;
  else
    *a2 = *(uint *)(a3 + 1072);
  return result;
}

//----- (021EB8D8) --------------------------------------------------------
int __fastcall Function_21eb8d8(uint *a1, int a2, int *a3, int a4)
{
  bool v4;
  uint *v5;
  int *v6;
  int result;
  int v8;
  int *v9;
  uint *v10;
  int v11;
  int v12;

  v5 = a1;
  v4 = a1 == 0;
  if ( a1 )
    a4 = *a1;
  v6 = a3;
  if ( a1 )
    v4 = a4 == 0;
  if ( v4 )
    return 2;
  if ( *(uint *)(a4 + 264) )
  {
    Call_FillMemWithValue(a3, 0, 0x210u);
    result = 0;
  }
  else if ( a3 )
  {
    if ( a2 >= 0 && a2 < *(uint *)(a4 + 1072) )
    {
      v8 = Function_21f3460();
      v9 = (int *)v8;
      if ( v8 )
      {
        v10 = *(uint **)(v8 + 8);
        if ( !v10 )
          Function_20d407c((int)"buddyStatus", (int)"gp.c", (int)"gpGetBuddyStatus");
        *v6 = *v9;
        v6[1] = v10[1];
        v11 = v10[2];
        if ( v11 )
          Function_21f5820(v6 + 2, v11, 256);
        else
          MEMORY[0] = 0;
        v12 = v10[3];
        if ( v12 )
          Function_21f5820(v6 + 66, v12, 256);
        else
          MEMORY[0] = 0;
        result = 0;
        v6[130] = v10[4];
        v6[131] = v10[5];
      }
      else
      {
        Function_21f5d68(v5, "Invalid index.");
        result = 2;
      }
    }
    else
    {
      Function_21f5d68(a1, "Invalid index.");
      result = 2;
    }
  }
  else
  {
    Function_21f5d68(a1, "Invalid status.");
    result = 2;
  }
  return result;
}

//----- (021EBA18) --------------------------------------------------------
int __fastcall Function_21eba18(uint *a1, int a2, uint *a3, int a4)
{
  uint *v4;
  bool v5;
  int result;
  uint *v7;
  bool v8;
  int v9;
  int v10;

  v10 = a4;
  v4 = a3;
  v5 = a1 == 0;
  if ( a1 )
  {
    a3 = (uint *)*a1;
    v5 = *a1 == 0;
  }
  if ( v5 )
    return 2;
  if ( a3[66] )
  {
    result = 0;
    *v4 = 0;
  }
  else
  {
    v7 = (uint *)Function_21f32a8();
    v8 = v7 == 0;
    if ( v7 )
    {
      v7 = *(uint **)(v9 + 8);
      v8 = v7 == 0;
    }
    if ( v8 )
      *v4 = -1;
    else
      *v4 = *v7;
    result = 0;
  }
  return result;
}

//----- (021EBA88) --------------------------------------------------------
int __fastcall Function_21eba88(int *a1, int a2, int a3, int a4)
{
  bool v4;
  int v6;
  bool v7;
  int v8;

  v8 = a4;
  v4 = a1 == 0;
  if ( a1 )
  {
    a3 = *a1;
    v4 = *a1 == 0;
  }
  if ( v4 )
    return 0;
  if ( *(uint *)(a3 + 264) )
    return 0;
  v6 = Function_21f32a8();
  v7 = v6 == 0;
  if ( v6 )
    v7 = *(uint *)(v8 + 8) == 0;
  return !v7;
}

//----- (021EBAD4) --------------------------------------------------------
int __fastcall Function_21ebad4(int *a1, int a2, int a3, int a4)
{
  bool v4;
  int result;

  v4 = a1 == 0;
  if ( a1 )
  {
    a4 = *a1;
    v4 = *a1 == 0;
  }
  if ( v4 )
    return 2;
  if ( *(uint *)(a4 + 264) )
    return 0;
  if ( *(uint *)(a4 + 472) == 4 )
  {
    Function_21f5d68(a1, "The connection has already been disconnected.");
    result = 2;
  }
  else
  {
    result = Function_21ed274();
    if ( !result )
      result = 0;
  }
  return result;
}

//----- (021EBB2C) --------------------------------------------------------
int __fastcall Function_21ebb2c(uint *a1, int a2, int a3, int a4)
{
  uint *v4;
  bool v5;
  uint *v6;
  int v7;
  int v8;
  int result;
  char *v10;
  int v11;
  char *v12;
  int v13;
  int v14[64];
  int v15[64];
  int v16;

  v16 = a4;
  v6 = a1;
  v5 = a1 == 0;
  if ( a1 )
    v4 = (uint *)*a1;
  v7 = a2;
  if ( a1 )
    v5 = v4 == 0;
  v8 = a4;
  if ( v5 )
    return 2;
  if ( v4[66] )
    return 0;
  if ( v4[118] == 4 )
  {
    Function_21f5d68(a1, "The connection has already been disconnected.");
    result = 2;
  }
  else if ( a3 )
  {
    if ( a4 )
    {
      Function_21f5820(v15, a3, 256);
      if ( LOBYTE(v15[0]) )
      {
        v10 = (char *)v15;
        do
        {
          if ( *v10 == 92 )
            *v10 = 47;
          v11 = (v10++)[1];
        }
        while ( v11 );
      }
      Function_21f5820(v14, v8, 256);
      if ( LOBYTE(v14[0]) )
      {
        v12 = (char *)v14;
        do
        {
          if ( *v12 == 92 )
            *v12 = 47;
          v13 = (v12++)[1];
        }
        while ( v13 );
      }
      if ( v7 != v4[133] || Function_20d8d14(v15, v4 + 134) || Function_20d8d14(v14, v4 + 198) )
      {
        v4[133] = v7;
        Function_21f5820(v4 + 134, v15, 256);
        Function_21f5820(v4 + 198, v14, 256);
        Function_21ed5c4(v6, v4 + 125, "\\status\\");
        Function_21ed5f4(v6, v4 + 125, v7);
        Function_21ed5c4(v6, v4 + 125, "\\sesskey\\");
        Function_21ed5f4(v6, v4 + 125, v4[102]);
        Function_21ed5c4(v6, v4 + 125, "\\statstring\\");
        Function_21ed5c4(v6, v4 + 125, v15);
        Function_21ed5c4(v6, v4 + 125, "\\locstring\\");
        Function_21ed5c4(v6, v4 + 125, v14);
        Function_21ed5c4(v6, v4 + 125, "\\final\\");
        result = 0;
      }
      else
      {
        result = 0;
      }
    }
    else
    {
      Function_21f5d68(a1, "Invalid locationString.");
      result = 2;
    }
  }
  else
  {
    Function_21f5d68(a1, "Invalid statusString.");
    result = 2;
  }
  return result;
}

//----- (021EBD58) --------------------------------------------------------
int __fastcall Function_21ebd58(int *a1, int a2, int a3)
{
  int v3;
  bool v4;
  int result;

  v4 = a1 == 0;
  if ( a1 )
    v3 = *a1;
  if ( a1 )
    v4 = v3 == 0;
  if ( v4 )
    return 2;
  if ( *(uint *)(v3 + 264) )
    return 0;
  if ( *(uint *)(v3 + 472) == 4 )
  {
    Function_21f5d68(a1, "The connection has already been disconnected.");
    result = 2;
  }
  else if ( a3 )
  {
    result = Function_21ed09c();
  }
  else
  {
    Function_21f5d68(a1, "Invalid message.");
    result = 2;
  }
  return result;
}

//----- (021EBDCC) --------------------------------------------------------
int __fastcall Function_21ebdcc(int **a1, int a2, int a3, int a4)
{
  int **v4;
  int v5;
  int v6;
  int *v7;
  int result;
  int v9;
  int v10;
  int v11;
  int v12;
  int *v13;
  int v14;

  v14 = a4;
  v4 = a1;
  *a1 = 0;
  v5 = a2;
  v6 = a3;
  v7 = (int *)Function_21d7880(1168);
  v13 = v7;
  if ( !v7 )
    return 1;
  Call_FillMemWithValue(v7, 0, 0x490u);
  *(uchar *)v13 = 0;
  v13[262] = 0;
  v13[64] = 1;
  v13[65] = 0;
  v13[66] = 0;
  v13[67] = 0;
  v13[283] = v5;
  v13[284] = v6;
  if ( Function_21f300c(&v13) )
  {
    v9 = 0;
    v13[264] = 0;
    do
    {
      v13[2 * v9 + 105] = 0;
      v10 = (int)&v13[2 * v9++];
      *(uint *)(v10 + 424) = 0;
    }
    while ( v9 < 6 );
    v13[280] = 0;
    Function_21f5894(&v13, "\n\n\n\n\n*************\ngpiInitialize\n");
    v11 = Function_21ebf70(&v13);
    if ( v11 )
    {
      Function_21ebf14(&v13);
      result = v11;
    }
    else
    {
      Function_21ea8a4();
      Function_21ea840();
      Function_20d76d4(v12);
      result = 0;
      *v4 = v13;
    }
  }
  else
  {
    Function_21d78b0((int)v13);
    v13 = 0;
    result = 1;
  }
  return result;
}

//----- (021EBF14) --------------------------------------------------------
int __fastcall Function_21ebf14(int *a1)
{
  int *v1;
  int v2;
  int result;

  v1 = a1;
  v2 = *a1;
  Function_21ef75c();
  Function_21d78b0(*(uint *)(v2 + 1120));
  *(uint *)(v2 + 1120) = 0;
  Function_21ea364(*(uint *)(v2 + 1064));
  Function_21d78b0(v2);
  result = 0;
  *v1 = 0;
  return result;
}

//----- (021EBF54) --------------------------------------------------------
int __fastcall Function_21ebf54(int a1, uint *a2)
{
  a2[2] = 0;
  a2[4] = 0;
  a2[5] = 0;
  a2[6] = 0;
  return 1;
}

//----- (021EBF70) --------------------------------------------------------
int __fastcall Function_21ebf70(uint *a1)
{
  uint *v1;
  int v2;
  int result;

  v1 = a1;
  v2 = *a1;
  *(uchar *)(v2 + 272) = 0;
  *(uchar *)(v2 + 303) = 0;
  *(uchar *)(v2 + 324) = 0;
  *(uint *)(v2 + 468) = -1;
  *(uint *)(v2 + 472) = 0;
  *(uint *)(v2 + 484) = 0;
  *(uint *)(v2 + 488) = 0;
  *(uint *)(v2 + 480) = 0;
  Function_21d78b0(*(uint *)(v2 + 476));
  *(uint *)(v2 + 476) = 0;
  *(uint *)(v2 + 496) = 0;
  Function_21d78b0(*(uint *)(v2 + 492));
  *(uint *)(v2 + 492) = 0;
  *(uint *)(v2 + 508) = 0;
  *(uint *)(v2 + 512) = 0;
  *(uint *)(v2 + 504) = 0;
  Function_21d78b0(*(uint *)(v2 + 500));
  *(uint *)(v2 + 500) = 0;
  *(uint *)(v2 + 1096) = 0;
  *(uint *)(v2 + 1100) = 0;
  *(uint *)(v2 + 1092) = 0;
  Function_21d78b0(*(uint *)(v2 + 1088));
  *(uint *)(v2 + 1088) = 0;
  *(uint *)(v2 + 1112) = 0;
  *(uint *)(v2 + 1116) = 0;
  *(uint *)(v2 + 1108) = 0;
  Function_21d78b0(*(uint *)(v2 + 1104));
  *(uint *)(v2 + 1104) = 0;
  *(uint *)(v2 + 516) = -1;
  *(uint *)(v2 + 524) = 2;
  while ( *(uint *)(v2 + 1060) )
    Function_21f1ba8(v1);
  *(uint *)(v2 + 1060) = 0;
  *(uint *)(v2 + 1072) = 0;
  Function_21f33f4(v1, Function_21ebf54);
  result = 0;
  *(uint *)(v2 + 412) = 0;
  *(uint *)(v2 + 416) = 0;
  *(uint *)(v2 + 408) = 0;
  *(uint *)(v2 + 528) = 0;
  *(uint *)(v2 + 1052) = 0;
  *(uint *)(v2 + 1076) = 0;
  *(uint *)(v2 + 532) = -1;
  *(uchar *)(v2 + 536) = 0;
  *(uchar *)(v2 + 792) = 0;
  return result;
}

//----- (021EC098) --------------------------------------------------------
int __fastcall Function_21ec098(uint *a1)
{
  uint *v1;
  int v2;
  int result;
  int v4;
  uchar *i;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  uchar *v13;
  int v14;
  int v15;
  int v16;
  int v17;
  int v18;
  int v19;
  uchar *v20;
  int v21;
  int v22;
  int v23;
  int v24;

  v1 = a1;
  v22 = 0;
  v2 = *a1;
  while ( 1 )
  {
    Function_21f053c(v1, v2 + 500);
    result = Function_21edb54(v1, *(uint *)(v2 + 468), v2 + 500, &v22, 1, "CM", v22);
    if ( result )
      return result;
    result = Function_21ed92c(v1, *(uint *)(v2 + 468), v2 + 476, &v23, &v22, "CM");
    if ( result )
      break;
    for ( i = Function_20d90b0(*(uchar **)(v2 + 476), "\\final\\", v4);
          i;
          i = Function_20d90b0(*(uchar **)(v2 + 476), "\\final\\", v19) )
    {
      *i = 0;
      v6 = *(uint *)(v2 + 476);
      Function_21f5894(v1, "CMD: %s\n");
      v7 = (int)&i[-*(uint *)(v2 + 476)];
      v23 = v7;
      if ( v7 > *(uint *)(v2 + 496) )
      {
        if ( v7 < 2048 )
          v7 = 2048;
        *(uint *)(v2 + 496) += v7;
        v8 = *(uint *)(v2 + 492);
        v9 = Function_21d7894();
        if ( !v9 )
        {
          Function_21f5d68(v1, "Out of memory.");
          return 1;
        }
        *(uint *)(v2 + 492) = v9;
      }
      memcpy(*(uchar **)(v2 + 492), *(char **)(v2 + 476), v23 + 1);
      v10 = *(uint *)(v2 + 484) - (uint)&i[-*(uint *)(v2 + 476) + 7];
      *(uint *)(v2 + 484) = v10;
      Function_20d50d8(*(char **)(v2 + 476), (char *)i + 7, v10 + 1);
      v11 = *(uint *)(v2 + 492);
      v13 = Function_20d90b0(*(uchar **)(v2 + 492), "\\id\\", v12);
      if ( v13 )
      {
        Function_20dae0c((int)(v13 + 4), v14, v15, v16);
        v18 = v17;
        if ( Function_21f1bf8(v1, &v24, v17) )
        {
          result = Function_21f1c80(v1, v24, *(uint *)(v2 + 492));
          if ( result )
            return result;
        }
        else
        {
          Function_21f5894(v1, "No matching operation found for id %d\n", v18);
        }
      }
      else
      {
        if ( Function_21f58a0(v1, v11, 1) )
          return 4;
        v20 = *(uchar **)(v2 + 492);
        if ( Function_20d8e28(*(uchar **)(v2 + 492), "\\bm\\", 4) )
        {
          if ( Function_20d8e28(v20, "\\ka\\", 10) )
            Function_21f5894(v1, "Received an unrecognized, unsolicited message.\n");
        }
        else
        {
          result = Function_21ec60c(v1, v20);
          if ( result )
            return result;
        }
      }
    }
    if ( v22 )
    {
      Function_21f5d44(v1, 7, "The server has closed the connection.");
      Function_21ede68(v1, 3, 1);
      return 0;
    }
    v21 = Function_21f1c44(v1);
    if ( v21 )
      Function_21ea898(0xAu);
    if ( !v21 )
      return 0;
  }
  if ( result == 3 )
  {
    Function_21f5d44(v1, 5, "There was an error reading from the server.");
    Function_21ede68(v1, 3, 1);
    result = 3;
  }
  return result;
}

//----- (021EC3B0) --------------------------------------------------------
int __fastcall Function_21ec3b0(uint *a1, int a2, int a3, int a4)
{
  uint *v4;
  uint *v5;
  int v6;
  int v7;
  BOOL v8;
  int v9;
  int result;
  int i;

  i = a4;
  v4 = a1;
  v5 = (uint *)*a1;
  v6 = a2;
  v7 = 0;
  if ( *(uint *)(*a1 + 472) > 4u )
    Function_20d407c(
      (int)"(iconnection->connectState == GPI_NOT_CONNECTED) || (iconnection->connectState == GPI_CONNECTING) || (iconnec"
           "tion->connectState == GPI_NEGOTIATING) || (iconnection->connectState == GPI_CONNECTED) || (iconnection->conne"
           "ctState == GPI_DISCONNECTED)",
      (int)"gpi.c",
      (int)"gpiProcess");
  if ( v5[118] == 1 )
  {
    do
    {
      v7 = Function_21ef5f4(v4);
      v8 = !v7 && v6 && v5[118] == 1;
      if ( v8 )
        Function_21ea898(0xAu);
    }
    while ( v8 );
    if ( v7 )
    {
      if ( Function_21f1bf8(v4, &i, 1) )
        *(uint *)(i + 28) = 4;
      else
        Function_20d407c((int)"0", (int)"gpi.c", (int)"gpiProcess");
    }
  }
  if ( (uint)(v5[118] - 2) <= 1 )
  {
    if ( !v7 )
      v7 = Function_21ec098(v4);
    if ( !v7 )
      v7 = Function_21f28c0(v4);
  }
  if ( !v7 )
    v7 = Function_21f54a4(v4);
  v9 = v5[265];
  for ( i = v9; i; v9 = i )
  {
    if ( *(uint *)(v9 + 28) )
    {
      Function_21f1708(v4);
      i = *(uint *)(i + 32);
      Function_21f1ba8(v4);
    }
    else
    {
      i = *(uint *)(v9 + 32);
    }
  }
  result = Function_21ee1f8(v4, v6);
  if ( !result )
  {
    if ( v5[263] )
      Function_21ef75c(v4, 0);
    result = v7;
  }
  return result;
}

//----- (021EC564) --------------------------------------------------------
int __fastcall Function_21ec564(uint *a1, uint *a2)
{
  uint *v2;
  int v3;
  uint *v4;

  v2 = a1;
  v3 = *a1;
  v4 = a2;
  Function_21ed5c4(a1, *a1 + 500, "\\authadd\\");
  Function_21ed5c4(v2, v3 + 500, "\\sesskey\\");
  Function_21ed5f4(v2, v3 + 500, *(uint *)(v3 + 408));
  Function_21ed5c4(v2, v3 + 500, "\\fromprofileid\\");
  Function_21ed5f4(v2, v3 + 500, *v4);
  Function_21ed5c4(v2, v3 + 500, "\\sig\\");
  Function_21ed5c4(v2, v3 + 500, v4[4]);
  Function_21ed5c4(v2, v3 + 500, "\\final\\");
  return 0;
}

//----- (021EC60C) --------------------------------------------------------
int __fastcall Function_21ec60c(uint *a1, int a2, int a3, int a4)
{
  int v4;
  uint *v5;
  uint *v6;
  int v7;
  int v8;
  int v9;
  int result;
  int v11;
  int v12;
  int v13;
  int v14;
  int v15;
  int v16;
  int v17;
  int v18;
  int v19;
  int v20;
  int v21;
  int v22;
  uint *v23;
  int v24;
  uchar *v25;
  int v26;
  int v27;
  uchar *v28;
  uchar *v29;
  int v30;
  uint *v31;
  int v32;
  int v33;
  uchar *v34;
  int v35;
  int v36;
  int v37;
  uint *v38;
  int v39;
  int v40;
  int v41;
  int v42;
  uchar *v43;
  uchar *v44;
  int v45;
  int v46;
  int v47;
  uint v48;
  int v49;
  int v50;
  int v51;
  int v52;
  int v53;
  int v54;
  int v55;
  int v56;
  int v57;
  int v58;
  uchar v59;
  uchar v60;
  int v61;
  int v62;
  int v63;
  uint v64;
  int v65;
  int v66;
  int v67;
  int v68;
  short v69;
  uint *v70;
  int v71;
  uchar *v72;
  int v73;
  int v74;
  int v75;
  int v76;
  int v77;
  uchar *v78;
  int v79;
  int v80;
  int v81;
  int v82;
  int v83;
  int v84;
  int v85;
  int v86;
  int v87;
  int v88;
  char v89;
  int v90[64];
  int v91[1024];
  int v92;

  v92 = a4;
  v4 = a2;
  v5 = a1;
  v6 = (uint *)*a1;
  if ( !Function_21f5978(a2, "\\bm\\", v91, 4096) )
  {
    Function_21f5d44(v5, 1, "Unexpected data was received from the server.");
    Function_21ede68(v5, 3, 1);
    return 3;
  }
  Function_20dae0c((int)v91, v7, v8, v9);
  v12 = v11;
  if ( !Function_21f5978(v4, "\\f\\", v91, 4096) )
  {
    Function_21f5d44(v5, 1, "Unexpected data was received from the server.");
    Function_21ede68(v5, 3, 1);
    return 3;
  }
  Function_20dae0c((int)v91, v13, v14, v15);
  v17 = v16;
  if ( Function_21f5978(v4, "\\date\\", v91, 4096) )
    Function_20dae0c((int)v91, v18, v19, v20);
  else
    Function_21eaf48(0);
  v22 = v21;
  if ( v12 <= 100 )
  {
    if ( v12 < 100 )
    {
      if ( v12 <= 2 && v12 >= 1 )
      {
        if ( v12 == 1 )
        {
          v87 = v6[111];
          v88 = v6[112];
          if ( v87 )
          {
            v23 = (uint *)Function_21d7880(12);
            if ( !v23 )
            {
              Function_21f5d68(v5, "Out of memory.");
              return 1;
            }
            if ( !Function_21f5978(v4, "\\msg\\", v91, 4096) )
            {
              Function_21f5d44(v5, 1, "Unexpected data was received from the server.");
              Function_21ede68(v5, 3, 1);
              return 3;
            }
            v24 = strlen((char *)v91);
            v25 = (uchar *)Function_21d7880(v24 + 1);
            v23[2] = v25;
            if ( !v25 )
            {
              Function_21f5d68(v5, "Out of memory.");
              return 1;
            }
            Function_20d8b7c(v25, v91);
            *v23 = v17;
            v23[1] = v22;
            result = Function_21edf5c(v5, v87, v88, v23, 0, 2);
            if ( result )
              return result;
          }
        }
        else if ( v12 == 2 )
        {
          v26 = Function_21f31c4(v5, v17);
          if ( !v26 )
          {
            Function_21f5d68(v5, "Out of memory.");
            return 1;
          }
          if ( !Function_21f5978(v4, "\\msg\\", v91, 4096) )
          {
            Function_21f5d44(v5, 1, "Unexpected data was received from the server.");
            Function_21ede68(v5, 3, 1);
            return 3;
          }
          v28 = Function_20d90b0((uchar *)v91, "|signed|", v27);
          v29 = v28;
          if ( !v28 )
          {
            Function_21f5d44(v5, 1, "Unexpected data was received from the server.");
            Function_21ede68(v5, 3, 1);
            return 3;
          }
          *v28 = 0;
          if ( strlen((char *)v28 + 8) != 32 )
          {
            Function_21f5d44(v5, 1, "Unexpected data was received from the server.");
            Function_21ede68(v5, 3, 1);
            return 3;
          }
          Function_21d78b0(*(uint *)(v26 + 16));
          *(uint *)(v26 + 16) = 0;
          *(uint *)(v26 + 16) = Function_21ea8ac((char *)v29 + 8);
          ++*(uint *)(v26 + 20);
          v81 = v6[107];
          v82 = v6[108];
          if ( v81 )
          {
            v30 = Function_21d7880(1036);
            v31 = (uint *)v30;
            if ( !v30 )
            {
              Function_21f5d68(v5, "Out of memory.");
              return 1;
            }
            Function_21f5820(v30 + 8, v91, 1025);
            *v31 = v17;
            v31[1] = v22;
            result = Function_21edf5c(v5, v81, v82, v31, 0, 6);
            if ( result )
              return result;
          }
        }
      }
    }
    else
    {
      v32 = Function_21f31c4(v5, v17);
      v33 = v32;
      if ( !v32 )
      {
        Function_21f5d68(v5, "Out of memory.");
        return 1;
      }
      if ( !*(uint *)(v32 + 8) )
      {
        v34 = (uchar *)Function_21d7880(24);
        *(uint *)(v33 + 8) = v34;
        if ( !v34 )
        {
          Function_21f5d68(v5, "Out of memory.");
          return 1;
        }
        v35 = 6;
        do
        {
          *v34 = 0;
          v34[1] = 0;
          v34[2] = 0;
          v34[3] = 0;
          v34 += 4;
          --v35;
        }
        while ( v35 );
        v36 = v6[268];
        v6[268] = v36 + 1;
        **(uint **)(v33 + 8) = v36;
      }
      v37 = v4;
      v38 = *(uint **)(v33 + 8);
      if ( !Function_21f5978(v37, "\\msg\\", v91, 4096) )
      {
        Function_21f5d44(v5, 1, "Unexpected data was received from the server.");
        Function_21ede68(v5, 3, 1);
        return 3;
      }
      if ( !Function_21f5978(v91, "|s|", &v89, 16) )
      {
        Function_21f5d44(v5, 1, "Unexpected data was received from the server.");
        Function_21ede68(v5, 3, 1);
        return 3;
      }
      Function_20dae0c((int)&v89, v39, v40, v41);
      v38[1] = v42;
      Function_21d78b0(v38[2]);
      v38[2] = 0;
      if ( !Function_21f5978(v91, "|ss|", v90, 256) )
        LOBYTE(v90[0]) = 0;
      v43 = Function_21ea8ac((char *)v90);
      v38[2] = v43;
      if ( !v43 )
      {
        Function_21f5d68(v5, "Out of memory.");
        return 1;
      }
      Function_21d78b0(v38[3]);
      v38[3] = 0;
      if ( !Function_21f5978(v91, "|ls|", v90, 256) )
        LOBYTE(v90[0]) = 0;
      v44 = Function_21ea8ac((char *)v90);
      v38[3] = v44;
      if ( !v44 )
      {
        Function_21f5d68(v5, "Out of memory.");
        return 1;
      }
      if ( Function_21f5978(v91, "|ip|", &v89, 16) )
      {
        Function_20dae0c((int)&v89, v45, v46, v47);
        v50 = v49;
        Function_20dae0c((int)&v89, v51, v52, v53);
        v55 = v54;
        Function_20dae0c((int)&v89, v56, v57, v58);
        v60 = v59;
        Function_20dae0c((int)&v89, v61, v62, v63);
        v48 = (v50 << 24) & 0xFF000000 | (v55 << 8) & 0xFF0000 | v60 | (v64 >> 8) & 0xFF00;
      }
      else
      {
        v48 = 0;
      }
      v38[4] = v48;
      if ( Function_21f5978(v91, "|p|", &v89, 16) )
      {
        Function_20dae0c((int)&v89, v65, v66, v67);
        v68 = HIBYTE(v69) | (v69 << 8) & 0xFF00;
      }
      else
      {
        v68 = 0;
      }
      v38[5] = v68;
      v83 = v6[109];
      v84 = v6[110];
      if ( v6[109] )
      {
        v70 = (uint *)Function_21d7880(12);
        if ( !v70 )
        {
          Function_21f5d68(v5, "Out of memory.");
          return 1;
        }
        *v70 = v17;
        v70[2] = *v38;
        v70[1] = v22;
        result = Function_21edf5c(v5, v83, v84, v70, 0, 5);
        if ( result )
          return result;
      }
    }
    return 0;
  }
  if ( v12 > 102 || v12 < 101 )
    return 0;
  if ( v12 != 101 )
  {
    if ( v12 == 102 )
    {
      if ( !Function_21f5978(v4, "\\msg\\", v91, 4096) )
      {
        Function_21f5d44(v5, 1, "Unexpected data was received from the server.");
        Function_21ede68(v5, 3, 1);
        return 3;
      }
      Function_21ed09c(v5, v17, 103, "1");
    }
    return 0;
  }
  if ( !Function_21f5978(v4, "\\msg\\", v91, 4096) )
  {
    Function_21f5d44(v5, 1, "Unexpected data was received from the server.");
    Function_21ede68(v5, 3, 1);
    return 3;
  }
  v72 = Function_20d90b0((uchar *)v91, "|p|", v71);
  if ( !v72 )
  {
    Function_21f5d44(v5, 1, "Unexpected data was received from the server.");
    Function_21ede68(v5, 3, 1);
    return 3;
  }
  if ( !v72[3] )
  {
    Function_21f5d44(v5, 1, "Unexpected data was received from the server.");
    Function_21ede68(v5, 3, 1);
    return 3;
  }
  Function_20dae0c((int)(v72 + 3), (char)v72[3], v73, v74);
  v76 = v75;
  v78 = Function_20d90b0((uchar *)v91, "|l|", v77);
  if ( v78 )
    Function_21f5820(v90, v78 + 3, 256);
  else
    LOBYTE(v90[0]) = 0;
  v85 = v6[113];
  v86 = v6[114];
  if ( !v85 )
    return 0;
  v79 = Function_21d7880(264);
  v80 = v79;
  if ( !v79 )
  {
    Function_21f5d68(v5, "Out of memory.");
    return 1;
  }
  *(uint *)v79 = v17;
  *(uint *)(v79 + 4) = v76;
  Function_20d8b7c((uchar *)(v79 + 8), v90);
  result = Function_21edf5c(v5, v85, v86, v80, 0, 0);
  if ( !result )
    return 0;
  return result;
}

//----- (021ECFC0) --------------------------------------------------------
int __fastcall Function_21ecfc0(uint *a1, int a2, int a3, int a4)
{
  uint *v4;
  int v5;
  int v6;
  int v7;
  char v9;
  int v10;

  v10 = a4;
  v4 = a1;
  v5 = a3;
  v6 = a2;
  v7 = *a1;
  Function_21f5820(&v9, a4, 3501);
  Function_21ed5c4(v4, v7 + 500, "\\bm\\");
  Function_21ed5f4(v4, v7 + 500, v5);
  Function_21ed5c4(v4, v7 + 500, "\\sesskey\\");
  Function_21ed5f4(v4, v7 + 500, *(uint *)(v7 + 408));
  Function_21ed5c4(v4, v7 + 500, "\\t\\");
  Function_21ed5f4(v4, v7 + 500, v6);
  Function_21ed5c4(v4, v7 + 500, "\\msg\\");
  Function_21ed5c4(v4, v7 + 500, &v9);
  Function_21ed5c4(v4, v7 + 500, "\\final\\");
  return 0;
}

//----- (021ED09C) --------------------------------------------------------
int __fastcall Function_21ed09c(uint *a1, int a2, int a3, int a4)
{
  uint *v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  bool v10;
  int result;
  int v12;
  int v13;
  int v14;

  v14 = a4;
  v4 = a1;
  v5 = a2;
  v6 = a3;
  v7 = a4;
  v8 = Function_21f29b0();
  if ( v8 )
    goto LABEL_16;
  v9 = Function_21f32a8(v4, v5, &v13);
  v10 = v9 == 0;
  if ( v9 )
  {
    v9 = *(uint *)(v13 + 8);
    v10 = v9 == 0;
  }
  if ( !v10 )
    v10 = *(uint *)(v9 + 20) == 0;
  if ( v10 )
    return Function_21ecfc0(v4, v5, v6, v7);
  v12 = Function_21f2a04(v4, v5, 1);
  v8 = v12;
  if ( !v12 )
    return 1;
  if ( !*(uint *)(v13 + 24) )
  {
    result = Function_21f2a84(v4, v12);
    if ( result )
      return result;
    goto LABEL_16;
  }
  result = Function_21f2ae8(v4, v12);
  if ( !result )
  {
LABEL_16:
    result = Function_21f2c74(v4, v8, v6, v7);
    if ( !result )
      result = 0;
  }
  return result;
}

//----- (021ED184) --------------------------------------------------------
int __fastcall Function_21ed184(uint *a1, int a2, int a3, uint *a4)
{
  uint *v4;
  int v5;
  int result;
  uint *v7;

  v7 = a4;
  v4 = a1;
  v5 = *a1;
  if ( Function_21f32a8(a1, a2, &v7) )
  {
    if ( v7[4] )
    {
      result = Function_21ec564(v4, v7);
      if ( !result )
      {
        --v7[5];
        if ( !*(uint *)(v5 + 256) && v7[5] <= 0 )
        {
          Function_21d78b0(v7[4]);
          v7[4] = 0;
          if ( Function_21f3490(v7) )
            Function_21f3318(v4, v7);
        }
        result = 0;
      }
    }
    else
    {
      Function_21f5d68(v4, "Invalid profile.");
      result = 2;
    }
  }
  else
  {
    Function_21f5d68(v4, "Invalid profile.");
    result = 2;
  }
  return result;
}

//----- (021ED250) --------------------------------------------------------
int __fastcall Function_21ed250(int a1, int a2, int a3)
{
  uint *v3;

  v3 = *(uint **)(a2 + 8);
  if ( v3 && *v3 > a3 )
    --*v3;
  return 1;
}

//----- (021ED274) --------------------------------------------------------
int __fastcall Function_21ed274(uint *a1, int a2, int a3, int a4)
{
  uint *v4;
  int v5;
  int result;
  uint *v7;
  int v8;
  uint *v9;
  int v10;

  v10 = a4;
  v4 = a1;
  v5 = *a1;
  if ( Function_21f32a8(a1, a2, &v9) )
  {
    Function_21ed5c4(v4, v5 + 500, "\\delbuddy\\");
    Function_21ed5c4(v4, v5 + 500, "\\sesskey\\");
    Function_21ed5f4(v4, v5 + 500, *(uint *)(v5 + 408));
    Function_21ed5c4(v4, v5 + 500, "\\delprofileid\\");
    Function_21ed5f4(v4, v5 + 500, *v9);
    Function_21ed5c4(v4, v5 + 500, "\\final\\");
    v7 = (uint *)v9[2];
    if ( v7 )
    {
      if ( *v7 < 0 )
        Function_20d407c((int)"index >= 0", (int)"gpiBuddy.c", (int)"gpiDeleteBuddy");
      Function_21d78b0(*(uint *)(v9[2] + 8));
      *(uint *)(v9[2] + 8) = 0;
      Function_21d78b0(*(uint *)(v9[2] + 12));
      *(uint *)(v9[2] + 12) = 0;
      Function_21d78b0(v9[2]);
      v9[2] = 0;
      if ( Function_21f3490(v9) )
        Function_21f3318(v4, v9);
      v8 = *(uint *)(v5 + 1072) - 1;
      *(uint *)(v5 + 1072) = v8;
      if ( v8 < 0 )
        Function_20d407c((int)"iconnection->profileList.numBuddies >= 0", (int)"gpiBuddy.c", (int)"gpiDeleteBuddy");
      Function_21f33f4(v4, Function_21ed250);
    }
    result = 0;
  }
  else
  {
    Function_21f5d68(v4, "Invalid profile.");
    result = 2;
  }
  return result;
}

//----- (021ED420) --------------------------------------------------------
int __fastcall Function_21ed420(int a1, int *a2, char a3)
{
  int *v3;
  int v4;
  char v5;
  int v6;
  int v7;
  int v8;
  int result;

  v3 = a2;
  v4 = a1;
  v5 = a3;
  if ( !a2 )
    Function_20d407c((int)"outputBuffer != NULL", (int)"gpiBuffer.c", (int)"gpiAppendCharToBuffer");
  v6 = v3[2];
  v7 = *v3;
  v8 = v3[1];
  if ( v8 != v6 || (v8 += 2048, (v7 = Function_21d7894()) != 0) )
  {
    *(uchar *)(v7 + v6) = v5;
    *(uchar *)(v7 + v6 + 1) = 0;
    ++v3[2];
    *v3 = v7;
    v3[1] = v8;
    result = 0;
  }
  else
  {
    Function_21f5d68(v4, "Out of memory.");
    result = 1;
  }
  return result;
}

//----- (021ED4B8) --------------------------------------------------------
int __fastcall Function_21ed4b8(int a1, int *a2, char *a3, int a4)
{
  char *v4;
  int v5;
  int *v6;
  int v7;
  int result;
  int v9;
  int v10;
  int v11;
  int v12;

  v4 = a3;
  v5 = a1;
  v6 = a2;
  v7 = a4;
  if ( !a3 )
    Function_20d407c((int)"string != NULL", (int)"gpiBuffer.c", (int)"gpiAppendStringToBufferLen");
  if ( v7 < 0 )
    Function_20d407c((int)"stringLen >= 0", (int)"gpiBuffer.c", (int)"gpiAppendStringToBufferLen");
  if ( !v6 )
    Function_20d407c((int)"outputBuffer != NULL", (int)"gpiBuffer.c", (int)"gpiAppendStringToBufferLen");
  if ( !v4 )
    return 0;
  v9 = v6[2];
  v10 = v6[1];
  v11 = *v6;
  if ( v10 - v9 >= v7 || (v7 >= 2048 ? (v12 = v7) : (v12 = 2048), v10 += v12, (v11 = Function_21d7894()) != 0) )
  {
    memcpy((uchar *)(v11 + v9), v4, v7);
    result = 0;
    *(uchar *)(v11 + v9 + v7) = 0;
    v6[2] += v7;
    v6[1] = v10;
    *v6 = v11;
  }
  else
  {
    Function_21f5d68(v5, "Out of memory.");
    result = 1;
  }
  return result;
}

//----- (021ED5C4) --------------------------------------------------------
int __fastcall Function_21ed5c4(int a1, int *a2, char *a3)
{
  char *v3;
  int v4;
  int *v5;
  int v6;

  v3 = a3;
  v4 = a1;
  v5 = a2;
  v6 = strlen(a3);
  return Function_21ed4b8(v4, v5, v3, v6);
}

//----- (021ED5F4) --------------------------------------------------------
int __fastcall Function_21ed5f4(int a1, int *a2, int a3, int a4)
{
  int *v4;
  int v5;
  char v7;
  int v8;

  v8 = a4;
  v4 = a2;
  v5 = a1;
  Function_20d7510((int)&v7, "%d");
  return Function_21ed5c4(v5, v4, &v7);
}

//----- (021ED62C) --------------------------------------------------------
int __fastcall Function_21ed62c(int a1, int a2, int a3, int a4, uint *a5, int *a6, char *a7)
{
  int v7;
  int v8;
  int v9;
  bool v10;
  int v11;
  bool v12;

  v7 = a1;
  v8 = Function_21eae48();
  if ( v8 != -1 )
  {
    if ( v8 )
    {
      *a6 = v8;
      *a5 = 0;
    }
    else
    {
      Function_21f5894(v7, "SENDXXXX(%s): Connection closed\n", a7);
      *a6 = 0;
      *a5 = 1;
    }
    return 0;
  }
  v9 = Function_21eaf38();
  v10 = v9 == -6;
  if ( v9 != -6 )
    v10 = v9 == -26;
  if ( !v10 )
    v10 = v9 == -76;
  if ( v10 )
  {
    *a6 = 0;
    *a5 = 0;
    return 0;
  }
  v11 = *a7;
  v12 = v11 == 80;
  if ( v11 == 80 )
    v12 = a7[1] == 82;
  if ( !v12 )
  {
    Function_21f5d44(v7, 5, "There was an error sending on a socket.");
    Function_21ede68(v7, 3, 0);
  }
  return 3;
}

//----- (021ED71C) --------------------------------------------------------
int Function_21ed71c(int a1, int *a2, ...)
{
  int *v2;
  int v3;
  int result;
  int v5;
  char v6;
  int varg_r0;
  int varg_r2;
  va_list varg_r2a;
  va_list varg_r3;

  va_start(varg_r3, a2);
  va_start(varg_r2a, a2);
  varg_r2 = va_arg(varg_r3, uint);
  varg_r0 = a1;
  v2 = a2;
  v3 = a1;
  if ( !a2[10] )
    Function_20d407c((int)"peer->outputBuffer.buffer != NULL", (int)"gpiBuffer.c", (int)"gpiSendOrBufferChar");
  if ( v2[12] != v2[13] || Function_21e9bbc(v2[14]) )
    goto LABEL_11;
  result = Function_21ed62c(v3, v2[2], (int)varg_r2a, 1, &v6, &v5, "PT");
  if ( result )
    return result;
  if ( !v5 )
LABEL_11:
    result = Function_21ed420(v3, v2 + 10, varg_r2);
  else
    result = 0;
  return result;
}

//----- (021ED7FC) --------------------------------------------------------
int __fastcall Function_21ed7fc(int a1, int *a2, int a3, int a4)
{
  int *v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int result;
  bool v10;
  int v11;
  char v12;

  v4 = a2;
  v5 = a1;
  v6 = a3;
  v7 = a4;
  if ( !a2[10] )
    Function_20d407c((int)"peer->outputBuffer.buffer != NULL", (int)"gpiBuffer.c", (int)"gpiSendOrBufferStringLen");
  v8 = 0;
  if ( !v7 )
    return 0;
  if ( v4[12] != v4[13] || Function_21e9bbc(v4[14]) )
  {
LABEL_14:
    if ( !v7 || (result = Function_21ed4b8(v5, v4 + 10, (char *)(v6 + v8), v7)) == 0 )
      result = 0;
  }
  else
  {
    while ( 1 )
    {
      result = Function_21ed62c(v5, v4[2], v6 + v8, v7, &v12, &v11, "PT");
      if ( result )
        break;
      if ( v11 )
      {
        v7 -= v11;
        v8 += v11;
      }
      v10 = v11 == 0;
      if ( v11 )
        v10 = v7 == 0;
      if ( v10 )
        goto LABEL_14;
    }
  }
  return result;
}

//----- (021ED8FC) --------------------------------------------------------
int __fastcall Function_21ed8fc(int a1, int *a2, char *a3)
{
  int v3;
  int v4;
  int *v5;
  int v6;

  v3 = (int)a3;
  v4 = a1;
  v5 = a2;
  v6 = strlen(a3);
  return Function_21ed7fc(v4, v5, v3, v6);
}

//----- (021ED92C) --------------------------------------------------------
int __fastcall Function_21ed92c(int a1, int a2, int *a3, int *a4, int *a5, int a6)
{
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v12;
  int v13;
  int v14;
  bool v15;
  int v16;
  int *v17;
  int *v18;

  v16 = a1;
  v17 = a3;
  v18 = a4;
  if ( a2 == -1 )
    Function_20d407c((int)"sock != INVALID_SOCKET", (int)"gpiBuffer.c", (int)"gpiRecvToBuffer");
  if ( !v17 )
    Function_20d407c((int)"inputBuffer != NULL", (int)"gpiBuffer.c", (int)"gpiRecvToBuffer");
  if ( !v18 )
    Function_20d407c((int)"bytesRead != NULL", (int)"gpiBuffer.c", (int)"gpiRecvToBuffer");
  if ( !a5 )
    Function_20d407c((int)"connClosed != NULL", (int)"gpiBuffer.c", (int)"gpiRecvToBuffer");
  v6 = v17[2];
  v7 = *v17;
  v8 = v17[1];
  v9 = 0;
  v10 = 0;
  do
  {
    if ( v6 + 2048 > v8 )
    {
      v8 = v6 + 2048;
      v7 = Function_21d7894();
      if ( !v7 )
      {
        Function_21f5d68(v16, "Out of memory.");
        return 1;
      }
    }
    v12 = Function_21eae04();
    v13 = v12;
    if ( v12 == -1 )
    {
      v14 = Function_21eaf38();
      v15 = v14 == -6;
      if ( v14 != -6 )
        v15 = v14 == -26;
      if ( !v15 )
        v15 = v14 == -76;
      if ( !v15 )
      {
        Function_21f5d68(v16, "There was an error reading from a socket.");
        return 3;
      }
    }
    else if ( v12 )
    {
      v6 += v12;
      v9 += v12;
    }
    else
    {
      v10 = 1;
      Function_21f5894(v16, "RECVXXXX(%s): Connection closed\n", a6);
    }
    *(uchar *)(v7 + v6) = 0;
  }
  while ( v13 != -1 && !v10 && v9 < 0x20000 );
  if ( v9 )
    Function_21f5894(v16, "RECVTOTL(%s): %d\n", a6, v9, v16);
  *v17 = v7;
  v17[2] = v6;
  v17[1] = v8;
  *v18 = v9;
  *a5 = v10;
  return 0;
}

//----- (021EDB54) --------------------------------------------------------
int __fastcall Function_21edb54(int a1, int a2, int a3, uint *a4, int a5, char *a6)
{
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  char *v11;
  int v12;
  int result;
  bool v14;
  int v15;
  uint *v16;
  int v17;
  int v18;

  v6 = a1;
  v15 = a3;
  v7 = a2;
  v16 = a4;
  if ( !a3 )
    Function_20d407c((int)"outputBuffer != NULL", (int)"gpiBuffer.c", (int)"gpiSendFromBuffer");
  v8 = 0;
  v9 = *(uint *)(v15 + 8);
  v10 = *(uint *)(v15 + 12);
  v11 = *(char **)v15;
  v12 = v9 - v10;
  if ( v9 == v10 )
    return 0;
  while ( 1 )
  {
    result = Function_21ed62c(v6, v7, (int)&v11[v10 + v8], v12, &v18, &v17, a6);
    if ( result )
      break;
    if ( v17 )
    {
      v12 -= v17;
      v8 += v17;
    }
    v14 = v17 == 0;
    if ( v17 )
      v14 = v12 == 0;
    if ( v14 )
    {
      if ( a5 )
      {
        if ( v8 > 0 )
        {
          Function_20d50d8(v11, &v11[v8], v12 + 1);
          v9 -= v8;
        }
      }
      else
      {
        v10 += v8;
      }
      if ( v9 < 0 )
        Function_20d407c((int)"len >= 0", (int)"gpiBuffer.c", (int)"gpiSendFromBuffer");
      if ( v10 < 0 )
        Function_20d407c((int)"pos >= 0", (int)"gpiBuffer.c", (int)"gpiSendFromBuffer");
      if ( v10 > v9 )
        Function_20d407c((int)"pos <= len", (int)"gpiBuffer.c", (int)"gpiSendFromBuffer");
      *(uint *)(v15 + 8) = v9;
      *(uint *)(v15 + 12) = v10;
      if ( v16 )
        *v16 = v18;
      return 0;
    }
  }
  return result;
}

//----- (021EDCD4) --------------------------------------------------------
int __fastcall Function_21edcd4(int a1, uint *a2, uint *a3, int a4, uint *a5)
{
  uint *v5;
  int result;
  uint *v7;
  uint *v8;
  char *v9;
  char *v10;
  int v11;
  int v12;
  int v13;
  int v14;
  int v15;
  int v16;
  int v17;
  int v18;
  int v19;
  char v20;
  int v21;

  v21 = a4;
  v5 = a3;
  result = 0;
  v7 = a2;
  *a3 = 0;
  v8 = (uint *)a4;
  if ( a2[2] >= 5 )
  {
    v9 = strchr((char *)*a2, 10);
    v10 = v9;
    if ( v9 )
    {
      if ( Function_20d8e28((uchar *)v9 - 5, "\\msg\\", 5) )
        return 3;
      *v10 = 0;
      if ( !Function_21f5978(*v7, "\\m\\", &v20, 16) )
        return 3;
      Function_20dae0c((int)&v20, v11, v12, v13);
      *v8 = v14;
      if ( !Function_21f5978(*v7, "\\len\\", &v20, 16) )
        return 3;
      Function_20dae0c((int)&v20, v15, v16, v17);
      v19 = v18 + 1;
      if ( v7[2] <= (int)&v10[v18 + 1 - *v7] )
      {
        *v10 = 10;
      }
      else
      {
        if ( v10[v19] )
          return 3;
        *v5 = v10 + 1;
        *a5 = v18;
        v7[3] = &v10[v19 - *v7 + 1];
      }
    }
    result = 0;
  }
  return result;
}

//----- (021EDE10) --------------------------------------------------------
int __fastcall Function_21ede10(int a1, char *a2)
{
  bool v2;
  char **v3;
  int result;
  char *v5;

  v3 = (char **)a2;
  v2 = a2 == 0;
  if ( a2 )
    v2 = *(uint *)a2 == 0;
  if ( !v2 )
  {
    a2 = (char *)*((uint *)a2 + 3);
    v2 = a2 == 0;
  }
  if ( v2 )
    return 0;
  v5 = v3[2];
  v3[2] = (char *)(v5 - a2);
  if ( v5 != a2 )
    Function_20d50d8(*v3, &v3[3][(uint)*v3], v5 - a2);
  result = 0;
  v3[2][(uint)*v3] = 0;
  v3[3] = 0;
  return result;
}

//----- (021EDE68) --------------------------------------------------------
int __fastcall Function_21ede68(uint *a1, int a2, int a3)
{
  uint *v3;
  uint *v4;
  int v5;
  int v6;
  bool v7;
  int result;
  uint *v9;
  int v10;
  int v11;

  v3 = a1;
  v4 = (uint *)*a1;
  v5 = a2;
  v6 = a3;
  if ( !*a1 )
    Function_20d407c((int)"iconnection != NULL", (int)"gpiCallback.c", (int)"gpiCallErrorCallback");
  if ( !v5 )
    Function_20d407c((int)"result != GP_NO_ERROR", (int)"gpiCallback.c", (int)"gpiCallErrorCallback");
  v7 = v6 == 1;
  if ( v6 != 1 )
    v7 = v6 == 0;
  if ( !v7 )
    Function_20d407c(
      (int)"(fatal == GP_FATAL) || (fatal == GP_NON_FATAL)",
      (int)"gpiCallback.c",
      (int)"gpiCallErrorCallback");
  if ( v6 == 1 )
    v4[263] = 1;
  result = v4[106];
  v10 = v4[105];
  v11 = v4[106];
  if ( v10 )
  {
    v9 = (uint *)Function_21d7880(16);
    if ( v9 )
    {
      *v9 = v5;
      v9[3] = v6;
      v9[1] = v4[262];
      v9[2] = v4;
    }
    result = Function_21edf5c(v3, v10, v11, v9, 0, 1);
  }
  return result;
}

//----- (021EDF5C) --------------------------------------------------------
int __fastcall Function_21edf5c(uint *a1, int a2, int a3, int a4, int a5, int a6)
{
  uint *v6;
  int v7;
  int v8;
  uint *v9;
  int result;
  int v11;
  int v12;
  int varg_r1;
  int varg_r2;

  varg_r1 = a2;
  varg_r2 = a3;
  v6 = a1;
  v7 = a4;
  v8 = *a1;
  v9 = (uint *)Function_21d7880(24);
  if ( v9 )
  {
    *v9 = varg_r1;
    v11 = a5;
    v9[1] = varg_r2;
    v9[2] = v7;
    if ( a5 )
      v11 = *(uint *)(a5 + 24);
    if ( !a5 )
      v11 = 0;
    v9[4] = v11;
    v9[3] = a6;
    v9[5] = 0;
    if ( !*(uint *)(v8 + 1080) )
      *(uint *)(v8 + 1080) = v9;
    v12 = *(uint *)(v8 + 1084);
    if ( v12 )
      *(uint *)(v12 + 20) = v9;
    *(uint *)(v8 + 1084) = v9;
    result = 0;
  }
  else
  {
    Function_21f5d68(v6, "Out of memory.");
    result = 1;
  }
  return result;
}

//----- (021EE000) --------------------------------------------------------
int __fastcall Function_21ee000(int a1, uint *a2)
{
  int v2;
  int v3;
  int v4;
  uint *v5;
  int i;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  int j;

  v2 = (int)a2;
  v3 = a1;
  if ( !*a2 )
    Function_20d407c((int)"data->callback.callback != NULL", (int)"gpiCallback.c", (int)"gpiCallCallback");
  if ( !*(uint *)(v2 + 8) )
    Function_20d407c((int)"data->arg != NULL", (int)"gpiCallback.c", (int)"gpiCallCallback");
  (*(void (__fastcall **)(int, uint, uint))v2)(v3, *(uint *)(v2 + 8), *(uint *)(v2 + 4));
  v4 = *(uint *)(v2 + 12);
  switch ( v4 )
  {
    case 2:
      Function_21d78b0(*(uint *)(*(uint *)(v2 + 8) + 8));
      *(uint *)(*(uint *)(v2 + 8) + 8) = 0;
      break;
    case 3:
      v5 = *(uint **)(v2 + 8);
      for ( i = 0; i < v5[14]; ++i )
      {
        Function_21d78b0(*(uint *)(v5[15] + 4 * i));
        *(uint *)(v5[15] + 4 * i) = 0;
        Function_21d78b0(*(uint *)(v5[16] + 4 * i));
        *(uint *)(v5[16] + 4 * i) = 0;
      }
      Function_21d78b0(v5[15]);
      v5[15] = 0;
      Function_21d78b0(v5[16]);
      v5[16] = 0;
      break;
    case 4:
      v7 = *(uint *)(v2 + 8);
      Function_21d78b0(*(uint *)(v7 + 12));
      *(uint *)(v7 + 12) = 0;
      break;
    case 7:
      v8 = *(uint *)(v2 + 8);
      v9 = *(uint *)(v8 + 16);
      if ( v9 )
      {
        Function_21d78b0(v9);
        *(uint *)(v8 + 16) = 0;
      }
      break;
    case 8:
      v10 = *(uint *)(v2 + 8);
      v11 = *(uint *)(v10 + 8);
      if ( v11 )
      {
        Function_21d78b0(v11);
        *(uint *)(v10 + 8) = 0;
      }
      break;
    case 9:
      v12 = *(uint *)(v2 + 8);
      for ( j = 0; j < *(uint *)(v12 + 4); ++j )
      {
        Function_21d78b0(*(uint *)(*(uint *)(v12 + 8) + 4 * j));
        *(uint *)(*(uint *)(v12 + 8) + 4 * j) = 0;
      }
      Function_21d78b0(*(uint *)(v12 + 8));
      *(uint *)(v12 + 8) = 0;
      break;
  }
  Function_21d78b0(*(uint *)(v2 + 8));
  *(uint *)(v2 + 8) = 0;
  return Function_21d78b0(v2);
}

//----- (021EE1F8) --------------------------------------------------------
int __fastcall Function_21ee1f8(int *a1, int a2)
{
  int v2;
  int v3;
  int v4;
  uint *v5;
  uint *v6;
  uint *v7;
  uint *v8;
  int v9;
  uint *v10;
  bool v11;
  int result;
  uint *i;
  uint *v14;

  v2 = (int)a1;
  v3 = a2;
  v4 = *a1;
  if ( a2 )
  {
    v5 = *(uint **)(v4 + 1080);
    v6 = *(uint **)(v4 + 1084);
    v7 = 0;
    *(uint *)(v4 + 1080) = 0;
    v8 = v5;
    *(uint *)(v4 + 1084) = 0;
    if ( v5 )
    {
      do
      {
        v9 = v8[4];
        v10 = (uint *)v8[5];
        v11 = v9 == v3;
        if ( v9 != v3 )
          v11 = v8[3] == 1;
        if ( v11 )
        {
          if ( v7 )
            v7[5] = v10;
          else
            v5 = (uint *)v8[5];
          if ( v6 == v8 )
            v6 = v7;
          Function_21ee000(v2, v8);
        }
        else
        {
          v7 = v8;
        }
        v8 = v10;
      }
      while ( v10 );
    }
    if ( *(uint *)(v4 + 1080) )
      *(uint *)(*(uint *)(v4 + 1084) + 20) = v5;
    else
      *(uint *)(v4 + 1080) = v5;
    *(uint *)(v4 + 1084) = v6;
    result = 0;
  }
  else
  {
    for ( i = *(uint **)(v4 + 1080); i; i = *(uint **)(v4 + 1080) )
    {
      *(uint *)(v4 + 1080) = 0;
      *(uint *)(v4 + 1084) = 0;
      if ( i )
      {
        do
        {
          v14 = (uint *)i[5];
          Function_21ee000(v2, i);
          i = v14;
        }
        while ( v14 );
      }
    }
    result = 0;
  }
  return result;
}

//----- (021EE2E0) --------------------------------------------------------
int __fastcall Function_21ee2e0(int a1, int a2)
{
  int v2;
  int v3;
  int i;
  int result;

  v2 = a2;
  v3 = a1;
  for ( i = 0; i < v2; ++i )
    *(uchar *)(v3 + i) = aAbcdefghijklmn[Function_20d76a0() % 0x3Eu];
  result = 0;
  *(uchar *)(v3 + i) = 0;
  return result;
}

//----- (021EE348) --------------------------------------------------------
int __fastcall Function_21ee348(uint *a1, int a2, int a3, int a4)
{
  uint *v4;
  int *v5;
  int v6;
  int v7;
  int result;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;
  bool v14;
  int v15;
  int v16;
  int v17;
  int v18;

  v18 = a4;
  v4 = a1;
  v5 = (int *)*a1;
  v6 = a2;
  if ( *(uint *)(*a1 + 268) )
  {
    v5[129] = -1;
    v5[130] = 0;
  }
  else
  {
    v7 = Function_21eacdc();
    v5[129] = v7;
    if ( v7 == -1 )
    {
      Function_21f5d44(v4, 5, "There was an error creating a socket.");
      Function_21ede68(v4, 3, 1);
      return 3;
    }
    if ( !Function_21ea924(v7, 0) )
    {
      Function_21f5d44(v4, 5, "There was an error making a socket non-blocking.");
      Function_21ede68(v4, 3, 1);
      return 3;
    }
    v16 = 0;
    v17 = 0;
    BYTE1(v16) = 2;
    if ( Function_21ead18(v5[129], (int)&v16, 8) == -1 )
    {
      Function_21f5d44(v4, 5, "There was an error binding a socket.");
      Function_21ede68(v4, 3, 1);
      return 3;
    }
    v9 = v5[129];
    if ( Function_21eadc4() == -1 )
    {
      Function_21f5d44(v4, 5, "There was an error listening on a socket.");
      Function_21ede68(v4, 3, 1);
      return 3;
    }
    v15 = 8;
    if ( Function_21eaef0(v5[129], (uchar *)&v16, &v15) == -1 )
    {
      Function_21f5d44(v4, 5, "There was an error getting a socket's addres.");
      Function_21ede68(v4, 3, 1);
      return 3;
    }
    v5[130] = HIWORD(v16);
  }
  v10 = Function_21eacdc();
  v5[117] = v10;
  if ( v10 == -1 )
  {
    Function_21f5d44(v4, 5, "There was an error creating a socket.");
    Function_21ede68(v4, 3, 1);
    result = 3;
  }
  else if ( Function_21ea924(v10, 0) )
  {
    v11 = Function_220854c("gpcm.gs.nintendowifi.net");
    if ( v11 )
    {
      v16 = 0;
      v17 = 0;
      BYTE1(v16) = 2;
      v17 = ***(uint ***)(v11 + 12);
      if ( !v17 )
        Function_20d407c((int)"address.sin_addr.s_addr != 0", (int)"gpiConnect.c", (int)"gpiStartConnect");
      HIWORD(v16) = -13196;
      if ( Function_21ead78(v5[117], (char *)&v16, 8) != -1 )
        goto LABEL_32;
      v12 = v5[117];
      v13 = Function_21eaf38();
      v14 = v13 == -6;
      if ( v13 != -6 )
        v14 = v13 == -26;
      if ( !v14 )
        v14 = v13 == -76;
      if ( v14 )
      {
LABEL_32:
        *(uint *)(v6 + 20) = 1;
        v5[118] = 1;
        result = 0;
      }
      else
      {
        Function_21f5d44(v4, 5, "There was an error connecting a socket.");
        Function_21ede68(v4, 3, 1);
        result = 3;
      }
    }
    else
    {
      Function_21f5d44(v4, 5, "Could not resolve connection mananger host name.");
      Function_21ede68(v4, 3, 1);
      result = 3;
    }
  }
  else
  {
    Function_21f5d44(v4, 5, "There was an error making a socket non-blocking.");
    Function_21ede68(v4, 3, 1);
    result = 3;
  }
  return result;
}

//----- (021EE6BC) --------------------------------------------------------
int __fastcall Function_21ee6bc(uint *a1, int a2, int a3, int a4, int a5, uchar *a6, uchar *a7, int a8, int a9, int a10, int a11, int a12, int a13)
{
  uint *v13;
  int v14;
  int v15;
  int v16;
  int v17;
  int result;
  int *v19;
  int *v20;
  bool v21;
  int v22;
  int v23;
  int v24;
  int v25;
  int v26;
  uint *v27;

  v13 = a1;
  v14 = *a1;
  v15 = a2;
  v16 = a3;
  v17 = a4;
  if ( *(uint *)(*a1 + 472) != 4 || (result = Function_21ebf70(a1)) == 0 )
  {
    if ( *(uint *)(v14 + 472) )
    {
      Function_21f5d68(v13, "Invalid connection.");
      return 2;
    }
    if ( a9 )
    {
      if ( a9 != 1 )
      {
        Function_21f5d68(v13, "Invalid firewall.");
        return 2;
      }
      *(uint *)(v14 + 268) = 1;
    }
    else
    {
      *(uint *)(v14 + 268) = 0;
    }
    *(uint *)(v14 + 268) = 1;
    Function_21f5820(v14 + 272, v15, 31);
    Function_21f5820(v14 + 303, v16, 21);
    Function_21f5820(v14 + 324, v17, 51);
    Function_21f5820(v14 + 375, a5, 31);
    Function_21ea8e0((uchar *)(v14 + 324));
    v19 = (int *)Function_21d7880(776);
    v20 = v19;
    if ( v19 )
    {
      Call_FillMemWithValue(v19, 0, 0x308u);
      v20[193] = a10;
      v21 = *a6 == 0;
      if ( *a6 )
        v21 = *a7 == 0;
      if ( !v21 )
      {
        Function_21f5820((char *)v20 + 194, a6, 256);
        Function_21f5820((char *)v20 + 450, a7, 256);
      }
      if ( a8 )
        Function_21f5820((char *)v20 + 706, a8, 65);
      result = Function_21f1a54(v13, 0, v20, &v27, a11, a12, a13);
      if ( !result )
      {
        v26 = Function_21ee348(v13, (int)v27, v22, v23);
        if ( v26 )
        {
          v27[7] = v26;
          Function_21f1708(v13);
          Function_21ef75c(v13, 0);
          result = v26;
        }
        else if ( !v27[2] || (result = Function_21ec3b0(v13, v27[6], v24, v25)) == 0 )
        {
          result = 0;
        }
      }
    }
    else
    {
      Function_21f5d68(v13, "Out of memory.");
      result = 1;
    }
  }
  return result;
}

//----- (021EE900) --------------------------------------------------------
int __fastcall Function_21ee900(int *a1, char *a2, int a3, int a4)
{
  char *v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  char *v10;
  int v11;
  int v12;
  int v13;
  int v14;
  int v15;
  int v16;
  int v17;
  char *v19;
  uint *v20;
  char v21;
  char v22;
  char v23;
  int v24;

  v24 = a4;
  v4 = a2;
  v5 = (int)a1;
  v6 = *a1;
  Function_21ee2e0((int)(a2 + 128), 32);
  if ( v4[450] )
    v7 = (int)(v4 + 194);
  else
    v7 = v6 + 119;
  v8 = v7 + 256;
  v9 = strlen((char *)(v7 + 256));
  Function_21ea7f4(v8, v9, (int)(v4 + 161));
  if ( v4[194] )
  {
    v10 = v4 + 194;
  }
  else if ( *(uchar *)(v6 + 303) )
  {
    v10 = (char *)(v6 + 303);
  }
  else
  {
    Function_20d7510((int)&v22, "%s@%s");
    v10 = &v22;
  }
  v19 = v10;
  Function_20d7510((int)&v23, "%s%s%s%s%s%s");
  v11 = strlen(&v23);
  Function_21ea7f4((int)&v23, v11, (int)&v21);
  if ( *(uint *)(v6 + 256) )
  {
    Function_21f338c(v5, v6 + 272, v6 + 324, &v20, v19, v4 + 128, v4, v4 + 161);
    if ( v20 )
    {
      *(uint *)(v6 + 412) = v20[1];
      *(uint *)(v6 + 416) = *v20;
    }
  }
  Function_21ed5c4(v5, (int *)(v6 + 500), "\\login\\");
  Function_21ed5c4(v5, (int *)(v6 + 500), "\\challenge\\");
  Function_21ed5c4(v5, (int *)(v6 + 500), v4 + 128);
  if ( v4[194] )
  {
    Function_21ed5c4(v5, (int *)(v6 + 500), "\\authtoken\\");
    Function_21ed5c4(v5, (int *)(v6 + 500), v4 + 194);
  }
  else if ( *(uchar *)(v6 + 303) )
  {
    Function_21ed5c4(v5, (int *)(v6 + 500), "\\uniquenick\\");
    Function_21ed5c4(v5, (int *)(v6 + 500), (char *)(v6 + 303));
  }
  else
  {
    Function_21ed5c4(v5, (int *)(v6 + 500), "\\user\\");
    Function_21ed5c4(v5, (int *)(v6 + 500), (char *)(v6 + 272));
    Function_21ed5c4(v5, (int *)(v6 + 500), "@");
    Function_21ed5c4(v5, (int *)(v6 + 500), (char *)(v6 + 324));
  }
  if ( *(uint *)(v6 + 412) )
  {
    Function_21ed5c4(v5, (int *)(v6 + 500), "\\userid\\");
    Function_21ed5f4(v5, (int *)(v6 + 500), *(uint *)(v6 + 412), v12);
  }
  if ( *(uint *)(v6 + 416) )
  {
    Function_21ed5c4(v5, (int *)(v6 + 500), "\\profileid\\");
    Function_21ed5f4(v5, (int *)(v6 + 500), *(uint *)(v6 + 416), v13);
  }
  Function_21ed5c4(v5, (int *)(v6 + 500), "\\response\\");
  Function_21ed5c4(v5, (int *)(v6 + 500), &v21);
  if ( *(uint *)(v6 + 268) == 1 )
    Function_21ed5c4(v5, (int *)(v6 + 500), "\\firewall\\1");
  Function_21ed5c4(v5, (int *)(v6 + 500), "\\port\\");
  v14 = *(uint *)(v6 + 520) & 0xFFFF;
  Function_21ed5f4(
    v5,
    (int *)(v6 + 500),
    (short)(BYTE1(v14) | ((ushort)*(uint *)(v6 + 520) << 8) & 0xFF00),
    v15);
  Function_21ed5c4(v5, (int *)(v6 + 500), "\\productid\\");
  Function_21ed5f4(v5, (int *)(v6 + 500), *(uint *)(v6 + 1132), v16);
  Function_21ed5c4(v5, (int *)(v6 + 500), "\\gamename\\");
  Function_21ed5c4(v5, (int *)(v6 + 500), (char *)&dword_221A400[699]);
  Function_21ed5c4(v5, (int *)(v6 + 500), "\\namespaceid\\");
  Function_21ed5f4(v5, (int *)(v6 + 500), *(uint *)(v6 + 1136), v17);
  Function_21ed5c4(v5, (int *)(v6 + 500), "\\id\\1");
  Function_21ed5c4(v5, (int *)(v6 + 500), "\\final\\");
  return 0;
}

//----- (021EECA4) --------------------------------------------------------
int __fastcall Function_21eeca4(int a1, int a2, int a3, int a4)
{
  int v4;
  int v5;
  int v6;
  uint v7;
  int v8;
  uint v9;
  char *v10;
  char v11;
  int v12;
  int v13;
  int v14;
  uint v15;
  int v16;
  uint v17;
  char *v18;
  char v19;
  int v20;
  char v22;
  char v23[31];
  char v24;
  char v25[66];
  int v26;

  v26 = a4;
  v4 = a1;
  v5 = *(uint *)a1;
  v6 = a2;
  v7 = strlen((char *)(*(uint *)a1 + 375));
  Function_21eb018(2037412711, v8);
  v9 = 0;
  if ( v7 )
  {
    v10 = v23;
    do
    {
      v11 = Function_21eb034(0, 255);
      v12 = v5 + v9++ + 256;
      *v10++ = *(uchar *)(v12 + 119) ^ v11;
    }
    while ( v9 < v7 );
  }
  v23[v9] = 0;
  Function_4_21eb0f0((int)v23, &v22, v7, 1);
  Function_21ed5c4(v4, (int *)(v5 + 500), "\\newuser\\");
  Function_21ed5c4(v4, (int *)(v5 + 500), "\\email\\");
  Function_21ed5c4(v4, (int *)(v5 + 500), (char *)(v5 + 324));
  Function_21ed5c4(v4, (int *)(v5 + 500), "\\nick\\");
  Function_21ed5c4(v4, (int *)(v5 + 500), (char *)(v5 + 272));
  Function_21ed5c4(v4, (int *)(v5 + 500), "\\passwordenc\\");
  Function_21ed5c4(v4, (int *)(v5 + 500), &v22);
  Function_21ed5c4(v4, (int *)(v5 + 500), "\\productid\\");
  Function_21ed5f4(v4, (int *)(v5 + 500), *(uint *)(v5 + 1132), v13);
  Function_21ed5c4(v4, (int *)(v5 + 500), "\\gamename\\");
  Function_21ed5c4(v4, (int *)(v5 + 500), (char *)&dword_221A400[699]);
  Function_21ed5c4(v4, (int *)(v5 + 500), "\\namespaceid\\");
  Function_21ed5f4(v4, (int *)(v5 + 500), *(uint *)(v5 + 1136), v14);
  Function_21ed5c4(v4, (int *)(v5 + 500), "\\uniquenick\\");
  Function_21ed5c4(v4, (int *)(v5 + 500), (char *)(v5 + 303));
  if ( *(uchar *)(v6 + 706) )
  {
    v15 = strlen((char *)(v6 + 706));
    Function_21eb018(2037412711, v16);
    v17 = 0;
    if ( v15 )
    {
      v18 = v25;
      do
      {
        v19 = Function_21eb034(0, 255);
        v20 = v6 + v17++ + 512;
        *v18++ = *(uchar *)(v20 + 194) ^ v19;
      }
      while ( v17 < v15 );
    }
    v25[v17] = 0;
    Function_4_21eb0f0((int)v25, &v24, v15, 1);
    Function_21ed5c4(v4, (int *)(v5 + 500), "\\cdkeyenc\\");
    Function_21ed5c4(v4, (int *)(v5 + 500), &v24);
  }
  Function_21ed5c4(v4, (int *)(v5 + 500), "\\id\\1");
  Function_21ed5c4(v4, (int *)(v5 + 500), "\\final\\");
  return 0;
}

//----- (021EEF30) --------------------------------------------------------
int __fastcall Function_21eef30(int *a1, uint *a2, uchar *a3)
{
  uchar *v3;
  int *v4;
  uint *v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int result;
  int v13;
  int v14;
  int v15;
  int v16;
  int v17;
  int v18;
  int v19;
  int v20;
  int v21;
  int v22;
  int v23;
  int v24;
  int v25;
  int v26;
  int v27;
  int v28;
  int v29;
  int v30;
  int v31;
  int v32;
  int v33;
  int v34;
  int v35;
  int v36;
  int v37;
  int v38;
  int v39;
  bool v40;
  int v41;
  uint *v42;
  int *v43;
  int *v44;
  int v45;
  int v46;
  char v47;
  char v48;
  char v49;
  char v50;

  v3 = a3;
  v4 = a1;
  v5 = a2;
  v6 = *a1;
  if ( Function_21f58a0(a1, a3, 0) )
  {
    v7 = *(uint *)(v6 + 1048);
    if ( v7 == 262 && *(uint *)(v6 + 416) )
    {
      Function_21f32e4(v4);
      *(uint *)(v6 + 412) = 0;
      *(uint *)(v6 + 416) = 0;
    }
    else if ( v7 == 513 && Function_21f5978(v3, "\\pid\\", &v50, 512) )
    {
      Function_20dae0c((int)&v50, v8, v7, v9);
      *(uint *)(v6 + 416) = v10;
    }
    v40 = Function_20d90b0(v3, "\\fatal\\", v7) == 0;
    v11 = *(uint *)(v6 + 1048);
    if ( v40 )
    {
      Function_21f5d44(v4, v11, v6);
      Function_21ede68(v4, 4, 0);
    }
    else
    {
      Function_21f5d44(v4, v11, v6);
      Function_21ede68(v4, 4, 1);
    }
    return 4;
  }
  v13 = v5[5];
  v14 = v5[1];
  switch ( v13 )
  {
    case 1:
      if ( Function_20d8e28(v3, "\\lc\\1", 5) )
      {
        Function_21f5d44(v4, 1, "Unexpected data was received from the server.");
        Function_21ede68(v4, 3, 1);
        return 3;
      }
      if ( !Function_21f5978(v3, "\\challenge\\", v14, 128) )
      {
        Function_21f5d44(v4, 1, "Unexpected data was received from the server.");
        Function_21ede68(v4, 3, 1);
        return 3;
      }
      if ( *(uint *)(v14 + 772) )
      {
        result = Function_21eeca4((int)v4, v14, v15, v16);
        if ( result )
          return result;
        v5[5] = 3;
      }
      else
      {
        result = Function_21ee900(v4, (char *)v14, v15, v16);
        if ( result )
          return result;
        v5[5] = 2;
      }
      return 0;
    case 2:
      if ( Function_20d8e28(v3, "\\lc\\2", 5) )
      {
        Function_21f5d44(v4, 1, "Unexpected data was received from the server.");
        Function_21ede68(v4, 3, 1);
        return 3;
      }
      if ( !Function_21f5978(v3, "\\sesskey\\", &v50, 512) )
      {
        Function_21f5d44(v4, 1, "Unexepected data was received from the server.");
        Function_21ede68(v4, 3, 1);
        return 3;
      }
      Function_20dae0c((int)&v50, v27, v28, v29);
      *(uint *)(v6 + 408) = v30;
      if ( !Function_21f5978(v3, "\\userid\\", &v50, 512) )
      {
        Function_21f5d44(v4, 1, "Unexepected data was received from the server.");
        Function_21ede68(v4, 3, 1);
        return 3;
      }
      Function_20dae0c((int)&v50, v31, v32, v33);
      *(uint *)(v6 + 412) = v34;
      if ( !Function_21f5978(v3, "\\profileid\\", &v50, 512) )
      {
        Function_21f5d44(v4, 1, "Unexepected data was received from the server.");
        Function_21ede68(v4, 3, 1);
        return 3;
      }
      Function_20dae0c((int)&v50, v35, v36, v37);
      *(uint *)(v6 + 416) = v38;
      v39 = Function_21f5978(v3, "\\uniquenick\\", &v47, 21);
      v40 = v39 == 0;
      if ( !v39 )
        LOBYTE(v39) = 0;
      if ( v40 )
        v47 = v39;
      if ( !Function_21f5978(v3, "\\lt\\", v6 + 1140, 25) )
        *(uchar *)(v6 + 1140) = 0;
      if ( !*(uchar *)(v14 + 194) && !*(uchar *)(v6 + 303) )
        Function_20d7510((int)&v49, "%s@%s");
      Function_20d7510((int)&v50, "%s%s%s%s%s%s");
      v41 = strlen(&v50);
      Function_21ea7f4((int)&v50, v41, (int)&v48);
      if ( !Function_21f5978(v3, "\\proof\\", &v50, 512) )
      {
        Function_21f5d44(v4, 1, "Unexepected data was received from the server.");
        Function_21ede68(v4, 3, 1);
        return 3;
      }
      if ( Function_20d5190((uchar *)&v48, (uchar *)&v50, 32) )
      {
        Function_21f5d44(v4, 264, "Could not authenticate server.");
        Function_21ede68(v4, 3, 1);
        return 3;
      }
      if ( *(uint *)(v6 + 256) )
      {
        v42 = (uint *)Function_21f31c4(v4, *(uint *)(v6 + 416));
        *v42 = *(uint *)(v6 + 416);
        v42[1] = *(uint *)(v6 + 412);
      }
      *(uint *)(v6 + 472) = 3;
      v45 = v5[3];
      v46 = v5[4];
      if ( !v45 )
        goto LABEL_64;
      v43 = (int *)Function_21d7880(32);
      v44 = v43;
      if ( !v43 )
      {
        Function_21f5d68(v4, "Out of memory.");
        return 1;
      }
      Call_FillMemWithValue(v43, 0, 0x20u);
      v44[1] = *(uint *)(v6 + 416);
      *v44 = 0;
      Function_21f5820(v44 + 2, &v47, 21);
      result = Function_21edf5c(v4, v45, v46, (int)v44, (int)v5, 0);
      if ( !result )
      {
LABEL_64:
        Function_21f1ba8(v4);
        return 0;
      }
      break;
    case 3:
      if ( Function_20d8e28(v3, "\\nur\\", 5) )
      {
        Function_21f5d44(v4, 1, "Unexpected data was received from the server.");
        Function_21ede68(v4, 3, 1);
        return 3;
      }
      if ( !Function_21f5978(v3, "\\userid\\", &v50, 512) )
      {
        Function_21f5d44(v4, 1, "Unexepected data was received from the server.");
        Function_21ede68(v4, 3, 1);
        return 3;
      }
      Function_20dae0c((int)&v50, v17, v18, v19);
      *(uint *)(v6 + 412) = v20;
      if ( !Function_21f5978(v3, "\\profileid\\", &v50, 512) )
      {
        Function_21f5d44(v4, 1, "Unexepected data was received from the server.");
        Function_21ede68(v4, 3, 1);
        return 3;
      }
      Function_20dae0c((int)&v50, v21, v22, v23);
      *(uint *)(v6 + 416) = v24;
      result = Function_21ee900(v4, (char *)v14, v25, v26);
      if ( !result )
      {
        v5[5] = 2;
        return 0;
      }
      break;
    default:
      return 0;
  }
  return result;
}

//----- (021EF5F4) --------------------------------------------------------
int __fastcall Function_21ef5f4(uint *a1, int a2, int a3, int a4)
{
  uint *v4;
  int v5;
  int v6;
  int result;
  int v8;

  v8 = a4;
  v4 = a1;
  v5 = *a1;
  v6 = *(uint *)(*a1 + 468);
  result = Function_21f5a80();
  if ( !result )
  {
    if ( v8 == 4 )
    {
      Function_21f5d44(v4, 263, "The server has refused the connection.");
      Function_21ede68(v4, 4, 1);
      result = 4;
    }
    else if ( v8 )
    {
      if ( v8 != 3 )
        Function_20d407c((int)"state == GPI_CONNECTED", (int)"gpiConnect.c", (int)"gpiCheckConnect");
      *(uint *)(v5 + 472) = 2;
      result = 0;
    }
    else
    {
      result = 0;
    }
  }
  return result;
}

//----- (021EF698) --------------------------------------------------------
int __fastcall Function_21ef698(uint *a1, int *a2)
{
  int *v2;
  int v3;
  uint *v4;
  int v5;
  int v6;
  bool v7;

  v2 = a2;
  v3 = a2[2];
  v4 = a1;
  v5 = *a1;
  if ( v3 && !*(uint *)(v5 + 260) )
  {
    Function_21d78b0(*(uint *)(v3 + 8));
    *(uint *)(v2[2] + 8) = 0;
    Function_21d78b0(*(uint *)(v2[2] + 12));
    *(uint *)(v2[2] + 12) = 0;
    Function_21d78b0(v2[2]);
    v2[2] = 0;
  }
  Function_21d78b0(v2[4]);
  v2[4] = 0;
  Function_21d78b0(v2[6]);
  v2[6] = 0;
  v2[5] = 0;
  if ( v2[3] )
  {
    v6 = *(uint *)(v5 + 260);
    v7 = v6 == 1;
    if ( v6 == 1 )
      v7 = v2[2] == 0;
    if ( !v7 )
      return 1;
  }
  Function_21f3318(v4, v2);
  return 0;
}

//----- (021EF75C) --------------------------------------------------------
int __fastcall Function_21ef75c(int result, int a2, int a3, int a4)
{
  int v4;
  int *v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  char v12;
  int v13;

  v13 = a4;
  v4 = result;
  v5 = *(int **)result;
  v6 = *(uint *)(*(uint *)result + 472);
  if ( v6 != 4 )
  {
    if ( v6 )
    {
      if ( a2 && v6 == 3 )
      {
        Function_21ed5c4(result, v5 + 125, "\\logout\\\\sesskey\\");
        Function_21ed5f4(v4, v5 + 125, v5[102], v7);
        Function_21ed5c4(v4, v5 + 125, "\\final\\");
      }
      Function_21edb54(v4, v5[117], (int)(v5 + 125), &v12, 1, "CM");
      if ( v5[117] != -1 )
      {
        Function_21ead04();
        v8 = v5[117];
        Function_21eacf0();
        v5[117] = -1;
      }
      if ( v5[129] != -1 )
      {
        Function_21ead04();
        v9 = v5[129];
        Function_21eacf0();
        v5[129] = -1;
      }
      v5[118] = 4;
      v5[103] = 0;
      v5[104] = 0;
    }
    Function_21d78b0(v5[119]);
    v5[119] = 0;
    Function_21d78b0(v5[123]);
    v5[123] = 0;
    Function_21d78b0(v5[125]);
    v5[125] = 0;
    Function_21d78b0(v5[272]);
    v5[272] = 0;
    Function_21d78b0(v5[276]);
    v5[276] = 0;
    while ( v5[265] )
      Function_21f1ba8(v4);
    v5[265] = 0;
    v10 = v5[269];
    while ( v10 )
    {
      v11 = v10;
      v10 = *(uint *)(v10 + 60);
      Function_21f26cc(v4, v11);
    }
    v5[269] = 0;
    do
      result = Function_21f33f4(v4, Function_21ef698);
    while ( !result );
  }
  return result;
}

//----- (021EF924) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x21EF990 for case 0"

//----- (021EF95C) --------------------------------------------------------
void Function_21ef95c()
{
  JUMPOUT(&loc_21EF990);
}

//----- (021EF960) --------------------------------------------------------
void Function_21ef960()
{
  JUMPOUT(&loc_21EF9A0);
}

//----- (021EF964) --------------------------------------------------------
void Function_21ef964()
{
  JUMPOUT(&loc_21EF9C0);
}

//----- (021EF968) --------------------------------------------------------
void Function_21ef968()
{
  JUMPOUT(&loc_21EF9A0);
}

//----- (021EF96C) --------------------------------------------------------
void Function_21ef96c()
{
  JUMPOUT(&loc_21EF9B0);
}

//----- (021EF970) --------------------------------------------------------
void Function_21ef970()
{
  JUMPOUT(&loc_21EF9A0);
}

//----- (021EF974) --------------------------------------------------------
void Function_21ef974()
{
  JUMPOUT(&loc_21EF9B0);
}

//----- (021EF978) --------------------------------------------------------
void Function_21ef978()
{
  JUMPOUT(&loc_21EF9A0);
}

//----- (021EF97C) --------------------------------------------------------
void Function_21ef97c()
{
  JUMPOUT(&loc_21EF9A0);
}

//----- (021EF980) --------------------------------------------------------
void Function_21ef980()
{
  JUMPOUT(&loc_21EF9B0);
}

//----- (021EF984) --------------------------------------------------------
void Function_21ef984()
{
  JUMPOUT(&loc_21EF9A0);
}

//----- (021EF988) --------------------------------------------------------
void Function_21ef988()
{
  JUMPOUT(&loc_21EF9B0);
}

//----- (021EF98C) --------------------------------------------------------
void __fastcall Function_21ef98c(int a1, int a2, int a3)
{
  int v3;

  if ( a1 > 31 )
    JUMPOUT(__CS__, v3);
  if ( a3 < 1900 )
    JUMPOUT(__CS__, v3);
  if ( a3 > 2079 )
    JUMPOUT(__CS__, v3);
  if ( a3 == 2079 )
  {
    if ( a2 > 6 )
      JUMPOUT(__CS__, v3);
    if ( a2 == 6 && a1 > 6 )
      JUMPOUT(__CS__, v3);
  }
  JUMPOUT(__CS__, v3);
}

//----- (021EFA84) --------------------------------------------------------
int __fastcall Function_21efa84(int a1, int a2, uint *a3, uint *a4, uint *a5)
{
  int v5;
  int v6;
  int v7;
  int v8;
  uint *v9;
  uint *v10;
  int result;

  v5 = a2 >> 24;
  v6 = BYTE2(a2);
  v7 = a1;
  v8 = (ushort)a2;
  v9 = a3;
  v10 = a4;
  if ( !Function_21ef924((a2 >> 24) & 0xFF, v6, (ushort)a2) )
    Function_20d407c((int)"gpiIsValidDate(d, m, y)", (int)"gpiInfo.c", (int)"gpiIntToDate");
  if ( Function_21ef924((uchar)v5, v6, v8) )
  {
    *v9 = (uchar)v5;
    *v10 = v6;
    *a5 = v8;
    result = 0;
  }
  else
  {
    Function_21f5d68(v7, "Invalid date.");
    result = 2;
  }
  return result;
}

//----- (021EFB2C) --------------------------------------------------------
int __fastcall Function_21efb2c(uint *a1, int a2)
{
  uint *v2;
  int v3;
  int v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int result;

  v2 = a1;
  v3 = a2;
  if ( *a1 )
    Function_21f5820(a2 + 8, *a1, 31);
  else
    *(uchar *)(a2 + 8) = 0;
  v4 = v2[1];
  if ( v4 )
    Function_21f5820(v3 + 39, v4, 21);
  else
    *(uchar *)(v3 + 39) = 0;
  v5 = v2[2];
  if ( v5 )
    Function_21f5820(v3 + 60, v5, 51);
  else
    *(uchar *)(v3 + 60) = 0;
  v6 = v2[3];
  if ( v6 )
    Function_21f5820(v3 + 111, v6, 31);
  else
    *(uchar *)(v3 + 111) = 0;
  v7 = v2[4];
  if ( v7 )
    Function_21f5820(v3 + 142, v7, 31);
  else
    *(uchar *)(v3 + 142) = 0;
  v8 = v2[5];
  if ( v8 )
    Function_21f5820(v3 + 173, v8, 76);
  else
    *(uchar *)(v3 + 173) = 0;
  *(uint *)(v3 + 252) = v2[6];
  Function_21f5820(v3 + 256, v2 + 7, 11);
  Function_21f5820(v3 + 267, (char *)v2 + 39, 3);
  *(uint *)(v3 + 272) = v2[11];
  *(uint *)(v3 + 276) = v2[12];
  if ( v2 == (uint *)-52 )
    *(uchar *)(v3 + 280) = 0;
  else
    Function_21f5820(v3 + 280, v2 + 13, 128);
  *(uint *)(v3 + 408) = v2[45];
  *(uint *)(v3 + 412) = v2[46];
  *(uint *)(v3 + 416) = v2[47];
  *(uint *)(v3 + 420) = v2[48];
  *(uint *)(v3 + 424) = v2[49];
  v9 = v2[50];
  if ( v9 )
    Function_21f5820(v3 + 428, v9, 51);
  else
    *(uchar *)(v3 + 428) = 0;
  *(uint *)(v3 + 252) = v2[6];
  *(uint *)(v3 + 272) = v2[11];
  *(uint *)(v3 + 276) = v2[12];
  *(uint *)(v3 + 408) = v2[45];
  *(uint *)(v3 + 412) = v2[46];
  *(uint *)(v3 + 416) = v2[47];
  *(uint *)(v3 + 420) = v2[48];
  *(uint *)(v3 + 424) = v2[49];
  *(uint *)(v3 + 480) = v2[51];
  *(uint *)(v3 + 484) = v2[52];
  *(uint *)(v3 + 488) = v2[53];
  *(uint *)(v3 + 492) = v2[54];
  *(uint *)(v3 + 496) = v2[55];
  *(uint *)(v3 + 500) = v2[56];
  *(uint *)(v3 + 504) = v2[57];
  *(uint *)(v3 + 508) = v2[58];
  result = v2[59];
  *(uint *)(v3 + 512) = result;
  return result;
}

//----- (021EFD24) --------------------------------------------------------
int __fastcall Function_21efd24(uint *a1, int a2, uchar *a3, int a4)
{
  uchar *v4;
  uint *v5;
  int v6;
  int v7;
  int result;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;
  char **v14;
  int v15;
  uint *v16;
  int v17;
  int v18;
  int v19;
  int v20;
  int v21;
  bool v22;
  long long v23;
  long long v24;
  int v25;
  int v26;
  int v27;
  int v28;
  int v29;
  int v30;
  int v31;
  int v32;
  int v33;
  int v34;
  int v35;
  int v36;
  int v37;
  int v38;
  int v39;
  int v40;
  int v41;
  int v42;
  int v43;
  int v44;
  int v45;
  int v46;
  int v47;
  int v48;
  int v49;
  int v50;
  int v51;
  int v52;
  int v53;
  int v54;
  int v55;
  int v56;
  int v57;
  int v58;
  int v59;
  int v60;
  int v61;
  int v62;
  int v63;
  int v64;
  int v65;
  int v66;
  int v67;
  int v68;
  uint *v69;
  int i;
  int v71;
  bool v72;
  uchar *v73;
  uint *v74;
  int v75;
  int v76;
  int v77;
  char v78;
  char v79;
  char v80;
  char v81;
  char v82;
  char v83;
  char v84;
  char v85;
  char *v86;
  char *v87;
  char *v88;
  char *v89;
  char *v90;
  char *v91;
  int v92;
  char v93;
  char v94;
  uint v95;
  uint v96;
  char v97;
  int v98;
  int v99;
  int v100;
  int v101;
  int v102;
  char *v103;
  int v104;
  int v105;
  int v106;
  int v107;
  int v108;
  int v109;
  int v110;
  int v111;
  int v112;
  int v113;

  v113 = a4;
  v4 = a3;
  v5 = a1;
  v6 = a2;
  v7 = *a1;
  if ( Function_21f58a0(a1, a3, 1) )
    return 4;
  if ( Function_20d8e28(v4, "\\pi\\", 4) )
  {
    Function_21f5d44(v5, 1, "Unexpected data was received from the server.");
    Function_21ede68(v5, 3, 1);
    return 3;
  }
  if ( !Function_21f5978(v4, "\\profileid\\", &v84, 64) )
  {
    Function_21f5d44(v5, 1, "Unexpected data was received from the server.");
    Function_21ede68(v5, 3, 1);
    return 3;
  }
  Function_20dae0c((int)&v84, v9, v10, v11);
  v13 = v12;
  if ( v12 <= 0 )
    Function_20d407c((int)"profileid > 0", (int)"gpiInfo.c", (int)"gpiProcessGetInfo");
  Function_21f32a8(v5, v13, &v77);
  v14 = &v86;
  v15 = 7;
  do
  {
    *v14 = 0;
    v14[1] = 0;
    v14[2] = 0;
    v14[3] = 0;
    v16 = v14 + 4;
    *v16 = 0;
    v16[1] = 0;
    v16[2] = 0;
    v16[3] = 0;
    v14 = (char **)(v16 + 4);
    --v15;
  }
  while ( v15 );
  *v14 = 0;
  v14[1] = 0;
  v14[2] = 0;
  v14[3] = 0;
  v87 = &v82;
  v89 = &v80;
  v88 = &v81;
  v90 = &v79;
  v91 = &v85;
  v86 = &v83;
  v103 = &v78;
  if ( !Function_21f5978(v4, "\\nick\\", &v83, 31) )
    *v86 = 0;
  if ( !Function_21f5978(v4, "\\uniquenick\\", v87, 21) )
    *v87 = 0;
  if ( !Function_21f5978(v4, "\\email\\", v88, 51) )
    *v88 = 0;
  if ( !Function_21f5978(v4, "\\firstname\\", v89, 31) )
    *v89 = 0;
  if ( !Function_21f5978(v4, "\\lastname\\", v90, 31) )
    *v90 = 0;
  if ( Function_21f5978(v4, "\\icquin\\", &v84, 64) )
  {
    Function_20dae0c((int)&v84, v17, v18, v19);
    v92 = v20;
  }
  else
  {
    v92 = -1;
  }
  if ( !Function_21f5978(v4, "\\homepage\\", v91, 76) )
    *v91 = 0;
  v21 = Function_21f5978(v4, "\\zipcode\\", &v93, 11);
  v22 = v21 == 0;
  if ( !v21 )
    LOBYTE(v21) = 0;
  if ( v22 )
    v93 = v21;
  if ( !Function_21f5978(v4, "\\countrycode\\", &v94, 3) )
    v94 = 0;
  if ( Function_21f5978(v4, "\\lon\\", &v84, 64) )
  {
    v23 = Function_20da448((int)&v84);
    v95 = d2f(v23, HIDWORD(v23));
  }
  else
  {
    v95 = 0;
  }
  if ( Function_21f5978(v4, "\\lat\\", &v84, 64) )
  {
    v24 = Function_20da448((int)&v84);
    v96 = d2f(v24, HIDWORD(v24));
  }
  else
  {
    v96 = 0;
  }
  if ( !Function_21f5978(v4, "\\loc\\", &v97, 128) )
    v97 = 0;
  if ( Function_21f5978(v4, "\\birthday\\", &v84, 64) )
  {
    Function_20dae0c((int)&v84, v25, v26, v27);
    result = Function_21efa84((int)v5, v28, &v98, &v99, &v100);
    if ( result )
      return result;
  }
  else
  {
    v98 = 0;
    v99 = 0;
    v100 = 0;
  }
  if ( Function_21f5978(v4, "\\sex\\", &v84, 64) )
  {
    if ( v84 == 48 )
    {
      v101 = 1280;
    }
    else if ( v84 == 49 )
    {
      v101 = 1281;
    }
    else
    {
      v101 = 1282;
    }
  }
  else
  {
    v101 = 1282;
  }
  if ( Function_21f5978(v4, "\\pmask\\", &v84, 64) )
  {
    Function_20dae0c((int)&v84, v29, v30, v31);
    v102 = v32;
  }
  else
  {
    v102 = -1;
  }
  if ( !Function_21f5978(v4, "\\aim\\", v103, 51) )
    *v103 = 0;
  if ( Function_21f5978(v4, "\\pic\\", &v84, 64) )
  {
    Function_20dae0c((int)&v84, v33, v34, v35);
    v104 = v36;
  }
  else
  {
    v104 = 0;
  }
  if ( Function_21f5978(v4, "\\occ\\", &v84, 64) )
  {
    Function_20dae0c((int)&v84, v37, v38, v39);
    v105 = v40;
  }
  else
  {
    v105 = 0;
  }
  if ( Function_21f5978(v4, "\\ind\\", &v84, 64) )
  {
    Function_20dae0c((int)&v84, v41, v42, v43);
    v106 = v44;
  }
  else
  {
    v106 = 0;
  }
  if ( Function_21f5978(v4, "\\inc\\", &v84, 64) )
  {
    Function_20dae0c((int)&v84, v45, v46, v47);
    v107 = v48;
  }
  else
  {
    v107 = 0;
  }
  if ( Function_21f5978(v4, "\\mar\\", &v84, 64) )
  {
    Function_20dae0c((int)&v84, v49, v50, v51);
    v108 = v52;
  }
  else
  {
    v108 = 0;
  }
  if ( Function_21f5978(v4, "\\chc\\", &v84, 64) )
  {
    Function_20dae0c((int)&v84, v53, v54, v55);
    v109 = v56;
  }
  else
  {
    v109 = 0;
  }
  if ( Function_21f5978(v4, "\\i1\\", &v84, 64) )
  {
    Function_20dae0c((int)&v84, v57, v58, v59);
    v110 = v60;
  }
  else
  {
    v110 = 0;
  }
  if ( Function_21f5978(v4, "\\o1\\", &v84, 64) )
  {
    Function_20dae0c((int)&v84, v61, v62, v63);
    v111 = v64;
  }
  else
  {
    v111 = 0;
  }
  if ( Function_21f5978(v4, "\\conn\\", &v84, 64) )
  {
    Function_20dae0c((int)&v84, v65, v66, v67);
    v112 = v68;
  }
  else
  {
    v112 = 0;
  }
  if ( !Function_21f5978(v4, "\\sig\\", &v84, 64) )
  {
    Function_21f5d44(v5, 1, "Unexpected data was received from the server.");
    Function_21ede68(v5, 3, 1);
    return 3;
  }
  v69 = *(uint **)(v7 + 1076);
  for ( i = *(uint *)(v7 + 256); v69; v69 = (uint *)v69[15] )
  {
    v71 = v69[3];
    v72 = v71 == v13;
    if ( v71 == v13 )
      v72 = *v69 == 101;
    if ( v72 )
    {
      if ( !v77 )
        v77 = Function_21f31c4(v5, v13);
      i = 1;
      *v69 = 102;
    }
  }
  if ( !v77 && *(uint *)(v7 + 256) )
    v77 = Function_21f31c4(v5, v13);
  if ( i )
  {
    Function_21d78b0(*(uint *)(v77 + 24));
    *(uint *)(v77 + 24) = 0;
    v73 = Function_21ea8ac(&v84);
    *(uint *)(v77 + 24) = v73;
  }
  if ( *(uint *)(v7 + 256) )
    Function_21f1564(v5, v77, &v86);
  v75 = *(uint *)(v6 + 12);
  v76 = *(uint *)(v6 + 16);
  if ( !v75 )
    goto LABEL_107;
  v74 = (uint *)Function_21d7880(516);
  if ( !v74 )
  {
    Function_21f5d68(v5, "Out of memory.");
    return 1;
  }
  Function_21efb2c(&v86, (int)v74);
  *v74 = 0;
  v74[1] = v13;
  result = Function_21edf5c(v5, v75, v76, (int)v74, v6, 0);
  if ( !result )
  {
LABEL_107:
    Function_21f1ba8(v5);
    result = 0;
  }
  return result;
}

//----- (021F053C) --------------------------------------------------------
int __fastcall Function_21f053c(int a1, int *a2)
{
  int v2;
  int v3;
  int *v4;
  int v5;
  int v6;

  v2 = a1;
  v3 = *(uint *)a1;
  v4 = a2;
  if ( *(uint *)(*(uint *)a1 + 1096) > 0 )
  {
    Function_21ed5c4(a1, a2, "\\updatepro\\\\sesskey\\");
    Function_21ed5f4(v2, v4, *(uint *)(v3 + 408), v5);
    Function_21ed5c4(v2, v4, *(char **)(v3 + 1088));
    Function_21ed5c4(v2, v4, "\\final\\");
    *(uint *)(v3 + 1096) = 0;
  }
  if ( *(uint *)(v3 + 1112) > 0 )
  {
    Function_21ed5c4(v2, v4, "\\updateui\\\\sesskey\\");
    Function_21ed5f4(v2, v4, *(uint *)(v3 + 408), v6);
    Function_21ed5c4(v2, v4, *(char **)(v3 + 1104));
    Function_21ed5c4(v2, v4, "\\final\\");
    *(uint *)(v3 + 1112) = 0;
  }
  return 0;
}

//----- (021F0600) --------------------------------------------------------
int __fastcall Function_21f0600(int a1, char *a2, char *a3)
{
  int v3;
  int v4;
  char *v5;
  int result;

  v3 = a1;
  v4 = *(uint *)a1;
  v5 = a3;
  result = Function_21ed5c4(a1, (int *)(*(uint *)a1 + 1088), a2);
  if ( !result )
  {
    result = Function_21ed5c4(v3, (int *)(v4 + 1088), v5);
    if ( !result )
      result = 0;
  }
  return result;
}

//----- (021F0640) --------------------------------------------------------
int __fastcall Function_21f0640(int a1, char *a2, char *a3)
{
  int v3;
  int v4;
  char *v5;
  int result;

  v3 = a1;
  v4 = *(uint *)a1;
  v5 = a3;
  result = Function_21ed5c4(a1, (int *)(*(uint *)a1 + 1104), a2);
  if ( !result )
  {
    result = Function_21ed5c4(v3, (int *)(v4 + 1104), v5);
    if ( !result )
      result = 0;
  }
  return result;
}

//----- (021F0680) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x21F07D8 for case 0"

//----- (021F06A0) --------------------------------------------------------
void Function_21f06a0()
{
  JUMPOUT(&loc_21F07D8);
}

//----- (021F06A4) --------------------------------------------------------
void Function_21f06a4()
{
  JUMPOUT(&loc_21F0AC4);
}

//----- (021F06A8) --------------------------------------------------------
void Function_21f06a8()
{
  JUMPOUT(&loc_21F0704);
}

//----- (021F06AC) --------------------------------------------------------
void Function_21f06ac()
{
  JUMPOUT(&loc_21F0AC4);
}

//----- (021F06B0) --------------------------------------------------------
void Function_21f06b0()
{
  JUMPOUT(&loc_21F0AC4);
}

//----- (021F06B4) --------------------------------------------------------
void Function_21f06b4()
{
  JUMPOUT(&loc_21F074C);
}

//----- (021F06B8) --------------------------------------------------------
void Function_21f06b8()
{
  JUMPOUT(&loc_21F0804);
}

//----- (021F06BC) --------------------------------------------------------
void Function_21f06bc()
{
  JUMPOUT(&loc_21F0830);
}

//----- (021F06C0) --------------------------------------------------------
void Function_21f06c0()
{
  JUMPOUT(&loc_21F085C);
}

//----- (021F06C4) --------------------------------------------------------
void Function_21f06c4()
{
  JUMPOUT(&loc_21F0AC4);
}

//----- (021F06C8) --------------------------------------------------------
void Function_21f06c8()
{
  JUMPOUT(&loc_21F0894);
}

//----- (021F06CC) --------------------------------------------------------
void Function_21f06cc()
{
  JUMPOUT(&loc_21F0AC4);
}

//----- (021F06D0) --------------------------------------------------------
void Function_21f06d0()
{
  JUMPOUT(&loc_21F08CC);
}

//----- (021F06D4) --------------------------------------------------------
void Function_21f06d4()
{
  JUMPOUT(&loc_21F0904);
}

//----- (021F06D8) --------------------------------------------------------
void Function_21f06d8()
{
  JUMPOUT(&loc_21F0930);
}

//----- (021F06DC) --------------------------------------------------------
void Function_21f06dc()
{
  JUMPOUT(&loc_21F095C);
}

//----- (021F06E0) --------------------------------------------------------
void Function_21f06e0()
{
  JUMPOUT(&loc_21F0AC4);
}

//----- (021F06E4) --------------------------------------------------------
void Function_21f06e4()
{
  JUMPOUT(&loc_21F0AC4);
}

//----- (021F06E8) --------------------------------------------------------
void Function_21f06e8()
{
  JUMPOUT(&loc_21F0990);
}

//----- (021F06EC) --------------------------------------------------------
void Function_21f06ec()
{
  JUMPOUT(&loc_21F09BC);
}

//----- (021F06F0) --------------------------------------------------------
void Function_21f06f0()
{
  JUMPOUT(&loc_21F09E8);
}

//----- (021F06F4) --------------------------------------------------------
void Function_21f06f4()
{
  JUMPOUT(&loc_21F0A14);
}

//----- (021F06F8) --------------------------------------------------------
void Function_21f06f8()
{
  JUMPOUT(&loc_21F0A40);
}

//----- (021F06FC) --------------------------------------------------------
void Function_21f06fc()
{
  JUMPOUT(&loc_21F0A6C);
}

//----- (021F0700) --------------------------------------------------------
void Function_21f0700()
{
  int v0;
  char v1;
  int v2;

  Function_20d7510((int)&v1, "%d");
  if ( Function_21f0600(v0, "\\i1\\", &v1) )
    JUMPOUT(__CS__, v2);
  JUMPOUT(__CS__, v2);
}

//----- (021F0B50) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x21F0C08 for case 0"

//----- (021F0B8C) --------------------------------------------------------
void Function_21f0b8c()
{
  JUMPOUT(&loc_21F0C08);
}

//----- (021F0B90) --------------------------------------------------------
void Function_21f0b90()
{
  JUMPOUT(&loc_21F0C68);
}

//----- (021F0B94) --------------------------------------------------------
void Function_21f0b94()
{
  JUMPOUT(&loc_21F0CCC);
}

//----- (021F0B98) --------------------------------------------------------
void Function_21f0b98()
{
  JUMPOUT(&loc_21F0D34);
}

//----- (021F0B9C) --------------------------------------------------------
void Function_21f0b9c()
{
  JUMPOUT(&loc_21F0D98);
}

//----- (021F0BA0) --------------------------------------------------------
void Function_21f0ba0()
{
  JUMPOUT(&loc_21F0DC8);
}

//----- (021F0BA4) --------------------------------------------------------
void Function_21f0ba4()
{
  JUMPOUT(&loc_21F0F4C);
}

//----- (021F0BA8) --------------------------------------------------------
void Function_21f0ba8()
{
  JUMPOUT(&loc_21F0DF8);
}

//----- (021F0BAC) --------------------------------------------------------
void Function_21f0bac()
{
  JUMPOUT(&loc_21F0E28);
}

//----- (021F0BB0) --------------------------------------------------------
void Function_21f0bb0()
{
  JUMPOUT(&loc_21F0E58);
}

//----- (021F0BB4) --------------------------------------------------------
void Function_21f0bb4()
{
  JUMPOUT(&loc_21F127C);
}

//----- (021F0BB8) --------------------------------------------------------
void Function_21f0bb8()
{
  JUMPOUT(&loc_21F0EB0);
}

//----- (021F0BBC) --------------------------------------------------------
void Function_21f0bbc()
{
  JUMPOUT(&loc_21F127C);
}

//----- (021F0BC0) --------------------------------------------------------
void Function_21f0bc0()
{
  JUMPOUT(&loc_21F0F7C);
}

//----- (021F0BC4) --------------------------------------------------------
void Function_21f0bc4()
{
  JUMPOUT(&loc_21F0FA4);
}

//----- (021F0BC8) --------------------------------------------------------
void Function_21f0bc8()
{
  JUMPOUT(&loc_21F0FCC);
}

//----- (021F0BCC) --------------------------------------------------------
void Function_21f0bcc()
{
  JUMPOUT(&loc_21F0FFC);
}

//----- (021F0BD0) --------------------------------------------------------
void Function_21f0bd0()
{
  JUMPOUT(&loc_21F1024);
}

//----- (021F0BD4) --------------------------------------------------------
void Function_21f0bd4()
{
  JUMPOUT(&loc_21F1054);
}

//----- (021F0BD8) --------------------------------------------------------
void Function_21f0bd8()
{
  JUMPOUT(&loc_21F127C);
}

//----- (021F0BDC) --------------------------------------------------------
void Function_21f0bdc()
{
  JUMPOUT(&loc_21F107C);
}

//----- (021F0BE0) --------------------------------------------------------
void Function_21f0be0()
{
  JUMPOUT(&loc_21F10A4);
}

//----- (021F0BE4) --------------------------------------------------------
void Function_21f0be4()
{
  JUMPOUT(&loc_21F10CC);
}

//----- (021F0BE8) --------------------------------------------------------
void Function_21f0be8()
{
  JUMPOUT(&loc_21F10FC);
}

//----- (021F0BEC) --------------------------------------------------------
void Function_21f0bec()
{
  JUMPOUT(&loc_21F112C);
}

//----- (021F0BF0) --------------------------------------------------------
void Function_21f0bf0()
{
  JUMPOUT(&loc_21F115C);
}

//----- (021F0BF4) --------------------------------------------------------
void Function_21f0bf4()
{
  JUMPOUT(&loc_21F118C);
}

//----- (021F0BF8) --------------------------------------------------------
void Function_21f0bf8()
{
  JUMPOUT(&loc_21F11BC);
}

//----- (021F0BFC) --------------------------------------------------------
void Function_21f0bfc()
{
  JUMPOUT(&loc_21F11EC);
}

//----- (021F0C00) --------------------------------------------------------
void Function_21f0c00()
{
  JUMPOUT(&loc_21F121C);
}

//----- (021F0C04) --------------------------------------------------------
void Function_21f0c04()
{
  int v0;
  int v1;
  char v2;
  int v3;

  Function_21f5820(&v2, v0, 256);
  if ( Function_21f0600(v1, "\\i1\\", &v2) )
    JUMPOUT(__CS__, v3);
  JUMPOUT(__CS__, v3);
}

//----- (021F1328) --------------------------------------------------------
int __fastcall Function_21f1328(int a1, int a2, int a3)
{
  int v3;
  int v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;

  v3 = a1;
  v4 = *(uint *)a1;
  v5 = a3;
  v6 = a2;
  Function_21ed5c4(a1, (int *)(*(uint *)a1 + 500), "\\getprofile\\\\sesskey\\");
  Function_21ed5f4(v3, (int *)(v4 + 500), *(uint *)(v4 + 408), v7);
  Function_21ed5c4(v3, (int *)(v4 + 500), "\\profileid\\");
  Function_21ed5f4(v3, (int *)(v4 + 500), v6, v8);
  Function_21ed5c4(v3, (int *)(v4 + 500), "\\id\\");
  Function_21ed5f4(v3, (int *)(v4 + 500), v5, v9);
  Function_21ed5c4(v3, (int *)(v4 + 500), "\\final\\");
  return 0;
}

//----- (021F13C0) --------------------------------------------------------
int __fastcall Function_21f13c0(uint *a1, int a2, int a3, int a4, int a5, int a6)
{
  uint *v6;
  int v7;
  int v8;
  int v9;
  bool v10;
  int v11;
  int v12;
  int v13;
  bool v14;
  int v15;
  uint *v16;
  int result;
  int v18;
  int v19;
  int v20;
  int v21;
  int v22;
  int v23;

  v23 = a4;
  v6 = a1;
  v7 = *a1;
  v8 = 0;
  v21 = 0;
  v9 = *(uint *)(v7 + 256);
  if ( a3 == 1 )
    v8 = 1;
  if ( !v9 )
    v8 = 0;
  v10 = a5 == 0;
  v11 = a2;
  v12 = a4;
  if ( a5 )
    v10 = v8 == 0;
  if ( v10 )
    goto LABEL_23;
  v13 = Function_21f32a8(v6, a2, &v22);
  v14 = v13 == 0;
  if ( v13 )
    v14 = *(uint *)(v22 + 12) == 0;
  if ( v14 )
  {
LABEL_23:
    result = Function_21f1a54(v6, 2, 0, &v21, v12, a5, a6);
    if ( result )
      return result;
    v18 = *(uint *)(v21 + 24);
    result = Function_21f1328((int)v6, v11, *(uint *)(v21 + 24));
    if ( result )
      return result;
    goto LABEL_18;
  }
  v15 = Function_21d7880(516);
  v16 = (uint *)v15;
  if ( !v15 )
  {
    Function_21f5d68(v6, "Out of memory.");
    return 1;
  }
  Function_21efb2c(*(uint **)(v22 + 12), v15);
  *v16 = 0;
  v16[1] = v11;
  result = Function_21f1a54(v6, 2, 0, &v21, 1, a5, a6);
  if ( !result )
  {
    v18 = *(uint *)(v21 + 24);
    result = Function_21edf5c(v6, a5, a6, (int)v16, v21, 0);
    if ( !result )
    {
      Function_21f1ba8(v6);
LABEL_18:
      if ( !v12 || (result = Function_21ec3b0(v6, v18, v19, v20)) == 0 )
        result = 0;
      return result;
    }
  }
  return result;
}

//----- (021F1564) --------------------------------------------------------
BOOL __fastcall Function_21f1564(int a1, int a2, char **a3)
{
  int v3;
  char **v4;
  char **v6;
  char **v7;
  int v8;
  char *v9;
  char *v10;
  char *v11;
  char *v12;

  v3 = a2;
  v4 = a3;
  if ( !*(uint *)(*(uint *)a1 + 256) )
    return 1;
  Function_21f163c(a2);
  v6 = (char **)Function_21d7880(240);
  *(uint *)(v3 + 12) = v6;
  if ( v6 )
  {
    v7 = v4;
    v8 = 15;
    do
    {
      v9 = *v7;
      v10 = v7[1];
      v11 = v7[2];
      v12 = v7[3];
      v7 += 4;
      *v6 = v9;
      v6[1] = v10;
      v6[2] = v11;
      v6[3] = v12;
      v6 += 4;
      --v8;
    }
    while ( v8 );
    **(uint **)(v3 + 12) = Function_21ea8ac(*v4);
    *(uint *)(*(uint *)(v3 + 12) + 4) = Function_21ea8ac(v4[1]);
    *(uint *)(*(uint *)(v3 + 12) + 8) = Function_21ea8ac(v4[2]);
    *(uint *)(*(uint *)(v3 + 12) + 12) = Function_21ea8ac(v4[3]);
    *(uint *)(*(uint *)(v3 + 12) + 16) = Function_21ea8ac(v4[4]);
    *(uint *)(*(uint *)(v3 + 12) + 20) = Function_21ea8ac(v4[5]);
    *(uint *)(*(uint *)(v3 + 12) + 200) = Function_21ea8ac(v4[50]);
  }
  return *(uint *)(v3 + 12) != 0;
}

//----- (021F163C) --------------------------------------------------------
int *__fastcall Function_21f163c(int a1)
{
  int v1;
  int *result;

  v1 = a1;
  result = *(int **)(a1 + 12);
  if ( result )
  {
    Function_21d78b0(*result);
    **(uint **)(v1 + 12) = 0;
    Function_21d78b0(*(uint *)(*(uint *)(v1 + 12) + 4));
    *(uint *)(*(uint *)(v1 + 12) + 4) = 0;
    Function_21d78b0(*(uint *)(*(uint *)(v1 + 12) + 8));
    *(uint *)(*(uint *)(v1 + 12) + 8) = 0;
    Function_21d78b0(*(uint *)(*(uint *)(v1 + 12) + 12));
    *(uint *)(*(uint *)(v1 + 12) + 12) = 0;
    Function_21d78b0(*(uint *)(*(uint *)(v1 + 12) + 16));
    *(uint *)(*(uint *)(v1 + 12) + 16) = 0;
    Function_21d78b0(*(uint *)(*(uint *)(v1 + 12) + 20));
    *(uint *)(*(uint *)(v1 + 12) + 20) = 0;
    Function_21d78b0(*(uint *)(*(uint *)(v1 + 12) + 200));
    *(uint *)(*(uint *)(v1 + 12) + 200) = 0;
    Function_21d78b0(*(uint *)(v1 + 12));
    result = 0;
    *(uint *)(v1 + 12) = 0;
  }
  return result;
}

//----- (021F1708) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x21F17AC for case 0"

//----- (021F1798) --------------------------------------------------------
void Function_21f1798()
{
  JUMPOUT(&loc_21F17AC);
}

//----- (021F179C) --------------------------------------------------------
void Function_21f179c()
{
  JUMPOUT(&loc_21F1838);
}

//----- (021F17A0) --------------------------------------------------------
void Function_21f17a0()
{
  JUMPOUT(&loc_21F18B4);
}

//----- (021F17A4) --------------------------------------------------------
void Function_21f17a4()
{
  JUMPOUT(&loc_21F1920);
}

//----- (021F17A8) --------------------------------------------------------
void Function_21f17a8()
{
  int v0;
  uint *v1;
  uchar *v2;
  int v3;
  int v4;
  int v5;

  v2 = (uchar *)Function_21d7880(4);
  if ( !v2 )
  {
    Function_21f5d68(v1, "Out of memory.");
    JUMPOUT(__CS__, v5);
  }
  *v2 = 0;
  v2[1] = 0;
  v2[2] = 0;
  v2[3] = 0;
  *(uint *)v2 = *(uint *)(v0 + 28);
  if ( Function_21edf5c(v1, v3, v4, (int)v2, v0, 0) )
    JUMPOUT(__CS__, v5);
  JUMPOUT(__CS__, v5);
}

//----- (021F1A54) --------------------------------------------------------
int __fastcall Function_21f1a54(uint *a1, int a2, int a3, uint *a4, int a5, int a6, int a7)
{
  uint *v7;
  int v8;
  int v9;
  uint *v10;
  int v11;
  uint *v12;
  int result;
  int v14;

  v7 = a1;
  v8 = a2;
  v9 = a3;
  v10 = a4;
  v11 = *a1;
  v12 = (uint *)Function_21d7880(36);
  if ( v12 )
  {
    *v12 = v8;
    v12[1] = v9;
    v12[2] = a5;
    v12[5] = 0;
    if ( v8 )
    {
      v14 = *(uint *)(v11 + 524);
      *(uint *)(v11 + 524) = v14 + 1;
      v12[6] = v14;
      if ( *(uint *)(v11 + 524) < 2 )
        *(uint *)(v11 + 524) = 2;
    }
    else
    {
      v12[6] = 1;
    }
    v12[7] = 0;
    v12[3] = a6;
    v12[4] = a7;
    v12[8] = *(uint *)(v11 + 1060);
    *(uint *)(v11 + 1060) = v12;
    *v10 = v12;
    result = 0;
  }
  else
  {
    Function_21f5d68(v7, "Out of memory.");
    result = 1;
  }
  return result;
}

//----- (021F1B0C) --------------------------------------------------------
int __fastcall Function_21f1b0c(int *a1, uint *a2)
{
  int v2;
  int v3;
  uint *v4;
  int v5;
  int v6;
  int v7;

  v2 = (int)a2;
  v3 = *a1;
  if ( *a2 == 3 )
  {
    v4 = (uint *)a2[1];
    v5 = *(uint *)(v3 + 528) - 1;
    *(uint *)(v3 + 528) = v5;
    if ( v5 < 0 )
      Function_20d407c((int)"iconnection->numSearches >= 0", (int)"gpiOperation.c", (int)"gpiDestroyOperation");
    v6 = v4[1];
    Function_21ead04();
    v7 = v4[1];
    Function_21eacf0();
    Function_21d78b0(v4[6]);
    v4[6] = 0;
    Function_21d78b0(v4[2]);
    v4[2] = 0;
  }
  Function_21d78b0(*(uint *)(v2 + 4));
  *(uint *)(v2 + 4) = 0;
  return Function_21d78b0(v2);
}

//----- (021F1BA8) --------------------------------------------------------
int *__fastcall Function_21f1ba8(int *result, uint *a2)
{
  uint *v2;
  uint *v3;

  v2 = 0;
  v3 = *(uint **)(*result + 1060);
  if ( v3 )
  {
    while ( v3 != a2 )
    {
      v2 = v3;
      v3 = (uint *)v3[8];
      if ( !v3 )
        return result;
    }
    if ( v2 )
      v2[8] = a2[8];
    else
      *(uint *)(*result + 1060) = v3[8];
    result = (int *)Function_21f1b0c(result, a2);
  }
  return result;
}

//----- (021F1BF8) --------------------------------------------------------
int __fastcall Function_21f1bf8(int a1, uint *a2, int a3)
{
  int v3;
  int result;

  v3 = *(uint *)(*(uint *)a1 + 1060);
  if ( v3 )
  {
    while ( *(uint *)(v3 + 24) != a3 )
    {
      v3 = *(uint *)(v3 + 32);
      if ( !v3 )
        goto LABEL_7;
    }
    if ( a2 )
      *a2 = v3;
    result = 1;
  }
  else
  {
LABEL_7:
    if ( a2 )
      *a2 = 0;
    result = 0;
  }
  return result;
}

//----- (021F1C44) --------------------------------------------------------
int __fastcall Function_21f1c44(int a1)
{
  uint *v1;
  int v2;
  bool v3;

  v1 = *(uint **)(*(uint *)a1 + 1060);
  if ( !v1 )
    return 0;
  while ( 1 )
  {
    v2 = v1[2];
    v3 = v2 == 0;
    if ( v2 )
      v3 = *v1 == 3;
    if ( !v3 )
      break;
    v1 = (uint *)v1[8];
    if ( !v1 )
      return 0;
  }
  return 1;
}

//----- (021F1C80) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x21F1CB0 for case 0"

//----- (021F1C9C) --------------------------------------------------------
void Function_21f1c9c()
{
  JUMPOUT(&loc_21F1CB0);
}

//----- (021F1CA0) --------------------------------------------------------
void Function_21f1ca0()
{
  JUMPOUT(&loc_21F1CBC);
}

//----- (021F1CA4) --------------------------------------------------------
void Function_21f1ca4()
{
  JUMPOUT(&loc_21F1CC8);
}

//----- (021F1CA8) --------------------------------------------------------
void Function_21f1ca8()
{
  JUMPOUT(&loc_21F1CE0);
}

//----- (021F1CAC) --------------------------------------------------------
void Function_21f1cac()
{
  int v0;
  int v1;
  int v2;

  v1 = Function_21f571c();
  if ( v1 )
    *(uint *)(v0 + 28) = v1;
  JUMPOUT(__CS__, v2);
}

//----- (021F1D24) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x21F1FF8 for case 0"

//----- (021F1D4C) --------------------------------------------------------
void Function_21f1d4c()
{
  JUMPOUT(&loc_21F1FF8);
}

//----- (021F1D50) --------------------------------------------------------
void Function_21f1d50()
{
  JUMPOUT(&loc_21F1D5C);
}

//----- (021F1D54) --------------------------------------------------------
void Function_21f1d54()
{
  JUMPOUT(&loc_21F1D70);
}

//----- (021F1D58) --------------------------------------------------------
void __fastcall Function_21f1d58(int a1)
{
  uint *v1;
  int v2;
  int v3;
  uchar *v4;
  uchar *v5;
  int v6;
  int v7;
  bool v8;
  int v9;
  char v10;
  int v11;

  if ( Function_21ed92c(a1, v1[2], v1 + 6, (int *)&v10, &v9, (int)"PR") )
    JUMPOUT(__CS__, v11);
  v4 = Function_20d90b0((uchar *)v1[6], "\\final\\", v3);
  if ( v4 )
  {
    *v4 = 0;
    v5 = (uchar *)v1[6];
    if ( Function_20d8e28((uchar *)v1[6], "\\anack\\", 7) )
    {
      if ( Function_20d8e28(v5, "\\aack\\", 6) )
      {
        Function_21f5d68(v2, "Error parsing buddy message.");
        JUMPOUT(__CS__, v11);
      }
    }
    else
    {
      v6 = v1[5] + 1;
      v1[5] = v6;
      if ( v6 > 1 )
      {
        Function_21f5d68(v2, "Error getting buddy authorization.");
        JUMPOUT(__CS__, v11);
      }
      if ( Function_21f2a84(v2, v1) )
        JUMPOUT(__CS__, v11);
    }
    *v1 = 105;
    v1[8] = 0;
  }
  if ( v1[12] > 0 )
  {
    v7 = Function_21edb54(v2, v1[2], (int)(v1 + 10), &v9, 1, "PR");
    v8 = v9 == 0;
    if ( !v9 )
      v8 = v7 == 0;
    if ( !v8 )
      *v1 = 106;
  }
  JUMPOUT(__CS__, v11);
}

//----- (021F2080) --------------------------------------------------------
int __fastcall Function_21f2080(int *a1, uint *a2)
{
  uint *v2;
  int v3;
  int v4;
  int result;
  int v6;
  uchar *v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;
  int v14;
  int v15;
  int v16;
  char v17;
  char v18;
  char v19;
  char v20;
  char v21;
  char v22;

  v2 = a2;
  v3 = (int)a1;
  v4 = *a1;
  if ( *a2 != 104 )
    Function_20d407c((int)"peer->state == GPI_PEER_WAITING", (int)"gpiPeer.c", (int)"gpiProcessPeerAcceptingConnection");
  result = Function_21ed92c(v3, v2[2], v2 + 6, (int *)&v17, &v16, (int)"PR");
  if ( !result )
  {
    if ( v16 )
    {
      *v2 = 106;
      return 0;
    }
    v7 = Function_20d90b0((uchar *)v2[6], "\\final\\", v6);
    if ( v7 )
    {
      *v7 = 0;
      v8 = v2[6];
      if ( Function_20d8e28((uchar *)v2[6], "\\auth\\", 6) )
      {
        *v2 = 106;
        return 0;
      }
      if ( !Function_21f5978(v8, "\\pid\\", &v21, 16) )
      {
        *v2 = 106;
        return 0;
      }
      Function_20dae0c((int)&v21, v9, v10, v11);
      v13 = v12;
      if ( !Function_21f5978(v2[6], "\\nick\\", &v20, 31) )
      {
        *v2 = 106;
        return 0;
      }
      if ( !Function_21f5978(v2[6], "\\sig\\", &v19, 33) )
      {
        *v2 = 106;
        return 0;
      }
      v14 = *(uint *)(v4 + 416);
      Function_20d7510((int)&v22, "%s%d%d");
      v15 = strlen(&v22);
      Function_21ea7f4((int)&v22, v15, (int)&v18);
      if ( Function_20d8d14((int *)&v19, &v18) )
      {
        Function_21ed5c4(v3, v2 + 10, "\\anack\\");
        Function_21ed5c4(v3, v2 + 10, "\\final\\");
        *v2 = 106;
        return 0;
      }
      Function_21ed5c4(v3, v2 + 10, "\\aack\\");
      Function_21ed5c4(v3, v2 + 10, "\\final\\");
      *v2 = 105;
      v2[3] = v13;
      v2[8] = 0;
    }
    result = 0;
  }
  return result;
}

//----- (021F22DC) --------------------------------------------------------
int __fastcall Function_21f22dc(int a1, int a2)
{
  int v2;
  int v3;
  int v5;
  uint v6;

  v2 = a2;
  v3 = a1;
  if ( *(uint *)(a2 + 48) )
    return 0;
  if ( !Function_21e9bbc(*(uint *)(a2 + 56)) )
    return 0;
  while ( 1 )
  {
    v5 = Function_21e9bc4(*(uint **)(v2 + 56), 0);
    if ( __PAIR__(v6, Function_21edb54(v3, *(uint *)(v2 + 8), v5, &v6, 0, "PR")) )
      break;
    if ( *(uint *)(v5 + 12) == *(uint *)(v5 + 8) )
    {
      Function_21e9e40(*(int **)(v2 + 56), 0);
      if ( Function_21e9bbc(*(uint *)(v2 + 56)) )
        continue;
    }
    return 0;
  }
  *(uint *)v2 = 106;
  return 0;
}

//----- (021F23B0) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x21F25D4 for case 0"

//----- (021F2514) --------------------------------------------------------
void Function_21f2514()
{
  JUMPOUT(&loc_21F25D4);
}

//----- (021F2518) --------------------------------------------------------
void Function_21f2518()
{
  JUMPOUT(&loc_21F25D4);
}

//----- (021F251C) --------------------------------------------------------
void Function_21f251c()
{
  JUMPOUT(&loc_21F25D4);
}

//----- (021F2520) --------------------------------------------------------
void Function_21f2520()
{
  JUMPOUT(&loc_21F25D4);
}

//----- (021F2524) --------------------------------------------------------
void Function_21f2524()
{
  JUMPOUT(&loc_21F25D4);
}

//----- (021F2528) --------------------------------------------------------
void Function_21f2528()
{
  JUMPOUT(&loc_21F25D4);
}

//----- (021F252C) --------------------------------------------------------
void Function_21f252c()
{
  JUMPOUT(&loc_21F25D4);
}

//----- (021F2530) --------------------------------------------------------
void Function_21f2530()
{
  JUMPOUT(&loc_21F25D4);
}

//----- (021F2534) --------------------------------------------------------
void __fastcall Function_21f2534(int a1, int a2, int a3)
{
  int v3;
  int v4;
  int v5;
  int v6;
  int v7;

  ((void (__fastcall *)(int, int, int, uint, int))Function_21f5698)(v4, v3, a3, *(uint *)(v3 + 24), a2);
  Function_21ede10(v4, (char *)(v3 + 24));
  if ( v5 )
    JUMPOUT(&loc_21F24B8);
  if ( v6 )
    *(uint *)v3 = 106;
  JUMPOUT(__CS__, v7);
}

//----- (021F2630) --------------------------------------------------------
int __fastcall Function_21f2630(int *a1, uint *a2)
{
  uint *v2;
  int *v3;
  int v4;
  bool v5;

  v2 = a2;
  v3 = a1;
  v4 = 0;
  if ( *a2 == 100 )
    Function_20d407c((int)"peer->state != GPI_PEER_NOT_CONNECTED", (int)"gpiPeer.c", (int)"gpiProcessPeer");
  if ( *v2 != 105 )
  {
    if ( v2[1] )
      v4 = Function_21f1d24(v3, v2);
    else
      v4 = Function_21f2080(v3, v2);
  }
  v5 = v4 == 0;
  if ( !v4 )
    v5 = *v2 == 105;
  if ( v5 )
    v4 = Function_21f23b0(v3, v2);
  return v4;
}

//----- (021F26CC) --------------------------------------------------------
int __fastcall Function_21f26cc(int a1, uint *a2)
{
  uint *v2;
  int v3;
  int v4;
  uint *v5;

  v2 = a2;
  v3 = a2[2];
  Function_21ead04();
  v4 = v2[2];
  Function_21eacf0();
  Function_21d78b0(v2[6]);
  v2[6] = 0;
  Function_21d78b0(v2[10]);
  v2[10] = 0;
  v5 = (uint *)v2[14];
  if ( v5 )
  {
    Function_21e9b50(v5);
    v2[14] = 0;
  }
  return Function_21d78b0((int)v2);
}

//----- (021F272C) --------------------------------------------------------
int __fastcall Function_21f272c(uint *a1, int a2)
{
  uint *v2;
  int v3;
  int v4;
  int v5;
  int v6;
  uint *v8;
  int v9;

  v2 = a1;
  v3 = a2;
  v4 = *a1;
  if ( !a2 )
    Function_20d407c((int)"peer != NULL", (int)"gpiPeer.c", (int)"gpiRemovePeer");
  v5 = *(uint *)(v4 + 1076);
  if ( v5 == v3 )
  {
    *(uint *)(v4 + 1076) = *(uint *)(v3 + 60);
LABEL_10:
    while ( Function_21e9bbc(*(uint *)(v3 + 56)) )
    {
      v8 = (uint *)Function_21e9bc4(*(uint **)(v3 + 56), 0);
      v9 = v8[4];
      if ( v9 < 100 )
        Function_21ecfc0(v2, *(uint *)(v3 + 12), v9, *v8 + v8[5]);
      Function_21e9e40(*(int **)(v3 + 56), 0);
    }
    return Function_21f26cc((int)v2, (uint *)v3);
  }
  v6 = *(uint *)(v5 + 60);
  if ( v6 == v3 )
  {
LABEL_9:
    *(uint *)(v5 + 60) = *(uint *)(v3 + 60);
    goto LABEL_10;
  }
  while ( v6 )
  {
    v5 = v6;
    v6 = *(uint *)(v6 + 60);
    if ( v6 == v3 )
      goto LABEL_9;
  }
  Function_20d407c((int)"0", (int)"gpiPeer.c", (int)"gpiRemovePeer");
  return Function_21f5894(v2, "Tried to remove peer not in list.");
}

//----- (021F2848) --------------------------------------------------------
int __fastcall Function_21f2848(int a1, int a2, int a3, int a4)
{
  int v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;
  int v14;
  int v15;
  int v16;
  int v17;
  int v18;

  v4 = a1;
  Function_21ea964(a1, 0x4000, a3, a4);
  Function_21ea964(v4, 0x8000, v5, v6);
  Function_21ea964(v4, 0x10000, v7, v8);
  Function_21ea964(v4, 0x20000, v9, v10);
  Function_21ea964(v4, 0x40000, v11, v12);
  Function_21ea9a8(v4, 0x4000, v13, v14);
  Function_21ea9a8(v4, 0x8000, v15, v16);
  Function_21ea9a8(v4, 0x10000, v17, v18);
  Function_21ea9e8(v4);
  return Function_21eaa30(v4);
}

//----- (021F28C0) --------------------------------------------------------
int __fastcall Function_21f28c0(int *a1)
{
  int *v1;
  int v2;
  int v3;
  int v4;
  uint *v5;
  uint *v6;
  int v7;
  int v8;
  int v9;
  uint *v10;
  uint *v11;
  int v12;
  int v13;

  v1 = a1;
  v2 = *a1;
  v3 = *(uint *)(*a1 + 516);
  if ( v3 != -1 )
  {
    if ( Function_21eab6c(v3) )
    {
      v4 = Function_21eadd8(*(uint *)(v2 + 516), 0, 0);
      if ( v4 != -1 )
      {
        v5 = (uint *)Function_21f2a04(v1, -1, 0);
        v6 = v5;
        if ( v5 )
        {
          *v5 = 104;
          v5[2] = v4;
          Function_21ea924(v4, 0);
          Function_21f2848(v6[2], v7, v8, v9);
        }
        else
        {
          Function_21eacf0();
        }
      }
    }
  }
  v10 = *(uint **)(v2 + 1076);
  if ( v10 )
  {
    do
    {
      v11 = (uint *)v10[15];
      v12 = Function_21f2630(v1, v10);
      if ( *v10 == 106 || v12 || (Function_21eaf48(0), v13 > v10[4]) )
        Function_21f272c(v1, (int)v10);
      v10 = v11;
    }
    while ( v11 );
  }
  return 0;
}

//----- (021F29B0) --------------------------------------------------------
uint *__fastcall Function_21f29b0(int a1, int a2)
{
  uint *result;
  int v3;
  bool v4;

  result = *(uint **)(*(uint *)a1 + 1076);
  if ( !result )
    return 0;
  while ( 1 )
  {
    v3 = result[3];
    v4 = v3 == a2;
    if ( v3 == a2 )
      v4 = *result == 105;
    if ( v4 )
      break;
    result = (uint *)result[15];
    if ( !result )
      return 0;
  }
  return result;
}

//----- (021F29E8) --------------------------------------------------------
int __fastcall Function_21f29e8(int *a1)
{
  int *v1;
  int result;

  v1 = a1;
  Function_21d78b0(*a1);
  result = 0;
  *v1 = 0;
  return result;
}

//----- (021F2A04) --------------------------------------------------------
int *__fastcall Function_21f2a04(int *a1, int a2, int a3)
{
  int v3;
  int v4;
  int v5;
  int *v6;
  int *v7;
  int *result;
  int v9;

  v3 = *a1;
  v4 = a2;
  v5 = a3;
  v6 = (int *)Function_21d7880(64);
  v7 = v6;
  if ( !v6 )
    return 0;
  Call_FillMemWithValue(v6, 0, 0x40u);
  *v7 = 100;
  v7[1] = v5;
  v7[2] = -1;
  v7[3] = v4;
  Function_21eaf48(0);
  v7[4] = v9 + 300;
  v7[15] = *(uint *)(v3 + 1076);
  v7[14] = (int)Function_21e9a8c(24, 0, (int)Function_21f29e8);
  result = v7;
  *(uint *)(v3 + 1076) = v7;
  return result;
}

//----- (021F2A84) --------------------------------------------------------
int __fastcall Function_21f2a84(uint *a1, uint *a2, int a3, int a4)
{
  uint *v4;
  int v5;
  int result;
  int v7;
  int v8;

  v8 = a4;
  v4 = a2;
  v5 = (int)a1;
  result = Function_21f1a54(a1, 2, 0, &v7, 0, 0, 0);
  if ( !result )
  {
    result = Function_21f1328(v5, v4[3], *(uint *)(v7 + 24));
    if ( !result )
    {
      *v4 = 101;
      result = 0;
    }
  }
  return result;
}

//----- (021F2AE8) --------------------------------------------------------
int __fastcall Function_21f2ae8(uint *a1, uint *a2)
{
  uint *v2;
  uint *v3;
  int result;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  bool v11;
  int v12;
  int v13;
  int v14;

  v2 = a2;
  v3 = a1;
  if ( Function_21f32a8(a1, a2[3], &v12) )
  {
    v5 = Function_21eacdc();
    v2[2] = v5;
    if ( v5 == -1 )
    {
      Function_21f5d44(v3, 5, "There was an error creating a socket.");
      Function_21ede68(v3, 3, 0);
      result = 3;
    }
    else if ( Function_21ea924(v5, 0) )
    {
      Function_21f2848(v2[2], v6, v7, v8);
      v13 = 0;
      v14 = 0;
      BYTE1(v13) = 2;
      v14 = *(uint *)(*(uint *)(v12 + 8) + 16);
      HIWORD(v13) = *(uint *)(*(uint *)(v12 + 8) + 20);
      if ( Function_21ead78(v2[2], (char *)&v13, 8) != -1 )
        goto LABEL_17;
      v9 = v2[2];
      v10 = Function_21eaf38();
      v11 = v10 == -6;
      if ( v10 != -6 )
        v11 = v10 == -26;
      if ( !v11 )
        v11 = v10 == -76;
      if ( v11 )
      {
LABEL_17:
        *v2 = 103;
        result = 0;
      }
      else
      {
        Function_21f5d44(v3, 5, "There was an error connecting a socket.");
        Function_21ede68(v3, 3, 1);
        result = 3;
      }
    }
    else
    {
      Function_21f5d44(v3, 5, "There was an error making a socket non-blocking.");
      Function_21ede68(v3, 3, 0);
      result = 3;
    }
  }
  else
  {
    Function_21f5d68(v3, "Error connecting to a peer.");
    result = 3;
  }
  return result;
}

//----- (021F2C74) --------------------------------------------------------
int __fastcall Function_21f2c74(int a1, int a2, int a3, char *a4)
{
  int v4;
  int v5;
  int v6;
  char *v7;
  int v8;
  int result;
  int v10;
  int v11;
  int v12;
  int v13;
  int v14;
  int v15;
  int v16;
  int v17;
  int v18;

  v4 = a2;
  v5 = a1;
  v6 = a3;
  v7 = a4;
  if ( !a2 )
    Function_20d407c((int)"peer != NULL", (int)"gpiPeer.c", (int)"gpiPeerAddMessage");
  if ( !v7 )
    Function_20d407c((int)"message != NULL", (int)"gpiPeer.c", (int)"gpiPeerAddMessage");
  v8 = strlen(v7);
  v13 = 0;
  v14 = 0;
  v15 = 0;
  v16 = 0;
  v18 = 0;
  v17 = v6;
  result = Function_21ed5c4(v5, &v13, "\\m\\");
  if ( !result )
  {
    result = Function_21ed5f4(v5, &v13, v6, v10);
    if ( !result )
    {
      result = Function_21ed5c4(v5, &v13, "\\len\\");
      if ( !result )
      {
        result = Function_21ed5f4(v5, &v13, v8, v11);
        if ( !result )
        {
          result = Function_21ed5c4(v5, &v13, "\\msg\\\n");
          if ( !result )
          {
            v18 = v15;
            result = Function_21ed4b8(v5, &v13, v7, v8);
            if ( !result )
            {
              result = Function_21ed420(v5, &v13, 0);
              if ( !result )
              {
                Function_21e9c2c(*(uint *)(v4 + 56), (int)&v13);
                Function_21eaf48(0);
                *(uint *)(v4 + 16) = v12 + 300;
                result = 0;
              }
            }
          }
        }
      }
    }
  }
  return result;
}

//----- (021F2E04) --------------------------------------------------------
int __fastcall Function_21f2e04(int a1, int *a2, int a3, uint *a4)
{
  int v4;
  int *v5;
  int v6;
  int v7;
  char v9;
  uint *v10;

  v10 = a4;
  v4 = a1;
  v5 = a2;
  v6 = *a4;
  v7 = a4[1];
  if ( !a4 )
    Function_20d407c((int)"transferID", (int)"gpiPeer.c", (int)"gpiPeerStartTransferMessage");
  Function_20d7510((int)&v9, "\\m\\%d\\xfer\\%d %u %u");
  return Function_21ed8fc(v4, v5, &v9);
}

//----- (021F2E80) --------------------------------------------------------
int __fastcall Function_21f2e80(int a1, int *a2, char *a3, int a4)
{
  int *v4;
  int v5;
  char *v6;
  int v7;
  int result;
  int v9;
  char v10;
  int v11;

  v11 = a4;
  v4 = a2;
  v5 = a1;
  v6 = a3;
  v7 = a4;
  if ( !a2 )
    Function_20d407c((int)"peer != NULL", (int)"gpiPeer.c", (int)"gpiPeerFinishTransferMessage");
  if ( !v6 )
    v6 = (char *)&dword_2218C94;
  if ( v7 == -1 )
    v7 = strlen(v6);
  Function_20d7510((int)&v10, "\\len\\%d\\msg\\\n");
  result = Function_21ed8fc(v5, v4, &v10);
  if ( !result )
  {
    result = Function_21ed7fc(v5, v4, (int)v6, v7);
    if ( !result )
    {
      result = Function_21ed71c(v5, v4, 0);
      if ( !result )
      {
        Function_21eaf48(0);
        v4[4] = v9 + 300;
        result = 0;
      }
    }
  }
  return result;
}

//----- (021F2F6C) --------------------------------------------------------
int __fastcall Function_21f2f6c(uint *a1, int a2)
{
  int v2;

  s32_div_f(*a1, a2);
  return v2;
}

//----- (021F2F80) --------------------------------------------------------
int __fastcall Function_21f2f80(uint *a1, uint *a2)
{
  return *a1 - *a2;
}

//----- (021F2F90) --------------------------------------------------------
int __fastcall Function_21f2f90(int *a1)
{
  int *v1;
  int v2;
  int result;

  v1 = a1;
  v2 = a1[2];
  if ( v2 )
  {
    Function_21d78b0(*(uint *)(v2 + 8));
    *(uint *)(v1[2] + 8) = 0;
    Function_21d78b0(*(uint *)(v1[2] + 12));
    *(uint *)(v1[2] + 12) = 0;
    Function_21d78b0(v1[2]);
    v1[2] = 0;
  }
  Function_21f163c((int)v1);
  Function_21d78b0(v1[4]);
  v1[4] = 0;
  Function_21d78b0(v1[6]);
  result = 0;
  v1[6] = 0;
  return result;
}

//----- (021F300C) --------------------------------------------------------
BOOL __fastcall Function_21f300c(uint *a1)
{
  uint *v1;
  int v2;

  v1 = (uint *)*a1;
  v1[268] = 0;
  v1[267] = 0;
  v2 = Function_21ea1fc(28, 4, (int)Function_21f2f6c, (int)Function_21f2f80, (int)Function_21f2f90);
  v1[266] = v2;
  return v2 != 0;
}

//----- (021F3064) --------------------------------------------------------
int __fastcall Function_21f3064(int *a1, uint *a2, uchar *a3)
{
  uchar *v3;
  uint *v4;
  int *v5;
  int result;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  uint *v12;
  int v13;
  int v14;
  char v15;

  v3 = a3;
  v4 = a2;
  v5 = a1;
  if ( Function_21f58a0(a1, a3, 1) )
    return 4;
  if ( Function_20d8e28(v3, "\\npr\\", 5) )
  {
    Function_21f5d44(v5, 1, "Unexpected data was received from the server.");
    Function_21ede68(v5, 3, 1);
    return 3;
  }
  if ( !Function_21f5978(v3, "\\profileid\\", &v15, 16) )
  {
    Function_21f5d44(v5, 1, "Unexpected data was received from the server.");
    Function_21ede68(v5, 3, 1);
    return 3;
  }
  Function_20dae0c((int)&v15, v7, v8, v9);
  v11 = v10;
  v13 = v4[3];
  v14 = v4[4];
  if ( !v13 )
    goto LABEL_14;
  v12 = (uint *)Function_21d7880(8);
  if ( !v12 )
  {
    Function_21f5d68(v5, "Out of memory.");
    return 1;
  }
  v12[1] = v11;
  *v12 = 0;
  result = Function_21edf5c(v5, v13, v14, (int)v12, (int)v4, 0);
  if ( !result )
  {
LABEL_14:
    Function_21f1ba8(v5, v4);
    result = 0;
  }
  return result;
}

//----- (021F31C4) --------------------------------------------------------
int __fastcall Function_21f31c4(uint *a1, int a2)
{
  uint *v2;
  int v3;
  int v4;
  int result;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;

  v2 = a1;
  v3 = a2;
  v4 = *a1;
  if ( a2 <= 0 )
    Function_20d407c((int)"id > 0", (int)"gpiProfile.c", (int)"gpiProfileListAdd");
  if ( v3 <= 0 )
    return 0;
  if ( Function_21f32a8(v2, v3, &v6) )
    return v6;
  v7 = v3;
  v9 = 0;
  v8 = 0;
  v10 = 0;
  v11 = 0;
  v13 = 0;
  v12 = 0;
  Function_21ea44c(*(uchar **)(v4 + 1064), (char *)&v7);
  ++*(uint *)(v4 + 1068);
  if ( Function_21f32a8(v2, v3, &v6) )
    result = v6;
  else
    result = 0;
  return result;
}

//----- (021F32A8) --------------------------------------------------------
BOOL __fastcall Function_21f32a8(int *a1, int a2, int *a3, int a4)
{
  int v4;
  int *v5;
  int v6;
  int v8;
  int v9;

  v9 = a4;
  v4 = *a1;
  v5 = a3;
  v8 = a2;
  v6 = Function_21ea598(*(uint *)(v4 + 1064), (int)&v8);
  if ( v5 )
    *v5 = v6;
  return v6 != 0;
}

//----- (021F32E4) --------------------------------------------------------
int __fastcall Function_21f32e4(int *a1, int a2, int a3, int a4)
{
  int v4;
  int result;
  int v6;
  int v7;

  v7 = a4;
  v4 = *a1;
  result = Function_21f32a8(a1, a2, &v6, a4);
  if ( result )
    result = Function_21ea4f4(*(uint *)(v4 + 1064), v6);
  return result;
}

//----- (021F3318) --------------------------------------------------------
int __fastcall Function_21f3318(int a1, int a2)
{
  return Function_21ea4f4(*(uint *)(*(uint *)a1 + 1064), a2);
}

//----- (021F332C) --------------------------------------------------------
int __fastcall Function_21f332c(int a1, int a2, int **a3)
{
  int v3;
  uint **v4;
  int **v5;

  v3 = a2;
  v4 = *(uint ***)(a2 + 12);
  v5 = a3;
  if ( !v4 || Function_20d8d14(*a3, *v4) || Function_20d8d14(v5[1], v4[2]) )
    return 1;
  *v5[2] = v3;
  v5[3] = (int *)1;
  return 0;
}

//----- (021F338C) --------------------------------------------------------
int __fastcall Function_21f338c(int a1, int a2, int a3, uint *a4)
{
  uint *v4;

  v4 = a4;
  Function_21f33f4(a1, Function_21f332c);
  *v4 = 0;
  return 0;
}

//----- (021F33D8) --------------------------------------------------------
int __fastcall Function_21f33d8(int a1, int a2)
{
  return (*(int (__fastcall **)(uint, int, uint))(a2 + 4))(*(uint *)a2, a1, *(uint *)(a2 + 8));
}

//----- (021F33F4) --------------------------------------------------------
BOOL __fastcall Function_21f33f4(int a1)
{
  return Function_21ea73c(*(uint **)(*(uint *)a1 + 1064), (int (*)(void))Function_21f33d8) == 0;
}

//----- (021F3434) --------------------------------------------------------
int __fastcall Function_21f3434(int a1, int a2, uint *a3)
{
  uint *v3;

  v3 = *(uint **)(a2 + 8);
  if ( !v3 || *a3 != *v3 )
    return 1;
  a3[1] = a2;
  return 0;
}

//----- (021F3460) --------------------------------------------------------
int __fastcall Function_21f3460(int a1)
{
  Function_21f33f4(a1);
  return 0;
}

//----- (021F3490) --------------------------------------------------------
BOOL __fastcall Function_21f3490(int a1)
{
  return a1 && !*(ull *)(a1 + 8) && !*(uint *)(a1 + 24) && !*(uint *)(a1 + 16);
}

//----- (021F34C8) --------------------------------------------------------
int __fastcall Function_21f34c8(uint *a1, int a2)
{
  int v2;
  int *v3;
  uint *v4;
  int v5;
  int result;
  int v7;
  int v8;
  int v9;
  int v10;
  bool v11;
  int v12;
  int v13;

  v2 = a2;
  v3 = *(int **)(a2 + 4);
  v4 = a1;
  v3[3] = 4096;
  v5 = Function_21d7880(4097);
  v3[2] = v5;
  if ( v5 )
  {
    v7 = Function_21eacdc();
    v3[1] = v7;
    if ( v7 == -1 )
    {
      Function_21f5d44(v4, 5, "There was an error creating a socket.");
      Function_21ede68(v4, 3, 1);
      result = 3;
    }
    else if ( Function_21ea924(v7, 0) )
    {
      v8 = Function_220854c("gpsp.gs.nintendowifi.net");
      if ( v8 )
      {
        v12 = 0;
        v13 = 0;
        BYTE1(v12) = 2;
        v13 = ***(uint ***)(v8 + 12);
        if ( !v13 )
          Function_20d407c((int)"address.sin_addr.s_addr != 0", (int)"gpiSearch.c", (int)"gpiStartProfileSearch");
        HIWORD(v12) = -12940;
        if ( Function_21ead78(v3[1], (char *)&v12, 8) != -1 )
          goto LABEL_21;
        v9 = v3[1];
        v10 = Function_21eaf38();
        v11 = v10 == -6;
        if ( v10 != -6 )
          v11 = v10 == -26;
        if ( !v11 )
          v11 = v10 == -76;
        if ( v11 )
        {
LABEL_21:
          *(uint *)(v2 + 20) = 1;
          result = 0;
        }
        else
        {
          Function_21f5d44(v4, 5, "There was an error connecting a socket.");
          Function_21ede68(v4, 3, 1);
          result = 3;
        }
      }
      else
      {
        Function_21f5d44(v4, 5, "Could not resolve search mananger host name.");
        Function_21ede68(v4, 3, 1);
        result = 3;
      }
    }
    else
    {
      Function_21f5d44(v4, 5, "There was an error making a socket non-blocking.");
      Function_21ede68(v4, 3, 1);
      result = 3;
    }
  }
  else
  {
    Function_21f5d68(v4, "Out of memory.");
    result = 1;
  }
  return result;
}

//----- (021F36C8) --------------------------------------------------------
int __fastcall Function_21f36c8(int a1, int **a2, int a3)
{
  int v3;
  int **v4;
  int v5;
  int *v6;
  int *v7;
  int result;
  int v9;

  v3 = a1;
  v4 = a2;
  v5 = a3;
  v6 = (int *)Function_21d7880(324);
  v7 = v6;
  if ( v6 )
  {
    Call_FillMemWithValue(v6, 0, 0x144u);
    *v7 = v5;
    v7[1] = -1;
    v7[2] = 0;
    v7[4] = 0;
    v7[5] = 0;
    v7[3] = 0;
    v7[8] = 0;
    v7[9] = 0;
    v7[7] = 4096;
    v9 = Function_21d7880(4097);
    v7[6] = v9;
    if ( v9 )
    {
      result = 0;
      v7[79] = 0;
      v7[80] = 0;
      *v4 = v7;
    }
    else
    {
      Function_21f5d68(v3, "Out of memory.");
      result = 1;
    }
  }
  else
  {
    Function_21f5d68(v3, "Out of memory.");
    result = 1;
  }
  return result;
}

//----- (021F3778) --------------------------------------------------------
int __fastcall Function_21f3778(uint *a1, int a2, int a3, int a4, int a5)
{
  uint *v5;
  int result;
  int v7;
  int v8;
  int v9;
  int v10;

  v10 = a4;
  v5 = a1;
  ++*(uint *)(*a1 + 528);
  result = Function_21f1a54(a1, 3, a2, &v9, a3, a4, a5);
  if ( !result )
  {
    result = Function_21f34c8(v5, v9);
    if ( !result )
    {
      if ( !*(uint *)(v9 + 8) || (result = Function_21ec3b0(v5, *(uint *)(v9 + 24), v7, v8)) == 0 )
        result = 0;
    }
  }
  return result;
}

//----- (021F3808) --------------------------------------------------------
int __fastcall Function_21f3808(uint *a1, char *a2, uchar *a3, uchar *a4, uchar *a5, uchar *a6, int a7, int a8, int a9, int a10, int a11)
{
  char *v11;
  uint *v12;
  uchar *v13;
  uchar *v14;
  bool v15;
  bool v16;
  bool v17;
  bool v18;
  int result;
  int v20;
  uchar *v21;

  v21 = a4;
  v11 = a2;
  v12 = a1;
  if ( a2 )
    a1 = (uint *)*a2;
  v13 = a3;
  v14 = a4;
  if ( a2 && a1 )
    goto LABEL_45;
  v15 = a4 == 0;
  if ( a4 )
    v15 = *a4 == 0;
  if ( !v15 )
    goto LABEL_45;
  v16 = a5 == 0;
  if ( a5 )
    v16 = *a5 == 0;
  if ( !v16 )
    goto LABEL_45;
  v17 = a6 == 0;
  if ( a6 )
    v17 = *a6 == 0;
  if ( !v17 || a7 )
    goto LABEL_45;
  v18 = a3 == 0;
  if ( a3 )
    v18 = *a3 == 0;
  if ( v18 )
  {
    Function_21f5d68(v12, "No search criteria.");
    result = 2;
  }
  else
  {
LABEL_45:
    result = Function_21f36c8((int)v12, (int **)&v20, 1);
    if ( !result )
    {
      if ( v11 )
        Function_21f5820(v20 + 40, v11, 31);
      else
        *(uchar *)(v20 + 40) = 0;
      if ( v13 )
        Function_21f5820(v20 + 71, v13, 21);
      else
        *(uchar *)(v20 + 71) = 0;
      if ( v14 )
        Function_21f5820(v20 + 92, v14, 51);
      else
        *(uchar *)(v20 + 92) = 0;
      Function_21ea8e0((uchar *)(v20 + 92));
      if ( a5 )
        Function_21f5820(v20 + 143, a5, 31);
      else
        *(uchar *)(v20 + 143) = 0;
      if ( a6 )
        Function_21f5820(v20 + 174, a6, 31);
      else
        *(uchar *)(v20 + 174) = 0;
      if ( a8 < 0 )
        a8 = 0;
      *(uint *)(v20 + 304) = a7;
      *(uint *)(v20 + 308) = a8;
      result = Function_21f3778(v12, v20, a9, a10, a11);
      if ( !result )
        result = 0;
    }
  }
  return result;
}

//----- (021F39F4) --------------------------------------------------------
int __fastcall Function_21f39f4(uint *a1, uint *a2, int a3, int a4)
{
  int v4;
  uint *v5;
  int v6;
  int *v7;
  int result;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;
  int v14;
  int v15;
  int v16;
  int v17;
  int v18;
  int v19;
  int v20;
  int v21;
  int v22;
  int v23;
  int v24;
  int v25;
  int v26;
  int v27;
  int v28;
  int v29;
  int v30;
  int v31;
  int v32;
  int v33;
  int v34;
  int v35;
  int v36;
  int v37;
  int v38;
  void (__fastcall *v39)(uint, uint);
  int v40;
  bool v41;
  uint *v42;
  int v43;
  int v44;
  uint *v45;
  int v46;
  int v47;
  int v48;
  int v49;
  int v50;
  int v51;
  int v52;
  int v53;
  uint *v54;
  int v55;
  int v56;
  int v57;
  int v58;
  int v59;
  int v60;
  int v61;
  int v62;
  int v63;
  int v64;
  int v65;
  int v66;
  int v67;
  int v68;
  int v69;
  int v70;
  int v71;
  int v72;
  int v73;
  int v74;
  int v75;
  int v76;
  int v77;
  int v78;
  int v79;
  int v80;
  int *v81;
  int v82;
  int v83;
  int v84;
  int *v85;
  bool v86;
  int *v87;
  int v88;
  int v89;
  int v90;
  int *v91;
  int *v92;
  int **v93;
  uint *v94;
  int v95;
  int v96;
  int v97;
  int v98;
  int v99;
  int v100;
  int v101;
  int v102;
  int v103;
  int v104;
  int v105;
  int v106;
  int v107;
  int v108;
  uint *v109;
  int v110;
  int v111;
  int v112;
  int v113;
  int v114;
  int v115;
  int v116;
  int v117;
  uint *v118;
  int v119;
  int v120;
  int *v121;
  int v122;
  int v123;
  int v124;
  int v125;
  int v126;
  int v127;
  int v128;
  int v129;
  int v130;
  int v131;
  int v132;
  int v133;
  int v134;
  int v135;
  int v136;
  int v137;
  char v138;
  void (__fastcall *v139)(uint, uint);
  int v140;
  int v141;
  int v142;
  int v143;
  int v144;
  int v145;
  int v146;
  int v147[128];
  char v148;
  int v149;

  v149 = a4;
  v5 = a1;
  v118 = a2;
  v6 = a2[2];
  v121 = (int *)*a1;
  if ( v6 )
    v4 = 1;
  v7 = (int *)v118[1];
  if ( !v6 )
    v4 = 0;
  while ( 1 )
  {
    result = Function_21edb54((int)v5, v7[1], (int)(v7 + 6), &v137, 1, "SM");
    if ( result )
      return result;
    v9 = v118[5];
    if ( v9 == 1 )
    {
      result = Function_21f5a80(v5, v7[1], &v142);
      if ( result )
        return result;
      if ( v142 == 4 )
      {
        Function_21f5d44(v5, 3329, "Could not connect to the search manager.");
        Function_21ede68(v5, 4, 0);
        return 4;
      }
      if ( v142 == 3 )
      {
        v10 = *v7;
        if ( *v7 == 1 )
        {
          Function_21ed5c4((int)v5, v7 + 6, "\\search\\");
          Function_21ed5c4((int)v5, v7 + 6, "\\sesskey\\");
          Function_21ed5f4((int)v5, v7 + 6, v121[102], v11);
          Function_21ed5c4((int)v5, v7 + 6, "\\profileid\\");
          Function_21ed5f4((int)v5, v7 + 6, v121[104], v12);
          Function_21ed5c4((int)v5, v7 + 6, "\\namespaceid\\");
          Function_21ed5f4((int)v5, v7 + 6, v121[284], v13);
          if ( *((uchar *)v7 + 40) )
          {
            Function_21ed5c4((int)v5, v7 + 6, "\\nick\\");
            Function_21ed5c4((int)v5, v7 + 6, (char *)v7 + 40);
          }
          if ( *((uchar *)v7 + 71) )
          {
            Function_21ed5c4((int)v5, v7 + 6, "\\uniquenick\\");
            Function_21ed5c4((int)v5, v7 + 6, (char *)v7 + 71);
          }
          if ( *((uchar *)v7 + 92) )
          {
            Function_21ed5c4((int)v5, v7 + 6, "\\email\\");
            Function_21ed5c4((int)v5, v7 + 6, (char *)v7 + 92);
          }
          if ( *((uchar *)v7 + 143) )
          {
            Function_21ed5c4((int)v5, v7 + 6, "\\firstname\\");
            Function_21ed5c4((int)v5, v7 + 6, (char *)v7 + 143);
          }
          if ( *((uchar *)v7 + 174) )
          {
            Function_21ed5c4((int)v5, v7 + 6, "\\lastname\\");
            Function_21ed5c4((int)v5, v7 + 6, (char *)v7 + 174);
          }
          if ( v7[76] )
          {
            Function_21ed5c4((int)v5, v7 + 6, "\\icquin\\");
            Function_21ed5f4((int)v5, v7 + 6, v7[76], v14);
          }
          if ( v7[77] > 0 )
          {
            Function_21ed5c4((int)v5, v7 + 6, "\\skip\\");
            Function_21ed5f4((int)v5, v7 + 6, v7[77], v15);
          }
        }
        else
        {
          switch ( v10 )
          {
            case 2:
              Function_21ed5c4((int)v5, v7 + 6, "\\valid\\");
              Function_21ed5c4((int)v5, v7 + 6, "\\email\\");
              Function_21ed5c4((int)v5, v7 + 6, (char *)v7 + 92);
              break;
            case 3:
              Function_21ed5c4((int)v5, v7 + 6, "\\nicks\\");
              Function_21ed5c4((int)v5, v7 + 6, "\\email\\");
              Function_21ed5c4((int)v5, v7 + 6, (char *)v7 + 92);
              Function_21ed5c4((int)v5, v7 + 6, "\\pass\\");
              Function_21ed5c4((int)v5, v7 + 6, (char *)v7 + 205);
              Function_21ed5c4((int)v5, v7 + 6, "\\namespaceid\\");
              Function_21ed5f4((int)v5, v7 + 6, v121[284], v16);
              break;
            case 4:
              Function_21ed5c4((int)v5, v7 + 6, "\\pmatch\\");
              Function_21ed5c4((int)v5, v7 + 6, "\\sesskey\\");
              Function_21ed5f4((int)v5, v7 + 6, v121[102], v17);
              Function_21ed5c4((int)v5, v7 + 6, "\\profileid\\");
              Function_21ed5f4((int)v5, v7 + 6, v121[104], v18);
              Function_21ed5c4((int)v5, v7 + 6, "\\productid\\");
              Function_21ed5f4((int)v5, v7 + 6, v7[78], v19);
              break;
            case 5:
              Function_21ed5c4((int)v5, v7 + 6, "\\check\\");
              Function_21ed5c4((int)v5, v7 + 6, "\\nick\\");
              Function_21ed5c4((int)v5, v7 + 6, (char *)v7 + 40);
              Function_21ed5c4((int)v5, v7 + 6, "\\email\\");
              Function_21ed5c4((int)v5, v7 + 6, (char *)v7 + 92);
              Function_21ed5c4((int)v5, v7 + 6, "\\pass\\");
              Function_21ed5c4((int)v5, v7 + 6, (char *)v7 + 205);
              break;
            case 6:
              Function_21ed5c4((int)v5, v7 + 6, "\\newuser\\");
              Function_21ed5c4((int)v5, v7 + 6, "\\nick\\");
              Function_21ed5c4((int)v5, v7 + 6, (char *)v7 + 40);
              Function_21ed5c4((int)v5, v7 + 6, "\\email\\");
              Function_21ed5c4((int)v5, v7 + 6, (char *)v7 + 92);
              Function_21ed5c4((int)v5, v7 + 6, "\\pass\\");
              Function_21ed5c4((int)v5, v7 + 6, (char *)v7 + 205);
              Function_21ed5c4((int)v5, v7 + 6, "\\productID\\");
              Function_21ed5f4((int)v5, v7 + 6, v121[283], v20);
              Function_21ed5c4((int)v5, v7 + 6, "\\namespaceid\\");
              Function_21ed5f4((int)v5, v7 + 6, v121[284], v21);
              Function_21ed5c4((int)v5, v7 + 6, "\\uniquenick\\");
              Function_21ed5c4((int)v5, v7 + 6, (char *)v7 + 71);
              if ( *((uchar *)v7 + 236) )
              {
                Function_21ed5c4((int)v5, v7 + 6, "\\cdkey\\");
                Function_21ed5c4((int)v5, v7 + 6, (char *)v7 + 236);
              }
              break;
            case 7:
              Function_21ed5c4((int)v5, v7 + 6, "\\others\\");
              Function_21ed5c4((int)v5, v7 + 6, "\\sesskey\\");
              Function_21ed5f4((int)v5, v7 + 6, v121[102], v22);
              Function_21ed5c4((int)v5, v7 + 6, "\\profileid\\");
              Function_21ed5f4((int)v5, v7 + 6, v121[104], v23);
              Function_21ed5c4((int)v5, v7 + 6, "\\namespaceid\\");
              Function_21ed5f4((int)v5, v7 + 6, v121[284], v24);
              break;
            case 8:
              Function_21ed5c4((int)v5, v7 + 6, "\\uniquesearch\\");
              Function_21ed5c4((int)v5, v7 + 6, "\\preferrednick\\");
              Function_21ed5c4((int)v5, v7 + 6, (char *)v7 + 71);
              Function_21ed5c4((int)v5, v7 + 6, "\\namespaceid\\");
              Function_21ed5f4((int)v5, v7 + 6, v121[284], v25);
              break;
            default:
              Function_20d407c((int)"0", (int)"gpiSearch.c", (int)"gpiProcessSearch");
              break;
          }
        }
        Function_21ed5c4((int)v5, v7 + 6, "\\gamename\\");
        Function_21ed5c4((int)v5, v7 + 6, (char *)&dword_221A400[699]);
        Function_21ed5c4((int)v5, v7 + 6, "\\final\\");
        v118[5] = 4;
      }
    }
    else if ( v9 == 4 )
    {
      result = Function_21ed92c((int)v5, v7[1], v7 + 2, (int *)&v138, &v137, (int)"SM");
      if ( result )
      {
        if ( result == 3 )
        {
          Function_21f5d44(v5, 3329, "There was an error reading from the server.");
          Function_21ede68(v5, 3, 0);
          result = 3;
        }
        return result;
      }
      if ( Function_20d90b0((uchar *)v7[2], "\\final\\", v26) )
      {
        v141 = 0;
        v118[5] = 5;
        if ( Function_21f58a0(v5, v7[2], 1) )
        {
          v7[80] = 1;
          return 4;
        }
        v27 = *v7;
        if ( *v7 == 1 )
        {
          v122 = 0;
          v143 = 0;
          v144 = 0;
          v146 = 0;
          v145 = 1537;
          while ( 1 )
          {
            result = Function_21f5b74(v5, v7[2], &v141, &v148, v147);
            if ( result )
              return result;
            if ( Function_20d8d14((int *)&v148, "bsrdone") )
            {
              if ( Function_20d8d14((int *)&v148, "bsr") )
              {
                Function_21f5d44(v5, 1, "Error reading from the search server.");
                Function_21ede68(v5, 3, 1);
                result = 3;
              }
              else
              {
                ++v144;
                v28 = Function_21d7894();
                v29 = v28;
                v146 = v28;
                if ( v28 )
                {
                  v30 = 172 * (v144 - 1);
                  v31 = v28 + v30;
                  Call_FillMemWithValue((int *)(v28 + v30), 0, 0xACu);
                  Function_20dae0c((int)v147, v32, v33, v34);
                  *(uint *)(v29 + v30) = v35;
                  v36 = 0;
                  while ( 1 )
                  {
                    v37 = v141;
                    result = Function_21f5b74(v5, v7[2], &v141, &v148, v147);
                    if ( result )
                      break;
                    if ( Function_20d8d14((int *)&v148, "nick") )
                    {
                      if ( Function_20d8d14((int *)&v148, "uniquenick") )
                      {
                        if ( Function_20d8d14((int *)&v148, "firstname") )
                        {
                          if ( Function_20d8d14((int *)&v148, "lastname") )
                          {
                            if ( Function_20d8d14((int *)&v148, "email") )
                            {
                              if ( !Function_20d8d14((int *)&v148, "bsr") || !Function_20d8d14((int *)&v148, "bsrdone") )
                              {
                                v141 = v37;
                                v36 = 1;
                              }
                            }
                            else
                            {
                              Function_21f5820(v31 + 118, v147, 51);
                            }
                          }
                          else
                          {
                            Function_21f5820(v31 + 87, v147, 31);
                          }
                        }
                        else
                        {
                          Function_21f5820(v31 + 56, v147, 31);
                        }
                      }
                      else
                      {
                        Function_21f5820(v31 + 35, v147, 21);
                      }
                    }
                    else
                    {
                      Function_21f5820(v31 + 4, v147, 31);
                    }
                    if ( v36 )
                      goto LABEL_80;
                  }
                }
                else
                {
                  Function_21f5d68(v5, "Out of memory.");
                  result = 1;
                }
              }
              return result;
            }
            result = Function_21f5b74(v5, v7[2], &v141, &v148, v147);
            if ( result )
              return result;
            if ( !Function_20d8d14((int *)&v148, "more") && Function_20d8d14(v147, "0") )
              v145 = 1536;
            v122 = 1;
LABEL_80:
            if ( v122 )
            {
              v38 = v145;
              v39 = (void (__fastcall *)(uint, uint))v118[3];
              v40 = v118[4];
              v139 = v39;
              v140 = v40;
              if ( v39 )
                v39(v5, &v143);
              v41 = v38 == 1536;
              if ( v38 == 1536 )
                v41 = v145 == 1536;
              if ( !v41
                || (result = Function_21f3808(
                               v5,
                               (char *)v7 + 40,
                               (uchar *)v7 + 71,
                               (uchar *)v7 + 92,
                               (uchar *)v7 + 143,
                               (uchar *)v7 + 174,
                               v7[76],
                               v144 + v7[77],
                               v118[2],
                               v118[3],
                               v118[4])) == 0 )
              {
                Function_21d78b0(v146);
                v146 = 0;
                goto LABEL_245;
              }
              return result;
            }
          }
        }
        switch ( v27 )
        {
          case 2:
            v123 = v118[3];
            v124 = v118[4];
            if ( v123 )
            {
              result = Function_21f5b74(v5, v7[2], &v141, &v148, v147);
              if ( result )
                return result;
              if ( Function_20d8d14((int *)&v148, "vr") )
              {
                Function_21f5d44(v5, 1, "Error reading from the search server.");
                Function_21ede68(v5, 3, 1);
                return 3;
              }
              v42 = (uint *)Function_21d7880(60);
              v43 = (int)v42;
              if ( !v42 )
              {
                Function_21f5d68(v5, "Out of memory.");
                return 1;
              }
              *v42 = 0;
              Function_21f5820(v42 + 1, v7 + 23, 51);
              *(uint *)(v43 + 56) = SLOBYTE(v147[0]) != 48;
              result = Function_21edf5c(v5, v123, v124, v43, (int)v118, 0);
              if ( result )
                return result;
            }
            break;
          case 3:
            v125 = v118[3];
            v126 = v118[4];
            if ( v125 )
            {
              v44 = Function_21d7880(68);
              v45 = (uint *)v44;
              if ( v44 )
              {
                *(uint *)v44 = 0;
                Function_20d8b7c((uchar *)(v44 + 4), v7 + 23);
                v45[14] = 0;
                v45[15] = 0;
                v45[16] = 0;
                result = Function_21f5b74(v5, v7[2], &v141, &v148, v147);
                if ( !result )
                {
                  if ( Function_20d8d14((int *)&v148, "nr") )
                  {
                    Function_21f5d44(v5, 1, "Error reading from the search server.");
                    Function_21ede68(v5, 3, 1);
                    result = 3;
                  }
                  else
                  {
                    v46 = 0;
                    while ( 1 )
                    {
                      result = Function_21f5b74(v5, v7[2], &v141, &v148, v147);
                      if ( result )
                        break;
                      if ( Function_20d8d14((int *)&v148, "nick") )
                      {
                        if ( Function_20d8d14((int *)&v148, "uniquenick") )
                        {
                          if ( Function_20d8d14((int *)&v148, "ndone") )
                          {
                            Function_21f5d44(v5, 1, "Error reading from the search server.");
                            Function_21ede68(v5, 3, 1);
                            return 3;
                          }
                          v46 = 1;
                        }
                        else if ( v45[14] > 0 )
                        {
                          v51 = v45[16];
                          v52 = Function_21d7894();
                          if ( !v52 )
                          {
                            Function_21f5d68(v5, "Out of memory.");
                            return 1;
                          }
                          v45[16] = v52;
                          v53 = Function_21d7880(21);
                          if ( !v53 )
                          {
                            Function_21f5d68(v5, "Out of memory.");
                            return 1;
                          }
                          *(uint *)(v45[16] + 4 * v45[14] - 4) = v53;
                          Function_21f5820(*(uint *)(v45[16] + 4 * v45[14] - 4), v147, 21);
                        }
                      }
                      else
                      {
                        v47 = v45[15];
                        v48 = 4 * (v45[14] + 1);
                        v49 = Function_21d7894();
                        if ( !v49 )
                        {
                          Function_21f5d68(v5, "Out of memory.");
                          return 1;
                        }
                        v45[15] = v49;
                        v50 = Function_21d7880(31);
                        if ( !v50 )
                        {
                          Function_21f5d68(v5, "Out of memory.");
                          return 1;
                        }
                        *(uint *)(v45[15] + 4 * v45[14]) = v50;
                        Function_21f5820(*(uint *)(v45[15] + 4 * v45[14]), v147, 31);
                        ++v45[14];
                      }
                      if ( v46 )
                      {
                        result = Function_21edf5c(v5, v125, v126, (int)v45, (int)v118, 3);
                        if ( !result )
                          goto LABEL_245;
                        return result;
                      }
                    }
                  }
                }
              }
              else
              {
                Function_21f5d68(v5, "Out of memory.");
                result = 1;
              }
              return result;
            }
            break;
          case 4:
            v127 = v118[3];
            v128 = v118[4];
            if ( v127 )
            {
              v54 = (uint *)Function_21d7880(16);
              if ( v54 )
              {
                v55 = v7[78];
                *v54 = 0;
                v54[1] = v55;
                v54[2] = 0;
                v119 = 0;
                v54[3] = 0;
                while ( 1 )
                {
                  result = Function_21f5b74(v5, v7[2], &v141, &v148, v147);
                  if ( result )
                    break;
                  if ( Function_20d8d14((int *)&v148, "psrdone") )
                  {
                    if ( Function_20d8d14((int *)&v148, "psr") )
                    {
                      Function_21f5d44(v5, 1, "Error reading from the search server.");
                      Function_21ede68(v5, 3, 1);
                      result = 3;
                    }
                    else
                    {
                      ++v54[2];
                      v56 = v54[3];
                      v57 = Function_21d7894();
                      v54[3] = v57;
                      v58 = v57;
                      if ( v57 )
                      {
                        v59 = 296 * (v54[2] - 1);
                        v60 = v57 + v59;
                        Call_FillMemWithValue((int *)(v57 + v59), 0, 0x128u);
                        *(uint *)(v60 + 36) = 1;
                        Function_20dae0c((int)v147, v61, v62, v63);
                        *(uint *)(v58 + v59) = v64;
                        v65 = 0;
                        while ( 1 )
                        {
                          v66 = v141;
                          result = Function_21f5b74(v5, v7[2], &v141, &v148, v147);
                          if ( result )
                            break;
                          if ( Function_20d8d14((int *)&v148, "status") )
                          {
                            if ( !Function_20d8d14((int *)&v148, "nick") )
                              Function_21f5820(v60 + 4, v147, 31);
                          }
                          else
                          {
                            Function_21f5820(v60 + 40, v147, 256);
                          }
                          if ( Function_20d8d14((int *)&v148, "statuscode") )
                          {
                            if ( !Function_20d8d14((int *)&v148, "psr") || !Function_20d8d14((int *)&v148, "psrdone") )
                            {
                              v141 = v66;
                              v65 = 1;
                            }
                          }
                          else
                          {
                            Function_20dae0c((int)v147, v67, v68, v69);
                            *(uint *)(v60 + 36) = v70;
                          }
                          if ( v65 )
                            goto LABEL_151;
                        }
                      }
                      else
                      {
                        Function_21f5d68(v5, "Out of memory.");
                        result = 1;
                      }
                    }
                    return result;
                  }
                  v119 = 1;
LABEL_151:
                  if ( v119 )
                  {
                    result = Function_21edf5c(v5, v127, v128, (int)v54, (int)v118, 4);
                    if ( !result )
                      goto LABEL_245;
                    return result;
                  }
                }
              }
              else
              {
                Function_21f5d68(v5, "Out of memory.");
                result = 1;
              }
              return result;
            }
            break;
          case 5:
            v129 = v118[3];
            v130 = v118[4];
            if ( v129 )
            {
              result = Function_21f5b74(v5, v7[2], &v141, &v148, v147);
              if ( result )
                return result;
              if ( Function_20d8d14((int *)&v148, "cur") )
              {
                Function_21f5d44(v5, 1, "Error reading from the search server.");
                Function_21ede68(v5, 3, 1);
                return 3;
              }
              Function_20dae0c((int)v147, v71, v72, v73);
              v75 = v74;
              if ( v74 )
              {
                v76 = 0;
                v121[262] = v74;
              }
              else
              {
                if ( !Function_21f5978(v7[2], "\\pid\\", v147, 512) )
                {
                  Function_21f5d44(v5, 1, "Error reading from the search server.");
                  Function_21ede68(v5, 3, 1);
                  return 3;
                }
                Function_20dae0c((int)v147, v77, v78, v79);
                v76 = v80;
              }
              v81 = (int *)Function_21d7880(8);
              if ( !v81 )
              {
                Function_21f5d68(v5, "Out of memory.");
                return 1;
              }
              *v81 = v75;
              v81[1] = v76;
              result = Function_21edf5c(v5, v129, v130, (int)v81, (int)v118, 0);
              if ( result )
                return result;
            }
            break;
          case 6:
            v131 = v118[3];
            v132 = v118[4];
            if ( v131 )
            {
              result = Function_21f5b74(v5, v7[2], &v141, &v148, v147);
              if ( result )
                return result;
              if ( Function_20d8d14((int *)&v148, "nur") )
              {
                Function_21f5d44(v5, 1, "Error reading from the search server.");
                Function_21ede68(v5, 3, 1);
                return 3;
              }
              Function_20dae0c((int)v147, v82, v83, v84);
              v87 = v85;
              v86 = v85 == 0;
              if ( v85 )
                v85 = v121;
              if ( !v86 )
                v85[262] = (int)v87;
              if ( Function_21f5978(v7[2], "\\pid\\", v147, 512) )
              {
                Function_20dae0c((int)v147, v88, v89, v90);
                v91 = v92;
              }
              else
              {
                if ( !v87 )
                {
                  Function_21f5d44(v5, 1, "Error reading from the search server.");
                  Function_21ede68(v5, 3, 1);
                  return 3;
                }
                v91 = 0;
              }
              v93 = (int **)Function_21d7880(8);
              if ( !v93 )
              {
                Function_21f5d68(v5, "Out of memory.");
                return 1;
              }
              *v93 = v87;
              v93[1] = v91;
              result = Function_21edf5c(v5, v131, v132, (int)v93, (int)v118, 0);
              if ( result )
                return result;
            }
            break;
          case 7:
            v133 = v118[3];
            v134 = v118[4];
            if ( v133 )
            {
              v94 = (uint *)Function_21d7880(12);
              v95 = (int)v94;
              if ( v94 )
              {
                *v94 = 0;
                v94[1] = 0;
                v94[2] = 0;
                result = Function_21f5b74(v5, v7[2], &v141, &v148, v147);
                if ( !result )
                {
                  if ( Function_20d8d14((int *)&v148, "others") )
                  {
                    Function_21f5d44(v5, 1, "Error reading from the search server.");
                    Function_21ede68(v5, 3, 1);
                    result = 3;
                  }
                  else
                  {
                    v120 = 0;
                    while ( 1 )
                    {
                      result = Function_21f5b74(v5, v7[2], &v141, &v148, v147);
                      if ( result )
                        break;
                      if ( Function_20d8d14((int *)&v148, "odone") )
                      {
                        if ( Function_20d8d14((int *)&v148, "o") )
                        {
                          Function_21f5d44(v5, 1, "Error reading from the search server.");
                          Function_21ede68(v5, 3, 1);
                          result = 3;
                        }
                        else
                        {
                          v96 = *(uint *)(v95 + 8);
                          v97 = *(uint *)(v95 + 4) + 1;
                          v98 = Function_21d7894();
                          if ( v98 )
                          {
                            *(uint *)(v95 + 8) = v98;
                            v99 = v98;
                            v100 = 172 * *(uint *)(v95 + 4);
                            v101 = v98 + v100;
                            Call_FillMemWithValue((int *)(v98 + v100), 0, 0xACu);
                            v102 = *(uint *)(v95 + 4) + 1;
                            *(uint *)(v95 + 4) = v102;
                            Function_20dae0c((int)v147, v102, v103, v104);
                            *(uint *)(v99 + v100) = v105;
                            v106 = 0;
                            while ( 1 )
                            {
                              v107 = v141;
                              result = Function_21f5b74(v5, v7[2], &v141, &v148, v147);
                              if ( result )
                                break;
                              if ( Function_20d8d14((int *)&v148, "nick") )
                              {
                                if ( Function_20d8d14((int *)&v148, "uniquenick") )
                                {
                                  if ( Function_20d8d14((int *)&v148, "first") )
                                  {
                                    if ( Function_20d8d14((int *)&v148, "last") )
                                    {
                                      if ( Function_20d8d14((int *)&v148, "email") )
                                      {
                                        if ( !Function_20d8d14((int *)&v148, "o")
                                          || !Function_20d8d14((int *)&v148, "odone") )
                                        {
                                          v141 = v107;
                                          v106 = 1;
                                        }
                                      }
                                      else
                                      {
                                        Function_21f5820(v101 + 118, v147, 51);
                                      }
                                    }
                                    else
                                    {
                                      Function_21f5820(v101 + 87, v147, 31);
                                    }
                                  }
                                  else
                                  {
                                    Function_21f5820(v101 + 56, v147, 31);
                                  }
                                }
                                else
                                {
                                  Function_21f5820(v101 + 35, v147, 21);
                                }
                              }
                              else
                              {
                                Function_21f5820(v101 + 4, v147, 31);
                              }
                              if ( v106 )
                                goto LABEL_218;
                            }
                          }
                          else
                          {
                            Function_21f5d68(v5, "Out of memory.");
                            result = 1;
                          }
                        }
                        return result;
                      }
                      v120 = 1;
LABEL_218:
                      if ( v120 )
                      {
                        result = Function_21edf5c(v5, v133, v134, v95, (int)v118, 8);
                        if ( !result )
                          goto LABEL_245;
                        return result;
                      }
                    }
                  }
                }
              }
              else
              {
                Function_21f5d68(v5, "Out of memory.");
                result = 1;
              }
              return result;
            }
            break;
          case 8:
            v135 = v118[3];
            v136 = v118[4];
            if ( v135 )
            {
              v108 = 0;
              v109 = (uint *)Function_21d7880(12);
              v110 = (int)v109;
              if ( v109 )
              {
                *v109 = 0;
                v109[1] = 0;
                v109[2] = 0;
                result = Function_21f5b74(v5, v7[2], &v141, &v148, v147);
                if ( !result )
                {
                  if ( Function_20d8d14((int *)&v148, "us") )
                  {
                    Function_21f5d44(v5, 1, "Error reading from the search server.");
                    Function_21ede68(v5, 3, 1);
                    result = 3;
                  }
                  else
                  {
                    Function_20dae0c((int)v147, v111, v112, v113);
                    *(uint *)(v110 + 4) = v114;
                    v115 = Function_21d7880(4 * v114);
                    *(uint *)(v110 + 8) = v115;
                    if ( v115 )
                    {
                      v116 = 0;
                      while ( 1 )
                      {
                        result = Function_21f5b74(v5, v7[2], &v141, &v148, v147);
                        if ( result )
                          break;
                        if ( Function_20d8d14((int *)&v148, "nick") )
                        {
                          if ( Function_20d8d14((int *)&v148, "usdone") )
                          {
                            Function_21f5d44(v5, 1, "Error reading from the search server.");
                            Function_21ede68(v5, 3, 1);
                            return 3;
                          }
                          if ( v108 != *(uint *)(v110 + 4) )
                            Function_20d407c(
                              (int)"count == arg->numSuggestedNicks",
                              (int)"gpiSearch.c",
                              (int)"gpiProcessSearch");
                          *(uint *)(v110 + 4) = v108;
                          v116 = 1;
                        }
                        else
                        {
                          *(uint *)(*(uint *)(v110 + 8) + 4 * v108) = Function_21d7880(21);
                          v117 = *(uint *)(*(uint *)(v110 + 8) + 4 * v108);
                          if ( !v117 )
                          {
                            Function_21f5d68(v5, "Out of memory.");
                            return 1;
                          }
                          Function_21f5820(v117, v147, 21);
                          ++v108;
                        }
                        if ( v116 )
                        {
                          result = Function_21edf5c(v5, v135, v136, v110, (int)v118, 9);
                          if ( !result )
                            goto LABEL_245;
                          return result;
                        }
                      }
                    }
                    else
                    {
                      Function_21f5d68(v5, "Out of memory.");
                      result = 1;
                    }
                  }
                }
              }
              else
              {
                Function_21f5d68(v5, "Out of memory.");
                result = 1;
              }
              return result;
            }
            break;
          default:
            Function_20d407c((int)"0", (int)"gpiSearch.c", (int)"gpiProcessSearch");
            break;
        }
LABEL_245:
        v7[80] = 1;
        v4 = 0;
      }
    }
    if ( v4 )
      Function_21ea898(0xAu);
    if ( !v4 )
      return 0;
  }
}

//----- (021F54A4) --------------------------------------------------------
int __fastcall Function_21f54a4(int *a1)
{
  int *v1;
  int v2;
  int v3;
  int v4;
  int v5;
  int v6;
  int v7;
  uint *i;
  int v10;
  int v11;
  int v12;
  int j;
  int v14;

  v1 = a1;
  v2 = *a1;
  v3 = 0;
  v4 = *(uint *)(*a1 + 528);
  if ( v4 > 0 )
  {
    v7 = Function_21d7880(4 * v4);
    if ( !v7 )
    {
      Function_21f5d68(v1, "Out of memory.");
      return 1;
    }
    for ( i = *(uint **)(v2 + 1060); i; i = (uint *)i[8] )
    {
      if ( *i == 3 && i[5] != 5 && !*(uint *)(i[1] + 316) )
      {
        if ( v3 >= *(uint *)(v2 + 528) )
          Function_20d407c((int)"num < iconnection->numSearches", (int)"gpiSearch.c", (int)"gpiProcessSearches");
        *(uint *)(v7 + 4 * v3++) = i;
        *(uint *)(i[1] + 316) = 1;
      }
    }
    v10 = 0;
    while ( v10 < v3 )
    {
      v11 = Function_21f39f4(v1, *(uint **)(v7 + 4 * v10), v5, v6);
      if ( v11 )
        v12 = *(uint *)(v7 + 4 * v10);
      ++v10;
      if ( v11 )
        *(uint *)(v12 + 28) = v11;
    }
    for ( j = 0; j < v3; ++j )
    {
      v14 = *(uint *)(*(uint *)(v7 + 4 * j) + 4);
      *(uint *)(v14 + 316) = 0;
      if ( *(uint *)(v14 + 320) )
        Function_21f1ba8(v1, *(uint **)(v7 + 4 * j));
    }
    Function_21d78b0(v7);
  }
  return 0;
}

//----- (021F55F4) --------------------------------------------------------
int __fastcall Function_21f55f4(int *a1, uint *a2, int *a3, int a4, char *a5)
{
  int *v5;
  int v6;
  int result;
  char v8;

  v5 = a3;
  v6 = (int)a1;
  if ( !a5 )
    a1 = &dword_2219144;
  if ( !a5 )
    a5 = (char *)a1;
  result = Function_21f2e04(v6, a3, 201, a2);
  if ( !result )
  {
    Function_20d7510((int)&v8, "\\version\\%d\\result\\%d");
    result = Function_21ed8fc(v6, v5, &v8);
    if ( !result )
    {
      result = Function_21f2e80(v6, v5, a5, -1);
      if ( !result )
        result = 0;
    }
  }
  return result;
}

//----- (021F5698) --------------------------------------------------------
void __fastcall Function_21f5698(int *a1, int *a2, int a3, int a4)
{
  int *v4;
  int *v5;
  int v6;
  char v7;
  char v8;
  char v9;
  char v10;
  int v11;

  v11 = a4;
  v4 = a2;
  v5 = a1;
  if ( Function_21f5978(a4, "\\xfer\\", &v10, 64) )
  {
    Function_20d8a08((int)&v10, "%d %u %u", &v7, &v8, &v9);
    if ( v6 == 3 )
      Function_21f55f4(v5, &v7, v4, 2, 0);
  }
}

//----- (021F571C) --------------------------------------------------------
int __fastcall Function_21f571c(int *a1, uint *a2, uchar *a3)
{
  uchar *v3;
  uint *v4;
  int *v5;
  int result;
  uint *v7;
  int v8;
  int v9;

  v3 = a3;
  v4 = a2;
  v5 = a1;
  if ( Function_21f58a0(a1, a3, 1) )
    return 4;
  if ( Function_20d8e28(v3, "\\rn\\", 4) )
  {
    Function_21f5d44(v5, 1, "Unexpected data was received from the server.");
    Function_21ede68(v5, 3, 1);
    return 3;
  }
  v8 = v4[3];
  v9 = v4[4];
  if ( !v8 )
    goto LABEL_12;
  v7 = (uint *)Function_21d7880(4);
  if ( !v7 )
  {
    Function_21f5d68(v5, "Out of memory.");
    return 1;
  }
  *v7 = 0;
  result = Function_21edf5c(v5, v8, v9, (int)v7, (int)v4, 0);
  if ( !result )
  {
LABEL_12:
    Function_21f1ba8(v5, v4);
    result = 0;
  }
  return result;
}

//----- (021F5820) --------------------------------------------------------
int __fastcall Function_21f5820(uchar *a1, char *a2, int a3)
{
  uchar *v3;
  char *v4;
  int v5;
  int result;

  v3 = a1;
  v4 = a2;
  v5 = a3;
  if ( !a1 )
    Function_20d407c((int)"dest != NULL", (int)"gpiUtility.c", (int)"strzcpy");
  if ( !v4 )
    Function_20d407c((int)"src != NULL", (int)"gpiUtility.c", (int)"strzcpy");
  strncpy(v3, v4, v5);
  result = (int)&v3[v5];
  v3[v5 - 1] = 0;
  return result;
}

//----- (021F5894) --------------------------------------------------------
void __fastcall Function_21f5894(int a1, const char *a2)
{
  ;
}

//----- (021F58A0) --------------------------------------------------------
int __fastcall Function_21f58a0(uint *a1, uchar *a2, int a3, int a4)
{
  uchar *v4;
  uint *v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;
  char v15;
  int v16;

  v16 = a4;
  v4 = a2;
  v5 = a1;
  v6 = a3;
  v7 = *a1;
  if ( Function_20d8e28(a2, "\\error\\", 7) )
    return 0;
  if ( Function_21f5978(v4, "\\err\\", &v15, 16) )
  {
    Function_20dae0c((int)&v15, v8, v9, v10);
    *(uint *)(v7 + 1048) = v11;
  }
  if ( !Function_21f5978(v4, "\\errmsg\\", v7, 256) )
    *(uchar *)v7 = 0;
  if ( v6 )
  {
    v13 = Function_20d90b0(v4, "\\fatal\\", v12) != 0;
    Function_21ede68(v5, 4, v13);
  }
  return 1;
}

//----- (021F5978) --------------------------------------------------------
int __fastcall Function_21f5978(uchar *a1, uchar *a2, int a3, int a4)
{
  uchar *v4;
  uchar *v5;
  int v6;
  int v7;
  int v8;
  uchar *v9;
  int v11;
  int i;
  int v13;
  bool v14;

  v4 = a1;
  v5 = a2;
  v6 = a3;
  v7 = a4;
  if ( !a1 )
    Function_20d407c((int)"command != NULL", (int)"gpiUtility.c", (int)"gpiValueForKey");
  if ( !v5 )
    Function_20d407c((int)"key != NULL", (int)"gpiUtility.c", (int)"gpiValueForKey");
  if ( !v6 )
    Function_20d407c((int)"value != NULL", (int)"gpiUtility.c", (int)"gpiValueForKey");
  if ( v7 <= 0 )
    Function_20d407c((int)"len > 0", (int)"gpiUtility.c", (int)"gpiValueForKey");
  v8 = (char)*v5;
  v9 = Function_20d90b0(v4, v5, a3);
  if ( !v9 )
    return 0;
  v11 = (int)&v9[strlen((char *)v5)];
  for ( i = 0; i < v7 - 1; ++i )
  {
    v13 = *(char *)(v11 + i);
    v14 = v13 == 0;
    if ( *(uchar *)(v11 + i) )
      v14 = v13 == v8;
    if ( v14 )
      break;
    *(uchar *)(v6 + i) = v13;
  }
  *(uchar *)(v6 + i) = 0;
  return 1;
}

//----- (021F5A80) --------------------------------------------------------
int __fastcall Function_21f5a80(uint *a1, int a2, uint *a3, int a4)
{
  uint *v4;
  uint *v5;
  int v6;
  int result;
  int v8;
  int v9;
  int v10;

  v10 = a4;
  v4 = a3;
  v5 = a1;
  v9 = 0;
  v8 = 0;
  v6 = Function_21eaa74(a2, 0, &v9, &v8);
  if ( v6 == -1 )
  {
    Function_21f5894((int)v5, "Error connecting\n");
    Function_21f5d44(v5, 5, "There was an error checking for a completed connection.");
    Function_21ede68(v5, 3, 1);
    return 3;
  }
  if ( v6 <= 0 )
    goto LABEL_11;
  if ( v8 )
  {
    Function_21f5894((int)v5, "Connection rejected\n");
    *v4 = 4;
    return 0;
  }
  if ( v9 )
  {
    Function_21f5894((int)v5, "Connection accepted\n");
    *v4 = 3;
    result = 0;
  }
  else
  {
LABEL_11:
    result = 0;
    *v4 = 0;
  }
  return result;
}

//----- (021F5B74) --------------------------------------------------------
int __fastcall Function_21f5b74(uint *a1, int a2, uint *a3, uchar *a4, uchar *a5)
{
  int v5;
  uint *v6;
  uint *v7;
  uchar *v8;
  uchar *v9;
  int v10;
  int result;
  int v12;
  char *v13;
  int v14;
  int v15;
  int v16;
  int v17;
  int v18;
  bool v19;

  v5 = a2;
  v6 = a1;
  v7 = a3;
  v8 = a4;
  v9 = a5;
  if ( !a2 )
    Function_20d407c((int)"buffer != NULL", (int)"gpiUtility.c", (int)"gpiReadKeyAndValue");
  if ( !v8 )
    Function_20d407c((int)"key != NULL", (int)"gpiUtility.c", (int)"gpiReadKeyAndValue");
  if ( !a5 )
    Function_20d407c((int)"value != NULL", (int)"gpiUtility.c", (int)"gpiReadKeyAndValue");
  v10 = v5 + *v7;
  if ( *(uchar *)(v5 + *v7) == 92 )
  {
    v12 = *(char *)(v10 + 1);
    v13 = (char *)(v10 + 2);
    v14 = 0;
    if ( v12 == 92 )
    {
LABEL_15:
      v16 = 0;
      *v8 = 0;
      while ( 1 )
      {
        v18 = *v13++;
        v17 = v18;
        v19 = v18 == 92;
        if ( v18 != 92 )
          v19 = v17 == 0;
        if ( v19 )
          break;
        if ( v16 == 511 )
        {
          Function_21f5d44(v6, 1, "Parse Error.");
          Function_21ede68(v6, 3, 1);
          return 3;
        }
        *v9++ = v17;
        ++v16;
      }
      result = 0;
      *v9 = 0;
      *v7 += &v13[-v10 - 1];
    }
    else
    {
      while ( 1 )
      {
        if ( !v12 )
        {
          Function_21f5d44(v6, 1, "Parse Error.");
          Function_21ede68(v6, 3, 1);
          return 3;
        }
        if ( v14 == 511 )
          break;
        *v8++ = v12;
        v15 = *v13++;
        v12 = v15;
        ++v14;
        if ( v15 == 92 )
          goto LABEL_15;
      }
      Function_21f5d44(v6, 1, "Parse Error.");
      Function_21ede68(v6, 3, 1);
      result = 3;
    }
  }
  else
  {
    Function_21f5d44(v6, 1, "Parse Error.");
    Function_21ede68(v6, 3, 1);
    result = 3;
  }
  return result;
}

//----- (021F5D44) --------------------------------------------------------
int __fastcall Function_21f5d44(uchar **a1, int a2, char *a3)
{
  uchar *v3;
  int v4;
  int result;

  v3 = *a1;
  v4 = a2;
  result = Function_21f5820(*a1, a3, 256);
  *((uint *)v3 + 262) = v4;
  return result;
}

//----- (021F5D68) --------------------------------------------------------
int __fastcall Function_21f5d68(uchar **a1, char *a2)
{
  return Function_21f5820(*a1, a2, 256);
}

//----- (021F5D7C) --------------------------------------------------------
int __fastcall Function_21f5d7c(int *a1, char *a2, int a3, int a4)
{
  bool v4;
  int *v5;
  char *v6;
  int v7;
  int v8;
  int v9;
  uchar *v11;
  int v12;
  int v13;
  int v14;

  v5 = a1;
  v4 = a1 == 0;
  if ( !a1 )
    a1 = &dword_221A400[732];
  v6 = a2;
  if ( v4 )
    v5 = (int *)a1[1];
  v7 = a3;
  v8 = a4;
  if ( !v5 )
    Function_20d407c((int)&dword_221932C, (int)"gbucket.c", (int)"BucketNew");
  v11 = Function_21ea8ac(v6);
  v12 = v7;
  v14 = 0;
  v13 = 1;
  Function_21f623c(&v11, v8);
  Function_21ea44c((uchar *)*v5, (char *)&v11);
  v9 = Function_21f62d8(v5, v6);
  return Function_21f62b8(v9);
}

//----- (021F5E18) --------------------------------------------------------
int __fastcall Function_21f5e18(int a1, int a2, int a3)
{
  int v3;
  int v4;

  v3 = a3;
  v4 = Function_21f62d8(a1, a2);
  if ( !v4 )
    return 0;
  *(uint *)(v4 + 8) = 0;
  return Function_21f623c(v4, v3);
}

//----- (021F5E44) --------------------------------------------------------
int __fastcall Function_21f5e44(int a1, int a2, long long *a3)
{
  int v3;
  int v4;
  long long *v5;
  int v6;
  int v7;
  int result;
  int v9;
  uint *v10;
  int v11;
  long long *v12;
  int v13;
  int v14;

  v3 = a1;
  v4 = a2;
  v5 = a3;
  v6 = Function_21f62d8(a1, a2);
  v7 = v6;
  if ( !v6 )
    return 0;
  v9 = *(uint *)(v6 + 4);
  if ( v9 )
  {
    if ( v9 == 1 )
    {
      v12 = (long long *)Function_21f62b8(v6);
      v13 = dadd(*v5, *v12);
      v14 = Function_21f61f0(v13);
      result = Function_21f623c(v7, v14);
    }
    else
    {
      result = Function_21f6060(v3, v4, v5);
    }
  }
  else
  {
    v10 = (uint *)Function_21f62b8(v6);
    v11 = Function_21f61d8(*(uint *)v5 + *v10);
    result = Function_21f623c(v7, v11);
  }
  return result;
}

//----- (021F5ED8) --------------------------------------------------------
int __fastcall Function_21f5ed8(int a1, int a2, long long *a3)
{
  long long *v3;
  int v4;
  int v5;
  int result;
  int v7;
  uint *v8;
  int v9;
  long long *v10;
  int v11;
  int v12;

  v3 = a3;
  v4 = Function_21f62d8(a1, a2);
  v5 = v4;
  if ( !v4 )
    return 0;
  v7 = *(uint *)(v4 + 4);
  if ( v7 )
  {
    if ( v7 == 1 )
    {
      v10 = (long long *)Function_21f62b8(v4);
      v11 = dsub(*v10, *v3);
      v12 = Function_21f61f0(v11);
      result = Function_21f623c(v5, v12);
    }
    else
    {
      result = Function_21f62b8(v4);
    }
  }
  else
  {
    v8 = (uint *)Function_21f62b8(v4);
    v9 = Function_21f61d8(*v8 - *(uint *)v3);
    result = Function_21f623c(v5, v9);
  }
  return result;
}

//----- (021F5F5C) --------------------------------------------------------
int __fastcall Function_21f5f5c(int a1, int a2, long long *a3)
{
  long long *v3;
  int v4;
  int v5;
  int result;
  int v7;
  uint *v8;
  int v9;
  long long *v10;
  int v11;
  int v12;

  v3 = a3;
  v4 = Function_21f62d8(a1, a2);
  v5 = v4;
  if ( !v4 )
    return 0;
  v7 = *(uint *)(v4 + 4);
  if ( v7 )
  {
    if ( v7 == 1 )
    {
      v10 = (long long *)Function_21f62b8(v4);
      v11 = dmul(*v3, *v10);
      v12 = Function_21f61f0(v11);
      result = Function_21f623c(v5, v12);
    }
    else
    {
      result = Function_21f62b8(v4);
    }
  }
  else
  {
    v8 = (uint *)Function_21f62b8(v4);
    v9 = Function_21f61d8(*(uint *)v3 * *v8);
    result = Function_21f623c(v5, v9);
  }
  return result;
}

//----- (021F5FDC) --------------------------------------------------------
int __fastcall Function_21f5fdc(int a1, int a2, ull *a3)
{
  ull *v3;
  int v4;
  int v5;
  int result;
  int v7;
  uint *v8;
  uint v9;
  int v10;
  ll *v11;
  int v12;
  int v13;

  v3 = a3;
  v4 = Function_21f62d8(a1, a2);
  v5 = v4;
  if ( !v4 )
    return 0;
  v7 = *(uint *)(v4 + 4);
  if ( v7 )
  {
    if ( v7 == 1 )
    {
      v11 = (ll *)Function_21f62b8(v4);
      v12 = ddiv(*v11, *v3);
      v13 = Function_21f61f0(v12);
      result = Function_21f623c(v5, v13);
    }
    else
    {
      result = Function_21f62b8(v4);
    }
  }
  else
  {
    v8 = (uint *)Function_21f62b8(v4);
    v9 = s32_div_f(*v8, *(uint *)v3);
    v10 = Function_21f61d8(v9);
    result = Function_21f623c(v5, v10);
  }
  return result;
}

//----- (021F6060) --------------------------------------------------------
int __fastcall Function_21f6060(int a1, int a2, char *a3)
{
  char *v3;
  int v4;
  int v5;
  char *v7;
  int v8;
  int v9;
  char *v10;

  v3 = a3;
  v4 = Function_21f62d8(a1, a2);
  v5 = v4;
  if ( !v4 )
    return 0;
  if ( *(uint *)(v4 + 4) != 2 )
    Function_20d407c((int)"pbucket->type == bt_string", (int)"gbucket.c", (int)"BucketConcat");
  v7 = (char *)Function_21f62b8(v5);
  v8 = strlen(v7);
  v9 = strlen(v3);
  v10 = (char *)Function_21d7880(v8 + v9 + 1);
  Function_20d8b7c(v10, (int *)v7);
  Function_20d8c94(v10, v3);
  Function_21f623c(v5, v10);
  Function_21d78b0((int)v10);
  return Function_21f62b8(v5);
}

//----- (021F6104) --------------------------------------------------------
int __fastcall Function_21f6104(int a1, int a2, long long *a3)
{
  long long *v3;
  int v4;
  int v5;
  int result;
  int v7;
  uint *v8;
  int v9;
  uint v10;
  int v11;
  long long *v12;
  uint v13;
  long long v14;
  long long v15;
  int v16;
  uint v17;
  uint v18;
  uint v19;
  ull v20;
  int v21;
  int v22;

  v3 = a3;
  v4 = Function_21f62d8(a1, a2);
  v5 = v4;
  if ( !v4 )
    return 0;
  v7 = *(uint *)(v4 + 4);
  if ( v7 )
  {
    if ( v7 == 1 )
    {
      v12 = (long long *)Function_21f62b8(v4);
      v13 = *(uint *)(v5 + 8) + 1;
      *(uint *)(v5 + 8) = v13;
      LODWORD(v14) = dflt(v13);
      LODWORD(v15) = dmul(v14, *v12);
      v16 = dadd(*v3, v15);
      v17 = v13;
      v19 = v18;
      LODWORD(v20) = dflt(v17);
      v21 = ddiv(__PAIR__(v19, v16), v20);
      v22 = Function_21f61f0(v21);
      result = Function_21f623c(v5, v22);
    }
    else
    {
      result = Function_21f62b8(v4);
    }
  }
  else
  {
    v8 = (uint *)Function_21f62b8(v4);
    v9 = *(uint *)(v5 + 8) + 1;
    *(uint *)(v5 + 8) = v9;
    v10 = s32_div_f(*(uint *)v3 + v9 * *v8, v9);
    v11 = Function_21f61d8(v10);
    result = Function_21f623c(v5, v11);
  }
  return result;
}

//----- (021F61D8) --------------------------------------------------------
int *__fastcall Function_21f61d8(int a1)
{
  dword_221A400[732] = a1;
  return &dword_221A400[732];
}

//----- (021F61F0) --------------------------------------------------------
int *__fastcall Function_21f61f0(int a1, int a2)
{
  int *result;

  dword_221A400[734] = a1;
  result = &dword_221A400[734];
  dword_221A400[735] = a2;
  return result;
}

//----- (021F620C) --------------------------------------------------------
uchar *__fastcall Function_21f620c(uchar *a1)
{
  int v1;
  uchar *v2;
  int v3;

  v1 = (char)*a1;
  v2 = a1;
  if ( *a1 )
  {
    do
    {
      if ( v1 == 92 )
        *a1 = 47;
      v3 = (char)(a1++)[1];
      v1 = v3;
    }
    while ( v3 );
  }
  return v2;
}

//----- (021F623C) --------------------------------------------------------
int __fastcall Function_21f623c(int a1, char *a2)
{
  int v2;
  int v3;
  char *v4;
  int v5;
  int v6;
  uchar *v7;
  uchar *v8;

  v2 = a1;
  v3 = *(uint *)(a1 + 4);
  v4 = a2;
  if ( v3 )
  {
    if ( v3 == 1 )
    {
      v5 = *((uint *)a2 + 1);
      *(uint *)(v2 + 12) = *(uint *)a2;
      *(uint *)(v2 + 16) = v5;
    }
    else if ( v3 == 2 )
    {
      v6 = *(uint *)(v2 + 12);
      if ( v6 )
        Function_21d78b0(v6);
      if ( v4 )
      {
        v8 = Function_21ea8ac(v4);
        v7 = Function_21f620c(v8);
      }
      else
      {
        v7 = 0;
      }
      *(uint *)(v2 + 12) = v7;
    }
  }
  else
  {
    *(uint *)(v2 + 12) = *(uint *)a2;
  }
  return Function_21f62b8(v2);
}

//----- (021F62B8) --------------------------------------------------------
int __fastcall Function_21f62b8(int a1)
{
  if ( !a1 )
    return 0;
  if ( *(uint *)(a1 + 4) == 2 )
    return *(uint *)(a1 + 12);
  return a1 + 12;
}

//----- (021F62D8) --------------------------------------------------------
int __fastcall Function_21f62d8(int *a1, int a2)
{
  bool v2;
  int *v3;
  int v4;
  int v6;

  v3 = a1;
  v2 = a1 == 0;
  if ( !a1 )
    a1 = &dword_221A400[732];
  v4 = a2;
  if ( v2 )
    v3 = (int *)a1[1];
  if ( !v3 )
    Function_20d407c((int)&dword_221932C, (int)"gbucket.c", (int)"DoFind");
  v6 = v4;
  return Function_21ea598(*v3, (int)&v6);
}

//----- (021F6338) --------------------------------------------------------
int *Function_21f6338()
{
  int *result;

  dword_2219358 = -1;
  Function_21f6c70();
  result = (int *)dword_221A400[739];
  if ( dword_221A400[739] )
  {
    Function_21d78b0(dword_221A400[739]);
    result = &dword_221A400[736];
    dword_221A400[739] = 0;
    dword_221A400[747] = 0;
    dword_221A400[736] = 0;
  }
  return result;
}

//----- (021F63A8) --------------------------------------------------------
int Function_21f63a8()
{
  return 0;
}

//----- (021F63C8) --------------------------------------------------------
int Function_21f63c8()
{
  return 0;
}

//----- (021F6518) --------------------------------------------------------
int __fastcall Function_21f6518(int result, int a2)
{
  char *v2;
  int v3;
  int v4;

  v2 = &byte_22193A4;
  v3 = 0;
  while ( v3 < a2 )
  {
    *(uchar *)(result + v3) ^= *v2;
    v4 = (v2++)[1];
    ++v3;
    if ( !v4 )
      v2 = &byte_22193A4;
  }
  return result;
}

//----- (021F6560) --------------------------------------------------------
int *__fastcall Function_21f6560(uchar *a1, char *a2)
{
  char *v2;
  char *v3;
  uchar *v4;
  int v5;
  char v6;
  char v7;
  int v8;
  uchar *v9;
  int *result;
  uchar *v11;
  int *i;
  char v13;
  int v14;
  bool v15;
  char v16;

  v2 = &byte_2215B27;
  v3 = &v16;
  v4 = a1;
  v5 = 128;
  do
  {
    v6 = *v2;
    v7 = v2[1];
    v2 += 2;
    *v3 = v6;
    v3[1] = v7;
    v3 += 2;
    --v5;
  }
  while ( v5 );
  dword_221A400[745] ^= 1u;
  Function_20d8c94(&v16, a2);
  Function_20d8c94(&v16, (char *)&dword_22193C8);
  v9 = Function_20d90b0(v4, (uchar *)&v16, v8);
  if ( !v9 )
    return 0;
  v11 = &v9[strlen(&v16)];
  result = &dword_221A400[64 * dword_221A400[745] + 748];
  for ( i = &dword_221A400[64 * dword_221A400[745] + 748]; ; i = (int *)((char *)i + 1) )
  {
    v14 = (char)*v11;
    v15 = v14 == 0;
    if ( *v11 )
      v15 = v14 == 92;
    if ( v15 )
      break;
    v13 = *v11++;
    *(uchar *)i = v13;
  }
  *(uchar *)i = 0;
  return result;
}

//----- (021F6634) --------------------------------------------------------
int *__fastcall Function_21f6634(uchar *a1, char *a2)
{
  int *result;

  result = Function_21f6560(a1, a2);
  if ( !result )
    result = &dword_22193C4;
  return result;
}

//----- (021F664C) --------------------------------------------------------
int __fastcall Function_21f664c(int a1)
{
  return Function_21eab6c(a1);
}

//----- (021F6658) --------------------------------------------------------
char *__fastcall Function_21f6658(char *a1, int a2)
{
  int v2;
  char *v3;
  int v4;
  bool v5;

  v2 = a2 - 6;
  v3 = a1;
  if ( a2 - 6 <= 0 )
    return 0;
  while ( 1 )
  {
    v4 = *v3;
    v5 = v4 == 92;
    if ( v4 == 92 )
      v5 = v3[1] == 102;
    if ( v5 && v3[2] == 105 && v3[3] == 110 && v3[4] == 97 && v3[5] == 108 && v3[6] == 92 )
      break;
    if ( ++v3 - a1 >= v2 )
      return 0;
  }
  return v3;
}

//----- (021F66C0) --------------------------------------------------------
int __fastcall Function_21f66c0(int a1, int a2, int a3)
{
  int v3;
  int v4;
  int v5;
  int v7;
  uint *v8;
  bool v9;

  v3 = a1;
  v4 = a2;
  v5 = a3;
  if ( !dword_221A400[737] )
    return -1;
  v7 = 0;
  if ( Function_21e9bbc(dword_221A400[737]) <= 0 )
    return -1;
  while ( 1 )
  {
    v8 = (uint *)Function_21e9bc4((uint *)dword_221A400[737], v7);
    v9 = *v8 == v3;
    if ( *v8 == v3 )
      v9 = v8[1] == v4;
    if ( v9 && v8[2] == v5 )
      break;
    if ( ++v7 >= Function_21e9bbc(dword_221A400[737]) )
      return -1;
  }
  return v7;
}

//----- (021F6744) --------------------------------------------------------
int __fastcall Function_21f6744(uchar *a1)
{
  uchar *v1;
  int *v2;
  int v3;
  int v4;
  int v5;
  int v6;
  int v7;
  int *v8;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;
  int v14;
  int result;
  int v16;
  int v17;

  v1 = a1;
  v2 = Function_21f6634(a1, "pauthr");
  Function_20dae0c((int)v2, v3, v4, v5);
  v7 = v6;
  v8 = Function_21f6634(v1, "lid");
  Function_20dae0c((int)v8, v9, v10, v11);
  v13 = v12;
  Function_21f6634(v1, "errmsg");
  v14 = Function_21f66c0(0, v13, 0);
  result = -1;
  if ( v14 != -1 )
  {
    v16 = Function_21e9bc4((uint *)dword_221A400[737], v14);
    if ( v7 > 0 )
      v17 = 1;
    *(uint *)(v16 + 8) = v7;
    if ( v7 <= 0 )
      v17 = 0;
    result = Function_21f6b6c(v14, v17);
  }
  return result;
}

//----- (021F67F4) --------------------------------------------------------
int __fastcall Function_21f67f4(uchar *a1)
{
  uchar *v1;
  int *v2;
  int v3;
  int v4;
  int v5;
  int v6;
  int v7;
  int *v8;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;
  int result;
  int v15;
  int v16;

  v1 = a1;
  v2 = Function_21f6634(a1, "getpidr");
  Function_20dae0c((int)v2, v3, v4, v5);
  v7 = v6;
  v8 = Function_21f6634(v1, "lid");
  Function_20dae0c((int)v8, v9, v10, v11);
  v13 = Function_21f66c0(3, v12, 0);
  result = -1;
  if ( v13 != -1 )
  {
    v15 = Function_21e9bc4((uint *)dword_221A400[737], v13);
    if ( v7 > 0 )
      v16 = 1;
    *(uint *)(v15 + 8) = v7;
    if ( v7 <= 0 )
      v16 = 0;
    result = Function_21f6b6c(v13, v16);
  }
  return result;
}

//----- (021F6880) --------------------------------------------------------
int __fastcall Function_21f6880(uchar *a1)
{
  uchar *v1;
  int *v2;
  int v3;
  int v4;
  int v5;
  int v6;
  int v7;
  int *v8;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;
  int *v14;
  int v15;
  int v16;
  int v17;
  int v18;
  int v19;
  int *v20;
  int v21;
  int v22;
  int v23;
  int v24;
  int result;
  int *v26;
  int v27;
  int v28;
  int v29;
  int v30;

  v1 = a1;
  v2 = Function_21f6634(a1, "getpdr");
  Function_20dae0c((int)v2, v3, v4, v5);
  v7 = v6;
  v8 = Function_21f6634(v1, "lid");
  Function_20dae0c((int)v8, v9, v10, v11);
  v13 = v12;
  v14 = Function_21f6634(v1, "pid");
  Function_20dae0c((int)v14, v15, v16, v17);
  v19 = v18;
  v20 = Function_21f6634(v1, "mod");
  Function_20dae0c((int)v20, v21, v22, v23);
  v24 = Function_21f66c0(1, v13, v19);
  result = -1;
  if ( v24 != -1 )
  {
    v26 = Function_21f6634(v1, "length");
    Function_20dae0c((int)v26, v27, v28, v29);
    Function_20d90b0(v1, "\\data\\", v30);
    result = Function_21f6b6c(v24, v7);
  }
  return result;
}

//----- (021F6964) --------------------------------------------------------
int __fastcall Function_21f6964(uchar *a1)
{
  uchar *v1;
  int *v2;
  int v3;
  int v4;
  int v5;
  int v6;
  int v7;
  int *v8;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;
  int *v14;
  int v15;
  int v16;
  int v17;
  int v18;
  int v19;
  int *v20;
  int v21;
  int v22;
  int v23;
  int result;

  v1 = a1;
  v2 = Function_21f6634(a1, "setpdr");
  Function_20dae0c((int)v2, v3, v4, v5);
  v7 = v6;
  v8 = Function_21f6634(v1, "pid");
  Function_20dae0c((int)v8, v9, v10, v11);
  v13 = v12;
  v14 = Function_21f6634(v1, "lid");
  Function_20dae0c((int)v14, v15, v16, v17);
  v19 = v18;
  v20 = Function_21f6634(v1, "mod");
  Function_20dae0c((int)v20, v21, v22, v23);
  result = Function_21f66c0(2, v19, v13);
  if ( result != -1 )
    result = Function_21f6b6c(result, v7);
  return result;
}

//----- (021F69FC) --------------------------------------------------------
int __fastcall Function_21f69fc(uchar *a1, int a2)
{
  uchar *v2;
  int result;

  v2 = a1;
  a1[a2] = 0;
  if ( !Function_20d8e28(a1, "\\pauthr\\", 8) )
    return Function_21f6744(v2);
  if ( !Function_20d8e28(v2, "\\getpidr\\", 9) )
    return Function_21f67f4(v2);
  if ( !Function_20d8e28(v2, "\\getpidr\\", 9) )
    return Function_21f67f4(v2);
  if ( !Function_20d8e28(v2, "\\getpdr\\", 8) )
    return Function_21f6880(v2);
  result = Function_20d8e28(v2, "\\setpdr\\", 8);
  if ( !result )
    result = Function_21f6964(v2);
  return result;
}

//----- (021F6AE4) --------------------------------------------------------
int __fastcall Function_21f6ae4(char *a1, int a2)
{
  int v2;
  uchar *v3;
  int v4;
  char *v5;

  v2 = a2;
  v3 = (uchar *)a1;
  v4 = a2;
  v5 = Function_21f6658(a1, a2);
  while ( v2 > 0 && v5 )
  {
    off_2219360 = &byte_22193A4;
    Function_21f6518((int)v3, v5 - (char *)v3);
    Function_21f69fc(v3, v5 - (char *)v3);
    v2 -= v5 - (char *)v3 + 7;
    v3 = (uchar *)(v5 + 7);
    if ( v2 > 0 )
      v5 = Function_21f6658(v5 + 7, v2);
  }
  return v4 - v2;
}

//----- (021F6B6C) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x21F6BE4 for case 0"

//----- (021F6BD4) --------------------------------------------------------
void Function_21f6bd4()
{
  JUMPOUT(&loc_21F6BE4);
}

//----- (021F6BD8) --------------------------------------------------------
void Function_21f6bd8()
{
  JUMPOUT(&loc_21F6C00);
}

//----- (021F6BDC) --------------------------------------------------------
void Function_21f6bdc()
{
  JUMPOUT(&loc_21F6C28);
}

//----- (021F6BE0) --------------------------------------------------------
void __fastcall Function_21f6be0(int a1, int a2, int a3, uint *a4)
{
  int v4;
  int v5;
  void (__fastcall *v6)(uint, uint, int, uint);
  int v7;

  v6(a4[1], a4[2], v4, a4[5]);
  Function_21e9e40((int *)dword_221A400[737], v5);
  JUMPOUT(__CS__, v7);
}

//----- (021F6C70) --------------------------------------------------------
int *Function_21f6c70()
{
  int *result;
  int v1;
  char *v2;
  char *v3;
  int v4;
  char v5;
  char v6;
  char *v7;
  char *v8;
  int v9;
  char v10;
  char v11;
  char v12;
  char v13;

  result = (int *)dword_221A400[737];
  if ( dword_221A400[737] )
  {
    v1 = Function_21e9bbc(dword_221A400[737]) - 1;
    if ( v1 >= 0 )
    {
      v2 = &byte_22159A4;
      v3 = &v12;
      v4 = 8;
      do
      {
        v5 = *v2;
        v6 = v2[1];
        v2 += 2;
        *v3 = v5;
        v3[1] = v6;
        v3 += 2;
        --v4;
      }
      while ( v4 );
      do
      {
        v7 = &v12;
        v8 = &v13;
        v9 = 8;
        do
        {
          v10 = *v7;
          v11 = v7[1];
          v7 += 2;
          *v8 = v10;
          v8[1] = v11;
          v8 += 2;
          --v9;
        }
        while ( v9 );
        off_2219360 = dword_22193B4;
        Function_21f6518((int)&v13, 15);
        Function_21f6b6c(v1--, 0);
      }
      while ( v1 >= 0 );
    }
    Function_21e9b50((uint *)dword_221A400[737]);
    result = &dword_221A400[736];
    dword_221A400[737] = 0;
  }
  return result;
}

//----- (021F6D64) --------------------------------------------------------
int __fastcall Function_21f6d64(int a1, int a2)
{
  int result;

  if ( !a1 )
    a1 = dword_221A400[746];
  if ( a1 )
    result = *(uint *)Function_21e9bc4(*(uint **)(a1 + 32), a2);
  else
    result = a2;
  return result;
}

//----- (021F6D94) --------------------------------------------------------
int __fastcall Function_21f6d94(int a1, int a2)
{
  int result;

  if ( !a1 )
    a1 = dword_221A400[746];
  if ( a1 )
    result = *(uint *)Function_21e9bc4(*(uint **)(a1 + 28), a2);
  else
    result = a2;
  return result;
}

//----- (021F6DC4) --------------------------------------------------------
void *Function_21f6dc4(int *a1, char *a2, int (__fastcall *a3)(int), ...)
{
  bool v3;
  int *v4;
  char *v5;
  va_list v6;
  va_list varg_r3;

  va_start(varg_r3, a3);
  v4 = a1;
  v3 = a1 == 0;
  if ( !a1 )
    a1 = &dword_221A400[736];
  v5 = a2;
  if ( v3 )
    v4 = (int *)a1[10];
  if ( v4 )
  {
    v6 = (va_list)a3(v4[3]);
    if ( !v6 )
      v6 = (va_list)Function_21f5d7c((int *)v4[3], v5, 0, (int)varg_r3);
  }
  else
  {
    va_copy(v6, varg_r3);
  }
  return *v6;
}

//----- (021F6E2C) --------------------------------------------------------
long long Function_21f6e2c(int *a1, char *a2, int (__fastcall *a3)(int), ...)
{
  bool v3;
  int *v4;
  char *v5;
  va_list v6;
  va_list varg_r3;

  va_start(varg_r3, a3);
  v4 = a1;
  v3 = a1 == 0;
  if ( !a1 )
    a1 = &dword_221A400[736];
  v5 = a2;
  if ( v3 )
    v4 = (int *)a1[10];
  if ( v4 )
  {
    v6 = (va_list)a3(v4[3]);
    if ( !v6 )
      v6 = (va_list)Function_21f5d7c((int *)v4[3], v5, 1, (int)varg_r3);
  }
  else
  {
    va_copy(v6, varg_r3);
  }
  return *(ull *)v6;
}

//----- (021F6E9C) --------------------------------------------------------
int __fastcall Function_21f6e9c(int *a1, char *a2, int (__fastcall *a3)(int), int a4)
{
  bool v4;
  int *v5;
  char *v6;
  int v7;
  int result;

  v5 = a1;
  v4 = a1 == 0;
  if ( !a1 )
    a1 = &dword_221A400[736];
  v6 = a2;
  if ( v4 )
    v5 = (int *)a1[10];
  v7 = a4;
  if ( !v5 )
    return a4;
  result = a3(v5[3]);
  if ( !result )
    result = Function_21f5d7c((int *)v5[3], v6, 2, v7);
  return result;
}

//----- (021F6EF8) --------------------------------------------------------
void *__fastcall Function_21f6ef8(int a1, int a2, int (__fastcall *a3)(int), int a4, int a5)
{
  int *v5;
  int (__fastcall *v6)(int);
  int v7;
  char v9;

  v5 = (int *)a1;
  v6 = a3;
  v7 = a4;
  Function_21f6d64(a1, a5);
  Function_20d7510((int)&v9, "%s_t%d");
  return Function_21f6dc4(v5, &v9, v6, v7, a5);
}

//----- (021F6F54) --------------------------------------------------------
long long __fastcall Function_21f6f54(int a1, int a2, int (__fastcall *a3)(int), int a4, int a5, int a6)
{
  int *v6;
  int (__fastcall *v7)(int);
  int v8;
  char v10;

  v6 = (int *)a1;
  v7 = a3;
  v8 = a4;
  Function_21f6d64(a1, a6);
  Function_20d7510((int)&v10, "%s_t%d");
  return Function_21f6e2c(v6, &v10, v7, v8, a5, a6);
}

//----- (021F6FB4) --------------------------------------------------------
int __fastcall Function_21f6fb4(int a1, int a2, int (__fastcall *a3)(int), int a4, int a5)
{
  int *v5;
  int (__fastcall *v6)(int);
  int v7;
  char v9;

  v5 = (int *)a1;
  v6 = a3;
  v7 = a4;
  Function_21f6d64(a1, a5);
  Function_20d7510((int)&v9, "%s_t%d");
  return Function_21f6e9c(v5, &v9, v6, v7);
}

//----- (021F7010) --------------------------------------------------------
void *__fastcall Function_21f7010(int a1, int a2, int (__fastcall *a3)(int), int a4, int a5)
{
  int *v5;
  int (__fastcall *v6)(int);
  int v7;
  char v9;

  v5 = (int *)a1;
  v6 = a3;
  v7 = a4;
  Function_21f6d94(a1, a5);
  Function_20d7510((int)&v9, "%s_%d");
  return Function_21f6dc4(v5, &v9, v6, v7, a5);
}

//----- (021F706C) --------------------------------------------------------
long long __fastcall Function_21f706c(int a1, int a2, int (__fastcall *a3)(int), int a4, int a5, int a6)
{
  int *v6;
  int (__fastcall *v7)(int);
  int v8;
  char v10;

  v6 = (int *)a1;
  v7 = a3;
  v8 = a4;
  Function_21f6d94(a1, a6);
  Function_20d7510((int)&v10, "%s_%d");
  return Function_21f6e2c(v6, &v10, v7, v8, a5, a6);
}

//----- (021F70CC) --------------------------------------------------------
int __fastcall Function_21f70cc(int a1, int a2, int (__fastcall *a3)(int), int a4, int a5)
{
  int *v5;
  int (__fastcall *v6)(int);
  int v7;
  char v9;

  v5 = (int *)a1;
  v6 = a3;
  v7 = a4;
  Function_21f6d94(a1, a5);
  Function_20d7510((int)&v9, "%s_%d");
  return Function_21f6e9c(v5, &v9, v6, v7);
}

//----- (021F7128) --------------------------------------------------------
int __fastcall Function_21f7128(uchar *a1)
{
  int v1;
  int v2;
  uint v3;
  int v4;
  int v5;
  uchar *v6;
  uint v7;
  bool v8;
  char v9;
  int v10;
  int v11;
  bool v12;

  v3 = *a1;
  v4 = 0;
  v5 = 1;
  do
  {
    v6 = &a1[v5];
    v7 = a1[v5 - 1];
    v8 = v7 >= v3;
    v9 = v5 ^ v7;
    if ( !v8 )
      v1 = 1;
    v10 = v9 & 1;
    if ( v8 )
      v1 = 0;
    if ( v3 < 0x4F )
      v2 = 1;
    v11 = v4 ^ v10;
    if ( v3 >= 0x4F )
      v2 = 0;
    v2 ^= v3 & 1 ^ v11;
    v4 = v2 ^ v1;
    if ( v2 != v1 )
    {
      v1 = *v6;
      if ( !(v1 & 1) )
        return 0;
    }
    v12 = v4 == 0;
    if ( !v4 )
      v12 = (*v6 & 1) == 1;
    if ( v12 )
      return 0;
    ++v5;
  }
  while ( v5 < 32 );
  return 1;
}

//----- (021F71C4) --------------------------------------------------------
uchar *__fastcall Function_21f71c4(uchar *a1)
{
  uchar *v1;
  int v2;
  int v3;
  int v4;
  int v5;
  int v6;
  int v7;
  uchar *v8;
  uint v9;
  uint v10;
  bool v11;
  char v12;
  int v13;
  bool v14;
  int v15;
  int v16;
  int v17;
  bool v18;

  v1 = a1;
  if ( !a1 )
    Function_20d407c((int)"buffer", (int)"gt2Auth.c", (int)"gti2GetChallenge");
  Function_21ea840();
  Function_20d76d4(v2);
  v3 = Function_20d76a0();
  v4 = 0;
  v5 = 1;
  v7 = (ull)(93LL * (v3 / 93)) >> 32;
  v6 = 93 * (v3 / 93);
  *v1 = v3 % 93 + 33;
  do
  {
    v8 = &v1[v5];
    v9 = (uchar)v1[v5 - 1];
    v10 = (uchar)*v1;
    v11 = v9 >= v10;
    v12 = v5 ^ v9;
    if ( !v11 )
      v6 = 1;
    v13 = v12 & 1;
    if ( v11 )
      v6 = 0;
    v14 = v10 >= 0x4F;
    if ( v10 < 0x4F )
      v7 = 1;
    v15 = v10 & 1;
    v16 = v4 ^ v13;
    if ( v14 )
      v7 = 0;
    v4 = v15 ^ v16 ^ v7 ^ v6;
    v17 = Function_20d76a0();
    v7 = (ull)(93LL * (v17 / 93)) >> 32;
    v6 = 93 * (v17 / 93);
    *v8 = v17 % 93 + 33;
    if ( v4 && !(*v8 & 1) )
      goto LABEL_23;
    v18 = v4 == 0;
    if ( !v4 )
      v18 = (*v8 & 1) == 1;
    if ( v18 )
LABEL_23:
      ++*v8;
    ++v5;
  }
  while ( v5 < 32 );
  return v1;
}

//----- (021F72E0) --------------------------------------------------------
int __fastcall Function_21f72e0(int a1, uchar *a2)
{
  int v2;
  int v3;
  uchar *v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  bool v10;
  int v11;
  bool v12;
  int v13;
  uint v14;
  int v15;
  int v16;
  uint v17;

  v3 = a1;
  v4 = a2;
  v5 = strlen("3b8dd8995f7c40a9a5c5b7dd5b481341");
  v6 = Function_21f7128(v4);
  v7 = 0;
  v8 = v6;
  v9 = 0;
  do
  {
    v10 = v8 == 0;
    if ( v8 )
      v10 = v7 == 0;
    if ( v10 || v7 == 13 )
    {
      v2 = Function_20d76a0() % 93;
      LOBYTE(v11) = v2 + 33;
    }
    else
    {
      v12 = v7 == 1;
      if ( v7 != 1 )
        v12 = v7 == 14;
      if ( v12 )
        v2 = (char)v4[v7];
      else
        v6 = (int)&v4[v7];
      v13 = v4[v7];
      if ( !v12 )
        v2 = *(char *)(v6 - 1);
      s32_div_f(v7 + v13, v5);
      v14 = v2 * v9;
      v2 = v15;
      s32_div_f(v14, v5);
      v17 = a3b8dd8995f7c40[v2] + v7 * v13;
      v11 = abs(v4[(v17 >> 31) + __ROR4__((v17 << 27) - (v17 >> 31), 27)] ^ a3b8dd8995f7c40[v16]) % 93 + 33;
    }
    *(uchar *)(v3 + v7) = v11;
    v6 = v9 + 71;
    ++v7;
    v9 += 17991;
  }
  while ( v7 < 32 );
  return v3;
}

//----- (021F73E8) --------------------------------------------------------
int __fastcall Function_21f73e8(int a1, int a2)
{
  int v2;
  bool v3;

  v2 = 0;
  do
  {
    v3 = v2 == 0;
    if ( v2 )
      v3 = v2 == 13;
    if ( !v3 && *(uchar *)(a1 + v2) != *(uchar *)(a2 + v2) )
      return 0;
    ++v2;
  }
  while ( v2 < 32 );
  return 1;
}

//----- (021F741C) --------------------------------------------------------
int __fastcall Function_21f741c(int *a1, int a2)
{
  int v2;
  int *v3;
  int v4;

  v2 = a2;
  v3 = a1;
  v4 = Function_21d7880(a2);
  *v3 = v4;
  if ( !v4 )
    return 0;
  v3[1] = v2;
  return 1;
}

//----- (021F7448) --------------------------------------------------------
int __fastcall Function_21f7448(int a1)
{
  return *(uint *)(a1 + 4) - *(uint *)(a1 + 8);
}

//----- (021F7458) --------------------------------------------------------
int __fastcall Function_21f7458(int *a1, char a2)
{
  int *v2;
  char v3;
  int v4;
  int result;

  v2 = a1;
  v3 = a2;
  if ( a1[2] >= a1[1] )
    Function_20d407c((int)"buffer->len < buffer->size", (int)"gt2Buffer.c", (int)"gti2BufferWriteByte");
  v4 = v2[2];
  v2[2] = v4 + 1;
  result = *v2;
  *(uchar *)(*v2 + v4) = v3;
  return result;
}

//----- (021F74A8) --------------------------------------------------------
int __fastcall Function_21f74a8(int *a1, short a2)
{
  int *v2;
  short v3;
  int v4;
  int v5;
  int result;

  v2 = a1;
  v3 = a2;
  if ( a1[2] + 2 > a1[1] )
    Function_20d407c((int)"(buffer->len + 2) <= buffer->size", (int)"gt2Buffer.c", (int)"gti2BufferWriteUShort");
  v4 = v2[2];
  v2[2] = v4 + 1;
  *(uchar *)(*v2 + v4) = HIBYTE(v3);
  v5 = v2[2];
  v2[2] = v5 + 1;
  result = *v2;
  *(uchar *)(*v2 + v5) = v3;
  return result;
}

//----- (021F7514) --------------------------------------------------------
int __fastcall Function_21f7514(int result, char *a2, int a3)
{
  bool v3;
  char *v4;
  int v5;
  uint *v6;

  v4 = a2;
  v3 = a2 == 0;
  v5 = a3;
  v6 = (uint *)result;
  if ( a2 )
    v3 = a3 == 0;
  if ( !v3 )
  {
    if ( a3 == -1 )
      v5 = strlen(a2);
    if ( v6[2] + v5 > v6[1] )
      Function_20d407c((int)"(buffer->len + len) <= buffer->size", (int)"gt2Buffer.c", (int)"gti2BufferWriteData");
    memcpy((uchar *)(*v6 + v6[2]), v4, v5);
    result = v6[2] + v5;
    v6[2] = result;
  }
  return result;
}

//----- (021F759C) --------------------------------------------------------
int __fastcall Function_21f759c(uint *a1, int a2, int a3)
{
  int v3;
  uint *v4;
  int v5;
  int result;

  v3 = a2;
  v4 = a1;
  if ( a2 == -1 )
    a1 = (uint *)a1[2];
  v5 = a3;
  if ( a2 == -1 )
    v3 = (int)a1 - a3;
  if ( v3 > v4[2] )
    Function_20d407c((int)"start <= buffer->len", (int)"gt2Buffer.c", (int)"gti2BufferShorten");
  if ( v5 > v4[2] - v3 )
    Function_20d407c((int)"shortenBy <= (buffer->len - start)", (int)"gt2Buffer.c", (int)"gti2BufferShorten");
  Function_20d50d8((char *)(*v4 + v3), (char *)(*v4 + v3 + v5), v4[2] - v3 - v5);
  result = v4[2] - v5;
  v4[2] = result;
  return result;
}

//----- (021F763C) --------------------------------------------------------
int __fastcall Function_21f763c(uint *a1)
{
  uint *v1;

  v1 = a1;
  if ( !a1 )
    Function_20d407c((int)"socket", (int)"gt2Callback.c", (int)"gti2SocketErrorCallback");
  if ( !v1 )
    return 1;
  if ( !v1[9] )
    return 1;
  ++v1[7];
  ((void (__fastcall *)(uint *))v1[9])(v1);
  --v1[7];
  if ( !v1[5] || v1[7] )
    return 1;
  Function_21fa61c(v1);
  return 0;
}

//----- (021F76D8) --------------------------------------------------------
int __fastcall Function_21f76d8(uint *a1, int a2, int a3, int a4, int a5, int a6, int a7)
{
  int v7;
  bool v8;
  uint *v9;
  int v10;
  int v11;
  bool v12;
  int v14;
  bool v15;

  v7 = a2;
  v9 = a1;
  v8 = a1 == 0;
  v10 = a3;
  v11 = a4;
  if ( a1 )
    v8 = a2 == 0;
  if ( v8 )
    Function_20d407c((int)"socket && connection", (int)"gt2Callback.c", (int)"gti2ConnectAttemptCallback");
  v12 = v9 == 0;
  if ( v9 )
    v12 = v7 == 0;
  if ( v12 )
    return 1;
  if ( !v9[8] )
    return 1;
  v14 = a7;
  v15 = a7 == 0;
  if ( a7 )
    v14 = a6;
  ++v9[7];
  if ( a7 )
    v15 = v14 == 0;
  if ( v15 )
  {
    a6 = 0;
    a7 = 0;
  }
  ++*(uint *)(v7 + 36);
  ((void (__fastcall *)(uint *, int, int, int, int, int, int))v9[8])(v9, v7, v10, v11, a5, a6, a7);
  --v9[7];
  --*(uint *)(v7 + 36);
  if ( !v9[5] || v9[7] )
    return 1;
  Function_21fa61c(v9);
  return 0;
}

//----- (021F77F4) --------------------------------------------------------
int __fastcall Function_21f77f4(uint *a1, int a2, int a3, int a4)
{
  uint *v4;
  int v5;
  int v6;
  int v7;
  bool v9;
  int v10;

  v4 = a1;
  v5 = a2;
  v6 = a3;
  v7 = a4;
  if ( !a1 )
    Function_20d407c((int)"connection", (int)"gt2Callback.c", (int)"gti2ConnectedCallback");
  if ( !v4 )
    return 1;
  v4[6] = v5;
  if ( !v4[10] )
    return 1;
  v9 = v7 == 0;
  ++v4[9];
  if ( v7 )
    v9 = v6 == 0;
  if ( v9 )
    v6 = 0;
  ++*(uint *)(v4[2] + 28);
  if ( v9 )
    v7 = v6;
  ((void (__fastcall *)(uint *, int, int, int))v4[10])(v4, v5, v6, v7);
  --v4[9];
  --*(uint *)(v4[2] + 28);
  v10 = v4[2];
  if ( !*(uint *)(v10 + 20) || *(uint *)(v10 + 28) )
    return 1;
  Function_21fa61c(v10);
  return 0;
}

//----- (021F78DC) --------------------------------------------------------
int __fastcall Function_21f78dc(uint *a1, int a2, int a3, int a4)
{
  uint *v4;
  int v5;
  int v6;
  int v7;
  bool v9;
  int v10;

  v4 = a1;
  v5 = a2;
  v6 = a3;
  v7 = a4;
  if ( !a1 )
    Function_20d407c((int)"connection", (int)"gt2Callback.c", (int)"gti2ReceivedCallback");
  if ( !v4 )
    return 1;
  if ( !v4[11] )
    return 1;
  v9 = v6 == 0;
  ++v4[9];
  if ( v6 )
    v9 = v5 == 0;
  if ( v9 )
    v5 = 0;
  if ( v9 )
    v6 = v5;
  ++*(uint *)(v4[2] + 28);
  ((void (__fastcall *)(uint *, int, int, int))v4[11])(v4, v5, v6, v7);
  --v4[9];
  --*(uint *)(v4[2] + 28);
  v10 = v4[2];
  if ( !*(uint *)(v10 + 20) || *(uint *)(v10 + 28) )
    return 1;
  Function_21fa61c(v10);
  return 0;
}

//----- (021F79C0) --------------------------------------------------------
int __fastcall Function_21f79c0(uint *a1, int a2)
{
  uint *v2;
  int v3;
  int v5;

  v2 = a1;
  v3 = a2;
  if ( !a1 )
    Function_20d407c((int)"connection", (int)"gt2Callback.c", (int)"gti2ClosedCallback");
  if ( !v2 )
    return 1;
  if ( !v2[12] )
    return 1;
  ++v2[9];
  ++*(uint *)(v2[2] + 28);
  ((void (__fastcall *)(uint *, int))v2[12])(v2, v3);
  --v2[9];
  --*(uint *)(v2[2] + 28);
  v5 = v2[2];
  if ( !*(uint *)(v5 + 20) || *(uint *)(v5 + 28) )
    return 1;
  Function_21fa61c(v5);
  return 0;
}

//----- (021F7A84) --------------------------------------------------------
int __fastcall Function_21f7a84(uint *a1, int a2)
{
  uint *v2;
  int v3;
  int v5;

  v2 = a1;
  v3 = a2;
  if ( !a1 )
    Function_20d407c((int)"connection", (int)"gt2Callback.c", (int)"gti2PingCallback");
  if ( !v2 )
    return 1;
  if ( !v2[13] )
    return 1;
  ++v2[9];
  ++*(uint *)(v2[2] + 28);
  ((void (__fastcall *)(uint *, int))v2[13])(v2, v3);
  --v2[9];
  --*(uint *)(v2[2] + 28);
  v5 = v2[2];
  if ( !*(uint *)(v5 + 20) || *(uint *)(v5 + 28) )
    return 1;
  Function_21fa61c(v5);
  return 0;
}

//----- (021F7B48) --------------------------------------------------------
int __fastcall Function_21f7b48(int a1, int a2, int a3, int a4)
{
  int v4;
  int v5;
  int v6;
  int v7;
  void (__fastcall **v9)(int, int, int, int);
  bool v10;
  int v11;

  v4 = a1;
  v5 = a2;
  v6 = a3;
  v7 = a4;
  if ( !a1 )
    Function_20d407c((int)"connection", (int)"gt2Callback.c", (int)"gti2SendFilterCallback");
  if ( !v4 )
    return 1;
  v9 = (void (__fastcall **)(int, int, int, int))Function_21e9bc4(*(uint **)(v4 + 152), v5);
  if ( !v9 )
    return 1;
  v10 = v7 == 0;
  ++*(uint *)(v4 + 36);
  if ( v7 )
    v10 = v6 == 0;
  if ( v10 )
    v6 = 0;
  ++*(uint *)(*(uint *)(v4 + 8) + 28);
  if ( v10 )
    v7 = v6;
  (*v9)(v4, v5, v6, v7);
  --*(uint *)(v4 + 36);
  --*(uint *)(*(uint *)(v4 + 8) + 28);
  v11 = *(uint *)(v4 + 8);
  if ( !*(uint *)(v11 + 20) || *(uint *)(v11 + 28) )
    return 1;
  Function_21fa61c(v11);
  return 0;
}

//----- (021F7C40) --------------------------------------------------------
int __fastcall Function_21f7c40(int a1, int a2, int a3, int a4)
{
  int v4;
  int v5;
  int v6;
  int v7;
  void (__fastcall **v9)(int, int, int, int);
  bool v10;
  int v11;

  v4 = a1;
  v5 = a2;
  v6 = a3;
  v7 = a4;
  if ( !a1 )
    Function_20d407c((int)"connection", (int)"gt2Callback.c", (int)"gti2ReceiveFilterCallback");
  if ( !v4 )
    return 1;
  v9 = (void (__fastcall **)(int, int, int, int))Function_21e9bc4(*(uint **)(v4 + 156), v5);
  if ( !v9 )
    return 1;
  v10 = v7 == 0;
  ++*(uint *)(v4 + 36);
  if ( v7 )
    v10 = v6 == 0;
  if ( v10 )
    v6 = 0;
  ++*(uint *)(*(uint *)(v4 + 8) + 28);
  if ( v10 )
    v7 = v6;
  (*v9)(v4, v5, v6, v7);
  --*(uint *)(v4 + 36);
  --*(uint *)(*(uint *)(v4 + 8) + 28);
  v11 = *(uint *)(v4 + 8);
  if ( !*(uint *)(v11 + 20) || *(uint *)(v11 + 28) )
    return 1;
  Function_21fa61c(v11);
  return 0;
}

//----- (021F7D38) --------------------------------------------------------
int __fastcall Function_21f7d38(uint *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8)
{
  uint *v8;
  int v9;
  int v10;
  int v11;
  void (__fastcall *v13)(uint *, int, int, int, int, int, int);
  int v14;
  bool v15;
  int v16;

  v8 = a1;
  v9 = a2;
  v10 = a3;
  v11 = a4;
  if ( !a1 )
    Function_20d407c((int)"socket", (int)"gt2Callback.c", (int)"gti2DumpCallback");
  if ( !v8 )
    return 1;
  if ( a8 )
    v13 = (void (__fastcall *)(uint *, int, int, int, int, int, int))v8[10];
  else
    v13 = (void (__fastcall *)(uint *, int, int, int, int, int, int))v8[11];
  if ( !v13 )
    return 1;
  v14 = a7;
  v15 = a7 == 0;
  if ( a7 )
    v14 = a6;
  if ( a7 )
    v15 = v14 == 0;
  if ( v15 )
  {
    a7 = 0;
    a6 = 0;
  }
  v16 = v8[7] + 1;
  v8[7] = v16;
  if ( v9 )
    v16 = *(uint *)(v9 + 36);
  if ( v9 )
    *(uint *)(v9 + 36) = v16 + 1;
  v13(v8, v9, v10, v11, a5, a6, a7);
  --v8[7];
  if ( v9 )
    --*(uint *)(v9 + 36);
  if ( !v8[5] || v8[7] )
    return 1;
  Function_21fa61c(v8);
  return 0;
}

//----- (021F7E5C) --------------------------------------------------------
int __fastcall Function_21f7e5c(uint *a1, int a2, int a3, int a4, int a5, uint *a6)
{
  uint *v6;
  int v7;
  int v8;
  int v9;
  bool v11;

  v6 = a1;
  v7 = a2;
  v8 = a3;
  v9 = a4;
  *a6 = 0;
  if ( !a1 )
    Function_20d407c((int)"socket", (int)"gt2Callback.c", (int)"gti2UnrecognizedMessageCallback");
  if ( !v6 )
    return 1;
  if ( !v6[12] )
    return 1;
  v11 = a5 == 0;
  if ( a5 )
    v11 = v9 == 0;
  if ( v11 )
  {
    v9 = 0;
    a5 = 0;
  }
  ++v6[7];
  *a6 = ((int (__fastcall *)(uint *, int, int, int, int))v6[12])(v6, v7, v8, v9, a5);
  --v6[7];
  if ( !v6[5] || v6[7] )
    return 1;
  Function_21fa61c(v6);
  return 0;
}

//----- (021F7F54) --------------------------------------------------------
int __fastcall Function_21f7f54(int a1, int a2)
{
  int v2;
  int result;

  v2 = a2;
  result = Function_21fa678();
  if ( !result )
  {
    result = 0;
    *(uint *)(*(uint *)v2 + 12) = 0;
    *(uint *)(*(uint *)v2 + 16) = 1;
  }
  return result;
}

//----- (021F7F84) --------------------------------------------------------
int __fastcall Function_21f7f84(int a1, int a2)
{
  int v2;
  int result;

  v2 = a2;
  result = Function_21fa678();
  if ( !result )
  {
    *(uint *)(*(uint *)v2 + 12) = 2;
    result = 0;
    *(uint *)(*(uint *)v2 + 16) = 0;
  }
  return result;
}

//----- (021F7FB4) --------------------------------------------------------
int Function_21f7fb4(int a1, ...)
{
  uint *v1;
  uint *v2;
  uchar *v3;
  int result;
  int v5;
  int v6;
  int v7;
  char v8;
  uint *v9;
  int varg_r0;
  char *varg_r1;
  va_list varg_r1a;
  int varg_r2;
  va_list varg_r2a;
  uint *varg_r3;
  va_list va2;

  va_start(va2, a1);
  va_start(varg_r2a, a1);
  va_start(varg_r1a, a1);
  varg_r1 = va_arg(varg_r2a, char *);
  va_copy(va2, varg_r2a);
  varg_r2 = va_arg(va2, uint);
  varg_r3 = va_arg(va2, uint *);
  varg_r0 = a1;
  v9 = varg_r3;
  v1 = (uint *)a1;
  v2 = varg_r3;
  Function_21fae30((char **)varg_r1a, (int *)varg_r2a);
  if ( varg_r2 > 0 )
  {
    v3 = (uchar *)Function_21d7880(varg_r2);
    v1[14] = v3;
    if ( !v3 )
      return 1;
    memcpy(v3, varg_r1, varg_r2);
    v1[15] = varg_r2;
  }
  if ( v2 )
  {
    v5 = v2[1];
    v6 = v2[2];
    v7 = v2[3];
    v1[10] = *v2;
    v1[11] = v5;
    v1[12] = v6;
    v1[13] = v7;
  }
  Function_21f71c4(&v8);
  Function_21f72e0((int)(v1 + 26), (uchar *)&v8);
  Function_21f9db8(v1, &v8);
  result = 0;
  v1[3] = 0;
  return result;
}

//----- (021F805C) --------------------------------------------------------
int __fastcall Function_21f805c(uint *a1, uint *a2)
{
  uint *v2;
  uint *v3;
  int result;
  int v5;
  int v6;
  int v7;

  v2 = a1;
  v3 = a2;
  if ( a1[5] )
  {
    result = 0;
    v2[5] = 0;
  }
  else
  {
    a1[5] = 0;
    if ( a1[3] == 4 )
    {
      Function_21f9f1c();
      v2[3] = 5;
      if ( v3 )
      {
        v5 = v3[1];
        v6 = v3[2];
        v7 = v3[3];
        v2[10] = *v3;
        v2[11] = v5;
        v2[12] = v6;
        v2[13] = v7;
      }
      result = 1;
    }
    else
    {
      result = 0;
    }
  }
  return result;
}

//----- (021F80B8) --------------------------------------------------------
int Function_21f80b8(int a1, ...)
{
  int v1;
  int result;
  int varg_r1;
  va_list varg_r1a;
  va_list varg_r2;

  va_start(varg_r2, a1);
  va_start(varg_r1a, a1);
  varg_r1 = va_arg(varg_r2, uint);
  v1 = a1;
  *(uint *)(a1 + 20) = 0;
  result = *(uint *)(a1 + 12);
  if ( result == 4 )
  {
    Function_21fae30((int *)varg_r1a, (int *)varg_r2);
    Function_21f9f78(v1, varg_r1, *(int *)varg_r2);
    result = 6;
    *(uint *)(v1 + 12) = 6;
  }
  return result;
}

//----- (021F8110) --------------------------------------------------------
int __fastcall Function_21f8110(int a1, int a2, int a3)
{
  int v3;
  int v5;

  v3 = a1;
  if ( !Function_21fa94c(*(uint *)(a1 + 8), *(uint *)a1, *(ushort *)(a1 + 4), a2, a3) )
    return 0;
  Function_21ea840();
  *(uint *)(v3 + 136) = v5;
  return 1;
}

//----- (021F8158) --------------------------------------------------------
int __fastcall Function_21f8158(uint *a1, int a2)
{
  uint *v2;
  int v3;
  int v4;
  uint v5;
  int result;

  v2 = a1;
  v3 = a1[3];
  if ( v3 >= 5 )
    goto LABEL_16;
  v4 = 0;
  if ( a1[4] )
  {
    v5 = a1[8];
    if ( v5 && a2 - a1[7] > v5 )
      v4 = 1;
  }
  else if ( v3 < 4 && (uint)(a2 - a1[7]) > 0xEA60 )
  {
    v4 = 1;
  }
  if ( !v4 || (Function_21fa270(a1), Function_21f8390(v2), Function_21f77f4(v2, 6, 0, 0)) )
LABEL_16:
    result = 1;
  else
    result = 0;
  return result;
}

//----- (021F81FC) --------------------------------------------------------
int __fastcall Function_21f81fc(int a1, int a2)
{
  int v2;
  int v3;
  int v4;
  int v5;

  v2 = a1;
  v3 = a2;
  v4 = Function_21e9bbc(*(uint *)(a1 + 96));
  v5 = 0;
  if ( v4 <= 0 )
    return 1;
  while ( (uint)(v3 - *(uint *)(Function_21e9bc4(*(uint **)(v2 + 96), v5) + 12)) <= 0x3E8
       || Function_21fa2d8(v2) )
  {
    if ( ++v5 >= v4 )
      return 1;
  }
  return 0;
}

//----- (021F8268) --------------------------------------------------------
int __fastcall Function_21f8268(int a1, int a2)
{
  if ( !*(uint *)(a1 + 144) )
    return 1;
  if ( (uint)(a2 - *(uint *)(a1 + 148)) <= 0x64 || Function_21fa16c() )
    return 1;
  return 0;
}

//----- (021F82A4) --------------------------------------------------------
BOOL __fastcall Function_21f82a4(int a1, int a2)
{
  return (uint)(a2 - *(uint *)(a1 + 136)) <= 0x7530 || Function_21fa048();
}

//----- (021F82D8) --------------------------------------------------------
BOOL __fastcall Function_21f82d8(uint *a1, int a2)
{
  int v2;
  int v3;

  v2 = (int)a1;
  v3 = a2;
  if ( !Function_21f8158(a1, a2) )
    return 0;
  if ( !Function_21f82a4(v2, v3) )
    return 0;
  if ( Function_21f81fc(v2, v3) )
    return Function_21f8268(v2, v3) != 0;
  return 0;
}

//----- (021F8340) --------------------------------------------------------
int __fastcall Function_21f8340(int result, int a2)
{
  uint *v2;

  v2 = (uint *)result;
  if ( a2 )
  {
    if ( *(uint *)(result + 12) < 7 )
    {
      Function_21f8390(result);
      Function_21fa270(v2);
      Function_21f79c0(v2, 0);
      result = Function_21fa888(v2);
    }
  }
  else
  {
    *(uint *)(result + 12) = 6;
    result = Function_21f9fec();
  }
  return result;
}

//----- (021F8390) --------------------------------------------------------
int __fastcall Function_21f8390(int a1, int a2, int a3, int a4)
{
  int v4;
  int result;
  int varg_r0;
  int varg_r1;
  int varg_r2;
  int varg_r3;

  varg_r0 = a1;
  varg_r1 = a2;
  varg_r2 = a3;
  varg_r3 = a4;
  v4 = a1;
  result = *(uint *)(a1 + 12);
  if ( result != 7 )
  {
    *(uint *)(v4 + 12) = 7;
    Function_21ea4f4(*(uint *)(*(uint *)(varg_r0 + 8) + 12), (int)&varg_r0);
    result = Function_21e9c2c(*(uint *)(*(uint *)(varg_r0 + 8) + 16), (int)&varg_r0);
  }
  return result;
}

//----- (021F83EC) --------------------------------------------------------
int __fastcall Function_21f83ec(uint *a1)
{
  uint *v1;
  int v2;
  int v3;
  int v4;
  uint *v5;
  uint *v6;
  uint *v7;
  uint *v8;

  v1 = a1;
  v2 = a1[14];
  if ( v2 )
    Function_21d78b0(v2);
  v3 = v1[17];
  if ( v3 )
    Function_21d78b0(v3);
  v4 = v1[20];
  if ( v4 )
    Function_21d78b0(v4);
  v5 = (uint *)v1[23];
  if ( v5 )
    Function_21e9b50(v5);
  v6 = (uint *)v1[24];
  if ( v6 )
    Function_21e9b50(v6);
  v7 = (uint *)v1[38];
  if ( v7 )
    Function_21e9b50(v7);
  v8 = (uint *)v1[39];
  if ( v8 )
    Function_21e9b50(v8);
  return Function_21d78b0((int)v1);
}

//----- (021F8470) --------------------------------------------------------
int Function_21f8470()
{
  return Function_21fa3fc();
}

//----- (021F8484) --------------------------------------------------------
int __fastcall Function_21f8484(int a1)
{
  int v1;

  v1 = a1;
  Function_21f8710(a1);
  return Function_21fa61c(v1);
}

//----- (021F849C) --------------------------------------------------------
int __fastcall Function_21f849c(int a1)
{
  int v1;
  int result;

  v1 = a1;
  result = Function_21f9a68();
  if ( result )
  {
    result = Function_21fab4c(v1);
    if ( result )
      result = Function_21fab88(v1);
  }
  return result;
}

//----- (021F84CC) --------------------------------------------------------
int Function_21f84cc()
{
  return Function_21fa660();
}

//----- (021F84D8) --------------------------------------------------------
int __fastcall Function_21f84d8(uint *a1, uint *a2)
{
  return Function_21f805c(a1, a2);
}

//----- (021F84E4) --------------------------------------------------------
int __fastcall Function_21f84e4(int a1)
{
  return Function_21f80b8(a1);
}

//----- (021F84F0) --------------------------------------------------------
int __fastcall Function_21f84f0(int a1, uint *a2, int a3, int a4, int a5, int a6, int a7, uint *a8)
{
  int v8;
  uint *v9;
  int v10;
  int v11;
  uint v12;
  bool v13;
  int result;
  int v15;
  uint *v16;
  BOOL v17;
  short v18;
  uint v19;
  uint *v20;

  v8 = a1;
  v9 = a2;
  v10 = a4;
  v11 = Function_21facac(a3, &v19, &v18);
  v13 = v11 == 0;
  if ( v11 )
  {
    v12 = v19;
    v13 = v19 == 0;
  }
  if ( !v13 )
    v13 = v18 == 0;
  if ( v13 )
    return 4;
  if ( (((v12 << 24) & 0xFF000000 | (v12 << 8) & 0xFF0000 | HIBYTE(v12) | (v12 >> 8) & 0xFF00) & 0xE0000000) == -536870912 )
    return 4;
  result = Function_21f7f54(v8, (int)&v20);
  if ( !result )
  {
    v20[8] = a6;
    v15 = Function_21f7fb4((int)v20, v10, a5, a7);
    if ( v15 )
    {
      Function_21fa888(v20);
      result = v15;
    }
    else
    {
      v16 = a8;
      if ( a8 )
      {
        ++v20[9];
        do
        {
          Function_21f849c(v8);
          v17 = v20[3] >= 5;
          if ( v20[3] < 5 )
            Function_21ea898(1u);
        }
        while ( !v17 );
        --v20[9];
        if ( v20[3] == 5 )
          *v9 = v20;
        result = v20[6];
      }
      else
      {
        if ( v9 )
          v16 = v20;
        if ( v9 )
          *v9 = v16;
        result = 0;
      }
    }
  }
  return result;
}

//----- (021F866C) --------------------------------------------------------
int Function_21f866c(int a1, ...)
{
  int v1;
  int result;
  int v3;
  int varg_r1;
  va_list varg_r1a;
  int varg_r2;
  va_list varg_r2a;
  int varg_r3;
  va_list va2;

  va_start(va2, a1);
  va_start(varg_r2a, a1);
  va_start(varg_r1a, a1);
  varg_r1 = va_arg(varg_r2a, uint);
  va_copy(va2, varg_r2a);
  varg_r2 = va_arg(va2, uint);
  varg_r3 = va_arg(va2, uint);
  v1 = a1;
  result = *(uint *)(a1 + 12);
  v3 = varg_r3;
  if ( result == 5 )
  {
    Function_21fae30((int *)varg_r1a, (int *)varg_r2a);
    if ( Function_21e9bbc(*(uint *)(v1 + 152)) )
      result = Function_21f7b48(v1, 0, varg_r1, varg_r2);
    else
      result = Function_21fa344(v1, varg_r1, varg_r2, v3);
  }
  return result;
}

//----- (021F86F0) --------------------------------------------------------
int __fastcall Function_21f86f0(int a1)
{
  return Function_21f8340(a1, 1);
}

//----- (021F8700) --------------------------------------------------------
int __fastcall Function_21f8700(int *a1)
{
  return Function_21f86f0(*a1);
}

//----- (021F8710) --------------------------------------------------------
int *__fastcall Function_21f8710(int *result)
{
  if ( dword_221A400[1004] != 1 )
  {
    dword_221A400[1004] = 1;
    Function_21ea6d0((uint *)result[3], (int (__fastcall *)(int, int))Function_21f8700, 0);
    result = &dword_221A400[1004];
    dword_221A400[1004] = 0;
  }
  return result;
}

//----- (021F8754) --------------------------------------------------------
int __fastcall Function_21f8754(int a1)
{
  return *(ushort *)(a1 + 8);
}

//----- (021F875C) --------------------------------------------------------
int __fastcall Function_21f875c(int a1)
{
  return *(uint *)(a1 + 84) - *(uint *)(a1 + 88);
}

//----- (021F876C) --------------------------------------------------------
int __fastcall Function_21f876c(int a1)
{
  return *(uint *)a1;
}

//----- (021F8774) --------------------------------------------------------
int __fastcall Function_21f8774(int result, int a2)
{
  *(uint *)(result + 48) = a2;
  return result;
}

//----- (021F877C) --------------------------------------------------------
int __fastcall Function_21f877c(int result, int a2)
{
  int v2;
  int v3;

  v2 = result;
  v3 = a2;
  if ( !result )
    result = Function_20d407c((int)"connection", (int)"gt2Main.c", (int)"gt2SetConnectionData");
  *(uint *)(v2 + 64) = v3;
  return result;
}

//----- (021F87B8) --------------------------------------------------------
int __fastcall Function_21f87b8(int a1)
{
  int v1;

  v1 = a1;
  if ( !a1 )
    Function_20d407c((int)"connection", (int)"gt2Main.c", (int)"gt2GetConnectionData");
  return *(uint *)(v1 + 64);
}

//----- (021F87F0) --------------------------------------------------------
int __fastcall Function_21f87f0(int a1, int a2)
{
  return *(uchar *)(a1 + a2 + 1) | (ushort)((*(uchar *)(a1 + a2) << 8) & 0xFF00);
}

//----- (021F8810) --------------------------------------------------------
int __fastcall Function_21f8810(int result, int a2, short a3)
{
  *(uchar *)(result + a2) = HIBYTE(a3);
  *(uchar *)(result + a2 + 1) = a3;
  return result;
}

//----- (021F8824) --------------------------------------------------------
int __fastcall Function_21f8824(short a1, short a2)
{
  return (short)(a1 - a2);
}

//----- (021F8834) --------------------------------------------------------
int __fastcall Function_21f8834(uint *a1, int a2, int a3)
{
  uint *v3;
  int v4;
  int v5;
  int v6;
  int v7;

  v3 = a1;
  v4 = a1[3];
  v5 = a2;
  v6 = a3;
  if ( v4 >= 5 )
  {
    if ( v4 != 7 )
    {
      Function_21f8390((int)a1, a2, a3, v4);
      if ( !Function_21f79c0(v3, v6) )
        return 0;
    }
  }
  else
  {
    v7 = a1[4];
    if ( v7 )
    {
      Function_21f8390((int)a1, v7, a3, v4);
      if ( !Function_21f77f4(v3, v5, 0, 0) )
        return 0;
    }
    else
    {
      if ( v4 == 4 )
        a1[5] = 1;
      Function_21f8390((int)a1, 0, a3, v4);
    }
  }
  return 1;
}

//----- (021F88C8) --------------------------------------------------------
int __fastcall Function_21f88c8(uint *a1)
{
  return Function_21f8834(a1, 7, 2);
}

//----- (021F88DC) --------------------------------------------------------
int __fastcall Function_21f88dc(uint *a1)
{
  uint *v1;
  int result;

  v1 = a1;
  if ( Function_21fa270(a1) )
    result = Function_21f8834(v1, 1, 4);
  else
    result = 0;
  return result;
}

//----- (021F8908) --------------------------------------------------------
int __fastcall Function_21f8908(int a1, short a2)
{
  int v2;
  short v3;
  int v4;
  int v5;
  int result;
  int v7;
  int v8;
  int v9;
  bool v10;
  uchar v11;
  bool v12;
  int i;
  int v14;
  int v15;
  int j;
  uint *v17;

  v2 = a1;
  v3 = a2;
  v4 = Function_21e9bbc(*(uint *)(a1 + 96));
  v5 = v4;
  if ( !v4 )
    return 1;
  v7 = 0;
  if ( v4 > 0 )
  {
    do
    {
      v8 = Function_21e9bc4(*(uint **)(v2 + 96), v7);
      v9 = Function_21f8824(*(ushort *)(v8 + 8), v3);
      v11 = 0;
      v10 = v9 < 0;
      if ( v9 < 0 )
      {
        v11 = __OFSUB__(++v7, v5);
        v10 = v7 - v5 < 0;
      }
    }
    while ( v10 ^ v11 );
  }
  if ( !v7 )
    return 1;
  v12 = v7 == 0;
  for ( i = v7 - 1; !v12; --i )
  {
    Function_21e9e40(*(int **)(v2 + 96), i);
    v12 = i == 0;
  }
  v14 = Function_21e9bbc(*(uint *)(v2 + 96));
  if ( v14 )
  {
    v15 = *(uint *)Function_21e9bc4(*(uint **)(v2 + 96), 0);
    for ( j = 0; j < v14; *v17 -= v15 )
      v17 = (uint *)Function_21e9bc4(*(uint **)(v2 + 96), j++);
    Function_21f759c((uint *)(v2 + 80), 0, v15);
    result = 1;
  }
  else
  {
    *(uint *)(v2 + 88) = 0;
    result = 1;
  }
  return result;
}

//----- (021F8A04) --------------------------------------------------------
int __fastcall Function_21f8a04(uint *a1, int a2, int a3)
{
  uint *v3;
  int v4;
  int v5;
  bool v6;
  int v7;
  int result;
  int v9;

  v3 = a1;
  v4 = a1[3];
  v5 = a2;
  v6 = v4 == 5;
  if ( v4 != 5 )
    v6 = v4 == 6;
  v7 = a3;
  if ( !v6 )
    return 1;
  if ( !Function_21e9bbc(v3[39]) )
    return Function_21f78dc(v3, v5, v7, 0) != 0;
  v9 = Function_21f7c40((int)v3, 0, v5, v7);
  v6 = v9 == 0;
  result = v9 != 0;
  if ( v6 )
    result = 0;
  return result;
}

//----- (021F8A94) --------------------------------------------------------
BOOL __fastcall Function_21f8a94(uint *a1, int a2, int a3)
{
  uint *v3;
  int v4;
  int v5;
  bool v6;
  int v7;
  BOOL result;
  int v9;

  v3 = a1;
  v4 = a1[3];
  v5 = a2;
  v6 = v4 == 5;
  v7 = a3;
  if ( v4 != 5 )
    v6 = v4 == 6;
  if ( !v6 )
  {
    if ( !Function_21f88c8(a1) )
      return 0;
    return 1;
  }
  if ( !Function_21e9bbc(a1[39]) )
  {
    if ( !Function_21f78dc(v3, v5, v7, 1) )
      return 0;
    return 1;
  }
  v9 = Function_21f7c40((int)v3, 0, v5, v7);
  v6 = v9 == 0;
  result = v9 != 0;
  if ( v6 )
    result = 0;
  return result;
}

//----- (021F8B40) --------------------------------------------------------
BOOL __fastcall Function_21f8b40(uint *a1, uchar *a2, int a3)
{
  uint *v3;
  int v4;
  bool v5;
  BOOL result;
  int v7;
  char v8;
  char v9;

  v3 = a1;
  if ( a1[3] == 2 )
  {
    if ( a3 >= 32 )
    {
      Function_21f72e0((int)&v9, a2);
      Function_21f71c4(&v8);
      Function_21f72e0((int)(v3 + 26), (uchar *)&v8);
      if ( Function_21f9e18(v3, &v9, &v8) )
      {
        v3[3] = 3;
        result = 1;
      }
      else
      {
        result = 0;
      }
    }
    else
    {
      v7 = Function_21f88c8(a1);
      v5 = v7 == 0;
      result = v7 != 0;
      if ( v5 )
        result = 0;
    }
  }
  else
  {
    v4 = Function_21f88c8(a1);
    v5 = v4 == 0;
    result = v4 != 0;
    if ( v5 )
      result = 0;
  }
  return result;
}

//----- (021F8BD8) --------------------------------------------------------
BOOL __fastcall Function_21f8bd8(uint *a1, int a2, int a3, int a4)
{
  uint *v4;
  int v5;
  int v6;
  bool v7;
  BOOL result;
  int v9;
  int v10;
  int v11;
  char v12;
  int v13;

  v13 = a4;
  v4 = a1;
  v5 = a2;
  if ( a1[3] )
  {
    v6 = Function_21f88c8(a1);
    v7 = v6 == 0;
    result = v6 != 0;
    if ( v7 )
      result = 0;
  }
  else if ( a3 >= 64 )
  {
    if ( Function_21f73e8(a2, (int)(a1 + 26)) )
    {
      Function_21f72e0((int)&v12, (uchar *)(v5 + 32));
      if ( Function_21f9ea4(v4, &v12, v4[14], v4[15]) )
      {
        v11 = v4[14];
        if ( v11 )
        {
          Function_21d78b0(v11);
          v4[14] = 0;
        }
        result = 1;
        v4[3] = 1;
      }
      else
      {
        result = 0;
      }
    }
    else
    {
      v10 = Function_21f88c8(v4);
      v7 = v10 == 0;
      result = v10 != 0;
      if ( v7 )
        result = 0;
    }
  }
  else
  {
    v9 = Function_21f88c8(a1);
    v7 = v9 == 0;
    result = v9 != 0;
    if ( v7 )
      result = 0;
  }
  return result;
}

//----- (021F8CB4) --------------------------------------------------------
BOOL __fastcall Function_21f8cb4(uint *a1, int a2, int a3)
{
  int v3;
  int v4;
  int v5;
  int v6;
  bool v7;
  BOOL result;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;
  int v14;

  v3 = (int)a1;
  v4 = a2;
  v5 = a3;
  if ( a1[3] == 3 )
  {
    if ( a3 >= 32 )
    {
      if ( Function_21f73e8(a2, (int)(a1 + 26)) )
      {
        if ( *(uint *)(*(uint *)(v3 + 8) + 32) )
        {
          *(uint *)(v3 + 12) = 4;
          Function_21ea840();
          result = Function_21f76d8(
                     *(uint **)(v3 + 8),
                     v3,
                     *(uint *)v3,
                     *(ushort *)(v3 + 4),
                     v14 - *(uint *)(v3 + 140),
                     v4 + 32,
                     v5 - 32) != 0;
        }
        else if ( Function_21fa270(v3) )
        {
          Function_21f8390(v3, v11, v12, v13);
          result = 1;
        }
        else
        {
          result = 0;
        }
      }
      else
      {
        v10 = Function_21f88c8((uint *)v3);
        v7 = v10 == 0;
        result = v10 != 0;
        if ( v7 )
          result = 0;
      }
    }
    else
    {
      v9 = Function_21f88c8(a1);
      v7 = v9 == 0;
      result = v9 != 0;
      if ( v7 )
        result = 0;
    }
  }
  else
  {
    v6 = Function_21f88c8(a1);
    v7 = v6 == 0;
    result = v6 != 0;
    if ( v7 )
      result = 0;
  }
  return result;
}

//----- (021F8DC4) --------------------------------------------------------
BOOL __fastcall Function_21f8dc4(uint *a1)
{
  if ( a1[3] != 1 )
    return Function_21f88c8(a1) != 0;
  a1[3] = 5;
  return Function_21f77f4(a1, 0, 0, 0) != 0;
}

//----- (021F8E10) --------------------------------------------------------
BOOL __fastcall Function_21f8e10(uint *a1, int a2, int a3)
{
  uint *v3;
  int v4;
  int v5;
  BOOL result;

  v3 = a1;
  v4 = a2;
  v5 = a3;
  if ( a1[3] != 1 )
    return Function_21f88c8(a1) != 0;
  Function_21f8390((int)a1, a2, a3, 1);
  if ( Function_21fa270(v3) )
    result = Function_21f77f4(v3, 2, v4, v5) != 0;
  else
    result = 0;
  return result;
}

//----- (021F8E7C) --------------------------------------------------------
BOOL __fastcall Function_21f8e7c(uint *a1)
{
  uint *v1;
  BOOL result;

  v1 = a1;
  if ( Function_21fa270(a1) )
    result = Function_21f8834(v1, 2, v1[3] != 6) != 0;
  else
    result = 0;
  return result;
}

//----- (021F8EC0) --------------------------------------------------------
int __fastcall Function_21f8ec0(int a1, int a2, uchar *a3, int a4)
{
  ++*(ushort *)(a1 + 102);
  if ( a2 )
  {
    switch ( a2 )
    {
      case 1:
        if ( !Function_21f8b40((uint *)a1, a3, a4) )
          return 0;
        break;
      case 2:
        if ( !Function_21f8bd8((uint *)a1, (int)a3, a4, a4) )
          return 0;
        break;
      case 3:
        if ( !Function_21f8cb4((uint *)a1, (int)a3, a4) )
          return 0;
        break;
      case 4:
        if ( !Function_21f8dc4((uint *)a1) )
          return 0;
        break;
      case 5:
        if ( !Function_21f8e10((uint *)a1, (int)a3, a4) )
          return 0;
        break;
      default:
        if ( a2 == 6 && !Function_21f8e7c((uint *)a1) )
          return 0;
        break;
    }
  }
  else if ( !Function_21f8a94((uint *)a1, (int)a3, a4) )
  {
    return 0;
  }
  return 1;
}

//----- (021F8FC0) --------------------------------------------------------
int __fastcall Function_21f8fc0(int a1, int a2)
{
  return Function_21f8824(*(ushort *)(a1 + 12), *(ushort *)(a2 + 12));
}

//----- (021F8FD4) --------------------------------------------------------
int __fastcall Function_21f8fd4(int a1, int a2, int a3, char *a4, int a5, uint *a6)
{
  int v6;
  int v7;
  int v8;
  char *v9;
  int v10;
  int v11;
  int v12;
  int result;
  int v14;
  int v15;
  int v16;
  int v17;
  int v18;
  int v19;
  short v20;

  v6 = a1;
  v7 = a2;
  v8 = a3;
  v9 = a4;
  v10 = Function_21e9bbc(*(uint *)(a1 + 92));
  v11 = 0;
  if ( v10 <= 0 )
  {
LABEL_6:
    if ( Function_21f7448(v6 + 68) < a5 )
    {
      result = 1;
      *a6 = 1;
      return result;
    }
    v15 = *(uint *)(v6 + 76);
    v18 = a5;
    v19 = v7;
    v20 = v8;
    v17 = v15;
    Function_21e9d30(*(int **)(v6 + 92), (char *)&v17, (int)Function_21f8fc0, v14);
    if ( v10 + 1 != Function_21e9bbc(*(uint *)(v6 + 92)) )
    {
      result = 1;
      *a6 = 1;
      return result;
    }
    Function_21f7514(v6 + 68, v9, a5);
    if ( v10 )
    {
      if ( *(ushort *)(Function_21e9bc4(*(uint **)(v6 + 92), v10) + 12) == v8 )
      {
        v16 = Function_21e9bc4(*(uint **)(v6 + 92), v10 - 1);
        if ( (ushort)Function_21f8824(v8, *(ushort *)(v16 + 12)) > 1u
          && !Function_21fa1d0(v6, (*(ushort *)(v16 + 12) + 1) & 0xFFFF, (v8 - 1) & 0xFFFF) )
        {
          return 0;
        }
      }
    }
    else if ( !Function_21fa1d0(v6, *(ushort *)(v6 + 102), (v8 - 1) & 0xFFFF) )
    {
      return 0;
    }
    *a6 = 0;
    result = 1;
  }
  else
  {
    while ( 1 )
    {
      v12 = *(ushort *)(Function_21e9bc4(*(uint **)(v6 + 92), v11) + 12);
      if ( v12 == v8 )
        break;
      if ( Function_21f8824(v12, v8) <= 0 && ++v11 < v10 )
        continue;
      goto LABEL_6;
    }
    *a6 = 0;
    result = 1;
  }
  return result;
}

//----- (021F9188) --------------------------------------------------------
int __fastcall Function_21f9188(int a1, int *a2, int a3)
{
  int v3;
  int v4;
  int v5;
  int v6;
  int v7;
  int i;
  int *v9;
  int v10;
  int v11;

  v3 = a1;
  v4 = *a2;
  v5 = a2[1];
  v6 = 0;
  Function_21e9e40(*(int **)(a1 + 92), a3);
  v7 = Function_21e9bbc(*(uint *)(v3 + 92));
  for ( i = 0; i < v7; ++i )
  {
    v9 = (int *)Function_21e9bc4(*(uint **)(v3 + 92), i);
    if ( *v9 > v4 )
    {
      v10 = *v9 - v5;
      *v9 = v10;
      v11 = v10 + v9[1];
      if ( v6 <= v11 )
        v6 = v11;
    }
  }
  return Function_21f759c((uint *)(v3 + 68), v4, v5);
}

//----- (021F920C) --------------------------------------------------------
int __fastcall Function_21f920c(int a1)
{
  int i;
  int v2;
  int v3;

  for ( i = a1; ; Function_21f9188(i, (int *)v3, v2) )
  {
    v2 = Function_21e9bbc(*(uint *)(i + 92)) - 1;
    if ( v2 < 0 )
      break;
    while ( 1 )
    {
      v3 = Function_21e9bc4(*(uint **)(i + 92), v2);
      if ( *(ushort *)(v3 + 12) == *(ushort *)(i + 102) )
        break;
      if ( --v2 < 0 )
        return 1;
    }
    if ( !Function_21f8ec0(
            i,
            *(uint *)(v3 + 8),
            (uchar *)(*(uint *)(i + 68) + *(uint *)v3),
            *(uint *)(v3 + 4)) )
      return 0;
  }
  return 1;
}

//----- (021F928C) --------------------------------------------------------
void __fastcall Function_21f928c(int a1)
{
  int v1;
  int v2;

  v1 = a1;
  if ( !*(uint *)(a1 + 144) )
  {
    *(uint *)(a1 + 144) = 1;
    Function_21ea840();
    *(uint *)(v1 + 148) = v2;
  }
}

//----- (021F92B4) --------------------------------------------------------
BOOL __fastcall Function_21f92b4(uint *a1, int a2, int a3, int a4)
{
  int v4;
  int v5;
  int v6;
  int v7;
  int v8;
  bool v9;
  BOOL result;
  int v11;
  short v12;
  int v13;
  int v14;
  int v15;
  int v16;

  v16 = a4;
  v4 = a4;
  v5 = (int)a1;
  v6 = a2;
  v7 = a3;
  if ( a4 >= 7 )
  {
    v11 = Function_21f87f0(a3, 3);
    v12 = Function_21f87f0(v7, 5);
    if ( Function_21f8908(v5, v12) )
    {
      v13 = *(ushort *)(v5 + 102);
      if ( v11 == v13 )
      {
        Function_21f928c(v5);
        if ( Function_21f8ec0(v5, v6, (uchar *)(v7 + 7), v4 - 7) )
        {
          v14 = Function_21f920c(v5);
          v9 = v14 == 0;
          result = v14 != 0;
          if ( v9 )
            result = 0;
        }
        else
        {
          result = 0;
        }
      }
      else if ( Function_21f8824(v11, v13) >= 0 )
      {
        if ( Function_21f8fd4(v5, v6, v11, (char *)(v7 + 7), v4 - 7, &v15) )
          result = !v15 || Function_21f88dc((uint *)v5);
        else
          result = 0;
      }
      else
      {
        Function_21f928c(v5);
        result = 1;
      }
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    v8 = Function_21f88c8(a1);
    v9 = v8 == 0;
    result = v8 != 0;
    if ( v9 )
      result = 0;
  }
  return result;
}

//----- (021F9400) --------------------------------------------------------
BOOL __fastcall Function_21f9400(uint *a1, int a2, int a3)
{
  int v3;
  short v5;

  v3 = (int)a1;
  if ( a3 != 2 )
    return Function_21f88c8(a1) != 0;
  v5 = Function_21f87f0(a2, 0);
  return Function_21f8908(v3, v5) != 0;
}

//----- (021F944C) --------------------------------------------------------
BOOL __fastcall Function_21f944c(uint *a1, int a2, int a3)
{
  int v3;
  uint *v4;
  int v5;
  short v6;
  short v7;
  short v8;
  int v10;
  int v11;
  int v12;

  v3 = a2;
  v4 = a1;
  v5 = a3;
  v6 = Function_21f87f0(a2, 0);
  v7 = v6;
  if ( v5 == 2 )
  {
    v8 = v6;
  }
  else
  {
    if ( v5 != 4 )
      return Function_21f88c8(v4) != 0;
    v8 = Function_21f87f0(v3, 2);
  }
  v10 = Function_21e9bbc(v4[24]);
  v11 = 0;
  if ( v10 <= 0 )
    return 1;
  while ( 1 )
  {
    v12 = Function_21e9bc4((uint *)v4[24], v11);
    if ( Function_21f8824(*(ushort *)(v12 + 8), v7) >= 0
      && Function_21f8824(*(ushort *)(v12 + 8), v8) <= 0
      && !Function_21fa2d8(v4) )
    {
      break;
    }
    if ( ++v11 >= v10 )
      return 1;
  }
  return 0;
}

//----- (021F9528) --------------------------------------------------------
int Function_21f9528()
{
  return Function_21fa25c();
}

//----- (021F9534) --------------------------------------------------------
BOOL __fastcall Function_21f9534(uint *a1, uchar *a2, int a3)
{
  uint *v3;
  uchar *v4;
  int v6;
  int v7;

  v3 = a1;
  v4 = a2;
  if ( !a1[13] )
    return 1;
  if ( a3 != 8 )
    return 1;
  if ( Function_20d5190(a2, "time", 4) )
    return 1;
  v6 = *((uint *)v4 + 1);
  Function_21ea840();
  return Function_21f7a84(v3, v7 - v6) != 0;
}

//----- (021F95C8) --------------------------------------------------------
BOOL __fastcall Function_21f95c8(uint *a1)
{
  int v1;
  BOOL result;

  v1 = a1[3];
  if ( v1 == 7 )
    result = 1;
  else
    result = Function_21f8834(a1, 2, v1 != 6) != 0;
  return result;
}

//----- (021F9600) --------------------------------------------------------
int __fastcall Function_21f9600(uint *a1, int a2, int a3, int a4)
{
  switch ( a2 )
  {
    case 100:
      if ( !Function_21f9400(a1, a3 + 3, a4 - 3) )
        return 0;
      break;
    case 101:
      if ( !Function_21f944c(a1, a3 + 3, a4 - 3) )
        return 0;
      break;
    case 102:
      if ( !Function_21f9528() )
        return 0;
      break;
    case 103:
      if ( !Function_21f9534(a1, (uchar *)(a3 + 3), a4 - 3) )
        return 0;
      break;
    default:
      if ( a2 == 104 && !Function_21f95c8(a1) )
        return 0;
      break;
  }
  return 1;
}

//----- (021F96B8) --------------------------------------------------------
BOOL __fastcall Function_21f96b8(uint *a1, uchar *a2, int a3, int a4, int a5)
{
  int v5;
  uchar *v6;
  int v7;
  uint *v8;
  BOOL result;
  BOOL v10;
  int v11;
  uint *v12;
  int v13;
  bool v14;
  int v15;
  BOOL v16;
  int v17;
  uint *v18;
  int v19;

  v19 = a4;
  v5 = a4;
  v6 = a2;
  v7 = a3;
  v8 = a1;
  v18 = (uint *)Function_21fa3c4();
  if ( v8[11] && !Function_21f7d38(v8, (int)v18, v5, a5, 0, (int)v6, v7, 0) )
    return 0;
  v10 = v7 > 2 && !Function_20d5190(v6, (uchar *)&byte_2219734, 2);
  if ( !v18 )
  {
    if ( !Function_21f7e5c(v8, v5, a5, (int)v6, v7, &v17) )
      return 0;
    if ( v17 )
      return 1;
    if ( !v10 || v6[2] != 1 )
      return v10 && v6[2] == 104 || Function_21fa28c(v8, v5, a5);
    if ( !v8[8] )
      return 1;
    v11 = Function_21f7f84((int)v8, (int)&v18);
    if ( v11 )
      return v11 == 5 || Function_21fa28c(v8, v5, a5);
  }
  v12 = v18;
  if ( v18[3] == 7 )
    return v10 && v6[2] == 104 || Function_21fa270(v18);
  if ( v10 && v7 >= 4 && !Function_20d5190(v6 + 2, (uchar *)&byte_2219734, 2) )
  {
    v6 += 2;
    v7 -= 2;
    v10 = 0;
  }
  if ( v10 )
  {
    v15 = v6[2];
    if ( v15 >= 8 )
    {
      result = Function_21f9600(v12, v15, (int)v6, v7) != 0;
    }
    else
    {
      v16 = Function_21f92b4(v12, v15, (int)v6, v7);
      v14 = v16 == 0;
      result = v16 != 0;
      if ( v14 )
        result = 0;
    }
  }
  else
  {
    v13 = Function_21f8a04(v12, (int)v6, v7);
    v14 = v13 == 0;
    result = v13 != 0;
    if ( v14 )
      result = 0;
  }
  return result;
}

//----- (021F9968) --------------------------------------------------------
int __fastcall Function_21f9968(uint *a1, int a2, int a3)
{
  uint *v3;
  int v4;
  int v5;
  uint *v6;
  int v8;

  v3 = a1;
  v4 = a2;
  v5 = a3;
  v6 = (uint *)Function_21fa3c4();
  if ( v3[11] && !Function_21f7d38(v3, (int)v6, v4, v5, 1, 0, 0, 0) )
    return 0;
  if ( !v6 )
    return 1;
  if ( v6[3] )
  {
    if ( !Function_21f8834(v6, 2, 1) )
      return 0;
  }
  else
  {
    if ( !v6[8] )
      return 1;
    Function_21ea840();
    if ( (uint)(v8 - v6[7]) < v6[8] )
      return 1;
    if ( !Function_21f8834(v6, 6, 1) )
      return 0;
  }
  return 1;
}

//----- (021F9A68) --------------------------------------------------------
int __fastcall Function_21f9a68(int *a1, int a2, int a3, int a4)
{
  int *v4;
  int v5;
  int v6;
  int v7;
  int v9;
  char v10;
  short v11;
  int v12;
  char v13;
  int v14;

  v14 = a4;
  v4 = a1;
  while ( Function_21eab6c(*v4) )
  {
    v9 = 8;
    v5 = Function_21eae18(*v4, (int)&v13, 1500, 0, &v10, &v9);
    if ( v5 == -1 )
    {
      v6 = *v4;
      v7 = Function_21eaf38();
      if ( v7 == -15 )
      {
        if ( !Function_21f9968(v4, v12, HIBYTE(v11) | (v11 << 8) & 0xFF00) )
          return 0;
      }
      else if ( v7 != -35 )
      {
        Function_21fabc0(v4);
        return 0;
      }
    }
    else if ( !Function_21f96b8(v4, (uchar *)&v13, v5, v12, HIBYTE(v11) | (v11 << 8) & 0xFF00) )
    {
      return 0;
    }
  }
  return 1;
}

//----- (021F9B98) --------------------------------------------------------
BOOL __fastcall Function_21f9b98(int a1, short a2, int a3, int a4)
{
  int v4;
  int v5;
  int v6;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;

  v12 = a4;
  v4 = a1;
  v8 = 0;
  v9 = 0;
  v10 = 0;
  v11 = 0;
  v8 = *(uint *)(a1 + 88);
  v9 = a3;
  LOWORD(v10) = a2;
  Function_21ea840();
  v11 = v5;
  v6 = Function_21e9bbc(*(uint *)(v4 + 96));
  Function_21e9c2c(*(uint *)(v4 + 96), (int)&v8);
  return v6 + 1 == Function_21e9bbc(*(uint *)(v4 + 96));
}

//----- (021F9C0C) --------------------------------------------------------
int __fastcall Function_21f9c0c(int a1, char a2, int a3, uint *a4)
{
  int v4;
  int v5;
  char v6;
  uint *v7;
  int v8;
  int result;
  short v10;

  v4 = a1;
  v5 = a3;
  v6 = a2;
  v7 = a4;
  if ( Function_21f7448(a1 + 80) >= a3 )
  {
    if ( Function_21f9b98(v4, *(ushort *)(v4 + 100), v5, v8) )
    {
      Function_21f7514(v4 + 80, &byte_2219734, 2);
      Function_21f7458((int *)(v4 + 80), v6);
      v10 = *(ushort *)(v4 + 100);
      *(ushort *)(v4 + 100) = v10 + 1;
      Function_21f74a8((int *)(v4 + 80), v10);
      Function_21f74a8((int *)(v4 + 80), *(ushort *)(v4 + 102));
      *v7 = 0;
      result = 1;
    }
    else if ( Function_21f88dc((uint *)v4) )
    {
      result = 1;
      *v7 = 1;
    }
    else
    {
      result = 0;
    }
  }
  else if ( Function_21f88dc((uint *)v4) )
  {
    result = 1;
    *v7 = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (021F9CD0) --------------------------------------------------------
int __fastcall Function_21f9cd0(int a1)
{
  int v1;
  int v2;
  uint *v3;
  bool v4;
  int result;

  v1 = a1;
  v2 = Function_21e9bbc(*(uint *)(a1 + 96));
  if ( v2 <= 0 )
    Function_20d407c((int)"len > 0", (int)"gt2Message.c", (int)"gti2EndReliableMessage");
  v3 = (uint *)Function_21e9bc4(*(uint **)(v1 + 96), v2 - 1);
  v4 = Function_21f8110(v1, *(uint *)(v1 + 80) + *v3, v3[1]) == 0;
  result = 0;
  if ( !v4 )
  {
    *(uint *)(v1 + 144) = 0;
    result = 1;
  }
  return result;
}

//----- (021F9D44) --------------------------------------------------------
BOOL __fastcall Function_21f9d44(int a1, char *a2, int a3, int a4)
{
  int v4;
  char *v5;
  int v6;
  int v8;
  int v9;

  v9 = a4;
  v4 = a3;
  v5 = a2;
  v6 = a1;
  if ( !Function_21f9c0c(a1, 0, a3 + 7, &v8) )
    return 0;
  if ( v8 )
    return 1;
  Function_21f7514(v6 + 80, v5, v4);
  return Function_21f9cd0(v6) != 0;
}

//----- (021F9DB8) --------------------------------------------------------
BOOL __fastcall Function_21f9db8(int a1, char *a2, int a3, int a4)
{
  char *v4;
  int v5;
  int v7;

  v7 = a4;
  v4 = a2;
  v5 = a1;
  if ( !Function_21f9c0c(a1, 1, 39, &v7) )
    return 0;
  if ( v7 )
    return 1;
  Function_21f7514(v5 + 80, v4, 32);
  return Function_21f9cd0(v5) != 0;
}

//----- (021F9E18) --------------------------------------------------------
int __fastcall Function_21f9e18(int a1, char *a2, char *a3, int a4)
{
  char *v4;
  char *v5;
  int v6;
  int result;
  int v8;
  bool v9;
  int v10;
  int v11;

  v11 = a4;
  v4 = a2;
  v5 = a3;
  v6 = a1;
  if ( !Function_21f9c0c(a1, 2, 71, &v10) )
    return 0;
  if ( v10 )
    return 1;
  Function_21f7514(v6 + 80, v4, 32);
  Function_21f7514(v6 + 80, v5, 32);
  result = Function_21f9cd0(v6);
  v9 = result == 0;
  if ( result )
    v8 = *(uint *)(v6 + 136);
  else
    result = 0;
  if ( !v9 )
  {
    result = 1;
    *(uint *)(v6 + 140) = v8;
  }
  return result;
}

//----- (021F9EA4) --------------------------------------------------------
BOOL __fastcall Function_21f9ea4(int a1, char *a2, char *a3, int a4)
{
  int v4;
  char *v5;
  char *v6;
  int v7;
  int v9;

  v9 = a4;
  v4 = a4;
  v5 = a2;
  v6 = a3;
  v7 = a1;
  if ( !Function_21f9c0c(a1, 3, a4 + 39, &v9) )
    return 0;
  if ( v9 )
    return 1;
  Function_21f7514(v7 + 80, v5, 32);
  Function_21f7514(v7 + 80, v6, v4);
  return Function_21f9cd0(v7) != 0;
}

//----- (021F9F1C) --------------------------------------------------------
BOOL __fastcall Function_21f9f1c(int a1, int a2, int a3, int a4)
{
  int v4;
  int v6;
  int v7;

  v7 = a4;
  v4 = a1;
  if ( !Function_21f9c0c(a1, 4, 7, &v6) )
    return 0;
  if ( v6 )
    return 1;
  return Function_21f9cd0(v4) != 0;
}

//----- (021F9F78) --------------------------------------------------------
BOOL __fastcall Function_21f9f78(int a1, char *a2, int a3, int a4)
{
  int v4;
  char *v5;
  int v6;
  int v8;
  int v9;

  v9 = a4;
  v4 = a3;
  v5 = a2;
  v6 = a1;
  if ( !Function_21f9c0c(a1, 5, a3 + 7, &v8) )
    return 0;
  if ( v8 )
    return 1;
  Function_21f7514(v6 + 80, v5, v4);
  return Function_21f9cd0(v6) != 0;
}

//----- (021F9FEC) --------------------------------------------------------
BOOL __fastcall Function_21f9fec(int a1, int a2, int a3, int a4)
{
  int v4;
  int v6;
  int v7;

  v7 = a4;
  v4 = a1;
  if ( !Function_21f9c0c(a1, 6, 7, &v6) )
    return 0;
  if ( v6 )
    return 1;
  return Function_21f9cd0(v4) != 0;
}

//----- (021FA048) --------------------------------------------------------
BOOL __fastcall Function_21fa048(int a1, int a2, int a3, int a4)
{
  int v4;
  int v6;
  int v7;

  v7 = a4;
  v4 = a1;
  if ( !Function_21f9c0c(a1, 7, 7, &v6) )
    return 0;
  if ( v6 )
    return 1;
  return Function_21f9cd0(v4) != 0;
}

//----- (021FA0A4) --------------------------------------------------------
BOOL __fastcall Function_21fa0a4(int a1, uchar *a2, int a3)
{
  int v3;
  int v4;
  char *v5;
  int v7;
  int v8;

  v3 = a3;
  v4 = a1;
  v5 = (char *)a2;
  if ( a3 < 2 || Function_20d5190(a2, (uchar *)&byte_2219734, 2) )
    return Function_21f8110(v4, (int)v5, v3) != 0;
  if ( Function_21f7448(v4 + 80) < v3 + 2 )
    return 1;
  v7 = *(uint *)(v4 + 80);
  v8 = *(uint *)(v4 + 88);
  Function_21f7514(v4 + 80, &byte_2219734, 2);
  Function_21f7514(v4 + 80, v5, v3);
  if ( !Function_21f8110(v4, v7 + v8, v3 + 2) )
    return 0;
  Function_21f759c((uint *)(v4 + 80), -1, v3 + 2);
  return 1;
}

//----- (021FA16C) --------------------------------------------------------
int __fastcall Function_21fa16c(int a1)
{
  int v1;
  bool v2;
  int result;
  char v4;
  char v5;
  char v6;

  v1 = a1;
  v6 = 100;
  v4 = -2;
  v5 = -2;
  Function_21f8810((int)&v4, 3, *(ushort *)(a1 + 102));
  v2 = Function_21f8110(v1, (int)&v4, 5) == 0;
  result = 0;
  if ( !v2 )
  {
    *(uint *)(v1 + 144) = 0;
    result = 1;
  }
  return result;
}

//----- (021FA1D0) --------------------------------------------------------
BOOL __fastcall Function_21fa1d0(int a1, int a2, int a3, int a4)
{
  int v4;
  int v5;
  int v6;
  int v7;
  char v9;
  char v10;
  char v11;
  int v12;

  v12 = a4;
  v4 = a2;
  v5 = a1;
  v6 = a3;
  v9 = -2;
  v10 = -2;
  v11 = 101;
  Function_21f8810((int)&v9, 3, a2);
  v7 = 5;
  if ( v4 != v6 )
  {
    Function_21f8810((int)&v9, 5, v6);
    v7 = 7;
  }
  return Function_21f8110(v5, (int)&v9, v7) != 0;
}

//----- (021FA25C) --------------------------------------------------------
int __fastcall Function_21fa25c(int a1, int a2, int a3)
{
  *(uchar *)(a2 + 2) = 103;
  return Function_21f8110(a1, a2, a3);
}

//----- (021FA270) --------------------------------------------------------
int __fastcall Function_21fa270(int a1)
{
  return Function_21fa28c(*(uint *)(a1 + 8), *(uint *)a1, *(ushort *)(a1 + 4));
}

//----- (021FA28C) --------------------------------------------------------
BOOL __fastcall Function_21fa28c(int a1, int a2, int a3)
{
  char v4;
  char v5;
  char v6;

  v6 = 104;
  v4 = -2;
  v5 = -2;
  return Function_21fa94c(a1, a2, a3, &v4, 3) != 0;
}

//----- (021FA2D8) --------------------------------------------------------
int __fastcall Function_21fa2d8(int a1, uint *a2)
{
  uint *v2;
  uint *v3;

  v2 = (uint *)a1;
  v3 = a2;
  Function_21f8810(*(uint *)(a1 + 80), *a2 + 5, *(ushort *)(a1 + 102));
  if ( !Function_21f8110((int)v2, v2[20] + *v3, v3[1]) )
    return 0;
  v3[3] = v2[34];
  if ( *(uchar *)(v2[20] + *v3 + 2) == 2 )
    v2[35] = v2[34];
  return 1;
}

//----- (021FA344) --------------------------------------------------------
BOOL __fastcall Function_21fa344(int a1, char *a2, int a3, int a4)
{
  BOOL result;

  if ( a4 )
    result = Function_21f9d44(a1, a2, a3, a4);
  else
    result = Function_21fa0a4(a1, (uchar *)a2, a3);
  return result;
}

//----- (021FA360) --------------------------------------------------------
int __fastcall Function_21fa360(int a1, int a2)
{
  int v2;

  u32_div_f(**(uint **)a1 * *(ushort *)(*(uint *)a1 + 4), a2);
  return v2;
}

//----- (021FA380) --------------------------------------------------------
int __fastcall Function_21fa380(int **a1, int **a2)
{
  int *v2;
  int *v3;
  int v4;
  int v5;
  int result;

  v2 = *a1;
  v3 = *a2;
  v4 = **a1;
  v5 = **a2;
  if ( v4 == v5 )
    result = (short)(*((ushort *)v2 + 2) - *((ushort *)v3 + 2));
  else
    result = v4 - v5;
  return result;
}

//----- (021FA3B4) --------------------------------------------------------
int __fastcall Function_21fa3b4(uint **a1)
{
  return Function_21f83ec(*a1);
}

//----- (021FA3C4) --------------------------------------------------------
int __fastcall Function_21fa3c4(int a1, int a2, short a3)
{
  int *v3;
  int result;
  int *v5;
  int v6;
  short v7;

  v6 = a2;
  v7 = a3;
  v5 = &v6;
  v3 = (int *)Function_21ea598(*(uint *)(a1 + 12), (int)&v5);
  if ( v3 )
    result = *v3;
  else
    result = 0;
  return result;
}

//----- (021FA3FC) --------------------------------------------------------
int __fastcall Function_21fa3fc(int *a1, int a2, int a3, int a4, int a5)
{
  int v5;
  int v6;
  int *v7;
  int v8;
  int result;
  int *v10;
  int v11;
  int *v12;
  uint *v13;
  int v14;
  int v15;
  short v16;
  int v17;
  int v18;
  int v19;
  int v20;

  v5 = a2;
  v6 = a4;
  v7 = a1;
  v8 = a3;
  Function_21ea8a4();
  if ( !v6 )
    v6 = 0x10000;
  if ( !v8 )
    v8 = 0x10000;
  if ( !Function_21facac(v5, &v18, &v16) )
    return 4;
  v10 = (int *)Function_21d7880(68);
  v11 = (int)v10;
  if ( !v10 )
    return 1;
  Call_FillMemWithValue(v10, 0, 0x44u);
  *(uint *)v11 = -1;
  *(uint *)(v11 + 60) = v6;
  *(uint *)(v11 + 56) = v8;
  *(uint *)(v11 + 36) = a5;
  v12 = Function_21ea224(4, 32, 2, (int)Function_21fa360, (int)Function_21fa380, 0);
  *(uint *)(v11 + 12) = v12;
  if ( v12 )
  {
    v13 = Function_21e9a8c(4, 4, (int)Function_21fa3b4);
    *(uint *)(v11 + 16) = v13;
    if ( v13 )
    {
      v14 = Function_21eacdc();
      *(uint *)v11 = v14;
      if ( v14 == -1 )
      {
        Function_21ea364(*(uint *)(v11 + 12));
        Function_21e9b50(*(uint **)(v11 + 16));
        Function_21d78b0(v11);
        result = 3;
      }
      else
      {
        v19 = 0;
        BYTE1(v19) = 2;
        v20 = v18;
        HIWORD(v19) = HIBYTE(v16) | (v16 << 8) & 0xFF00;
        if ( Function_21ead18(*(uint *)v11, (int)&v19, 8) == -1 )
        {
          v15 = *(uint *)v11;
          Function_21eacf0();
          Function_21ea364(*(uint *)(v11 + 12));
          Function_21e9b50(*(uint **)(v11 + 16));
          Function_21d78b0(v11);
          result = 3;
        }
        else
        {
          v17 = 8;
          Function_21eaef0(*(uint *)v11, (uchar *)&v19, &v17);
          result = 0;
          *(uint *)(v11 + 4) = v20;
          *(ushort *)(v11 + 8) = HIBYTE(v19) | (HIWORD(v19) << 8) & 0xFF00;
          *v7 = v11;
        }
      }
    }
    else
    {
      Function_21ea364(*(uint *)(v11 + 12));
      Function_21d78b0(v11);
      result = 1;
    }
  }
  else
  {
    Function_21d78b0(v11);
    result = 1;
  }
  return result;
}

//----- (021FA61C) --------------------------------------------------------
void __fastcall Function_21fa61c(int *a1)
{
  int v1;
  int v2;

  v1 = (int)a1;
  if ( a1[7] )
  {
    a1[5] = 1;
  }
  else
  {
    v2 = *a1;
    Function_21eacf0();
    Function_21ea364(*(uint *)(v1 + 12));
    Function_21e9b50(*(uint **)(v1 + 16));
    Function_21d78b0(v1);
    Function_21ea8a8();
  }
}

//----- (021FA660) --------------------------------------------------------
int __fastcall Function_21fa660(int result, int a2)
{
  *(uint *)(result + 32) = a2;
  return result;
}

//----- (021FA668) --------------------------------------------------------
int Function_21fa668()
{
  return Function_21d7880(160);
}

//----- (021FA678) --------------------------------------------------------
int __fastcall Function_21fa678(int a1, int *a2, int a3, short a4)
{
  short v4;
  int v5;
  int *v6;
  int v7;
  int *v9;
  int v10;
  int v11;
  uint *v12;
  uint *v13;
  uint *v14;
  uint *v15;
  int *v16;

  v4 = a4;
  v5 = a3;
  v6 = a2;
  v7 = a1;
  v16 = 0;
  if ( Function_21fa3c4(a1, a3, a4) )
    return 5;
  v9 = (int *)Function_21fa668();
  v16 = v9;
  if ( v9 )
  {
    Call_FillMemWithValue(v9, 0, 0xA0u);
    *v16 = v5;
    *((ushort *)v16 + 2) = v4;
    v16[2] = v7;
    Function_21ea840();
    v16[7] = v10;
    v16[34] = v16[7];
    *((ushort *)v16 + 50) = 0;
    *((ushort *)v16 + 51) = 0;
    if ( Function_21f741c(v16 + 17, *(uint *)(v7 + 60)) )
    {
      if ( Function_21f741c(v16 + 20, *(uint *)(v7 + 56)) )
      {
        v16[23] = (int)Function_21e9a8c(16, 64, 0);
        if ( v16[23] )
        {
          v16[24] = (int)Function_21e9a8c(16, 64, 0);
          if ( v16[24] )
          {
            v16[38] = (int)Function_21e9a8c(4, 2, 0);
            if ( v16[38] )
            {
              v16[39] = (int)Function_21e9a8c(4, 2, 0);
              if ( v16[39] )
              {
                Function_21ea44c(*(uchar **)(v7 + 12), (char *)&v16);
                v11 = Function_21fa3c4(v7, v5, v4);
                *v6 = v11;
                if ( v11 )
                  return 0;
              }
            }
          }
        }
      }
    }
  }
  if ( v16 )
  {
    Function_21d78b0(v16[17]);
    Function_21d78b0(v16[20]);
    v12 = (uint *)v16[23];
    if ( v12 )
      Function_21e9b50(v12);
    v13 = (uint *)v16[24];
    if ( v13 )
      Function_21e9b50(v13);
    v14 = (uint *)v16[38];
    if ( v14 )
      Function_21e9b50(v14);
    v15 = (uint *)v16[39];
    if ( v15 )
      Function_21e9b50(v15);
    Function_21d78b0((int)v16);
  }
  return 1;
}

//----- (021FA888) --------------------------------------------------------
int __fastcall Function_21fa888(int a1, int a2, int a3, int a4)
{
  uint *v4;
  int result;
  bool v6;
  int v7;
  int v8;
  int v9;
  int varg_r0;
  int varg_r1;
  int varg_r2;
  int varg_r3;

  varg_r0 = a1;
  varg_r1 = a2;
  varg_r2 = a3;
  varg_r3 = a4;
  v4 = (uint *)a1;
  result = *(uint *)(a1 + 20);
  v6 = result == 0;
  if ( !result )
  {
    result = v4[9];
    v6 = result == 0;
  }
  if ( v6 )
  {
    v7 = v4[2];
    if ( v4[3] == 7 )
    {
      result = Function_21e9bbc(*(uint *)(v7 + 16));
      v8 = result;
      v9 = 0;
      if ( result > 0 )
      {
        while ( 1 )
        {
          result = *(uint *)Function_21e9bc4(*(uint **)(*(uint *)(varg_r0 + 8) + 16), v9);
          if ( varg_r0 == result )
            break;
          if ( ++v9 >= v8 )
            return result;
        }
        result = Function_21e9e40(*(int **)(*(uint *)(varg_r0 + 8) + 16), v9);
      }
    }
    else
    {
      result = Function_21ea4f4(*(uint *)(v7 + 12), (int)&varg_r0);
    }
  }
  return result;
}

//----- (021FA94C) --------------------------------------------------------
int Function_21fa94c(int a1, int a2, int a3, ...)
{
  int *v3;
  int v4;
  int v5;
  int v7;
  int v8;
  bool v9;
  int v10;
  int v11;
  int v12;
  int varg_r0;
  int varg_r3;
  va_list varg_r3a;
  int v16;
  va_list va1;
  va_list va2;

  va_start(va2, a3);
  va_start(va1, a3);
  va_start(varg_r3a, a3);
  varg_r3 = va_arg(va1, uint);
  va_copy(va2, va1);
  v16 = va_arg(va2, uint);
  varg_r0 = a1;
  v3 = (int *)a1;
  v4 = a2;
  v5 = a3;
  Function_21fae30((int *)varg_r3a, (int *)va1);
  if ( !Function_21eab94(*v3) )
    return 1;
  v11 = 0;
  HIWORD(v11) = BYTE1(v5) | ((ushort)v5 << 8) & 0xFF00;
  BYTE1(v11) = 2;
  v12 = v4;
  if ( Function_21eae5c(*v3, varg_r3, v16, 0, (char *)&v11, 8) == -1 )
  {
    v7 = *v3;
    v8 = Function_21eaf38();
    if ( v8 == -15 )
    {
      if ( !Function_21f9968(v3, v4, v5) )
        return 0;
    }
    else
    {
      v9 = v8 == -42;
      if ( v8 != -42 )
        v9 = v8 == -6;
      if ( v9 )
        return 1;
      if ( v8 != -35 )
      {
        Function_21fabc0(v3);
        return 0;
      }
    }
  }
  else if ( v3[10] )
  {
    v10 = Function_21fa3c4((int)v3, v4, v5);
    if ( !Function_21f7d38(v3, v10, v4, v5, 0, varg_r3, v16, 1) )
      return 0;
  }
  return 1;
}

//----- (021FAAF4) --------------------------------------------------------
int __fastcall Function_21faaf4(int a1, int *a2, int a3, int a4)
{
  uint *v4;
  int v5;
  int v7;
  bool v8;

  v4 = *(uint **)a1;
  v5 = *a2;
  if ( *(uint *)(*(uint *)a1 + 12) != 7 && !Function_21f82d8(v4, v5) )
    return 0;
  v7 = v4[3];
  v8 = v7 == 7;
  if ( v7 == 7 )
    v8 = v4[5] == 0;
  if ( v8 )
    v8 = v4[9] == 0;
  if ( v8 )
    Function_21fa888((int)v4, v5, a3, a4);
  return 1;
}

//----- (021FAB4C) --------------------------------------------------------
BOOL __fastcall Function_21fab4c(int a1)
{
  int v1;

  v1 = a1;
  Function_21ea840();
  return Function_21ea73c(*(uint **)(v1 + 12), (int (*)(void))Function_21faaf4) == 0;
}

//----- (021FAB88) --------------------------------------------------------
int __fastcall Function_21fab88(int a1)
{
  int v1;
  int result;
  int i;
  int *v4;
  int v5;
  int v6;
  int v7;

  v1 = a1;
  result = Function_21e9bbc(*(uint *)(a1 + 16));
  for ( i = result - 1; i >= 0; --i )
  {
    v4 = (int *)Function_21e9bc4(*(uint **)(v1 + 16), i);
    result = Function_21fa888(*v4, v5, v6, v7);
  }
  return result;
}

//----- (021FABC0) --------------------------------------------------------
void __fastcall Function_21fabc0(int *a1)
{
  int *v1;

  v1 = a1;
  if ( !a1[6] )
  {
    a1[6] = 1;
    Function_21f8710(a1);
    if ( Function_21f763c(v1) )
      Function_21fa61c(v1);
  }
}

//----- (021FABFC) --------------------------------------------------------
uchar *__fastcall Function_21fabfc(int a1, int a2, uchar *a3)
{
  uchar *v3;

  v3 = a3;
  if ( !a3 )
  {
    v3 = (char *)&dword_221A400[1006] + 22 * (dword_221A400[1005] ^ 1);
    dword_221A400[1005] ^= 1u;
  }
  if ( a1 )
  {
    if ( a2 )
    {
      Function_22089f4();
      Function_20d7510((int)v3, "%s:%d");
    }
    else
    {
      Function_22089f4();
      Function_20d7510((int)v3, "%s");
    }
  }
  else if ( a2 )
  {
    Function_20d7510((int)v3, ":%d");
  }
  else
  {
    *v3 = 0;
  }
  return v3;
}

//----- (021FACAC) --------------------------------------------------------
int __fastcall Function_21facac(char *a1, int *a2, ushort *a3)
{
  int v3;
  bool v4;
  char *v5;
  int *v6;
  ushort *v7;
  short v8;
  char *v9;
  int *v10;
  int v11;
  int v12;
  char *v13;
  int v14;
  int v15;
  int v16;
  int v17;
  int v19;
  int v20;
  int v21;
  char v22;

  v5 = a1;
  v4 = a1 == 0;
  v6 = a2;
  if ( a1 )
    a2 = (int *)*a1;
  v7 = a3;
  if ( a1 )
    v4 = a2 == 0;
  if ( v4 )
  {
    v3 = 0;
    v8 = 0;
LABEL_32:
    if ( v6 )
      *v6 = v3;
    if ( v7 )
      *v7 = v8;
    return 1;
  }
  v9 = strchr(a1, 58);
  v13 = v9;
  if ( !v9 )
  {
    v8 = 0;
    goto LABEL_27;
  }
  if ( v9 == v5 )
  {
    v5 = 0;
    v3 = 0;
  }
  else
  {
    v14 = v9 - v5;
    if ( v9 - v5 >= 256 )
      Function_20d407c((int)"len < GTI2_STACK_HOSTLEN_MAX", (int)"gt2Utility.c", (int)"gt2StringToAddress");
    memcpy(&v22, v5, v13 - v5);
    v5 = &v22;
    *(&v22 + v14) = 0;
  }
  v15 = v13[1];
  v16 = (int)(v13 + 1);
  if ( !v13[1] )
  {
LABEL_23:
    Function_20dae0c((int)(v13 + 1), (int)v10, v11, v16);
    if ( v20 < 0 )
      return 0;
    v10 = (int *)0xFFFF;
    if ( v20 > 0xFFFF )
      return 0;
    v8 = v20;
LABEL_27:
    if ( v5 )
    {
      v3 = Function_21eaf1c((int)v5, (int)v10, v11, v12);
      if ( v3 == -1 )
      {
        v21 = Function_220854c(v5);
        if ( !v21 )
          return 0;
        v3 = ***(uint ***)(v21 + 12);
      }
    }
    goto LABEL_32;
  }
  v10 = Unknown_20fe864;
  v11 = 0;
  while ( 1 )
  {
    v17 = v15 >= 0 && v15 < 128 ? *((ushort *)Unknown_20fe864 + v15) & 8 : 0;
    if ( !v17 )
      return 0;
    v19 = *(char *)(v16++ + 1);
    v15 = v19;
    if ( !v19 )
      goto LABEL_23;
  }
}

//----- (021FAE30) --------------------------------------------------------
char **__fastcall Function_21fae30(char **result, char ***a2)
{
  char *v2;
  char ***v3;

  v2 = *result;
  v3 = a2;
  if ( *result )
  {
    result = (char **)-1;
    if ( *a2 == (char **)-1 )
    {
      result = (char **)(strlen(v2) + 1);
      *v3 = result;
    }
  }
  else
  {
    *result = (char *)&dword_22197A4;
    *a2 = 0;
  }
  return result;
}

//----- (021FAE80) --------------------------------------------------------
int __fastcall Function_21fae80(int a1)
{
  int v1;
  int result;
  int v3;

  v1 = a1;
  if ( !dword_221A400[1021] )
    return 0;
  v3 = 0;
  if ( Function_21e9bbc(dword_221A400[1021]) <= 0 )
    return 0;
  while ( 1 )
  {
    result = Function_21e9bc4((uint *)dword_221A400[1021], v3);
    if ( *(uint *)(result + 8) == v1 )
      break;
    if ( ++v3 >= Function_21e9bbc(dword_221A400[1021]) )
      return 0;
  }
  return result;
}

//----- (021FAEE8) --------------------------------------------------------
int __fastcall Function_21faee8(uint *a1)
{
  uint *v1;
  int result;

  v1 = a1;
  if ( *a1 != -1 )
    Function_21eacf0();
  *v1 = -1;
  result = 4;
  v1[4] = 4;
  return result;
}

//----- (021FAF18) --------------------------------------------------------
int __fastcall Function_21faf18(int a1, int a2, int a3, int a4)
{
  int v4;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;
  int v14;
  int v15;
  int v16;
  int v17;
  int v18;
  int v19;
  int v20;
  int v21;
  int v22;

  v22 = a4;
  v6 = 0;
  v7 = 0;
  v8 = 0;
  v9 = 0;
  v10 = 0;
  v11 = 0;
  v12 = 0;
  v13 = 0;
  v14 = 0;
  v15 = 0;
  v16 = 0;
  v17 = 0;
  v18 = 0;
  v19 = 0;
  v20 = 0;
  v21 = 0;
  if ( !dword_221A400[1021] )
    dword_221A400[1021] = (int)Function_21e9a8c(64, 4, (int)Function_21faee8);
  Function_21e9c2c(dword_221A400[1021], (int)&v6);
  v4 = Function_21e9bbc(dword_221A400[1021]);
  return Function_21e9bc4((uint *)dword_221A400[1021], v4 - 1);
}

//----- (021FAFB0) --------------------------------------------------------
int __fastcall Function_21fafb0(int a1)
{
  int v1;
  int v2;
  int result;

  v1 = a1;
  v2 = 0;
  result = Function_21e9bbc(dword_221A400[1021]);
  if ( result > 0 )
  {
    while ( v1 != Function_21e9bc4((uint *)dword_221A400[1021], v2) )
    {
      ++v2;
      result = Function_21e9bbc(dword_221A400[1021]);
      if ( v2 >= result )
        return result;
    }
    result = Function_21e9db0((int *)dword_221A400[1021], v2);
  }
  return result;
}

//----- (021FB018) --------------------------------------------------------
int *Function_21fb018()
{
  int *result;

  result = (int *)dword_221A400[1021];
  if ( dword_221A400[1021] )
  {
    Function_21e9b50((uint *)dword_221A400[1021]);
    result = &dword_221A400[1017];
    dword_221A400[1021] = 0;
  }
  return result;
}

//----- (021FB044) --------------------------------------------------------
BOOL __fastcall Function_21fb044(uchar *a1)
{
  return Function_20d5190(a1, (uchar *)&byte_22197A8, 6) == 0;
}

//----- (021FB068) --------------------------------------------------------
int __fastcall Function_21fb068(int a1, int a2, short a3, int a4, int a5)
{
  char v6;
  char v7;
  short v8;
  int v9;
  int v10;

  v10 = a4;
  v9 = a2;
  v8 = HIBYTE(a3) | (a3 << 8) & 0xFF00;
  v7 = 2;
  return Function_21eae5c(a1, a4, a5, 0, &v6, 8);
}

//----- (021FB0BC) --------------------------------------------------------
int Function_21fb0bc()
{
  int v0;
  int *v1;
  int i;
  int *v4;

  v0 = 0;
  v1 = Function_21eabbc();
  if ( !v1 )
    return 0;
  for ( i = 0; ; ++i )
  {
    v4 = *(int **)(v1[3] + 4 * i);
    if ( !v4 )
      break;
    if ( *v4 != 16777343 )
    {
      v0 = *v4;
      if ( Function_21eac48(v4) )
        return v0;
    }
  }
  return v0;
}

//----- (021FB120) --------------------------------------------------------
int __fastcall Function_21fb120(int a1)
{
  int result;
  int v2;
  char v3;
  ushort v4;

  v2 = 8;
  if ( Function_21eaef0(a1, (uchar *)&v3, &v2) == -1 )
    result = 0;
  else
    result = v4;
  return result;
}

//----- (021FB154) --------------------------------------------------------
int __fastcall Function_21fb154(int *a1, int a2, int a3, int a4)
{
  char v4;
  int *v5;
  int v6;
  int v7;
  uchar v8;
  uint v9;
  int v10;
  int v11;
  int v12;
  int v13;
  short v14;
  int v15;
  int result;
  char v17;
  char v18;
  char v19;
  char v20;
  char v21;
  char v22;
  char v23;
  char v24;
  uint v25;
  char v26;
  char v27;
  char v28;
  char v29;
  char v30;
  char v31;
  uchar v32;
  char v33;
  char v34;
  char v35;
  int v36;

  v36 = a4;
  v4 = 0;
  v5 = a1;
  v17 = -3;
  v18 = -4;
  v19 = 30;
  v20 = 102;
  v21 = 106;
  v22 = -78;
  v24 = 0;
  v23 = 2;
  v27 = a1[3];
  v25 = (v5[2] << 24) & 0xFF000000 | (v5[2] << 8) & 0xFF0000 | ((uint)v5[2] >> 24) | ((uint)v5[2] >> 8) & 0xFF00;
  if ( a1[1] != -1 )
    v4 = 1;
  v28 = v4;
  v6 = Function_21fb0bc();
  v7 = Function_21fb0bc();
  v8 = (uint)Function_21fb0bc() >> 24;
  v9 = (v6 << 24) & 0xFF000000 | (v7 << 8) & 0xFF0000 | v8 | ((uint)Function_21fb0bc() >> 8) & 0xFF00;
  v29 = HIBYTE(v9);
  v31 = BYTE1(v9);
  v30 = BYTE2(v9);
  v32 = v8;
  v33 = 0;
  v34 = 0;
  Function_20d8b7c(&v35, &dword_221A400[699]);
  v10 = strlen((char *)&dword_221A400[699]) + 22;
  if ( v28 && !v5[5] )
  {
    v26 = 0;
    Function_21fb068(v5[1], dword_221A400[1020], 27901, (int)&v17, v10);
  }
  if ( !v5[6] )
  {
    v26 = 1;
    Function_21fb068(*v5, dword_221A400[1020], 27901, (int)&v17, v10);
  }
  if ( v28 )
    v11 = v5[1];
  else
    v11 = *v5;
  if ( v28 )
    v12 = v5[1];
  else
    v12 = *v5;
  v13 = Function_21fb120(v12);
  v14 = BYTE1(v13) | ((ushort)Function_21fb120(v11) << 8) & 0xFF00;
  v33 = HIBYTE(v14);
  v34 = v14;
  if ( !v5[7] )
  {
    v26 = 2;
    Function_21fb068(*v5, dword_221A400[1019], 27901, (int)&v17, v10);
  }
  Function_21ea840();
  v5[10] = v15 + 500;
  result = 30;
  v5[9] = 30;
  return result;
}

//----- (021FB39C) --------------------------------------------------------
int __fastcall Function_21fb39c(int a1)
{
  int v1;
  int v2;
  int v3;
  int result;
  char v5;
  char v6;
  char v7;
  char v8;
  char v9;
  char v10;
  char v11;
  char v12;
  uint v13;
  int v14;
  short v15;
  char v16;
  bool v17;

  v1 = a1;
  v5 = -3;
  v6 = -4;
  v7 = 30;
  v8 = 102;
  v9 = 106;
  v11 = 2;
  v12 = 7;
  v10 = -78;
  v13 = (*(uint *)(a1 + 8) << 24) & 0xFF000000 | (*(uint *)(a1 + 8) << 8) & 0xFF0000 | (uchar)(*(uint *)(a1 + 8) >> 24) | (*(uint *)(a1 + 8) >> 8) & 0xFF00;
  v14 = *(uint *)(a1 + 44);
  v15 = (uchar)(*(ushort *)(a1 + 48) >> 8) | (*(ushort *)(a1 + 48) << 8) & 0xFF00;
  v16 = *(uchar *)(a1 + 50);
  v17 = *(uint *)(a1 + 16) != 2;
  v2 = *(uint *)(a1 + 4);
  if ( v2 == -1 )
    v2 = *(uint *)v1;
  Function_21fb068(v2, *(uint *)(v1 + 44), *(ushort *)(v1 + 48), (int)&v5, 20);
  Function_21ea840();
  *(uint *)(v1 + 40) = v3 + 700;
  *(uint *)(v1 + 36) = 12;
  result = *(uchar *)(v1 + 50);
  if ( *(uchar *)(v1 + 50) )
  {
    result = 1;
    *(uchar *)(v1 + 51) = 1;
  }
  return result;
}

//----- (021FB4BC) --------------------------------------------------------
int __fastcall Function_21fb4bc(int a1, int a2, int a3, int a4)
{
  int v4;
  int result;
  int v6;

  v4 = a1;
  result = Function_21eaf1c(a1, a2, a3, a4);
  if ( result == -1 )
  {
    v6 = Function_220854c(v4);
    if ( v6 )
      result = ***(uint ***)(v6 + 12);
    else
      result = 0;
  }
  return result;
}

//----- (021FB4F4) --------------------------------------------------------
int __fastcall Function_21fb4f4(char *a1, int a2, int a3, int a4)
{
  char v5;

  if ( !a1 )
  {
    Function_20d74e8((int)&v5, 128, "%s.%s");
    a1 = &v5;
  }
  return Function_21fb4bc((int)a1, a2, a3, a4);
}

//----- (021FB534) --------------------------------------------------------
int __fastcall Function_21fb534(int a1, int a2, int a3, int a4)
{
  bool v4;

  if ( !dword_221A400[1020] )
    dword_221A400[1020] = Function_21fb4f4((char *)dword_221A400[1018], (int)"natneg1.gs.nintendowifi.net", a3, a4);
  if ( !dword_221A400[1019] )
    dword_221A400[1019] = Function_21fb4f4((char *)dword_221A400[1017], (int)"natneg2.gs.nintendowifi.net", a3, a4);
  v4 = dword_221A400[1020] == 0;
  if ( dword_221A400[1020] )
    v4 = dword_221A400[1019] == 0;
  return !v4;
}

//----- (021FB5AC) --------------------------------------------------------
int __fastcall Function_21fb5ac(int a1, int a2, int a3, int a4, int a5, int a6)
{
  int v6;
  int v7;
  int v8;
  int v9;
  int result;
  int v11;
  int v12;
  int v13;
  int v14;
  int *v15;
  int v16;
  int v17;

  v6 = a1;
  v7 = a2;
  v8 = a3;
  v9 = a4;
  if ( dword_221A400[660] != 1 )
    return 2;
  v11 = Function_21fb534(dword_221A400[660], a2, a3, a4);
  if ( !v11 )
    return 3;
  v15 = (int *)Function_21faf18(v11, v12, v13, v14);
  v16 = (int)v15;
  if ( !v15 )
    return 1;
  v15[1] = v6;
  v15[3] = v8;
  v15[2] = v7;
  v15[13] = v9;
  v15[14] = a5;
  v15[15] = a6;
  *v15 = Function_21eacdc();
  *(uint *)(v16 + 32) = 0;
  *(uchar *)(v16 + 50) = 0;
  *(uchar *)(v16 + 51) = 0;
  *(uint *)(v16 + 44) = 0;
  *(ushort *)(v16 + 48) = 0;
  *(uint *)(v16 + 36) = 0;
  if ( *(uint *)v16 == -1 )
  {
    Function_21fafb0(v16);
    result = 2;
  }
  else
  {
    Function_21fb154((int *)v16, *(uint *)v16, 0, v17);
    result = 0;
  }
  return result;
}

//----- (021FB674) --------------------------------------------------------
uint *__fastcall Function_21fb674(int a1)
{
  uint *result;
  uint *v2;

  result = (uint *)Function_21fae80(a1);
  v2 = result;
  if ( result )
  {
    if ( *result != -1 )
      Function_21eacf0();
    *v2 = -1;
    result = (uint *)4;
    v2[4] = 4;
  }
  return result;
}

//----- (021FB6AC) --------------------------------------------------------
void __fastcall Function_21fb6ac(int *a1, int a2, int a3, int a4)
{
  int *v4;
  int v5;
  int v6;
  bool v7;
  int v8;
  bool v9;
  int v10;
  int v11;
  uint v12;
  int v13;
  int v14;
  uint v15;
  uint v16;
  int v17;
  char v18;
  char v19;
  short v20;
  int v21;
  int v22;
  char v23;
  int v24;

  v24 = a4;
  v4 = a1;
  v22 = 8;
  if ( a1[4] == 4 )
  {
    Function_21fafb0((int)a1);
  }
  else
  {
    v5 = *a1;
    if ( *v4 != -1 )
    {
      do
      {
        if ( !Function_21eab6c(v5) )
          break;
        v6 = Function_21eae18(*v4, (int)&dword_221A400[1022], 512, 0, &v23, &v22);
        if ( v6 == -1 )
          break;
        Function_21fbc34(&dword_221A400[1022], v6, &v23);
        v5 = v4[4];
        v7 = v5 == 4;
        if ( v5 != 4 )
        {
          v5 = *v4;
          v7 = *v4 == -1;
        }
      }
      while ( !v7 );
    }
    v8 = v4[4];
    v9 = v8 == 0;
    if ( v8 )
      v9 = v8 == 2;
    if ( v9 )
    {
      Function_21ea840();
      if ( v12 > v4[10] )
      {
        v13 = v4[8];
        if ( v13 <= v4[9] )
        {
          v4[8] = v13 + 1;
          if ( v4[4] )
            Function_21fb39c((int)v4);
          else
            Function_21fb154(v4, v13, v10, v11);
        }
        else
        {
          v14 = v4[15];
          ((void (*)(void))v4[14])();
          Function_21fb674(v4[2]);
        }
      }
    }
    if ( v4[4] == 3 )
    {
      Function_21ea840();
      if ( v15 > v4[10] )
      {
        if ( v4[1] == -1 )
        {
          v19 = 2;
          v20 = (uchar)(*((ushort *)v4 + 24) >> 8) | (*((ushort *)v4 + 24) << 8) & 0xFF00;
          v21 = v4[11];
          ((void (__fastcall *)(uint, int, char *, int))v4[14])(0, *v4, &v18, v4[15]);
          *v4 = -1;
        }
        Function_21fb674(v4[2]);
      }
    }
    if ( v4[4] == 1 )
    {
      Function_21ea840();
      if ( v16 > v4[10] )
      {
        v17 = v4[15];
        ((void (*)(void))v4[14])();
        Function_21fb674(v4[2]);
      }
    }
  }
}

//----- (021FB89C) --------------------------------------------------------
void Function_21fb89c()
{
  int i;
  int *v1;
  int v2;
  int v3;
  int v4;

  if ( dword_221A400[1021] )
  {
    for ( i = Function_21e9bbc(dword_221A400[1021]) - 1; i >= 0; --i )
    {
      v1 = (int *)Function_21e9bc4((uint *)dword_221A400[1021], i);
      Function_21fb6ac(v1, v2, v3, v4);
    }
  }
}

//----- (021FB8E0) --------------------------------------------------------
void __fastcall Function_21fb8e0(int a1, int a2)
{
  char v2;
  int v3;

  v2 = *(uint *)(a1 + 12);
  v3 = (int)*(ushort *)(a2 + 2) >> 8;
  JUMPOUT(-509598706);
}

//----- (021FB9AC) --------------------------------------------------------
uint *__fastcall Function_21fb9ac(int a1, int a2, int a3)
{
  int v3;
  int v4;
  uint *result;
  int v6;
  int v7;
  int v8;

  v3 = a2;
  v4 = a1;
  if ( !*(uchar *)(a2 + 19) )
    Function_21fb8e0(a1, a3);
  result = *(uint **)(v4 + 16);
  if ( (int)result < 2 )
  {
    v6 = *(uchar *)(v3 + 19);
    if ( *(uchar *)(v3 + 19) )
    {
      v7 = 3;
      if ( v6 == 1 )
      {
        v7 = 1;
      }
      else if ( v6 == 2 )
      {
        v7 = 2;
      }
      (*(void (__fastcall **)(int, int, uint, uint))(v4 + 56))(v7, -1, 0, *(uint *)(v4 + 60));
      result = Function_21fb674(*(uint *)(v4 + 8));
    }
    else
    {
      *(uint *)(v4 + 44) = *(uint *)(v3 + 12);
      *(ushort *)(v4 + 48) = (uchar)(*(ushort *)(v3 + 16) >> 8) | (*(ushort *)(v3 + 16) << 8) & 0xFF00;
      *(uint *)(v4 + 32) = 0;
      *(uint *)(v4 + 16) = 2;
      v8 = *(uint *)(v4 + 60);
      (*(void (**)(void))(v4 + 52))();
      result = (uint *)Function_21fb39c(v4);
    }
  }
  return result;
}

//----- (021FBA68) --------------------------------------------------------
int __fastcall Function_21fba68(int result, int a2, int a3)
{
  int v3;
  int v4;
  int v5;

  v3 = result;
  if ( *(uint *)(result + 16) >= 2 )
  {
    *(uint *)(result + 44) = *(uint *)(a3 + 4);
    *(ushort *)(result + 48) = (uchar)(*(ushort *)(a3 + 2) >> 8) | (*(ushort *)(a3 + 2) << 8) & 0xFF00;
    *(uchar *)(result + 50) = 1;
    if ( *(uchar *)(a2 + 18) )
    {
      if ( *(uint *)(result + 16) == 2 )
      {
        if ( !*(uchar *)(result + 51) )
          Function_21fb39c(result);
        *(uint *)(v3 + 16) = 3;
        Function_21ea840();
        *(uint *)(v3 + 40) = v4 + 5000;
        result = -1;
        if ( *(uint *)(v3 + 4) != -1 )
        {
          v5 = *(uint *)(v3 + 60);
          result = (*(int (__fastcall **)(uint))(v3 + 56))(0);
        }
      }
      else if ( !*(uchar *)(a2 + 19) )
      {
        result = Function_21fb39c(result);
      }
    }
    else
    {
      result = Function_21fb39c(result);
    }
  }
  return result;
}

//----- (021FBB30) --------------------------------------------------------
uint __fastcall Function_21fbb30(uint result, int a2, int a3)
{
  int v3;
  int v4;
  uint v5;
  bool v6;
  int v7;

  v3 = a2;
  v4 = *(uchar *)(a2 + 7);
  v5 = result;
  if ( v4 == 1 )
  {
    result = *(uchar *)(v3 + 12);
    if ( result <= 2 )
    {
      *(uint *)(v5 + 4 * result + 20) = 1;
      result = *(uint *)(v5 + 16);
      if ( !result )
      {
        result = *(uint *)(v5 + 24);
        v6 = result == 0;
        if ( result )
        {
          result = *(uint *)(v5 + 28);
          v6 = result == 0;
        }
        if ( !v6 )
        {
          if ( *(uint *)(v5 + 4) == -1 || (result = *(uint *)(v5 + 20)) != 0 )
          {
            *(uint *)(v5 + 16) = 1;
            Function_21ea840();
            *(uint *)(v5 + 40) = v7 + 10000;
            result = (*(int (__fastcall **)(uint, uint))(v5 + 52))(*(uint *)(v5 + 16), *(uint *)(v5 + 60));
          }
        }
      }
    }
  }
  else if ( v4 == 2 )
  {
    *(uchar *)(v3 + 7) = 3;
    result = Function_21fb068(
               *(uint *)result,
               *(uint *)(a3 + 4),
               (uchar)(*(ushort *)(a3 + 2) >> 8) | (*(ushort *)(a3 + 2) << 8) & 0xFF00,
               v3,
               21);
  }
  return result;
}

//----- (021FBC34) --------------------------------------------------------
uint *__fastcall Function_21fbc34(uchar *a1, int a2, int a3)
{
  char *v3;
  int v4;
  int v5;
  uint *result;
  int v7;
  bool v8;
  char *v9;
  int v10;
  char v11;
  char v12;
  char *v13;
  int v14;
  char v15;
  char v16;
  char v17;
  uint v18;
  char v19;
  uint v20;

  v3 = (char *)a1;
  v4 = a2;
  v5 = a3;
  result = (uint *)Function_21fb044(a1);
  if ( result )
  {
    v7 = (uchar)v3[7];
    v8 = v7 == 5;
    if ( v7 != 5 )
      v8 = v7 == 7;
    if ( v8 )
    {
      if ( v4 >= 20 )
      {
        v9 = &v19;
        v10 = 10;
        do
        {
          v11 = *v3;
          v12 = v3[1];
          v3 += 2;
          --v10;
          *v9 = v11;
          v9[1] = v12;
          v9 += 2;
        }
        while ( v10 );
        result = (uint *)Function_21fae80((v20 << 24) & 0xFF000000 | (v20 << 8) & 0xFF0000 | HIBYTE(v20) | (v20 >> 8) & 0xFF00);
        if ( result )
        {
          if ( v7 == 5 )
            result = Function_21fb9ac((int)result, (int)&v19, v5);
          else
            result = (uint *)Function_21fba68((int)result, (int)&v19, v5);
        }
      }
    }
    else if ( v4 >= 21 )
    {
      v13 = &v17;
      v14 = 10;
      do
      {
        v15 = *v3;
        v16 = v3[1];
        v3 += 2;
        --v14;
        *v13 = v15;
        v13[1] = v16;
        v13 += 2;
      }
      while ( v14 );
      *v13 = *v3;
      result = (uint *)Function_21fae80((v18 << 24) & 0xFF000000 | (v18 << 8) & 0xFF0000 | HIBYTE(v18) | (v18 >> 8) & 0xFF00);
      if ( result )
        result = (uint *)Function_21fbb30((uint)result, (int)&v17, v5);
    }
  }
  return result;
}

//----- (021FBD94) --------------------------------------------------------
int __fastcall Function_21fbd94(int **a1, int a2, int a3, int *a4, int *a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14)
{
  int **v14;
  int v15;
  int v16;
  int *v17;
  int *v18;
  int v19;
  int v20;
  int v21;
  int v22;
  int v23;
  int v24;
  int *v25;
  int v26;
  int result;
  char v28;

  v14 = a1;
  v15 = a2;
  v16 = a3;
  v17 = a4;
  if ( a1 )
  {
    v18 = (int *)Function_21d7880(272);
    *v14 = v18;
  }
  else
  {
    v18 = &dword_22197F4;
  }
  Function_21ea840();
  Function_20d76d4(v19);
  Function_20d8b7c((uchar *)v18 + 4, v17);
  Function_20d8b7c((uchar *)v18 + 68, a5);
  v18[48] = v16;
  v20 = 0;
  v18[43] = 0;
  v18[44] = 0;
  *v18 = v15;
  v18[46] = 1;
  v18[67] = a14;
  v18[34] = a8;
  v18[35] = a9;
  v18[36] = a10;
  v18[37] = a11;
  v18[38] = a12;
  v18[39] = a13;
  v18[40] = 0;
  v18[41] = 0;
  v18[53] = 0;
  v18[47] = a6;
  v18[49] = 0;
  v18[50] = a7;
  v18[65] = 0;
  *((ushort *)v18 + 132) = 0;
  v18[42] = 0;
  v18[45] = 0;
  do
  {
    v21 = Function_20d76a0();
    v22 = (int)v18 + v20++;
    *(uchar *)(v22 + 132) = v21 + v21 / 255;
  }
  while ( v20 < 4 );
  v23 = 0;
  do
  {
    v24 = (int)&v18[v23++];
    *(uint *)(v24 + 216) = -1;
  }
  while ( v23 < 10 );
  v18[64] = 0;
  if ( !dword_221A400[1150] )
    Function_21fc330();
  if ( a6 )
  {
    v25 = &dword_221A400[1156];
    if ( !LOBYTE(dword_221A400[1156]) )
      v25 = (int *)Function_20d7510((int)&v28, "%s.master.gs.nintendowifi.net");
    if ( LOBYTE(dword_221A400[1156]) )
      v25 = &dword_221A400[1156];
    if ( !LOBYTE(dword_221A400[1156]) )
      v25 = (int *)&v28;
    v26 = Function_21fc3a4(v25, 27900, v18 + 51, 0);
  }
  else
  {
    v26 = 1;
  }
  if ( v26 )
    result = 0;
  else
    result = 3;
  return result;
}

//----- (021FBF58) --------------------------------------------------------
int *__fastcall Function_21fbf58(int *result, int a2)
{
  if ( !result )
    result = &dword_22197F4;
  result[40] = a2;
  return result;
}

//----- (021FBF70) --------------------------------------------------------
int *__fastcall Function_21fbf70(int *result, int a2)
{
  if ( !result )
    result = &dword_22197F4;
  result[41] = a2;
  return result;
}

//----- (021FBF88) --------------------------------------------------------
int *__fastcall Function_21fbf88(int *result, int a2)
{
  if ( !result )
    result = &dword_22197F4;
  result[42] = a2;
  return result;
}

//----- (021FBFA0) --------------------------------------------------------
int __fastcall Function_21fbfa0(int *a1)
{
  int *v1;

  v1 = a1;
  if ( !a1 )
    v1 = &dword_22197F4;
  if ( v1[47] )
    Function_21fc080(v1);
  return Function_21fbfd4(v1);
}

//----- (021FBFD4) --------------------------------------------------------
int __fastcall Function_21fbfd4(int *a1)
{
  int *v1;
  int result;
  int v3;
  int v4;
  char v5;

  v1 = a1;
  v4 = 8;
  result = a1[49];
  if ( result )
  {
    for ( result = Function_21eab6c(*v1); result; result = Function_21eab6c(*v1) )
    {
      v3 = Function_21eae18(*v1, (int)&dword_221A400[1172], 255, 0, &v5, &v4);
      if ( v3 != -1 )
      {
        *((uchar *)&dword_221A400[1172] + v3) = 0;
        Function_21fcf60(v1, &dword_221A400[1172], v3, &v5);
      }
    }
  }
  return result;
}

//----- (021FC080) --------------------------------------------------------
void __fastcall Function_21fc080(int a1)
{
  int v1;
  uint v2;
  uint v3;
  int v4;
  uint v5;

  v1 = a1;
  Function_21ea840();
  v3 = v2;
  if ( *(uint *)v1 != -1 )
  {
    v4 = *(uint *)(v1 + 184);
    if ( v4 <= 0 || v2 - *(uint *)(v1 + 172) <= 0x2710 )
    {
      if ( *(uint *)(v1 + 180) && v2 - *(uint *)(v1 + 172) > 0x2710 )
      {
        Function_21fd2d4(v1, 1);
      }
      else
      {
        v5 = *(uint *)(v1 + 172);
        if ( v2 - v5 > 0xEA60 || !v5 || v2 < v5 )
          Function_21fd2d4(v1, 0);
      }
    }
    else
    {
      if ( v4 >= 4 )
      {
        *(uint *)(v1 + 184) = 0;
        (*(void (__fastcall **)(int, const char *, uint))(v1 + 156))(
          5,
          "No challenge value was received from the master server.",
          *(uint *)(v1 + 268));
        return;
      }
      Function_21fd2d4(v1, 3);
      ++*(uint *)(v1 + 184);
    }
    if ( v3 - *(uint *)(v1 + 176) > 0x4E20 )
      Function_21fd274(v1);
  }
}

//----- (021FC194) --------------------------------------------------------
int __fastcall Function_21fc194(int *a1)
{
  int *v1;
  int result;
  int v3;

  v1 = a1;
  if ( !a1 )
    v1 = &dword_22197F4;
  result = v1[47];
  if ( result )
  {
    Function_21ea840();
    if ( (uint)(v3 - v1[43]) >= 0x2710 )
    {
      Function_21fd2d4(v1, 1);
      result = 0;
      v1[45] = 0;
    }
    else
    {
      result = 1;
      v1[45] = 1;
    }
  }
  return result;
}

//----- (021FC1F0) --------------------------------------------------------
int *__fastcall Function_21fc1f0(int *a1)
{
  int *v1;
  bool v2;
  int *result;

  v1 = a1;
  if ( !a1 )
    v1 = &dword_22197F4;
  if ( v1[47] )
    Function_21fd2d4(v1, 2);
  v2 = *v1 == -1;
  if ( *v1 != -1 )
    v2 = v1[49] == 0;
  if ( !v2 )
    Function_21eacf0();
  *v1 = -1;
  v1[43] = 0;
  if ( v1[49] )
    Function_21ea8a8();
  result = &dword_22197F4;
  if ( v1 != &dword_22197F4 )
    result = (int *)Function_21d78b0((int)v1);
  return result;
}

//----- (021FC274) --------------------------------------------------------
int __fastcall Function_21fc274(int result, int a2)
{
  int v2;

  v2 = *(uint *)(result + 256);
  if ( v2 < 254 && a2 >= 1 && a2 <= 254 )
  {
    *(uint *)(result + 256) = v2 + 1;
    *(uchar *)(result + v2) = a2;
  }
  return result;
}

//----- (021FC2A0) --------------------------------------------------------
int __fastcall Function_21fc2a0(int a1, int a2, int a3, int a4)
{
  int v4;
  char v6;
  int v7;

  v7 = a4;
  v4 = a1;
  Function_20d7510((int)&v6, "%d");
  return Function_21fc2d4(v4, &v6);
}

//----- (021FC2D4) --------------------------------------------------------
int __fastcall Function_21fc2d4(int a1, char *a2)
{
  char *v2;
  int v3;
  int v4;
  int v5;
  int v6;
  int result;
  int v8;

  v2 = a2;
  v3 = a1;
  v4 = strlen(a2);
  v5 = *(uint *)(v3 + 2048);
  v6 = v4 + 1;
  result = 2048 - v5;
  if ( v6 > 2048 - v5 )
    v6 = 2048 - v5;
  if ( v6 )
  {
    memcpy((uchar *)(v3 + v5), v2, v6);
    v8 = *(uint *)(v3 + 2048) + v6;
    *(uint *)(v3 + 2048) = v8;
    result = v8 - 1;
    *(uchar *)(v3 + result) = 0;
  }
  return result;
}

//----- (021FC330) --------------------------------------------------------
int *Function_21fc330()
{
  int *result;
  int v1;
  int v2;
  uchar *v3;
  char v4;
  int *v5;
  char v6;

  result = Function_21eabbc();
  if ( result )
  {
    v1 = 0;
    dword_221A400[1150] = 0;
    do
    {
      v2 = v1;
      v3 = *(uchar **)(result[3] + 4 * v1);
      if ( !v3 )
        break;
      v4 = v3[1];
      ++v1;
      v5 = &dword_221A400[v2 + 1151];
      LOBYTE(dword_221A400[v2 + 1151]) = *v3;
      *((uchar *)v5 + 1) = v4;
      v6 = v3[3];
      *((uchar *)v5 + 2) = v3[2];
      *((uchar *)v5 + 3) = v6;
      dword_221A400[1150] = v1;
    }
    while ( v1 < 5 );
  }
  return result;
}

//----- (021FC3A4) --------------------------------------------------------
int __fastcall Function_21fc3a4(int a1, short a2, int a3, int a4)
{
  int v4;
  int v5;
  int v6;
  int v7;
  int *v8;
  int *v9;
  int v10;

  v4 = a3;
  v5 = HIBYTE(a2);
  *(uchar *)(v4 + 1) = 2;
  v6 = HIBYTE(a2) | (ushort)((a2 << 8) & 0xFF00);
  *(ushort *)(v4 + 2) = v6;
  v7 = 0;
  v8 = (int *)a1;
  v9 = (int *)a4;
  if ( a1 )
    *(uint *)(v4 + 4) = Function_21eaf1c(a1, v6, v5, a4);
  else
    *(uint *)(v4 + 4) = 0;
  if ( *(uint *)(v4 + 4) == -1 && Function_20d8d14(v8, "255.255.255.255") )
  {
    v10 = Function_220854c(v8);
    v7 = v10;
    if ( !v10 )
      return 0;
    *(uint *)(v4 + 4) = ***(uint ***)(v10 + 12);
  }
  if ( v9 )
    *v9 = v7;
  return 1;
}

//----- (021FC44C) --------------------------------------------------------
char *__fastcall Function_21fc44c(char *result, char *a2)
{
  char v2;

  v2 = *result;
  *result = *a2;
  *a2 = v2;
  return result;
}

//----- (021FC460) --------------------------------------------------------
int __fastcall Function_21fc460(uint a1)
{
  if ( a1 < 0x1A )
    return (uchar)(a1 + 65);
  if ( a1 < 0x34 )
    return (uchar)(a1 + 71);
  if ( a1 < 0x3E )
    return (uchar)(a1 - 4);
  if ( a1 == 62 )
    return 43;
  if ( a1 == 63 )
    return 47;
  return 0;
}

//----- (021FC4A8) --------------------------------------------------------
int __fastcall Function_21fc4a8(char *a1, int a2, uchar *a3, int a4)
{
  int v4;
  char *v5;
  uchar *v6;
  int v7;
  int v8;
  uchar *v9;
  bool v10;
  uchar v11;
  char v12;
  char *v13;
  int v14;
  uint v15;
  int result;
  char v17;
  char v18;
  char v19;
  char v20;
  uchar v21;
  uchar v22;
  uchar v23;
  int v24;

  v24 = a4;
  v4 = a2;
  v5 = a1;
  v6 = a3;
  v7 = 0;
  while ( v7 < v4 )
  {
    v8 = 0;
    v9 = &v21;
    do
    {
      v11 = __OFSUB__(v7, v4);
      v10 = v7 - v4 < 0;
      if ( v7 < v4 )
      {
        v12 = *v5++;
        LOBYTE(a2) = v12;
      }
      ++v8;
      ++v7;
      if ( v10 ^ v11 )
        *v9 = a2;
      else
        *v9 = 0;
      ++v9;
    }
    while ( v8 <= 2 );
    v13 = &v17;
    v17 = (int)v21 >> 2;
    v18 = ((int)v22 >> 4) + (16 * v21 & 0x3F);
    v19 = ((int)v23 >> 6) + (4 * v22 & 0x3F);
    v20 = v23 & 0x3F;
    v14 = 0;
    do
    {
      v15 = (uchar)*v13++;
      ++v14;
      *v6++ = Function_21fc460(v15);
    }
    while ( v14 <= 3 );
  }
  result = 0;
  *v6 = 0;
  return result;
}

//----- (021FC56C) --------------------------------------------------------
int __fastcall Function_21fc56c(int a1, int a2, int a3, int a4)
{
  char *v4;
  int v5;
  int v6;
  int v7;
  int v8;
  char *v9;
  int v10;
  int v11;
  uint v12;
  uchar v13;
  int result;
  int v15;
  int v16;
  int v17;
  int v18;
  bool v19;
  bool v20;
  uchar v21;
  int v22;
  char v23;

  v22 = a2;
  v4 = &v23;
  v5 = a1;
  v6 = a3;
  v7 = a4;
  LOWORD(a2) = 0;
  do
  {
    *v4++ = a2;
    a2 = (short)(a2 + 1);
  }
  while ( a2 < 256 );
  v8 = 0;
  v9 = &v23;
  v10 = 0;
  v11 = 0;
  do
  {
    v12 = v10 + (uchar)*v9 + *(uchar *)(v5 + v8);
    v10 = ((v12 >> 31) + __ROR4__((v12 << 24) - (v12 >> 31), 24)) & 0xFF;
    s32_div_f(v8 + 1, v22);
    v8 = v13;
    Function_21fc44c(v9, &v23 + v10);
    result = (v11 + 1) << 16;
    v11 = (short)(v11 + 1);
    ++v9;
  }
  while ( v11 < 256 );
  v15 = 0;
  v16 = 0;
  v17 = 0;
  if ( v7 > 0 )
  {
    do
    {
      v18 = v15 + *(uchar *)(v6 + v17) + 1;
      v15 = (uchar)((v18 < 0) + __ROR4__((v18 << 24) - ((uint)v18 >> 31), 24));
      v16 = (uchar)(((uchar)*(&v23 + v15) + v16 < 0)
                            + __ROR4__(
                                (((uchar)*(&v23 + v15) + v16) << 24)
                              - (((uint)(uchar)*(&v23 + v15) + v16) >> 31),
                                24));
      Function_21fc44c(&v23 + v15, &v23 + v16);
      v21 = __OFSUB__(v7, (short)(v17 + 1));
      v19 = v7 == (short)(v17 + 1);
      v20 = v7 - (short)(v17 + 1) < 0;
      result = *(uchar *)(v6 + v17) ^ (uchar)*(&v23
                                                                 + (uchar)(((uchar)*(&v23 + v15)
                                                                                    + (uchar)*(&v23 + v16) < 0)
                                                                                   + __ROR4__(
                                                                                       (((uchar)*(&v23 + v15)
                                                                                       + (uchar)*(&v23 + v16)) << 24)
                                                                                     - (((uchar)*(&v23 + v15)
                                                                                       + (uint)(uchar)*(&v23 + v16)) >> 31),
                                                                                       24)));
      *(uchar *)(v6 + v17) = result;
      v17 = (short)(v17 + 1);
    }
    while ( !((uchar)(v20 ^ v21) | v19) );
  }
  return result;
}

//----- (021FC6B0) --------------------------------------------------------
int __fastcall Function_21fc6b0(int result, char a2, uchar *a3)
{
  char v3;
  char v4;
  char v5;

  *(uchar *)result = a2;
  v3 = a3[1];
  *(uchar *)(result + 1) = *a3;
  *(uchar *)(result + 2) = v3;
  v4 = a3[2];
  v5 = a3[3];
  *(uchar *)(result + 3) = v4;
  *(uchar *)(result + 4) = v5;
  *(uint *)(result + 2048) = 5;
  return result;
}

//----- (021FC6E0) --------------------------------------------------------
int __fastcall Function_21fc6e0(int result, int a2, int *a3, int a4)
{
  int v4;
  int v5;
  int v6;
  int v7;
  int v8;
  char v9;
  int v10;

  v10 = a4;
  v4 = a4;
  v5 = result;
  v6 = a2;
  if ( a4 >= 1 && a4 <= 65 )
  {
    result = *((char *)a3 + a4 - 1);
    if ( !*((uchar *)a3 + a4 - 1) )
    {
      Function_20d8b7c(&v9, a3);
      v7 = strlen((char *)(v5 + 68));
      Function_21fc56c(v5 + 68, v7, (int)&v9, v4 - 1);
      Function_21fc4a8(&v9, v4 - 1, (uchar *)(v6 + *(uint *)(v6 + 2048)), v8);
      result = *(uint *)(v6 + 2048) + strlen((char *)(v6 + *(uint *)(v6 + 2048))) + 1;
      *(uint *)(v6 + 2048) = result;
    }
  }
  return result;
}

//----- (021FC780) --------------------------------------------------------
int __fastcall Function_21fc780(int a1, int a2)
{
  int v2;
  int v3;
  int result;
  bool v5;
  uint v6;
  short v7;
  bool v8;
  int v9;
  int v10;
  uint v11;

  v2 = a1;
  Function_20d8a08(a2, "%08X%04X", &v11, &v10);
  v3 = (v11 << 8) & 0xFF0000;
  result = v10 << 16;
  v6 = (v11 << 24) & 0xFF000000 | v3 | HIBYTE(v11) | (v11 >> 8) & 0xFF00;
  v5 = v6 == 0;
  v7 = v10;
  v11 = (v11 << 24) & 0xFF000000 | v3 | HIBYTE(v11) | (v11 >> 8) & 0xFF00;
  if ( v6 )
    v5 = (ushort)v10 == 0;
  if ( !v5 )
  {
    result = *(uint *)(v2 + 260);
    v8 = result == v6;
    if ( result == v6 )
    {
      result = *(ushort *)(v2 + 264);
      v8 = result == (ushort)v10;
    }
    if ( !v8 )
    {
      *(uint *)(v2 + 260) = v6;
      *(ushort *)(v2 + 264) = v7;
      v9 = *(uint *)(v2 + 268);
      result = (*(int (__fastcall **)(uint))(v2 + 168))(v11);
    }
  }
  return result;
}

//----- (021FC830) --------------------------------------------------------
uint __fastcall Function_21fc830(uint result, int a2, int a3, int a4, char *a5)
{
  int v5;
  char *v6;
  uint v7;
  int v8;
  int v9;
  int v10;
  char *v11;
  char *v12;
  int v13;
  int v14;
  int i;
  int j;
  int v17;
  int v18;
  char v19;
  int v20;

  v5 = a4;
  v6 = a5;
  v20 = 0;
  v7 = result;
  v8 = a2;
  v9 = a3;
  if ( a4 )
  {
    if ( (uint)(a3 - 1) > 1 )
    {
      v18 = 1;
    }
    else
    {
      result = 2048 - *(uint *)(a2 + 2048);
      if ( result < 2 )
        return result;
      v18 = (*(int (__fastcall **)(int, uint))(v7 + 152))(a3, *(uint *)(v7 + 268));
      *(ushort *)(v8 + *(uint *)(v8 + 2048)) = BYTE1(v18) | ((ushort)v18 << 8) & 0xFF00;
      *(uint *)(v8 + 2048) += 2;
    }
    if ( v5 != 255 )
      goto LABEL_31;
    (*(void (__fastcall **)(int, char *, uint))(v7 + 148))(v9, &v19, *(uint *)(v7 + 268));
    v10 = 0;
    if ( v20 > 0 )
    {
      v11 = &v19;
      do
      {
        v12 = (char *)off_2219B38[(uchar)*v11];
        if ( !v12 )
          v12 = "unknown";
        Function_21fc2d4(v8, v12);
        if ( !v9 )
        {
          v13 = *(uint *)(v8 + 2048);
          (*(void (__fastcall **)(uint, int, uint))(v7 + 136))((uchar)*v11, v8, *(uint *)(v7 + 268));
          if ( v13 == *(uint *)(v8 + 2048) )
            Function_21fc2d4(v8, (char *)&dword_2219984);
        }
        ++v10;
        ++v11;
      }
      while ( v10 < v20 );
    }
    v14 = *(uint *)(v8 + 2048);
    result = 2048 - v14;
    if ( 2048 - v14 >= 1 )
    {
      *(uint *)(v8 + 2048) = v14 + 1;
      result = 0;
      *(uchar *)(v8 + v14) = 0;
      v5 = v20;
      v6 = &v19;
      if ( v9 )
      {
LABEL_31:
        result = v18;
        for ( i = 0; i < v18; ++i )
        {
          for ( j = 0; j < v5; ++j )
          {
            v17 = *(uint *)(v8 + 2048);
            if ( v9 )
            {
              if ( v9 == 1 )
              {
                (*(void (__fastcall **)(uint, int, int, uint))(v7 + 140))(
                  (uchar)v6[j],
                  i,
                  v8,
                  *(uint *)(v7 + 268));
              }
              else if ( v9 == 2 )
              {
                (*(void (__fastcall **)(uint, int, int, uint))(v7 + 144))(
                  (uchar)v6[j],
                  i,
                  v8,
                  *(uint *)(v7 + 268));
              }
            }
            else
            {
              (*(void (__fastcall **)(uint, int, uint))(v7 + 136))(
                (uchar)v6[j],
                v8,
                *(uint *)(v7 + 268));
            }
            if ( v17 == *(uint *)(v8 + 2048) )
              Function_21fc2d4(v8, (char *)&dword_2219984);
          }
          result = v18;
        }
      }
    }
  }
  return result;
}

//----- (021FCA88) --------------------------------------------------------
uint __fastcall Function_21fca88(uint a1, int a2, int a3, char *a4, int a5, char *a6, int a7, char *a8)
{
  uint v8;
  int v9;

  v8 = a1;
  v9 = a2;
  Function_21fc830(a1, a2, 0, a3, a4);
  Function_21fc830(v8, v9, 1, a5, a6);
  return Function_21fc830(v8, v9, 2, a7, a8);
}

//----- (021FCAE0) --------------------------------------------------------
uint __fastcall Function_21fcae0(uint result, int a2, uchar *a3, int a4)
{
  char *v4;
  char *v5;
  char *v6;
  char *v7;
  int v8;
  int v9;
  int v10;
  bool v11;
  char *v12;
  int v13;
  int v14;
  int v15;
  bool v16;
  int v17;
  int v18;
  bool v19;

  v4 = 0;
  v5 = 0;
  v6 = 0;
  if ( a4 >= 3 )
  {
    v9 = *a3;
    v7 = (char *)(a3 + 1);
    v8 = v9;
    v10 = a4 - 1;
    v11 = v9 == 0;
    if ( v9 )
      v11 = v8 == 255;
    if ( !v11 )
    {
      v4 = v7;
      v10 -= v8;
      v7 += v8;
    }
    if ( v10 >= 2 )
    {
      v14 = (uchar)*v7;
      v12 = v7 + 1;
      v13 = v14;
      v15 = v10 - 1;
      v16 = v14 == 0;
      if ( v14 )
        v16 = v13 == 255;
      if ( !v16 )
      {
        v5 = v12;
        v15 -= v13;
        v12 += v13;
      }
      if ( v15 >= 1 )
      {
        v17 = (uchar)*v12;
        v18 = v15 - 1;
        v19 = v17 == 0;
        if ( *v12 )
          v19 = v17 == 255;
        if ( !v19 )
        {
          v18 -= v17;
          v6 = v12 + 1;
        }
        if ( v18 >= 0 )
          result = Function_21fca88(result, a2, v8, v4, v13, v5, v17, v6);
      }
    }
  }
  return result;
}

//----- (021FCB98) --------------------------------------------------------
int __fastcall Function_21fcb98(int a1, int a2, int a3, int a4)
{
  int v4;
  int v5;
  int v6;
  int v7;
  int result;
  char *v9;
  char *v10;
  int v11;
  int i;
  int v13;
  int v14;
  char v15;
  int v16;
  char v17;
  int v18;

  v18 = a4;
  v4 = a3;
  v5 = a1;
  v6 = a2;
  v16 = 0;
  if ( (uint)(a3 - 1) <= 1 )
    v7 = (*(int (__fastcall **)(int, uint))(a1 + 152))(a3, *(uint *)(a1 + 268));
  else
    v7 = 1;
  (*(void (__fastcall **)(int, char *, uint))(v5 + 148))(v4, &v15, *(uint *)(v5 + 268));
  result = 0;
  v14 = 0;
  if ( v16 > 0 )
  {
    v9 = &v15;
    do
    {
      v10 = (char *)off_2219B38[(uchar)*v9];
      if ( !v10 )
        v10 = "unknown";
      if ( v4 )
      {
        for ( i = 0; i < v7; *(uchar *)(v6 + *(uint *)(v6 + 2048) - 1) = 92 )
        {
          Function_20d7510((int)&v17, "%s%d");
          Function_21fc2d4(v6, &v17);
          *(uchar *)(v6 + *(uint *)(v6 + 2048) - 1) = 92;
          v13 = *(uint *)(v6 + 2048);
          if ( v4 == 1 )
          {
            (*(void (__fastcall **)(uint, int, int, uint))(v5 + 140))(
              (uchar)*v9,
              i,
              v6,
              *(uint *)(v5 + 268));
          }
          else if ( v4 == 2 )
          {
            (*(void (__fastcall **)(uint, int, int, uint))(v5 + 144))(
              (uchar)*v9,
              i,
              v6,
              *(uint *)(v5 + 268));
          }
          if ( v13 == *(uint *)(v6 + 2048) )
            Function_21fc2d4(v6, (char *)&dword_2219984);
          ++i;
        }
      }
      else
      {
        Function_21fc2d4(v6, v10);
        *(uchar *)(v6 + *(uint *)(v6 + 2048) - 1) = 92;
        v11 = *(uint *)(v6 + 2048);
        (*(void (__fastcall **)(uint, int, uint))(v5 + 136))((uchar)*v9, v6, *(uint *)(v5 + 268));
        if ( v11 == *(uint *)(v6 + 2048) )
          Function_21fc2d4(v6, (char *)&dword_2219984);
        *(uchar *)(v6 + *(uint *)(v6 + 2048) - 1) = 92;
      }
      result = v14 + 1;
      v14 = result;
      ++v9;
    }
    while ( result < v16 );
  }
  return result;
}

//----- (021FCD70) --------------------------------------------------------
int __fastcall Function_21fcd70(int a1, int a2)
{
  int v2;
  int v3;
  int v4;
  int v5;
  int result;

  v2 = a2;
  v3 = a1;
  *(uint *)(a2 + 2048) = 1;
  *(uchar *)a2 = 92;
  Function_21fcb98(a1, a2, 0, 92);
  Function_21fcb98(v3, v2, 1, v4);
  Function_21fcb98(v3, v2, 2, v5);
  Function_21fc2d4(v2, "final\\\\queryid\\1.1");
  result = *(uint *)(v2 + 2048) - 1;
  *(uint *)(v2 + 2048) = result;
  return result;
}

//----- (021FCDD4) --------------------------------------------------------
int __fastcall Function_21fcdd4(uint *a1, int a2, int a3, int a4)
{
  uint *v4;
  char *v5;
  int result;
  int v7;
  int v8;
  uint v9;
  int (__fastcall *v10)(uint, uint);
  int (__fastcall *v11)(int, int, uint);
  char v12;
  char v13;
  char v14;
  char v15;
  char v16;
  char v17;
  int v18;

  v18 = a4;
  v4 = a1;
  v12 = -3;
  v13 = -4;
  v5 = &v12;
  v14 = 30;
  v15 = 102;
  result = 178;
  v7 = 1;
  v16 = 106;
  v17 = -78;
  if ( a3 < 10 )
  {
    v7 = 0;
  }
  else
  {
    v8 = 0;
    while ( 1 )
    {
      result = *(uchar *)(a2 + v8);
      if ( (uchar)*v5 != result )
        break;
      ++v8;
      ++v5;
      if ( v8 >= 6 )
        goto LABEL_8;
    }
    v7 = 0;
  }
LABEL_8:
  if ( v7 )
  {
    result = *(uchar *)(a2 + 9);
    v10 = (int (__fastcall *)(uint, uint))v4[40];
    if ( v10 )
    {
      *(ushort *)((char *)&v9 + 1) = *(ushort *)(a2 + 7);
      HIBYTE(v9) = *(uchar *)(a2 + 9);
      LOBYTE(v9) = *(uchar *)(a2 + 6);
      result = v10(
                 (v9 << 24) & 0xFF000000 | (v9 << 8) & 0xFF0000 | *(uchar *)(a2 + 9) | (v9 >> 8) & 0xFF00,
                 v4[67]);
    }
  }
  else
  {
    v11 = (int (__fastcall *)(int, int, uint))v4[41];
    if ( v11 )
      result = v11(a2, a3, v4[67]);
  }
  return result;
}

//----- (021FCEFC) --------------------------------------------------------
int __fastcall Function_21fcefc(int a1, int a2)
{
  int v2;
  int v4;

  v2 = 0;
  do
  {
    if ( a2 == *(uint *)(a1 + 4 * v2 + 216) )
      return 1;
    ++v2;
  }
  while ( v2 < 10 );
  v4 = *(uint *)(a1 + 256) + 1;
  *(uint *)(a1 + 256) = v4 % 10;
  *(uint *)(a1 + 4 * (v4 % 10) + 216) = a2;
  return 0;
}

//----- (021FCF60) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x21FD078 for case 0"

//----- (021FD054) --------------------------------------------------------
void Function_21fd054()
{
  JUMPOUT(&loc_21FD078);
}

//----- (021FD058) --------------------------------------------------------
void Function_21fd058()
{
  JUMPOUT(&loc_21FD090);
}

//----- (021FD05C) --------------------------------------------------------
void Function_21fd05c()
{
  JUMPOUT(&loc_21FD0CC);
}

//----- (021FD060) --------------------------------------------------------
void Function_21fd060()
{
  JUMPOUT(&loc_21FD240);
}

//----- (021FD064) --------------------------------------------------------
void Function_21fd064()
{
  JUMPOUT(&loc_21FD104);
}

//----- (021FD068) --------------------------------------------------------
void Function_21fd068()
{
  JUMPOUT(&loc_21FD240);
}

//----- (021FD06C) --------------------------------------------------------
void Function_21fd06c()
{
  JUMPOUT(&loc_21FD178);
}

//----- (021FD070) --------------------------------------------------------
void Function_21fd070()
{
  JUMPOUT(&loc_21FD240);
}

//----- (021FD074) --------------------------------------------------------
void Function_21fd074()
{
  int v0;

  JUMPOUT(__CS__, v0);
}

//----- (021FD274) --------------------------------------------------------
void __fastcall Function_21fd274(int a1, int a2, int a3, int a4)
{
  int v4;
  int v5;
  char v6;
  int v7;
  int v8;

  v8 = a4;
  v4 = a1;
  v7 = 0;
  Function_21fc6b0((int)&v6, 8, (uchar *)(a1 + 132));
  Function_21eae5c(*(uint *)v4, (int)&v6, v7, 0, (char *)(v4 + 204), 8);
  Function_21ea840();
  *(uint *)(v4 + 176) = v5;
}

//----- (021FD2D4) --------------------------------------------------------
void __fastcall Function_21fd2d4(uint a1, int a2, int a3, int a4)
{
  uint v4;
  int v5;
  int i;
  char *v7;
  int v8;
  int v9;
  char *v10;
  int v11;
  int v12;
  int v13;
  int v14;
  int v15;
  int v16;
  int v17;
  int v18;
  int v19;
  char v20;
  char v21[2048];
  int v22;
  int v23;

  v23 = a4;
  v4 = a1;
  v5 = a2;
  v22 = 0;
  Function_21fc6b0((int)v21, 3, (uchar *)(a1 + 132));
  for ( i = 0; i < dword_221A400[1150]; ++i )
  {
    Function_20d7510((int)&v20, "localip%d");
    Function_21fc2d4((int)v21, &v20);
    v7 = (char *)Function_22089f4(dword_221A400[i + 1151]);
    Function_21fc2d4((int)v21, v7);
  }
  Function_21fc2d4((int)v21, "localport");
  Function_21fc2a0((int)v21, *(uint *)(v4 + 192), v8, v9);
  Function_21fc2d4((int)v21, "natneg");
  v11 = *(uint *)(v4 + 200);
  if ( v11 )
    v10 = "1";
  if ( !v11 )
    v10 = "0";
  Function_21fc2d4((int)v21, v10);
  if ( v5 )
  {
    Function_21fc2d4((int)v21, "statechanged");
    Function_21fc2a0((int)v21, v5, v12, v13);
  }
  Function_21fc2d4((int)v21, "gamename");
  Function_21fc2d4((int)v21, (char *)(v4 + 4));
  if ( *(uint *)(v4 + 168) )
  {
    Function_21fc2d4((int)v21, "publicip");
    Function_21fc2a0((int)v21, *(uint *)(v4 + 260), v14, v15);
    Function_21fc2d4((int)v21, "publicport");
    Function_21fc2a0((int)v21, *(ushort *)(v4 + 264), v16, v17);
  }
  if ( v5 == 2 )
  {
    v18 = v22;
    if ( 2048 - v22 >= 1 )
    {
      ++v22;
      v21[v18] = 0;
    }
  }
  else
  {
    Function_21fca88(v4, (int)v21, 255, 0, 255, 0, 255, 0);
  }
  Function_21eae5c(*(uint *)v4, (int)v21, v22, 0, (char *)(v4 + 204), 8);
  Function_21ea840();
  *(uint *)(v4 + 172) = v19;
  *(uint *)(v4 + 176) = v19;
  if ( v5 )
    *(uint *)(v4 + 180) = 0;
}

//----- (021FD4E0) --------------------------------------------------------
int __fastcall Function_21fd4e0(int result, int a2)
{
  if ( result >= 50 && result <= 254 )
    off_2219B38[result] = a2;
  return result;
}

//----- (021FD500) --------------------------------------------------------
uint __fastcall Function_21fd500(int a1, uint a2, int a3, uint a4, uchar *a5, uint *a6)
{
  uint v6;
  int v7;
  int v8;
  uint v9;
  uint result;
  uint v11;
  uint i;
  uint v13;
  uint v14;

  v6 = a2;
  v7 = a1;
  v8 = a3;
  v9 = a4;
  if ( !a2 )
    return 0;
  v11 = 0;
  for ( i = 1; i < a2; i = 2 * i + 1 )
    ;
  do
  {
    v13 = (*a6)++;
    *a5 = *(uchar *)(v7 + (uchar)*a5) + *(uchar *)(v8 + v13);
    if ( *a6 >= v9 )
    {
      *a6 = 0;
      *a5 += v9;
    }
    ++v11;
    result = i & *a5;
    if ( v11 > 0xB )
    {
      u32_div_f(result, v6);
      result = v14;
    }
  }
  while ( result > v6 );
  return (uchar)result;
}

//----- (021FD5B4) --------------------------------------------------------
uchar *__fastcall Function_21fd5b4(uchar *result)
{
  int v1;
  int v2;

  result[256] = 1;
  result[257] = 3;
  result[258] = 5;
  result[259] = 7;
  result[260] = 11;
  v1 = 0;
  v2 = 255;
  do
    result[v1++] = v2--;
  while ( v1 < 256 );
  return result;
}

//----- (021FD5FC) --------------------------------------------------------
uchar *__fastcall Function_21fd5fc(uchar *a1, int a2, uint a3, int a4)
{
  uint v4;
  uchar *v5;
  int v6;
  uchar *result;
  int v8;
  int v9;
  uint v10;
  char v11;
  uchar v12;
  int v13;
  int v14;

  v14 = a4;
  v4 = a3;
  v5 = a1;
  v6 = a2;
  if ( a3 < 1 )
    return Function_21fd5b4(a1);
  v8 = 0;
  do
  {
    v5[v8] = v8;
    ++v8;
  }
  while ( v8 < 256 );
  v13 = 0;
  v12 = 0;
  v9 = 255;
  do
  {
    v10 = Function_21fd500((int)v5, v9, v6, v4, &v12, (uint *)&v13);
    v11 = v5[v9];
    v5[v9] = v5[v10];
    v5[v10] = v11;
    --v9;
  }
  while ( v9 >= 0 );
  result = 0;
  v5[256] = v5[1];
  v5[257] = v5[3];
  v5[258] = v5[5];
  v5[259] = v5[7];
  v5[260] = v5[v12];
  return result;
}

//----- (021FD6C4) --------------------------------------------------------
int __fastcall Function_21fd6c4(uchar *a1, uchar a2)
{
  int v2;
  uchar v3;
  int v4;
  int v5;

  v2 = a1[256];
  a1[256] = v2 + 1;
  v3 = a1[257] + a1[v2];
  a1[257] = v3;
  v4 = a1[260];
  v5 = a1[v4];
  a1[v4] = a1[v3];
  a1[a1[257]] = a1[a1[259]];
  a1[a1[259]] = a1[a1[256]];
  a1[a1[256]] = v5;
  LOBYTE(v5) = a1[258] + a1[v5];
  a1[258] = v5;
  a1[259] = a2 ^ a1[(uchar)(a1[(uchar)v5] + a1[a1[256]])] ^ a1[a1[(uchar)(a1[a1[257]] + a1[a1[259]] + a1[a1[260]])]];
  a1[260] = a2;
  return a1[259];
}

//----- (021FD790) --------------------------------------------------------
int __fastcall Function_21fd790(int result, int a2, int a3)
{
  int v3;
  uchar *v4;
  int v5;
  int i;

  v3 = a3;
  v4 = (uchar *)result;
  v5 = a2;
  for ( i = 0; i < v3; ++i )
  {
    result = Function_21fd6c4(v4, *(uchar *)(v5 + i));
    *(uchar *)(v5 + i) = result;
  }
  return result;
}

//----- (021FD7CC) --------------------------------------------------------
uint *__fastcall Function_21fd7cc(uint *result, int a2)
{
  int v2;

  v2 = result[1];
  if ( v2 )
    *(uint *)(v2 + 32) = a2;
  result[1] = a2;
  *(uint *)(a2 + 32) = 0;
  if ( !*result )
    *result = a2;
  ++result[2];
  return result;
}

//----- (021FD800) --------------------------------------------------------
uint *__fastcall Function_21fd800(uint *result, int a2)
{
  *(uint *)(a2 + 32) = *result;
  *result = a2;
  if ( !result[1] )
    result[1] = a2;
  ++result[2];
  return result;
}

//----- (021FD828) --------------------------------------------------------
int __fastcall Function_21fd828(int *a1)
{
  int v1;
  int v2;

  v1 = *a1;
  if ( *a1 )
  {
    v2 = *(uint *)(v1 + 32);
    *a1 = v2;
    if ( !v2 )
      a1[1] = 0;
    --a1[2];
  }
  return v1;
}

//----- (021FD85C) --------------------------------------------------------
int __fastcall Function_21fd85c(int *a1, int a2)
{
  int v2;
  int v3;

  v2 = *a1;
  v3 = 0;
  if ( !*a1 )
    return 0;
  while ( v2 != a2 )
  {
    v3 = v2;
    v2 = *(uint *)(v2 + 32);
    if ( !v2 )
      return 0;
  }
  if ( v3 )
    *(uint *)(v3 + 32) = *(uint *)(v2 + 32);
  if ( *a1 == v2 )
    *a1 = *(uint *)(v2 + 32);
  if ( a1[1] == v2 )
    a1[1] = v3;
  --a1[2];
  return 1;
}

//----- (021FD8C8) --------------------------------------------------------
uint *__fastcall Function_21fd8c8(uint *result)
{
  result[1] = 0;
  *result = 0;
  result[2] = 0;
  return result;
}

//----- (021FD8DC) --------------------------------------------------------
int __fastcall Function_21fd8dc(uint *a1, int a2, int a3, int a4)
{
  uint *v4;
  int v5;
  int v6;
  int result;
  int v8;
  char v9;
  char v10;
  int v11;
  char *v12;
  char v13;
  int v14;
  char *v15;
  const char *v16;
  int v17;
  char v18;
  char v19;
  const char *v20;
  int v21;
  char v22;
  char v23;
  char v24;
  char v25;
  short v26;
  int v27;
  char v28;
  char v29;
  char v30;
  char v31;
  char v32;
  char v33;
  char v34;
  char v35;
  char v36;
  char v37;
  int v38;

  v38 = a4;
  v4 = a1;
  v5 = a2;
  Function_21fd7cc(a1 + 2, a2);
  Function_21ea840();
  *(uint *)(v5 + 28) = v6;
  result = 2;
  v25 = 2;
  if ( !(*(uchar *)(v5 + 20) & 0x20) )
  {
    if ( *v4 == 1 )
    {
      v8 = 0;
      v28 = -2;
      v29 = -3;
      v30 = 0;
      v9 = *(uchar *)(v5 + 29);
      v31 = *(uchar *)(v5 + 28);
      v32 = v9;
      v10 = *(uchar *)(v5 + 31);
      v33 = *(uchar *)(v5 + 30);
      v34 = v10;
      if ( *(uchar *)(v5 + 20) & 4 )
      {
        v35 = v4[16];
        v11 = v4[16];
        if ( v11 > 0 )
        {
          v12 = &v28;
          do
          {
            v13 = *((uchar *)v4 + v8++ + 44);
            v12[8] = v13;
            v11 = v4[16];
            ++v12;
          }
          while ( v8 < v11 );
        }
        *(&v28 + v11 + 8) = 0;
        *(&v28 + v4[16] + 9) = 0;
        v14 = v4[16] + 10;
      }
      else
      {
        v35 = -1;
        v36 = -1;
        v37 = -1;
        v14 = 10;
      }
    }
    else
    {
      v15 = &v28;
      if ( *(uchar *)(v5 + 20) & 4 )
      {
        v16 = "\\basic\\\\info\\";
        v17 = 6;
        do
        {
          v18 = *v16;
          v19 = v16[1];
          v16 += 2;
          *v15 = v18;
          v15[1] = v19;
          v15 += 2;
          --v17;
        }
        while ( v17 );
        v14 = 13;
        *v15 = *v16;
      }
      else
      {
        v20 = "\\status\\";
        v21 = 4;
        do
        {
          v22 = *v20;
          v23 = v20[1];
          v20 += 2;
          *v15 = v22;
          v15[1] = v23;
          v15 += 2;
          --v21;
        }
        while ( v21 );
        v14 = 8;
      }
    }
    if ( *(uint *)v5 == v4[10] && *(uchar *)(v5 + 21) & 2 )
    {
      v27 = *(uint *)(v5 + 8);
      v26 = *(ushort *)(v5 + 12);
    }
    else
    {
      v27 = *(uint *)v5;
      v26 = *(ushort *)(v5 + 4);
    }
    result = Function_21eae5c(v4[8], (int)&v28, v14, 0, &v24, 8);
  }
  return result;
}

//----- (021FDABC) --------------------------------------------------------
uint *__fastcall Function_21fdabc(uint *a1, int a2, int a3, int a4, int a5, int a6)
{
  uint *v6;
  int v7;
  int v8;
  uint *result;

  v6 = a1;
  v7 = a2;
  v8 = a3;
  if ( a4 || (result = (uint *)dword_221A400[660], dword_221A400[660] == 1) )
  {
    Function_21ea8a4();
    *v6 = v8;
    v6[1] = v7;
    v6[16] = 0;
    v6[17] = a5;
    v6[18] = a6;
    v6[10] = 0;
    v6[8] = Function_21eacdc();
    Function_21fd8c8(v6 + 5);
    result = Function_21fd8c8(v6 + 2);
  }
  return result;
}

//----- (021FDB30) --------------------------------------------------------
int __fastcall Function_21fdb30(int result, int a2)
{
  *(uint *)(result + 40) = a2;
  return result;
}

//----- (021FDB38) --------------------------------------------------------
uint *__fastcall Function_21fdb38(int a1)
{
  int v1;

  v1 = a1;
  Function_21fd8c8((uint *)(a1 + 20));
  return Function_21fd8c8((uint *)(v1 + 8));
}

//----- (021FDB54) --------------------------------------------------------
uint *__fastcall Function_21fdb54(uint *a1)
{
  uint *v1;
  int v2;

  v1 = a1;
  v2 = a1[8];
  Function_21eacf0();
  v1[8] = -1;
  Function_21fd8c8(v1 + 5);
  return Function_21fd8c8(v1 + 2);
}

//----- (021FDB80) --------------------------------------------------------
uint *__fastcall Function_21fdb80(uint *result, int a2, int a3, int a4)
{
  int v4;
  uint *v5;

  *(uchar *)(a2 + 20) &= 0xC3u;
  if ( a4 )
  {
    if ( a4 == 1 )
    {
      *(uchar *)(a2 + 20) |= 8u;
    }
    else if ( a4 == 2 )
    {
      return result;
    }
  }
  else
  {
    *(uchar *)(a2 + 20) |= 4u;
  }
  v4 = result[1];
  if ( result[4] < v4 )
    return (uint *)Function_21fd8dc(result, a2, a3, v4);
  v5 = result + 5;
  if ( a3 )
    result = Function_21fd800(v5, a2);
  else
    result = Function_21fd7cc(v5, a2);
  return result;
}

//----- (021FDBFC) --------------------------------------------------------
int __fastcall Function_21fdbfc(int result, int a2, uchar *a3, int a4)
{
  int v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;

  v4 = result;
  v5 = a2;
  if ( !*a3 )
  {
    v6 = (int)(a3 + 5);
    v7 = a4 - 5;
    if ( *(uchar *)(a2 + 20) & 4 )
    {
      v8 = 0;
      if ( *(uint *)(result + 64) > 0 )
      {
        do
        {
          v9 = Function_21ff4ac(v6, v7);
          if ( v9 < 0 )
            break;
          Function_21fe1a8(v5, off_2219B38[*(uchar *)(v4 + v8++ + 44)], v6);
          v6 += v9;
          v7 -= v9;
        }
        while ( v8 < *(uint *)(v4 + 64) );
      }
      *(uchar *)(v5 + 20) |= 0x41u;
    }
    else
    {
      Function_21fe51c(a2, v6, v7);
      *(uchar *)(v5 + 20) |= 0x43u;
    }
    *(uchar *)(v5 + 20) &= 0xF3u;
    Function_21ea840();
    *(uint *)(v5 + 28) = v10 - *(uint *)(v5 + 28);
    Function_21fd85c((int *)(v4 + 8), v5);
    result = (*(int (__fastcall **)(int, uint, int, uint))(v4 + 68))(v4, 0, v5, *(uint *)(v4 + 72));
  }
  return result;
}

//----- (021FDCFC) --------------------------------------------------------
int __fastcall Function_21fdcfc(int a1, int a2, uchar *a3)
{
  int v3;
  uchar *v4;
  int v5;
  BOOL v6;
  int result;
  char v8;
  char v9;
  int v10;

  v3 = a2;
  v4 = a3;
  v5 = a1;
  v6 = Function_20d90b0(a3, "\\final\\", (int)a3) != 0;
  result = Function_21fe49c(v3, v4);
  if ( v6 )
  {
    v8 = *(uchar *)(v3 + 20);
    if ( *(uchar *)(v3 + 20) & 4 )
      v9 = v8 | 0x41;
    else
      v9 = v8 | 0x42;
    *(uchar *)(v3 + 20) = v9;
    *(uchar *)(v3 + 20) &= 0xF3u;
    Function_21ea840();
    *(uint *)(v3 + 28) = v10 - *(uint *)(v3 + 28);
    Function_21fd85c((int *)(v5 + 8), v3);
    result = (*(int (__fastcall **)(int, uint, int, uint))(v5 + 68))(v5, 0, v3, *(uint *)(v5 + 72));
  }
  return result;
}

//----- (021FDD94) --------------------------------------------------------
int Function_21fdd94()
{
  return 1;
}

//----- (021FDD9C) --------------------------------------------------------
int __fastcall Function_21fdd9c(uint *a1, int a2)
{
  int v2;
  uint *v3;
  int v4;
  int result;
  int v6;
  int v7;
  int v8;
  bool v9;
  int v10;
  char v11;
  ushort v12;
  int v13;
  char v14;

  v2 = a2;
  v3 = a1;
  v10 = 8;
  if ( a2 )
    v4 = a1[9];
  else
    v4 = a1[8];
  result = Function_21eab6c(v4);
  if ( !result )
    return result;
  do
  {
    v6 = Function_21eae18(v4, (int)&v14, 2047, 0, &v11, &v10);
    result = -1;
    if ( v6 == -1 )
      return result;
    *(&v14 + v6) = 0;
    v7 = v3[2];
    if ( !v7 )
      goto LABEL_26;
    while ( (!v2 || !(*(uchar *)(v7 + 21) & 8) || *(uint *)(v7 + 16) != v13)
         && (*(uint *)v7 != v13 || *(ushort *)(v7 + 4) != v12 && !v2) )
    {
      if ( *(uint *)v7 == v3[10] && *(uchar *)(v7 + 21) & 2 )
      {
        v8 = *(uint *)(v7 + 8);
        v9 = v8 == v13;
        if ( v8 == v13 )
          v9 = *(ushort *)(v7 + 12) == v12;
        if ( v9 )
          break;
      }
LABEL_25:
      v7 = *(uint *)(v7 + 32);
      if ( !v7 )
        goto LABEL_26;
    }
    if ( v2 )
    {
      if ( Function_21fdd94() )
        goto LABEL_26;
      goto LABEL_25;
    }
    if ( *v3 == 1 )
      Function_21fdbfc((int)v3, v7, &v14, v6);
    else
      Function_21fdcfc((int)v3, v7, (uchar *)&v14);
LABEL_26:
    result = Function_21eab6c(v4);
  }
  while ( result );
  return result;
}

//----- (021FDF30) --------------------------------------------------------
void __fastcall Function_21fdf30(int a1)
{
  int v1;
  int v2;
  uint v3;
  uint i;

  v1 = a1;
  Function_21ea840();
  v2 = *(uint *)(v1 + 8);
  for ( i = v3; v2; v2 = *(uint *)(v1 + 8) )
  {
    if ( i <= *(uint *)(v2 + 28) + 2500 )
      break;
    *(uchar *)(v2 + 21) |= 0x10u;
    *(uint *)(*(uint *)(v1 + 8) + 28) = 2500;
    *(uchar *)(*(uint *)(v1 + 8) + 21) &= 0xD3u;
    (*(void (__fastcall **)(int, int, uint, uint))(v1 + 68))(
      v1,
      1,
      *(uint *)(v1 + 8),
      *(uint *)(v1 + 72));
    Function_21fd828((int *)(v1 + 8));
  }
}

//----- (021FDFC0) --------------------------------------------------------
int __fastcall Function_21fdfc0(uint *a1)
{
  uint *i;
  int v2;
  int v3;
  int v4;
  int result;

  for ( i = a1; ; Function_21fd8dc(i, v2, v3, v4) )
  {
    result = i[1];
    if ( i[4] >= result )
      break;
    result = i[7];
    if ( result <= 0 )
      break;
    v2 = Function_21fd828(i + 5);
  }
  return result;
}

//----- (021FE000) --------------------------------------------------------
uint *__fastcall Function_21fe000(uint *result)
{
  int v1;

  v1 = (int)result;
  if ( result[4] )
  {
    Function_21fdd9c(result, 0);
    Function_21fdf30(v1);
    if ( *(uint *)(v1 + 28) > 0 )
      Function_21fdfc0((uint *)v1);
    result = *(uint **)(v1 + 16);
    if ( !result )
      result = (uint *)(*(int (__fastcall **)(int, int, uint, uint))(v1 + 68))(
                           v1,
                           2,
                           0,
                           *(uint *)(v1 + 72));
  }
  return result;
}

//----- (021FE060) --------------------------------------------------------
int __fastcall Function_21fe060(int result, char a2)
{
  int v2;

  v2 = *(uint *)(result + 64);
  if ( v2 < 20 )
  {
    *(uint *)(result + 64) = v2 + 1;
    result += v2;
    *(uchar *)(result + 44) = a2;
  }
  return result;
}

//----- (021FE080) --------------------------------------------------------
int __fastcall Function_21fe080(int a1, int a2)
{
  int v2;
  int v3;
  int result;

  v2 = a1;
  v3 = a2;
  result = Function_21fd85c((int *)(a1 + 8), a2);
  if ( !result )
    result = Function_21fd85c((int *)(v2 + 20), v3);
  return result;
}

//----- (021FE0AC) --------------------------------------------------------
int __fastcall Function_21fe0ac(uint *a1)
{
  return Function_21fe6f4(*a1);
}

//----- (021FE0BC) --------------------------------------------------------
int __fastcall Function_21fe0bc(uchar **a1, uchar **a2)
{
  return Function_20df9b0(*a1, *a2);
}

//----- (021FE0D0) --------------------------------------------------------
int __fastcall Function_21fe0d0(int *a1)
{
  return Function_21d78b0(*a1);
}

//----- (021FE0E0) --------------------------------------------------------
int Function_21fe0e0()
{
  if ( !dword_221A400[1238] )
    dword_221A400[1238] = (int)Function_21ea224(
                                 8,
                                 100,
                                 2,
                                 (int)Function_21fe0ac,
                                 (int)Function_21fe0bc,
                                 (int)Function_21fe0d0);
  return dword_221A400[1238];
}

//----- (021FE144) --------------------------------------------------------
int *Function_21fe144()
{
  int *result;

  result = (int *)dword_221A400[1238];
  if ( dword_221A400[1238] )
  {
    result = (int *)Function_21ea3d8((uint *)dword_221A400[1238]);
    if ( !result )
    {
      Function_21ea364(dword_221A400[1238]);
      result = &dword_221A400[1236];
      dword_221A400[1238] = 0;
    }
  }
  return result;
}

//----- (021FE184) --------------------------------------------------------
int __fastcall Function_21fe184(int *a1)
{
  int v1;

  v1 = *a1;
  Function_21ea364(*(uint *)(*a1 + 24));
  *(uint *)(v1 + 24) = 0;
  return Function_21d78b0(v1);
}

//----- (021FE1A8) --------------------------------------------------------
uchar *__fastcall Function_21fe1a8(int a1, int a2, int a3, int a4)
{
  int v4;
  int v6;
  int v7;
  int v8;

  v8 = a4;
  v4 = a1;
  v6 = Function_21ff3c0(0);
  v7 = Function_21ff3c0(0);
  return Function_21ea44c(*(uchar **)(v4 + 24), (char *)&v6);
}

//----- (021FE1E8) --------------------------------------------------------
uchar *__fastcall Function_21fe1e8(int a1, int a2)
{
  int v2;
  int v3;
  int v4;
  char v6;

  v2 = a2;
  v3 = a1;
  Function_20d7510((int)&v6, "%d");
  return Function_21fe1a8(v3, v2, (int)&v6, v4);
}

//----- (021FE220) --------------------------------------------------------
int __fastcall Function_21fe220(int a1, int a2, int a3)
{
  int v3;
  int v4;
  int v5;
  int v7;
  int v8;

  v3 = a1;
  v4 = a2;
  v5 = a3;
  if ( !a1 )
    Function_20d407c((int)"server", (int)"sb_server.c", (int)"SBServerGetStringValueA");
  if ( !v3 )
    return 0;
  v8 = v4;
  v7 = Function_21ea598(*(uint *)(v3 + 24), (int)&v8);
  if ( v7 )
    v5 = *(uint *)(v7 + 4);
  return v5;
}

//----- (021FE28C) --------------------------------------------------------
void __fastcall Function_21fe28c(int a1, int *a2)
{
  int v2;
  int v3;
  uchar *v4;
  int v5;
  int v6;
  int v7;

  v2 = (int)a2;
  v3 = a1;
  if ( Function_20d8d14(a2, "ping") )
  {
    v4 = (uchar *)Function_21fe220(v3, v2, 0);
    if ( v4 )
    {
      v6 = *v4;
      if ( v6 < 128 )
      {
        v6 *= 2;
        v7 = *(ushort *)((uchar *)Unknown_20fe864 + v6) & 8;
      }
      else
      {
        v7 = 0;
      }
      if ( v7 )
        Function_20dae0c((int)v4, v7, v6, v5);
    }
  }
  else
  {
    Function_21fe794(v3);
  }
}

//----- (021FE31C) --------------------------------------------------------
int __fastcall Function_21fe31c(int a1, int a2, int a3)
{
  int v3;
  int v4;

  v3 = a3;
  v4 = Function_21fe220(a1, a2, 0);
  if ( v4 )
    v3 = Function_20da448(v4);
  return v3;
}

//----- (021FE350) --------------------------------------------------------
int __fastcall Function_21fe350(int a1)
{
  return *(uint *)a1;
}

//----- (021FE358) --------------------------------------------------------
int __fastcall Function_21fe358(int a1)
{
  return (uchar)(*(ushort *)(a1 + 4) >> 8) | (ushort)((*(ushort *)(a1 + 4) << 8) & 0xFF00);
}

//----- (021FE37C) --------------------------------------------------------
int __fastcall Function_21fe37c(int a1)
{
  return *(ushort *)(a1 + 4);
}

//----- (021FE384) --------------------------------------------------------
BOOL __fastcall Function_21fe384(int a1)
{
  return (*(uchar *)(a1 + 21) & 2) == 2;
}

//----- (021FE39C) --------------------------------------------------------
int __fastcall Function_21fe39c(int a1)
{
  return *(uint *)(a1 + 8);
}

//----- (021FE3A4) --------------------------------------------------------
int __fastcall Function_21fe3a4(int a1)
{
  return (uchar)(*(ushort *)(a1 + 12) >> 8) | (ushort)((*(ushort *)(a1 + 12) << 8) & 0xFF00);
}

//----- (021FE3C8) --------------------------------------------------------
int __fastcall Function_21fe3c8(int result, int a2)
{
  *(uint *)(result + 32) = a2;
  return result;
}

//----- (021FE3D0) --------------------------------------------------------
int __fastcall Function_21fe3d0(int a1)
{
  return *(uint *)(a1 + 32);
}

//----- (021FE3D8) --------------------------------------------------------
int __fastcall Function_21fe3d8(int *a1)
{
  int *v1;
  uint v2;
  int v4;
  int v5;

  v1 = a1;
  v4 = 35757916;
  v5 = 35757908;
  v2 = 0;
  do
  {
    if ( !Function_20d8d14(v1, (uint *)*(&v4 + v2)) )
      return 0;
    ++v2;
  }
  while ( v2 < 2 );
  return 1;
}

//----- (021FE438) --------------------------------------------------------
int __fastcall Function_21fe438(int a1, int a2)
{
  int result;
  uchar *i;
  int v4;
  bool v5;

  if ( a1 )
    dword_221A400[1236] = a1;
  result = dword_221A400[1236];
  for ( i = (uchar *)dword_221A400[1236]; ; dword_221A400[1236] = (int)i )
  {
    v4 = (char)*i;
    v5 = v4 == 0;
    if ( *i )
      v5 = v4 == a2;
    if ( v5 )
      break;
    ++i;
  }
  if ( i == (uchar *)dword_221A400[1236] )
    result = 0;
  if ( *i )
  {
    *i = 0;
    ++dword_221A400[1236];
  }
  return result;
}

//----- (021FE49C) --------------------------------------------------------
int __fastcall Function_21fe49c(int a1, int a2)
{
  int v2;
  int result;
  int *i;
  int *v5;
  int v6;

  v2 = a1;
  result = Function_21fe438(a2 + 1, 92);
  for ( i = (int *)result; result; i = (int *)result )
  {
    v5 = (int *)Function_21fe438(0, 92);
    if ( !v5 )
      v5 = &dword_2219F9C;
    if ( Function_21fe3d8(i) )
      Function_21fe1a8(v2, (int)i, (int)v5, v6);
    result = Function_21fe438(0, 92);
  }
  return result;
}

//----- (021FE51C) --------------------------------------------------------
int __fastcall Function_21fe51c(int a1, uchar *a2, int a3)
{
  uchar *v3;
  int v4;
  int v5;
  int result;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  char *v12;
  int v13;
  char v14;
  uchar v15;
  char *v16;
  short v17;
  int v18;
  int v19;
  int v20;
  int v21;
  char *v22;
  int v23;
  int v24;
  int v25;
  int v26;
  char *v27;
  ushort v28;
  char v29;

  v3 = a2;
  v4 = a1;
  v5 = a3;
  if ( *a2 )
  {
    while ( 1 )
    {
      result = Function_21ff4ac(v3, v5);
      if ( result < 0 )
        break;
      v7 = (int)v3;
      v8 = v5 - result;
      v9 = (int)&v3[result];
      result = Function_21ff4ac(v9, v8);
      if ( result < 0 )
        break;
      v11 = v9;
      v3 = (uchar *)(v9 + result);
      v5 = v8 - result;
      Function_21fe1a8(v4, v7, v11, v10);
      if ( !*v3 )
        goto LABEL_5;
    }
  }
  else
  {
LABEL_5:
    result = 0;
    v12 = v3 + 1;
    v13 = v5 - 1;
    v26 = 0;
    while ( v13 >= 2 )
    {
      v14 = *v12;
      v15 = v12[1];
      v16 = v12 + 2;
      LOBYTE(v17) = v14;
      HIBYTE(v17) = v15;
      v27 = v16;
      v18 = v13 - 2;
      v28 = v15 | (v17 << 8) & 0xFF00;
      v19 = 0;
      if ( *v16 )
      {
        do
        {
          result = Function_21ff4ac(v16, v18);
          if ( result < 0 || result > 100 )
            return result;
          v20 = v16[result];
          v16 += result;
          ++v19;
          v18 -= result;
        }
        while ( v20 );
      }
      v12 = v16 + 1;
      v13 = v18 - 1;
      v21 = 0;
      if ( (int)v28 > 0 )
      {
        while ( 1 )
        {
          v22 = v27;
          v23 = 0;
          if ( v19 > 0 )
            break;
LABEL_15:
          if ( ++v21 >= v28 )
            goto LABEL_16;
        }
        while ( 1 )
        {
          result = Function_21ff4ac(v12, v13);
          v24 = result;
          if ( result < 0 )
            return result;
          Function_20d7510((int)&v29, "%s%d");
          Function_21fe1a8(v4, (int)&v29, (int)v12, v25);
          v12 += v24;
          v13 -= v24;
          ++v23;
          v22 += strlen(v22) + 1;
          if ( v23 >= v19 )
            goto LABEL_15;
        }
      }
LABEL_16:
      result = v26 + 1;
      v26 = result;
      if ( result >= 2 )
        return result;
    }
  }
  return result;
}

//----- (021FE6F4) --------------------------------------------------------
int __fastcall Function_21fe6f4(uchar *a1, int a2)
{
  int v2;
  int v3;
  int v4;
  int v5;

  v2 = (char)*a1;
  v3 = 0;
  if ( *a1 )
  {
    do
    {
      if ( v2 >= 0 && v2 < 128 )
        v2 = (uchar)Unknown_20fe764[v2];
      v3 = v2 - 1664117991 * v3;
      v4 = (char)(a1++)[1];
      v2 = v4;
    }
    while ( v4 );
  }
  u32_div_f(v3, a2);
  return v5;
}

//----- (021FE74C) --------------------------------------------------------
int __fastcall Function_21fe74c(uint *a1)
{
  uint *v1;

  v1 = a1;
  Function_21ff430(0, *a1);
  return Function_21ff430(0, v1[1]);
}

//----- (021FE770) --------------------------------------------------------
int __fastcall Function_21fe770(uchar **a1, int a2)
{
  return Function_21fe6f4(*a1, a2);
}

//----- (021FE780) --------------------------------------------------------
int __fastcall Function_21fe780(uchar **a1, uchar **a2)
{
  return Function_20df9b0(*a1, *a2);
}

//----- (021FE794) --------------------------------------------------------
int __fastcall Function_21fe794(int a1)
{
  return *(uint *)(a1 + 28);
}

//----- (021FE79C) --------------------------------------------------------
int __fastcall Function_21fe79c(int a1, int a2, short a3)
{
  int v3;
  short v4;
  int v5;
  int result;
  int *v7;

  v3 = a2;
  v4 = a3;
  v5 = Function_21d7880(36);
  if ( !v5 )
    return 0;
  v7 = Function_21ea224(8, 8, 4, (int)Function_21fe770, (int)Function_21fe780, (int)Function_21fe74c);
  *(uint *)(v5 + 24) = v7;
  if ( v7 )
  {
    *(uchar *)(v5 + 20) = 0;
    *(uchar *)(v5 + 21) = 0;
    *(uint *)(v5 + 32) = 0;
    *(uint *)(v5 + 28) = 0;
    *(uint *)(v5 + 16) = 0;
    *(uint *)v5 = v3;
    *(ushort *)(v5 + 4) = v4;
    *(uint *)(v5 + 8) = 0;
    result = v5;
    *(ushort *)(v5 + 12) = 0;
  }
  else
  {
    Function_21d78b0(v5);
    result = 0;
  }
  return result;
}

//----- (021FE848) --------------------------------------------------------
int __fastcall Function_21fe848(int result, char a2)
{
  *(uchar *)(result + 21) = a2;
  return result;
}

//----- (021FE850) --------------------------------------------------------
int __fastcall Function_21fe850(int result, int a2, short a3)
{
  *(uint *)(result + 8) = a2;
  *(ushort *)(result + 12) = a3;
  return result;
}

//----- (021FE85C) --------------------------------------------------------
int __fastcall Function_21fe85c(int result, int a2)
{
  *(uint *)(result + 16) = a2;
  return result;
}

//----- (021FE864) --------------------------------------------------------
int __fastcall Function_21fe864(int result, char a2)
{
  *(uchar *)(result + 20) = a2;
  return result;
}

//----- (021FE86C) --------------------------------------------------------
int __fastcall Function_21fe86c(int a1)
{
  return *(uchar *)(a1 + 20);
}

//----- (021FE874) --------------------------------------------------------
BOOL __fastcall Function_21fe874(int a1)
{
  return a1 == dword_221A400[1237];
}

//----- (021FE890) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x21FE8C8 for case 0"

//----- (021FE8AC) --------------------------------------------------------
void Function_21fe8ac()
{
  JUMPOUT(&loc_21FE8C8);
}

//----- (021FE8B0) --------------------------------------------------------
void Function_21fe8b0()
{
  JUMPOUT(&loc_21FE940);
}

//----- (021FE8B4) --------------------------------------------------------
void Function_21fe8b4()
{
  JUMPOUT(&loc_21FE974);
}

//----- (021FE8B8) --------------------------------------------------------
void Function_21fe8b8()
{
  JUMPOUT(&loc_21FE9A8);
}

//----- (021FE8BC) --------------------------------------------------------
void Function_21fe8bc()
{
  JUMPOUT(&loc_21FEA14);
}

//----- (021FE8C0) --------------------------------------------------------
void Function_21fe8c0()
{
  JUMPOUT(&loc_21FE9EC);
}

//----- (021FE8C4) --------------------------------------------------------
void Function_21fe8c4()
{
  int v0;
  int v1;
  int v2;

  Function_21fdb30(v0, *(uint *)(v0 + 1260));
  if ( !v1 )
    JUMPOUT(__CS__, v2);
  if ( *(uint *)v1 != *(uint *)(v0 + 1576) )
    JUMPOUT(__CS__, v2);
  if ( *(ushort *)(v1 + 4) == *(ushort *)(v0 + 1580) )
    *(uint *)(v0 + 1576) = 0;
  JUMPOUT(__CS__, v2);
}

//----- (021FEA48) --------------------------------------------------------
int __fastcall Function_21fea48(int a1, int a2, int a3, int a4)
{
  int v4;
  int v5;
  int v6;
  int result;
  int v8;
  int v9;

  v4 = a3;
  v5 = a4;
  if ( a2 )
  {
    if ( a2 == 1 )
    {
      v6 = *(uint *)(a4 + 1588);
      result = (*(int (__fastcall **)(int, int))(v5 + 1584))(v5, 2);
    }
    else if ( a2 == 2 )
    {
      v9 = *(uint *)(a4 + 1588);
      result = (*(int (__fastcall **)(int, int))(v5 + 1584))(v5, 4);
    }
  }
  else
  {
    v8 = *(uint *)(a4 + 1588);
    result = (*(int (__fastcall **)(int, int))(v5 + 1584))(v5, 1);
  }
  if ( v4 )
  {
    result = *(uint *)(v5 + 1576);
    if ( *(uint *)v4 == result )
    {
      result = *(ushort *)(v5 + 1580);
      if ( *(ushort *)(v4 + 4) == result )
      {
        result = 0;
        *(uint *)(v5 + 1576) = 0;
      }
    }
  }
  return result;
}

//----- (021FEAE8) --------------------------------------------------------
uint *__fastcall Function_21feae8(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9)
{
  int v9;
  int v10;
  int v11;
  int v12;
  uint *v14;

  v9 = a1;
  v10 = a2;
  v11 = a3;
  v12 = a4;
  if ( !a7 && dword_221A400[660] != 1 )
    return 0;
  v14 = (uint *)Function_21d7880(1592);
  if ( !v14 )
    return 0;
  v14[396] = a8;
  v14[397] = a9;
  v14[393] = 0;
  Function_21ff4dc(v14 + 19, v9, v10, v11, v12, a7, Function_21fe890, v14);
  Function_21fdabc(v14, a5, a6, a7, (int)Function_21fea48, (int)v14);
  return v14;
}

//----- (021FEBBC) --------------------------------------------------------
int __fastcall Function_21febbc(uint *a1)
{
  uint *v1;

  v1 = a1;
  Function_21ffe44(a1 + 19);
  Function_21fdb54(v1);
  return Function_21d78b0((int)v1);
}

//----- (021FEBE0) --------------------------------------------------------
int __fastcall Function_21febe0(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8)
{
  int v8;
  char *v9;
  int v10;
  int v11;
  int v12;
  int v13;
  int result;
  int v15;
  int v16;
  char v17[256];
  int v18;

  v18 = a4;
  v8 = a1;
  v15 = a2;
  v9 = v17;
  v10 = a4;
  v11 = 64;
  do
  {
    *v9 = 0;
    v9[1] = 0;
    v9[2] = 0;
    v9[3] = 0;
    v9 += 4;
    --v11;
  }
  while ( v11 );
  v12 = 0;
  *(uint *)(a1 + 1568) = a3;
  v13 = 0;
  *(uint *)(a1 + 64) = 0;
  while ( v13 < a5 )
  {
    if ( v12 + strlen((char *)off_2219B38[*(uchar *)(v10 + v13)]) + 1 >= 256 )
      break;
    v12 += Function_20d7510((int)&v17[v12], "\\%s");
    Function_21fe060(v8, *(uchar *)(v10 + v13++));
  }
  result = Function_21ffac8(v8 + 76, v17, a6, a7, a8, v15);
  if ( !result && !v16 )
  {
    while ( *(uint *)(v8 + 76) == 3 || *(uint *)(v8 + 16) > 0 && !result )
    {
      Function_21ea898(0xAu);
      result = Function_21fee10(v8);
    }
  }
  return result;
}

//----- (021FED10) --------------------------------------------------------
int __fastcall Function_21fed10(int a1, int a2, int a3, int a4, int a5, int a6, int a7)
{
  return Function_21febe0(a1, a2, a3, a4, a5, a6, 128, a7);
}

//----- (021FED44) --------------------------------------------------------
int __fastcall Function_21fed44(int a1, int a2, int a3, int a4, int a5)
{
  int v5;
  short v6;
  int v7;
  int v8;

  v5 = a1;
  v6 = a3;
  v7 = a4;
  v8 = Function_21eaf1c(a2, a2, a3, a4);
  return Function_22011b4(v5 + 76, v8, HIBYTE(v6) | (v6 << 8) & 0xFF00, v7, a5);
}

//----- (021FED9C) --------------------------------------------------------
int __fastcall Function_21fed9c(int a1, int a2, int a3, int a4)
{
  int v4;
  short v5;
  int v6;
  int v7;

  v4 = a1;
  v5 = a3;
  v6 = a4;
  v7 = Function_21eaf1c(a2, a2, a3, a4);
  return Function_22012dc(v4 + 76, v7, HIBYTE(v5) | (v5 << 8) & 0xFF00, v6);
}

//----- (021FEDE4) --------------------------------------------------------
int __fastcall Function_21fede4(int a1)
{
  int v1;
  int v2;
  int result;

  v1 = a1;
  v2 = Function_21ff180(a1 + 76);
  result = -1;
  if ( v2 != -1 )
    result = Function_21ff278(v1 + 76);
  return result;
}

//----- (021FEE10) --------------------------------------------------------
int __fastcall Function_21fee10(uint *a1)
{
  uint *v1;

  v1 = a1;
  Function_21fe000(a1);
  return Function_22014b8(v1 + 19);
}

//----- (021FEE28) --------------------------------------------------------
uint *__fastcall Function_21fee28(int a1)
{
  int v1;

  v1 = a1;
  Function_21ffde0(a1 + 76);
  return Function_21fdb38(v1);
}

//----- (021FEE44) --------------------------------------------------------
int __fastcall Function_21fee44(int a1)
{
  int v1;

  v1 = a1;
  Function_21fee28(a1);
  return Function_21ff340(v1 + 76);
}

//----- (021FEE5C) --------------------------------------------------------
int __fastcall Function_21fee5c(int a1)
{
  int v2;
  bool v3;

  if ( *(uint *)(a1 + 16) > 0 )
    return 2;
  v2 = *(uint *)(a1 + 76);
  v3 = v2 == 3;
  if ( v2 != 3 )
    v3 = v2 == 0;
  if ( v3 )
    return 1;
  if ( v2 == 1 )
    return 0;
  return 3;
}

//----- (021FEE90) --------------------------------------------------------
int __fastcall Function_21fee90(int a1)
{
  return Function_21ff2d4(a1 + 76);
}

//----- (021FEEA0) --------------------------------------------------------
int __fastcall Function_21feea0(int a1)
{
  return Function_21ff2c4(a1 + 76);
}

//----- (021FEEB0) --------------------------------------------------------
int __fastcall Function_21feeb0(int a1)
{
  return Function_21ff0cc(a1 + 76);
}

//----- (021FEEC0) --------------------------------------------------------
int __fastcall Function_21feec0(int a1)
{
  return *(uint *)(a1 + 1260);
}

//----- (021FEEC8) --------------------------------------------------------
int __fastcall Function_21feec8(int *a1, int *a2)
{
  int v2;
  int v3;
  int v4;
  int v5;
  int result;

  v2 = *a2;
  Function_21fe28c(*a1, *(int **)(dword_221A400[1239] + 1176));
  v4 = v3;
  Function_21fe28c(v2, *(int **)(dword_221A400[1239] + 1176));
  result = v4 - v5;
  if ( !*(uint *)(dword_221A400[1239] + 1180) )
    result = -result;
  return result;
}

//----- (021FEF24) --------------------------------------------------------
int __fastcall Function_21fef24(int *a1, int *a2)
{
  int v2;
  int v3;
  uint v4;
  uint v5;
  long long v6;
  int v7;
  long long v8;
  int v9;
  int v10;
  uchar v11;
  char v12;
  int v14;
  int v15;

  v2 = *a2;
  v3 = Function_21fe31c(*a1, *(uint *)(dword_221A400[1239] + 1176), 0);
  v5 = v4;
  LODWORD(v6) = Function_21fe31c(v2, *(uint *)(dword_221A400[1239] + 1176), 0);
  LODWORD(v8) = dsub(__PAIR__(v5, v3), v6);
  HIDWORD(v8) = v7;
  if ( !*(uint *)(dword_221A400[1239] + 1180) )
  {
    LODWORD(v8) = dsub(0LL, v8);
    HIDWORD(v8) = v9;
  }
  v10 = d2f(v8, HIDWORD(v8));
  Function_20e1108(v10, 0);
  if ( !v12 & v11 )
    return 1;
  v14 = d2f(v8, HIDWORD(v8));
  Function_20e11cc(v14, 0);
  if ( v11 )
    v15 = 0;
  else
    v15 = 1;
  return -v15;
}

//----- (021FEFFC) --------------------------------------------------------
int __fastcall Function_21feffc(int *a1, int *a2)
{
  int *v2;
  int *v3;
  uint *v4;
  int result;

  v2 = a2;
  v3 = (int *)Function_21fe220(*a1, *(uint *)(dword_221A400[1239] + 1176), (int)&dword_221A038);
  v4 = (uint *)Function_21fe220(*v2, *(uint *)(dword_221A400[1239] + 1176), (int)&dword_221A038);
  result = Function_20d8d14(v3, v4);
  if ( !*(uint *)(dword_221A400[1239] + 1180) )
    result = -result;
  return result;
}

//----- (021FF064) --------------------------------------------------------
int __fastcall Function_21ff064(int *a1, int *a2)
{
  int *v2;
  uchar *v3;
  uchar *v4;
  int result;

  v2 = a2;
  v3 = (uchar *)Function_21fe220(*a1, *(uint *)(dword_221A400[1239] + 1176), (int)&dword_221A038);
  v4 = (uchar *)Function_21fe220(*v2, *(uint *)(dword_221A400[1239] + 1176), (int)&dword_221A038);
  result = Function_20df9b0(v3, v4);
  if ( !*(uint *)(dword_221A400[1239] + 1180) )
    result = -result;
  return result;
}

//----- (021FF0CC) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x21FF0E8 for case 0"

//----- (021FF0D8) --------------------------------------------------------
void Function_21ff0d8()
{
  JUMPOUT(&loc_21FF0E8);
}

//----- (021FF0DC) --------------------------------------------------------
void Function_21ff0dc()
{
  JUMPOUT(&loc_21FF0F0);
}

//----- (021FF0E0) --------------------------------------------------------
void Function_21ff0e0()
{
  JUMPOUT(&loc_21FF0F8);
}

//----- (021FF0E4) --------------------------------------------------------
int __fastcall Function_21ff0e4(int *a1, int a2, int a3)
{
  a1[294] = a3;
  a1[295] = a2;
  dword_221A400[1239] = (int)a1;
  return Function_21e9ef8(a1[1], (int (__fastcall *)(uint, int))Function_21ff064);
}

//----- (021FF144) --------------------------------------------------------
int Function_21ff144(int a1, ...)
{
  int v1;
  int varg_r1;
  va_list varg_r1a;
  va_list varg_r2;

  va_start(varg_r2, a1);
  va_start(varg_r1a, a1);
  varg_r1 = va_arg(varg_r2, uint);
  v1 = a1;
  Function_21e9c2c(*(uint *)(a1 + 4), (int)varg_r1a);
  return (*(int (__fastcall **)(int, uint, int, uint))(v1 + 1160))(v1, 0, varg_r1, *(uint *)(v1 + 1172));
}

//----- (021FF180) --------------------------------------------------------
int __fastcall Function_21ff180(int a1, int a2)
{
  int v2;
  int v3;
  int v4;
  int v5;

  v2 = a1;
  v3 = a2;
  v4 = Function_21e9bbc(*(uint *)(a1 + 4));
  v5 = 0;
  if ( v4 <= 0 )
    return -1;
  while ( v3 != *(uint *)Function_21e9bc4(*(uint **)(v2 + 4), v5) )
  {
    if ( ++v5 >= v4 )
      return -1;
  }
  return v5;
}

//----- (021FF1D4) --------------------------------------------------------
int __fastcall Function_21ff1d4(int a1, int a2, int a3)
{
  int v3;
  int v4;
  int v5;
  int v6;
  int v7;
  int v8;

  v3 = a1;
  v4 = a2;
  v5 = a3;
  v6 = Function_21e9bbc(*(uint *)(a1 + 4));
  v7 = 0;
  if ( v6 <= 0 )
    return -1;
  while ( 1 )
  {
    v8 = *(uint *)Function_21e9bc4(*(uint **)(v3 + 4), v7);
    if ( v4 == Function_21fe350(v8) && v5 == Function_21fe37c(v8) )
      break;
    if ( ++v7 >= v6 )
      return -1;
  }
  return v7;
}

//----- (021FF244) --------------------------------------------------------
int __fastcall Function_21ff244(int a1, int a2)
{
  int v2;
  int v3;
  int v4;
  int result;

  v2 = a1;
  v3 = a2;
  v4 = *(uint *)(a1 + 1488);
  if ( v4 )
    result = Function_21fe3c8(v3, v4);
  else
    result = Function_21fe3c8(v3, 0);
  *(uint *)(v2 + 1488) = v3;
  return result;
}

//----- (021FF278) --------------------------------------------------------
int __fastcall Function_21ff278(int a1, int a2)
{
  int v2;
  int v3;
  int *v4;
  int v5;

  v2 = a1;
  v3 = a2;
  v4 = (int *)Function_21e9bc4(*(uint **)(a1 + 4), a2);
  v5 = *v4;
  (*(void (__fastcall **)(int, int, int, uint))(v2 + 1160))(v2, 2, *v4, *(uint *)(v2 + 1172));
  Function_21e9e40(*(int **)(v2 + 4), v3);
  return Function_21ff244(v2, v5);
}

//----- (021FF2C4) --------------------------------------------------------
int __fastcall Function_21ff2c4(int a1)
{
  return Function_21e9bbc(*(uint *)(a1 + 4));
}

//----- (021FF2D4) --------------------------------------------------------
int __fastcall Function_21ff2d4(int a1, int a2)
{
  return *(uint *)Function_21e9bc4(*(uint **)(a1 + 4), a2);
}

//----- (021FF2E8) --------------------------------------------------------
int __fastcall Function_21ff2e8(int result, int a2, int a3, int a4)
{
  int v4;
  int v5;
  int i;
  int v7;

  v7 = a4;
  v4 = result;
  v5 = *(uint *)(result + 1488);
  if ( v5 )
  {
    for ( i = *(uint *)(result + 1488); v5; i = v5 )
    {
      v5 = Function_21fe3d0(v5);
      Function_21fe184(&i);
    }
    result = 0;
    *(uint *)(v4 + 1488) = 0;
  }
  return result;
}

//----- (021FF340) --------------------------------------------------------
int __fastcall Function_21ff340(int a1)
{
  int v1;
  int v2;
  int i;
  int *v4;
  int v5;
  int v6;
  int v7;

  v1 = a1;
  v2 = Function_21e9bbc(*(uint *)(a1 + 4));
  for ( i = 0; i < v2; ++i )
  {
    v4 = (int *)Function_21e9bc4(*(uint **)(v1 + 4), i);
    Function_21ff244(v1, *v4);
  }
  Function_21ea114(*(uint *)(v1 + 4));
  return Function_21ff2e8(v1, v5, v6, v7);
}

//----- (021FF398) --------------------------------------------------------
int __fastcall Function_21ff398(int a1)
{
  int v1;
  int result;

  v1 = a1;
  *(uint *)(a1 + 4) = Function_21e9a8c(4, 100, 0);
  result = 0;
  *(uint *)(v1 + 1488) = 0;
  return result;
}

//----- (021FF3C0) --------------------------------------------------------
char *__fastcall Function_21ff3c0(int a1, char *a2, int a3, int a4)
{
  char *v4;
  int v5;
  char **v6;
  char *result;
  uchar *v8;
  char *v9;
  int v10;
  int v11;

  v11 = a4;
  v4 = a2;
  v9 = a2;
  v5 = Function_21fe0e0();
  v6 = (char **)Function_21ea598(v5, (int)&v9);
  if ( v6 )
  {
    ++v6[1];
    result = *v6;
  }
  else
  {
    v9 = Function_21ea8ac(v4);
    v10 = 1;
    v8 = (uchar *)Function_21fe0e0();
    Function_21ea44c(v8, (char *)&v9);
    result = v9;
  }
  return result;
}

//----- (021FF430) --------------------------------------------------------
int __fastcall Function_21ff430(int a1, int a2, int a3, int a4)
{
  int v4;
  int result;
  int v6;
  int v7;
  int v8;
  int v9;

  v9 = a4;
  v8 = a2;
  v4 = Function_21fe0e0();
  result = Function_21ea598(v4, (int)&v8);
  v6 = result;
  if ( !result )
    result = Function_20d407c((int)"val != NULL", (int)"sb_serverlist.c", (int)"SBReleaseStr");
  if ( v6 )
  {
    result = *(uint *)(v6 + 4) - 1;
    *(uint *)(v6 + 4) = result;
    if ( !result )
    {
      v7 = Function_21fe0e0();
      result = Function_21ea4f4(v7, (int)&v8);
    }
  }
  return result;
}

//----- (021FF4AC) --------------------------------------------------------
int __fastcall Function_21ff4ac(int a1, int a2)
{
  int v2;

  v2 = 0;
  if ( a2 <= 0 )
    return -1;
  while ( *(uchar *)(a1 + v2) )
  {
    if ( ++v2 >= a2 )
      return -1;
  }
  return v2 + 1;
}

//----- (021FF4DC) --------------------------------------------------------
void __fastcall Function_21ff4dc(int a1, int *a2, int *a3, int *a4, int a5, int a6, int a7, int a8)
{
  int v8;
  int *v9;
  int *v10;
  int *v11;
  int v12;

  v8 = a1;
  v9 = a2;
  v10 = a3;
  v11 = a4;
  if ( !a1 )
    Function_20d407c((int)"slist != NULL", (int)"sb_serverlist.c", (int)"SBServerListInit");
  if ( a6 || dword_221A400[660] == 1 )
  {
    *(uint *)v8 = 1;
    Function_21ff398(v8);
    Function_21fe0e0();
    Function_20d8b7c((uchar *)(v8 + 12), v9);
    Function_20d8b7c((uchar *)(v8 + 48), v10);
    Function_20d8b7c((uchar *)(v8 + 84), v11);
    *(uint *)(v8 + 1160) = a7;
    *(uint *)(v8 + 1164) = 0;
    if ( !a7 )
      Function_20d407c((int)"callback != NULL", (int)"sb_serverlist.c", (int)"SBServerListInit");
    *(uint *)(v8 + 1172) = a8;
    *(uint *)(v8 + 1176) = &dword_221A038;
    *(uint *)(v8 + 1184) = 0;
    *(uint *)(v8 + 1200) = -1;
    *(uint *)(v8 + 124) = 0;
    *(uint *)(v8 + 128) = 0;
    *(uint *)(v8 + 8) = 0;
    *(uint *)(v8 + 1156) = -1;
    *(uint *)(v8 + 1152) = 0;
    *(uint *)(v8 + 1188) = 0;
    *(uint *)(v8 + 1208) = a5;
    Function_2200534(v8);
    *(uint *)(v8 + 1484) = 0;
    Function_21ea840();
    Function_20d76d4(v12);
    Function_21ea8a4();
  }
}

//----- (021FF608) --------------------------------------------------------
int __fastcall Function_21ff608(int a1)
{
  int v1;
  uint v2;
  uchar *v3;
  int v4;

  v1 = a1;
  v2 = *(uint *)(a1 + 128);
  if ( (int)v2 > 0 && v2 > strlen("Query Error: ") )
  {
    v3 = *(uchar **)(v1 + 124);
    v4 = strlen("Query Error: ");
    if ( !Function_20d8e28(v3, "Query Error: ", v4) )
    {
      strlen("Query Error: ");
      Function_2200534(v1);
      (*(void (__fastcall **)(int, int, int, uint))(v1 + 1160))(
        v1,
        5,
        dword_221A400[1237],
        *(uint *)(v1 + 1172));
    }
  }
  (*(void (__fastcall **)(int, int, int, uint))(v1 + 1160))(v1, 4, dword_221A400[1237], *(uint *)(v1 + 1172));
  return Function_21ffde0(v1);
}

//----- (021FF6C4) --------------------------------------------------------
int __fastcall Function_21ff6c4(uchar *a1, int a2)
{
  int v2;
  int v3;
  int v4;
  int v5;

  v2 = (char)*a1;
  v3 = 0;
  if ( *a1 )
  {
    do
    {
      if ( v2 >= 0 && v2 < 128 )
        v2 = (uchar)Unknown_20fe764[v2];
      v3 = v2 - 1664117991 * v3;
      v4 = (char)(a1++)[1];
      v2 = v4;
    }
    while ( v4 );
  }
  u32_div_f(v3, a2);
  return v5;
}

//----- (021FF71C) --------------------------------------------------------
int __fastcall Function_21ff71c(int a1)
{
  int v1;
  int v2;
  int v3;
  uchar *v5;
  char v6;
  char v7;
  int v8;
  int v9;
  char v10;
  char v11;
  short v12;
  int v13;
  char v14;

  v1 = a1;
  Function_21ff6c4((uchar *)(a1 + 12), 20);
  if ( dword_221A400[1240] )
    Function_20d8b7c(&v14, (int *)dword_221A400[1240]);
  else
    Function_20d7510((int)&v14, "%s.ms%d.gs.nintendowifi.net");
  v11 = 2;
  v12 = -4496;
  v13 = Function_21eaf1c((int)&v14, 61040, 2, v2);
  if ( v13 == -1 )
  {
    v3 = Function_220854c(&v14);
    if ( !v3 )
      return 2;
    v5 = **(uchar ***)(v3 + 12);
    v6 = v5[1];
    LOBYTE(v13) = *v5;
    BYTE1(v13) = v6;
    v7 = v5[3];
    BYTE2(v13) = v5[2];
    HIBYTE(v13) = v7;
  }
  v8 = *(uint *)(v1 + 1200);
  if ( v8 == -1 )
  {
    v8 = Function_21eacdc();
    *(uint *)(v1 + 1200) = v8;
    if ( v8 == -1 )
      return 1;
  }
  if ( !Function_21ead78(v8, &v10, 8) )
    return 0;
  v9 = *(uint *)(v1 + 1200);
  Function_21eacf0();
  *(uint *)(v1 + 1200) = -1;
  return 3;
}

//----- (021FF848) --------------------------------------------------------
int __fastcall Function_21ff848(int *a1, char *a2, uint *a3)
{
  char *v3;
  int *v4;
  uint *v5;
  int v6;
  int result;

  v3 = a2;
  if ( !a2 )
    v3 = (char *)&dword_221A038;
  v4 = a1;
  v5 = a3;
  v6 = strlen(v3) + 1;
  memcpy((uchar *)*v4, v3, v6);
  *v5 += v6;
  result = *v4 + v6;
  *v4 = result;
  return result;
}

//----- (021FF898) --------------------------------------------------------
uchar **__fastcall Function_21ff898(uchar **result, char a2, uint *a3)
{
  **result = a2;
  ++*a3;
  ++*result;
  return result;
}

//----- (021FF8BC) --------------------------------------------------------
int *__fastcall Function_21ff8bc(int *result, int a2, uint *a3)
{
  int varg_r1;
  int v4;

  varg_r1 = a2;
  v4 = *result;
  *(uchar *)v4 = a2;
  *(ushort *)(v4 + 1) = *(ushort *)((char *)&varg_r1 + 1);
  *(uchar *)(v4 + 3) = HIBYTE(a2);
  *a3 += 4;
  *result += 4;
  return result;
}

//----- (021FF910) --------------------------------------------------------
int __fastcall Function_21ff910(int *a1, char *a2, int a3, uint *a4)
{
  int *v4;
  uint *v5;
  int v6;
  int result;

  v4 = a1;
  v5 = a4;
  v6 = a3;
  memcpy((uchar *)*a1, a2, a3);
  *v5 += v6;
  result = *v4 + v6;
  *v4 = result;
  return result;
}

//----- (021FF944) --------------------------------------------------------
int __fastcall Function_21ff944(int a1)
{
  int v1;
  int v2;
  int v3;
  int v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  bool v10;
  uchar v11;
  char v12;
  int v13;
  bool v14;
  uchar v15;
  int v16;
  int v17;
  int v18;
  int result;
  bool v20;

  v1 = a1;
  v2 = Function_20d76a0();
  v3 = 0;
  v5 = (ull)(93LL * (v2 / 93)) >> 32;
  v4 = 93 * (v2 / 93);
  v6 = 1;
  *(uchar *)(v1 + 116) = v2 % 93 + 33;
  do
  {
    v7 = v1 + v6;
    v8 = *(char *)(v1 + v6 + 115);
    v9 = *(char *)(v1 + 116);
    v11 = __OFSUB__(v8, v9);
    v10 = v8 - v9 < 0;
    v12 = v6 ^ v8;
    if ( v10 ^ v11 )
      v4 = 1;
    v13 = v12 & 1;
    if ( !(v10 ^ v11) )
      v4 = 0;
    v15 = __OFSUB__(v9, 79);
    v14 = v9 - 79 < 0;
    if ( v9 < 79 )
      v5 = 1;
    v16 = v9 & 1;
    v17 = v3 ^ v13;
    if ( !(v14 ^ v15) )
      v5 = 0;
    v3 = v16 ^ v17 ^ v5 ^ v4;
    v18 = Function_20d76a0();
    v5 = (ull)(93LL * (v18 / 93)) >> 32;
    v4 = 93 * (v18 / 93);
    result = v18 % 93 + 33;
    *(uchar *)(v7 + 116) = result;
    if ( v3 )
    {
      result = *(char *)(v7 + 116);
      if ( !(result & 1) )
        goto LABEL_20;
    }
    v20 = v3 == 0;
    if ( !v3 )
    {
      result = *(uchar *)(v7 + 116) & 1;
      v20 = result == 1;
    }
    if ( v20 )
    {
LABEL_20:
      result = *(char *)(v7 + 116) + 1;
      *(uchar *)(v7 + 116) = result;
    }
    ++v6;
  }
  while ( v6 < 8 );
  return result;
}

//----- (021FFA30) --------------------------------------------------------
int __fastcall Function_21ffa30(int a1)
{
  int v1;
  int v2;
  int v3;
  int v4;
  int v5;
  int result;
  int v7;

  v1 = a1;
  v2 = 1;
  do
  {
    v3 = *(uint *)(v1 + 1200);
    --v2;
    v4 = Function_21eae48();
    if ( v4 > 0 || v2 < 0 )
      break;
    Function_21ffde0(v1);
    v5 = Function_21ffac8(v1, 0, 0, 2, 0, v7);
    if ( v5 )
    {
      Function_21ff608(v1);
      return v5;
    }
  }
  while ( v2 >= 0 );
  if ( v4 > 0 )
    result = 0;
  else
    result = 3;
  return result;
}

//----- (021FFAC8) --------------------------------------------------------
int __fastcall Function_21ffac8(uint *a1, char *a2, char *a3, uint a4, int a5)
{
  int v5;
  char *v6;
  char *v7;
  uint v8;
  int result;
  int v10;
  int v11;
  char *v12;
  int v13;
  char v14;
  char v15;
  char v16;

  v5 = (int)a1;
  v6 = a2;
  v7 = a3;
  v8 = a4;
  if ( *a1 != 1 )
    Function_20d407c((int)"slist->state == sl_disconnected", (int)"sb_serverlist.c", (int)"SBServerListConnectAndQuery");
  if ( !v6 )
    v6 = (char *)&dword_221A038;
  if ( !v7 )
    v7 = (char *)&dword_221A038;
  if ( (uint)strlen(v6) > 0x100 )
    return 6;
  if ( (uint)strlen(v7) > 0x100 )
    return 6;
  result = Function_21ff71c(v5);
  if ( !result )
  {
    *(uint *)(v5 + 1476) = v8;
    Function_21ff944(v5);
    v13 = 2;
    v12 = &v16;
    Function_21ff898(&v12, 0, &v13);
    Function_21ff898(&v12, 1, &v13);
    Function_21ff898(&v12, 3, &v13);
    Function_21ff8bc((int *)&v12, *(uint *)(v5 + 1208), &v13);
    Function_21ff848((int *)&v12, (char *)(v5 + 12), &v13);
    Function_21ff848((int *)&v12, (char *)(v5 + 48), &v13);
    Function_21ff910((int *)&v12, (char *)(v5 + 116), 8, &v13);
    Function_21ff848((int *)&v12, v7, &v13);
    Function_21ff848((int *)&v12, v6, &v13);
    Function_21ff8bc(
      (int *)&v12,
      (v8 << 24) & 0xFF000000 | (v8 << 8) & 0xFF0000 | HIBYTE(v8) | (v8 >> 8) & 0xFF00,
      &v13);
    if ( *(uint *)(v5 + 1476) & 8 )
      Function_21ff8bc((int *)&v12, *(uint *)(v5 + 1188), &v13);
    if ( *(uint *)(v5 + 1476) & 0x80 )
      Function_21ff8bc((int *)&v12, a5, &v13);
    v14 = BYTE1(v13);
    v15 = (ushort)(BYTE1(v13) | ((ushort)v13 << 8) & 0xFF00) >> 8;
    v10 = *(uint *)(v5 + 1200);
    if ( Function_21eae48() <= 0 )
    {
      Function_21ffde0(v5);
      return 3;
    }
    *(uint *)v5 = 3;
    *(uint *)(v5 + 1480) = 0;
    if ( !*(uint *)(v5 + 124) )
    {
      v11 = Function_21d7880(4096);
      *(uint *)(v5 + 124) = v11;
      if ( !v11 )
        return 5;
      *(uint *)(v5 + 128) = 0;
    }
    result = 0;
  }
  return result;
}

//----- (021FFD38) --------------------------------------------------------
int __fastcall Function_21ffd38(int a1, int a2, int a3, int a4)
{
  int v4;
  int i;
  int result;

  v4 = a1;
  for ( i = 0; i < *(uint *)(v4 + 1152); ++i )
    Function_21ff430(v4, *(uint *)(v4 + 4 * i + 132), a3, a4);
  result = 0;
  *(uint *)(v4 + 1152) = 0;
  return result;
}

//----- (021FFD7C) --------------------------------------------------------
int __fastcall Function_21ffd7c(int a1)
{
  int v1;
  int result;
  int v3;
  int *v4;
  int v5;
  int v6;

  v1 = a1;
  result = *(uint *)(a1 + 8);
  if ( result )
  {
    v3 = 0;
    if ( Function_21e9bbc(result) > 0 )
    {
      do
      {
        v4 = (int *)Function_21e9bc4(*(uint **)(v1 + 8), v3);
        Function_21ff430(v1, *v4, v5, v6);
        ++v3;
      }
      while ( v3 < Function_21e9bbc(*(uint *)(v1 + 8)) );
    }
    Function_21e9b50(*(uint **)(v1 + 8));
    result = 0;
    *(uint *)(v1 + 8) = 0;
  }
  return result;
}

//----- (021FFDE0) --------------------------------------------------------
int __fastcall Function_21ffde0(uint *a1)
{
  uint *v1;
  int v2;
  int v3;
  int v4;

  v1 = a1;
  v2 = a1[31];
  if ( v2 )
    Function_21d78b0(v2);
  v1[31] = 0;
  v1[32] = 0;
  if ( v1[300] != -1 )
    Function_21eacf0();
  v1[300] = -1;
  *v1 = 1;
  Function_21ffd7c((int)v1);
  v1[289] = -1;
  return Function_21ffd38((int)v1, -1, v3, v4);
}

//----- (021FFE44) --------------------------------------------------------
int __fastcall Function_21ffe44(uint *a1)
{
  int v1;
  uint *v2;
  int result;

  v1 = (int)a1;
  Function_21ffde0(a1);
  Function_21ff340(v1);
  Function_21fe144();
  v2 = *(uint **)(v1 + 4);
  if ( v2 )
    Function_21e9b50(v2);
  result = 0;
  *(uint *)(v1 + 4) = 0;
  return result;
}

//----- (021FFE7C) --------------------------------------------------------
uchar *__fastcall Function_21ffe7c(int a1, int a2, int a3)
{
  int v3;
  int v4;
  int v5;
  int v6;
  int v7;
  uint v8;
  int v9;
  char v10;

  v3 = a1;
  v4 = a3;
  v5 = a2;
  v7 = strlen((char *)(a1 + 84));
  v8 = 0;
  if ( v4 > 0 )
  {
    do
    {
      s32_div_f(v8, v7);
      v6 = (v8 * *(char *)(v3 + 84 + v9) >> 31)
         + __ROR4__((v8 * *(char *)(v3 + 84 + v9) << 29) - (v8 * *(char *)(v3 + 84 + v9) >> 31), 29);
      v10 = *(uchar *)(v5 + v8);
      LOBYTE(v9) = *(uchar *)(v3 + (v8 >> 31) + __ROR4__((v8 << 29) - (v8 >> 31), 29) + 116);
      ++v8;
      *(uchar *)(v3 + v6 + 116) ^= (uchar)v9 ^ v10;
    }
    while ( (int)v8 < v4 );
  }
  return Function_21fd5fc((uchar *)(v3 + 1212), v3 + 116, 8u, v6);
}

//----- (021FFF1C) --------------------------------------------------------
int __fastcall Function_21fff1c(char a1)
{
  int v1;

  v1 = 5;
  if ( a1 & 2 )
    v1 = 9;
  if ( a1 & 8 )
    v1 += 4;
  if ( a1 & 0x10 )
    v1 += 2;
  if ( a1 & 0x20 )
    v1 += 2;
  return v1;
}

//----- (021FFF48) --------------------------------------------------------
BOOL __fastcall Function_21fff48(uchar *a1, int a2)
{
  uchar *v2;
  int i;
  int v4;
  BOOL result;
  int v6;
  int v7;
  int v8;

  v2 = a1;
  for ( i = a2; i > 0 && *v2; i = v6 - v8 )
  {
    v4 = Function_21ff4ac((int)v2, i);
    if ( v4 < 0 )
      return 0;
    v6 = i - v4;
    v7 = (int)&v2[v4];
    v8 = Function_21ff4ac(v7, v6);
    if ( v8 < 0 )
      return 0;
    v2 = (uchar *)(v7 + v8);
  }
  if ( i )
    result = *v2 == 0;
  else
    result = 0;
  return result;
}

//----- (021FFFCC) --------------------------------------------------------
int __fastcall Function_21fffcc(int a1, uchar *a2, int a3)
{
  int v3;
  uchar *v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;

  v3 = a1;
  v4 = a2;
  v5 = a3;
  v6 = Function_21e9bbc(*(uint *)(a1 + 8));
  v7 = 0;
  if ( v6 <= 0 )
    return 1;
  while ( 1 )
  {
    v8 = *(uint *)(Function_21e9bc4(*(uint **)(v3 + 8), v7) + 4);
    if ( v8 )
    {
      if ( v8 == 1 )
      {
        ++v4;
        --v5;
      }
      else
      {
        if ( v8 != 2 )
        {
          Function_20d407c((int)"0", (int)"sb_serverlist.c", (int)"AllKeysPresent");
          return 0;
        }
        v4 += 2;
        v5 -= 2;
      }
    }
    else
    {
      if ( v5 < 1 )
        return 0;
      v9 = *v4++;
      --v5;
      if ( v9 == 255 )
      {
        v10 = Function_21ff4ac((int)v4, v5);
        if ( v10 == -1 )
          return 0;
        v4 += v10;
        v5 -= v10;
      }
    }
    if ( v5 < 0 )
      break;
    if ( ++v7 >= v6 )
      return 1;
  }
  return 0;
}

//----- (022000C8) --------------------------------------------------------
int __fastcall Function_22000c8(int result, char *a2, int a3, uchar *a4, uchar *a5)
{
  char v5;
  char v6;
  char v7;
  short v8;

  if ( a3 >= 5 )
  {
    v5 = *a2;
    v6 = a2[2];
    *a4 = a2[1];
    a4[1] = v6;
    v7 = a2[4];
    a4[2] = a2[3];
    a4[3] = v7;
    if ( v5 & 0x10 )
    {
      result = a3 - 5;
      if ( a3 - 5 >= 2 )
      {
        result = (uchar)a2[6];
        *a5 = a2[5];
        a5[1] = result;
      }
    }
    else
    {
      v8 = *(ushort *)(result + 1192);
      result = (int)a5;
      *(ushort *)a5 = v8;
    }
  }
  return result;
}

//----- (02200138) --------------------------------------------------------
int __fastcall Function_2200138(int a1, int a2, char *a3, int a4, int a5)
{
  char *v5;
  int v6;
  int v7;
  int v8;
  int v9;
  char v10;
  char v11;
  char v12;
  char v13;
  short v14;
  int v15;
  char v16;
  char v17;
  int v18;
  int i;
  int v20;
  int v21;
  int *v22;
  int v23;
  int v24;
  char v25;
  char v26;
  int v27;
  int v28;
  int v29;
  char v30;
  int v31;
  int v32;
  char *v33;
  int v34;
  int v35;
  char v36;
  char v38;
  int v39;
  int v40;

  v5 = a3 + 5;
  v6 = a2;
  v7 = a1;
  v8 = a4;
  v38 = *a3;
  v39 = a4;
  Function_21fe848(a2, *a3);
  v9 = v8 - 5;
  if ( v38 & 0x10 )
  {
    v5 += 2;
    v9 -= 2;
  }
  if ( v38 & 2 )
  {
    v9 -= 4;
    LOWORD(v40) = *(ushort *)v5;
    v10 = v5[2];
    v11 = v5[3];
    v5 += 4;
    BYTE2(v40) = v10;
    HIBYTE(v40) = v11;
  }
  else
  {
    v40 = 0;
  }
  if ( v38 & 0x20 )
  {
    v12 = *v5;
    v13 = v5[1];
    v5 += 2;
    LOBYTE(v14) = v12;
    HIBYTE(v14) = v13;
    v9 -= 2;
    Function_21fe850(v6, v40, v14);
  }
  else
  {
    Function_21fe850(v6, v40, *(ushort *)(v7 + 1192));
  }
  if ( v38 & 8 )
  {
    LOWORD(v15) = *(ushort *)v5;
    v16 = v5[2];
    v17 = v5[3];
    v5 += 4;
    v9 -= 4;
    BYTE2(v15) = v16;
    HIBYTE(v15) = v17;
    Function_21fe85c(v6, v15);
  }
  if ( v38 & 0x40 )
  {
    v18 = Function_21e9bbc(*(uint *)(v7 + 8));
    for ( i = 0; i < v18; ++i )
    {
      v20 = Function_21e9bc4(*(uint **)(v7 + 8), i);
      v22 = (int *)v20;
      v23 = *(uint *)(v20 + 4);
      if ( v23 )
      {
        if ( v23 == 1 )
        {
          v24 = (uchar)*v5++;
          Function_21fe1e8(v6, *v22);
          --v9;
        }
        else if ( v23 == 2 )
        {
          v25 = *v5;
          v26 = v5[1];
          Function_21fe1e8(v6, *v22);
          v5 += 2;
          v9 -= 2;
        }
      }
      else
      {
        if ( a5 )
        {
          v28 = (uchar)*v5++;
          v27 = v28;
          --v9;
        }
        else
        {
          v27 = 255;
        }
        if ( v27 == 255 )
        {
          Function_21fe1a8(v6, *v22, (int)v5, v21);
          v29 = strlen(v5) + 1;
          v5 += v29;
          v9 -= v29;
        }
        else
        {
          Function_21fe1a8(v6, *v22, *(uint *)(v7 + 4 * v27 + 132), v21);
        }
      }
    }
    v30 = Function_21fe86c(v6);
    Function_21fe864(v6, v30 | 1);
  }
  if ( v38 & 0x80 )
  {
    while ( *v5 && v9 > 0 )
    {
      v31 = (int)v5;
      v32 = strlen(v5);
      v33 = &v5[v32 + 1];
      v34 = v9 - (v32 + 1);
      Function_21fe1a8(v6, v31, (int)v33, v32 + 1);
      v35 = strlen(v33) + 1;
      v5 = &v33[v35];
      v9 = v34 - v35;
    }
    --v9;
    v36 = Function_21fe86c(v6);
    Function_21fe864(v6, v36 | 2);
  }
  return v39 - v9;
}

//----- (02200404) --------------------------------------------------------
int __fastcall Function_2200404(int a1, char *a2, int a3, int a4)
{
  int v4;
  int v5;
  char *v6;
  char v8;
  int v9;
  int v10;
  int v11;
  short v12;
  int v13;
  int v14;

  v14 = a4;
  v4 = a3;
  v5 = a1;
  v6 = a2;
  if ( a3 < 1 )
    return 0;
  v8 = *a2;
  v9 = Function_21fff1c(*a2);
  if ( v4 < v9 )
    return 0;
  if ( v8 & 0x40 && !Function_21fffcc(v5, (uchar *)&v6[v9], v4 - v9) )
    return 0;
  if ( v8 & 0x80 && !Function_21fff48(&v6[v9], v4 - v9) )
    return 0;
  if ( !Function_20d5190((uchar *)v6 + 1, (uchar *)dword_221A0BC, 4) )
    return -1;
  Function_22000c8(v5, v6, v4, &v13, &v12);
  v10 = Function_21fe79c(v5, v13, v12);
  if ( Function_21fe874(v10) )
    return -2;
  v11 = Function_2200138(v5, v10, v6, v4, 1);
  Function_21ff144(v5, v10);
  return v11;
}

//----- (02200534) --------------------------------------------------------
int __fastcall Function_2200534(int result, int a2)
{
  *(uint *)(result + 1196) = a2;
  return result;
}

//----- (0220053C) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x2200574 for case 0"

//----- (02200560) --------------------------------------------------------
void Function_2200560()
{
  JUMPOUT(&loc_2200574);
}

//----- (02200564) --------------------------------------------------------
void Function_2200564()
{
  JUMPOUT(&loc_22005D4);
}

//----- (02200568) --------------------------------------------------------
void Function_2200568()
{
  JUMPOUT(&loc_22006D4);
}

//----- (0220056C) --------------------------------------------------------
void Function_220056c()
{
  JUMPOUT(&loc_22007C0);
}

//----- (02200570) --------------------------------------------------------
void __fastcall Function_2200570(int a1, int a2, int a3, int a4)
{
  char *v4;
  int v5;
  int v6;
  int v7;
  char *v8;
  int v9;

  if ( v5 >= 5 )
  {
    while ( 1 )
    {
      v7 = Function_2200404(v6, v4, v5, a4);
      if ( v7 == -2 )
        JUMPOUT(__CS__, v9);
      if ( v7 == -1 )
        break;
      v4 += v7;
      v5 -= v7;
      if ( !*(uint *)(v6 + 124) )
        v7 = 0;
      if ( !v7 )
        goto LABEL_9;
    }
    *(uint *)(v6 + 1480) = 5;
    *(uint *)v6 = 2;
    v5 -= 5;
    v4 += 5;
    (*(void (__fastcall **)(int, int, int, uint))(v6 + 1160))(
      v6,
      3,
      dword_221A400[1237],
      *(uint *)(v6 + 1172));
  }
LABEL_9:
  if ( v5 < 0 )
    Function_20d407c((int)"inlen >= 0", (int)"sb_serverlist.c", (int)"ProcessMainListData");
  v8 = *(char **)(v6 + 124);
  if ( !v8 )
    JUMPOUT(__CS__, v9);
  if ( v5 )
    Function_20d50d8(v8, v4, v5);
  *(uint *)(v6 + 128) = v5;
  JUMPOUT(__CS__, v9);
}

//----- (02200968) --------------------------------------------------------
int __fastcall Function_2200968(int a1, uchar *a2, int a3, int a4)
{
  int v4;
  int v5;
  int v6;
  char *v7;
  uint *v8;
  int v10;
  int v11;
  int v12;
  int v13;
  char *v14;
  int v15;
  int v16;

  v16 = a4;
  v4 = a1;
  v5 = a3 - 1;
  v7 = (char *)(a2 + 1);
  v6 = *a2;
  if ( *(uint *)(a1 + 8) )
    Function_21ffd7c(a1);
  v8 = Function_21e9a8c(8, v6, 0);
  *(uint *)(v4 + 8) = v8;
  if ( !v8 )
    return 5;
  v10 = 0;
  if ( v6 <= 0 )
    return 0;
  while ( 1 )
  {
    if ( v5 < 2 )
      return 4;
    v12 = Function_21ff4ac((int)(v7 + 1), v5 - 1);
    if ( v12 == -1 )
      break;
    v13 = (uchar)*v7;
    v15 = (uchar)*v7;
    v14 = Function_21ff3c0(v4, v7 + 1, v13, v11);
    Function_21e9c2c(*(uint *)(v4 + 8), (int)&v14);
    ++v10;
    v7 += v12 + 1;
    v5 -= v12 + 1;
    if ( v10 >= v6 )
      return 0;
  }
  return 4;
}

//----- (02200A44) --------------------------------------------------------
int __fastcall Function_2200a44(int a1, uchar *a2, int a3)
{
  int v3;
  int result;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;
  int v14;
  int v15;
  int v16;
  int v17;
  ushort v18;
  uint v19;
  int v20;

  v3 = a1;
  if ( a3 < 2 )
    return 4;
  v5 = a3 - 2;
  v6 = 0;
  v15 = a2[1];
  v7 = (int)(a2 + 2);
  v17 = *a2;
  if ( v15 <= 0 )
  {
LABEL_11:
    if ( v17 )
    {
      v14 = *(uint *)(v3 + 1172);
      (*(void (__fastcall **)(int))(v3 + 1168))(v3);
    }
    result = 0;
  }
  else
  {
    while ( 1 )
    {
      v16 = v7;
      v8 = Function_21ff4ac(v7, v5);
      if ( v8 == -1 )
        return 4;
      v9 = v5 - v8;
      v10 = v7 + v8;
      if ( v5 - v8 < 11 )
        return 4;
      v11 = v9 - 10;
      v12 = v10 + 10;
      v20 = *(uint *)v10;
      v18 = *(ushort *)(v10 + 4);
      v19 = (*(uint *)(v10 + 6) << 24) & 0xFF000000 | (*(uint *)(v10 + 6) << 8) & 0xFF0000 | *(uchar *)(v10 + 9) | (*(uint *)(v10 + 6) >> 8) & 0xFF00;
      v13 = Function_21ff4ac(v10 + 10, v9 - 10);
      if ( v13 == -1 )
        break;
      (*(void (__fastcall **)(int, int, int, uint, uint, int, uint))(v3 + 1168))(
        v3,
        v16,
        v20,
        v18,
        v19,
        v12,
        *(uint *)(v3 + 1172));
      ++v6;
      v7 = v12 + v13;
      v5 = v11 - v13;
      if ( v6 >= v15 )
        goto LABEL_11;
    }
    result = 4;
  }
  return result;
}

//----- (02200C00) --------------------------------------------------------
int __fastcall Function_2200c00(int a1, ushort *a2, int a3)
{
  int v3;
  int v4;
  ushort *v5;
  int v7;
  short v8;
  int v9;
  int v10;
  uint v11;
  int v12;
  int v13;
  int v14;
  int v15;
  int v16;
  bool v17;
  uchar v18;
  void (__fastcall *v19)(int, int, uint, int, uint *, uint);
  uint v20;
  uint v21[1];

  v3 = a3;
  v4 = a1;
  v5 = a2;
  if ( a3 < 11 )
    return 4;
  LOWORD(v7) = *a2;
  v8 = a2[1];
  HIWORD(v7) = a2[1];
  v9 = Function_21ff1d4(a1, v7, (ushort)a2[2]);
  if ( v9 == -1 )
    return 0;
  v10 = Function_21ff2d4(v4, v9);
  LOWORD(v11) = v5[3];
  v12 = v3 - 11;
  v13 = 0;
  HIWORD(v11) = v5[4];
  v20 = (v11 << 24) & 0xFF000000 | (v11 << 8) & 0xFF0000 | *((uchar *)v5 + 9) | (v11 >> 8) & 0xFF00;
  v14 = *((uchar *)v5 + 10);
  v15 = (int)v5 + 11;
  while ( 1 )
  {
    v18 = __OFSUB__(v13, v14);
    v17 = v13 - v14 < 0;
    if ( v13 < v14 )
    {
      v18 = __OFSUB__(v13, 16);
      v17 = v13 - 16 < 0;
    }
    if ( !(v17 ^ v18) || v12 < 1 )
      break;
    v16 = Function_21ff4ac(v15, v12);
    if ( v16 == -1 )
      return 4;
    v21[v13] = v15;
    v15 += v16;
    v12 -= v16;
    ++v13;
  }
  v19 = *(void (__fastcall **)(int, int, uint, int, uint *, uint))(v4 + 1164);
  if ( v19 )
    v19(v4, v10, v20, v13, v21, *(uint *)(v4 + 1172));
  return 0;
}

//----- (02200D84) --------------------------------------------------------
int __fastcall Function_2200d84(int a1, int a2, int a3)
{
  int v3;
  int v5;

  v3 = a1;
  if ( a3 < 6 )
    return 4;
  v5 = Function_21ff1d4(a1, *(uint *)a2, *(ushort *)(a2 + 4));
  if ( v5 != -1 )
    Function_21ff278(v3, v5);
  return 0;
}

//----- (02200E10) --------------------------------------------------------
int __fastcall Function_2200e10(int a1, char *a2, int a3, int a4)
{
  int v4;
  int v5;
  char *v6;
  int v8;
  int v9;
  ushort v10;
  int v11;
  int v12;

  v12 = a4;
  v4 = a3;
  v5 = a1;
  v6 = a2;
  if ( a3 < 5 )
    return 4;
  Function_22000c8(a1, a2, a3, &v11, &v10);
  v8 = Function_21ff1d4(v5, v11, v10);
  if ( v8 == -1 )
  {
    v9 = Function_21fe79c(v5, v11, v10);
    if ( Function_21fe874(v9) )
      return 5;
  }
  else
  {
    v9 = Function_21ff2d4(v5, v8);
  }
  if ( Function_2200138(v5, v9, v6, v4, 0) < 0 )
    return 4;
  if ( v8 == -1 )
    Function_21ff144(v5, v9);
  (*(void (__fastcall **)(int, int, int, uint))(v5 + 1160))(v5, 1, v9, *(uint *)(v5 + 1172));
  return 0;
}

//----- (02200F08) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x2201048 for case 0"

//----- (02200F9C) --------------------------------------------------------
void Function_2200f9c()
{
  JUMPOUT(&loc_2201048);
}

//----- (02200FA0) --------------------------------------------------------
void Function_2200fa0()
{
  JUMPOUT(&loc_2200FB8);
}

//----- (02200FA4) --------------------------------------------------------
void Function_2200fa4()
{
  JUMPOUT(&loc_2200FD0);
}

//----- (02200FA8) --------------------------------------------------------
void Function_2200fa8()
{
  JUMPOUT(&loc_2200FE8);
}

//----- (02200FAC) --------------------------------------------------------
void Function_2200fac()
{
  JUMPOUT(&loc_2201004);
}

//----- (02200FB0) --------------------------------------------------------
void Function_2200fb0()
{
  JUMPOUT(&loc_220101C);
}

//----- (02200FB4) --------------------------------------------------------
void __fastcall Function_2200fb4(int a1, int a2, int a3)
{
  int v3;
  int v4;
  int v5;
  int v6;
  int v7;
  char *v8;
  int v9;
  bool v10;
  ushort v11;
  int v12;

  v7 = Function_2200a44(v5, (uchar *)(a2 + 3), a3 - 3);
  v8 = (char *)(*(uint *)(v5 + 128) - v11);
  *(uint *)(v5 + 128) = v8;
  if ( (int)v8 < 0 )
    v8 = (char *)Function_20d407c(v4, v3, v6);
  v9 = *(uint *)(v5 + 128);
  v10 = v9 == 0;
  if ( v9 )
  {
    v8 = *(char **)(v5 + 124);
    v10 = v8 == 0;
  }
  if ( !v10 )
    Function_20d50d8(v8, &v8[v11], v9);
  if ( !v7 && *(uint *)(v5 + 128) >= 3 )
    JUMPOUT(&loc_2200F38);
  if ( v7 )
    Function_21ff608(v5);
  JUMPOUT(__CS__, v12);
}

//----- (022010CC) --------------------------------------------------------
int __fastcall Function_22010cc(uint *a1)
{
  uint *v1;
  int result;
  int v3;
  int v4;
  int v5;
  uint v6;
  int v7;

  v1 = a1;
  if ( !Function_21eab6c(a1[300]) )
    return 0;
  v3 = v1[32];
  v4 = v1[300];
  v5 = v1[31] + v3;
  v6 = Function_21eae04();
  if ( v6 != 0 && v6 < 0xFFFFFFFF )
  {
    v7 = 0;
    v1[32] += v6;
    if ( *v1 == 2 || v1[370] > 0 )
      Function_21fd790((int)(v1 + 303), v1[31] + v3, v1[32] - v3);
    if ( *v1 == 3 )
      v7 = Function_220053c(v1);
    if ( v7 )
    {
      result = v7;
    }
    else if ( *v1 != 2 || v1[32] <= 0 )
    {
      result = 0;
    }
    else
    {
      result = Function_2200f08(v1);
    }
  }
  else
  {
    Function_21ff608((int)v1);
    result = 3;
  }
  return result;
}

//----- (022011B4) --------------------------------------------------------
int __fastcall Function_22011b4(uint *a1)
{
  uint *v1;
  int result;
  int v3;

  v1 = a1;
  if ( *a1 == 1 )
    Function_21ffac8(a1, 0, 0, 2u, 0);
  if ( *v1 == 1 )
    return 3;
  result = Function_21ffa30((int)v1);
  if ( !result )
  {
    v3 = v1[300];
    if ( Function_21eae48() >= 0 )
      result = 0;
    else
      result = 3;
  }
  return result;
}

//----- (022012DC) --------------------------------------------------------
int __fastcall Function_22012dc(uint *a1)
{
  return Function_22011b4(a1);
}

//----- (02201394) --------------------------------------------------------
int __fastcall Function_2201394(int a1, int a2, int a3, int a4)
{
  int v4;
  int v5;
  int v7;
  int v8;
  int v9;
  char v10;
  ushort v11;
  int v12;
  char v13;
  int v14;

  v14 = a4;
  v4 = a1;
  v9 = 8;
  while ( Function_21eab6c(*(uint *)(v4 + 1200)) )
  {
    if ( Function_21eae18(*(uint *)(v4 + 1200), (int)&v13, 1499, 0, &v10, &v9) != -1
      && Function_21ff1d4(v4, v12, v11) == -1 )
    {
      v5 = Function_21fe79c(v4, v12, v11);
      if ( Function_21fe874(v5) )
        return 5;
      Function_21fe848(v5, 17);
      Function_21ff144(v4, v5);
    }
  }
  Function_21ea840();
  if ( (uint)(v7 - *(uint *)(v4 + 1204)) > 0x7D0 )
  {
    v8 = *(uint *)(v4 + 1200);
    Function_21eacf0();
    *(uint *)(v4 + 1200) = -1;
    *(uint *)v4 = 1;
    (*(void (__fastcall **)(int, int, int, uint))(v4 + 1160))(
      v4,
      3,
      dword_221A400[1237],
      *(uint *)(v4 + 1172));
  }
  return 0;
}

//----- (022014B8) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x22014F0 for case 0"

//----- (022014D4) --------------------------------------------------------
void Function_22014d4()
{
  JUMPOUT(&loc_22014F0);
}

//----- (022014D8) --------------------------------------------------------
void Function_22014d8()
{
  JUMPOUT(&loc_22014FC);
}

//----- (022014DC) --------------------------------------------------------
void Function_22014dc()
{
  JUMPOUT(&loc_22014E4);
}

//----- (022014E0) --------------------------------------------------------
void Function_22014e0()
{
  uint *v0;
  int v1;

  Function_22010cc(v0);
  JUMPOUT(__CS__, v1);
}

//----- (02201504) --------------------------------------------------------
uchar *__fastcall Function_2201504(uchar *result, ushort *a2, uint a3, short *a4)
{
  uint v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;
  int v14;
  int v15;
  int v16;

  v4 = 0;
  if ( a3 )
  {
    do
    {
      v5 = *((uchar *)a4 + 2);
      v6 = *a4;
      v7 = *((short *)dword_2215C54 + v5);
      v8 = v7 >> 3;
      if ( *result & 4 )
        v8 += v7;
      if ( *result & 2 )
        v8 += v7 >> 1;
      if ( *result & 1 )
        v8 += v7 >> 2;
      if ( *result & 8 )
      {
        v9 = v6 - v8;
        if ( v9 < -32768 )
          LOWORD(v9) = -32768;
      }
      else
      {
        v9 = v6 + v8;
        if ( v9 > 0x7FFF )
          LOWORD(v9) = 0x7FFF;
      }
      v10 = v5 + *((char *)dword_2215C44 + (*result & 0xF));
      if ( v10 >= 0 )
      {
        if ( v10 > 88 )
          LOBYTE(v10) = 88;
      }
      else
      {
        LOBYTE(v10) = 0;
      }
      *a4 = v9;
      *((uchar *)a4 + 2) = v10;
      *a2 = v9;
      v11 = *((uchar *)a4 + 2);
      v12 = *a4;
      v13 = *((short *)dword_2215C54 + v11);
      v14 = v13 >> 3;
      if ( ((int)(uchar)*result >> 4) & 4 )
        v14 += v13;
      if ( ((int)(uchar)*result >> 4) & 2 )
        v14 += v13 >> 1;
      if ( ((int)(uchar)*result >> 4) & 1 )
        v14 += v13 >> 2;
      if ( ((int)(uchar)*result >> 4) & 8 )
      {
        v15 = v12 - v14;
        if ( v15 < -32768 )
          LOWORD(v15) = -32768;
      }
      else
      {
        v15 = v12 + v14;
        if ( v15 > 0x7FFF )
          LOWORD(v15) = 0x7FFF;
      }
      v16 = v11 + *((char *)dword_2215C44 + (((int)(uchar)*result >> 4) & 0xF));
      if ( v16 >= 0 )
      {
        if ( v16 > 88 )
          LOBYTE(v16) = 88;
      }
      else
      {
        LOBYTE(v16) = 0;
      }
      *a4 = v15;
      *((uchar *)a4 + 2) = v16;
      ++v4;
      a2[1] = v15;
      a2 += 2;
      ++result;
    }
    while ( v4 < a3 );
  }
  return result;
}

//----- (02201658) --------------------------------------------------------
uchar *__fastcall Function_2201658(uchar *result, short *a2, uint a3, short *a4)
{
  uint v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;
  int v14;
  int v15;
  int v16;
  int v17;
  int v18;
  int v19;
  int v20;

  v4 = 0;
  if ( a3 >> 1 )
  {
    do
    {
      v5 = *((uchar *)a4 + 2);
      v6 = *a4;
      v7 = *((short *)dword_2215C54 + v5);
      v8 = *a2 - v6;
      if ( v8 >= 0 )
      {
        v9 = 0;
      }
      else
      {
        v9 = 8;
        v8 = v6 - *a2;
      }
      if ( v8 >= v7 )
      {
        v9 |= 4u;
        v8 -= v7;
      }
      if ( v8 >= v7 >> 1 )
      {
        v9 |= 2u;
        v8 -= v7 >> 1;
      }
      if ( v8 >= v7 >> 2 )
        v9 |= 1u;
      v10 = v7 >> 3;
      if ( v9 & 4 )
        v10 += v7;
      if ( v9 & 2 )
        v10 += v7 >> 1;
      if ( v9 & 1 )
        v10 += v7 >> 2;
      if ( v9 & 8 )
        v10 = -v10;
      v11 = v6 + v10;
      if ( v6 + v10 < -32768 )
        v11 = -32768;
      if ( v11 > 0x7FFF )
        LOWORD(v11) = 0x7FFF;
      v12 = v5 + *((char *)dword_2215C44 + v9);
      if ( v12 >= 0 )
      {
        if ( v12 > 88 )
          LOBYTE(v12) = 88;
      }
      else
      {
        LOBYTE(v12) = 0;
      }
      *a4 = v11;
      *((uchar *)a4 + 2) = v12;
      v13 = (uchar)v12;
      v14 = *a4;
      v15 = *((short *)dword_2215C54 + (uchar)v12);
      v16 = a2[1] - v14;
      if ( v16 >= 0 )
      {
        v17 = 0;
      }
      else
      {
        v17 = 8;
        v16 = v14 - a2[1];
      }
      if ( v16 >= v15 )
      {
        v17 |= 4u;
        v16 -= v15;
      }
      if ( v16 >= v15 >> 1 )
      {
        v17 |= 2u;
        v16 -= v15 >> 1;
      }
      if ( v16 >= v15 >> 2 )
        v17 |= 1u;
      v18 = v15 >> 3;
      if ( v17 & 4 )
        v18 += v15;
      if ( v17 & 2 )
        v18 += v15 >> 1;
      if ( v17 & 1 )
        v18 += v15 >> 2;
      if ( v17 & 8 )
        v18 = -v18;
      v19 = v14 + v18;
      if ( v14 + v18 < -32768 )
        v19 = -32768;
      if ( v19 > 0x7FFF )
        LOWORD(v19) = 0x7FFF;
      v20 = v13 + *((char *)dword_2215C44 + v17);
      a2 += 2;
      if ( v20 >= 0 )
      {
        if ( v20 > 88 )
          LOBYTE(v20) = 88;
      }
      else
      {
        LOBYTE(v20) = 0;
      }
      *a4 = v19;
      *((uchar *)a4 + 2) = v20;
      *result++ = v9 | 16 * v17;
      ++v4;
    }
    while ( v4 < a3 >> 1 );
  }
  return result;
}

//----- (022017E4) --------------------------------------------------------
uchar *__fastcall Function_22017e4(uchar *result, ushort *a2, uint a3, short *a4)
{
  int v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;
  int v14;
  int v15;
  int v16;
  int v17;
  int v18;
  int v19;
  int v20;
  int v21;
  int v22;
  int v23;
  int v24;
  int v25;
  int v26;
  int v27;
  int v28;
  int v29;
  int v30;
  int v31;
  int v32;
  int v33;
  int v34;
  int v35;
  int v36;
  int v37;
  int v38;
  int v39;
  int v40;
  int v41;
  int v42;
  int v43;
  int v44;
  int v45;
  int v46;
  int v47;
  int v48;
  int v49;
  int v50;
  int v51;
  int v52;
  int v53;
  int v54;
  int v55;
  int v56;
  int v57;
  int v58;
  int v59;
  uint v60;
  uint v61;

  v61 = 0;
  v60 = a3 / 3;
  if ( a3 / 3 )
  {
    do
    {
      v5 = *((uchar *)a4 + 2);
      v6 = *result;
      v7 = result[1];
      v8 = v6 >> 5;
      if ( (v6 >> 5) & 2 )
        v4 = *((short *)dword_2215C54 + v5);
      v9 = *((short *)dword_2215C54 + v5) >> 2;
      if ( (v6 >> 5) & 2 )
        v9 += v4;
      if ( v8 & 1 )
        v4 = *((short *)dword_2215C54 + v5);
      v10 = result[2];
      if ( v8 & 1 )
        v9 += v4 >> 1;
      v11 = *a4;
      if ( v8 & 4 )
      {
        v12 = v11 - v9;
        if ( v12 < -32768 )
          LOWORD(v12) = -32768;
      }
      else
      {
        v12 = v11 + v9;
        if ( v12 > 0x7FFF )
          LOWORD(v12) = 0x7FFF;
      }
      v13 = v5 + *((char *)dword_2215C3C + v8);
      if ( v13 >= 0 )
      {
        if ( v13 > 88 )
          LOBYTE(v13) = 88;
      }
      else
      {
        LOBYTE(v13) = 0;
      }
      *a4 = v12;
      *((uchar *)a4 + 2) = v13;
      *a2 = v12;
      v14 = *((uchar *)a4 + 2);
      v15 = v6 >> 2;
      v16 = *a4;
      if ( (v6 >> 2) & 2 )
        v4 = *((short *)dword_2215C54 + v14);
      v17 = *((short *)dword_2215C54 + v14) >> 2;
      if ( (v6 >> 2) & 2 )
        v17 += v4;
      if ( v15 & 1 )
        v17 += *((short *)dword_2215C54 + v14) >> 1;
      if ( v15 & 4 )
      {
        v18 = v16 - v17;
        if ( v18 < -32768 )
          LOWORD(v18) = -32768;
      }
      else
      {
        v18 = v16 + v17;
        if ( v18 > 0x7FFF )
          LOWORD(v18) = 0x7FFF;
      }
      v19 = v14 + *((char *)dword_2215C3C + ((v6 >> 2) & 7));
      if ( v19 >= 0 )
      {
        if ( v19 > 88 )
          LOBYTE(v19) = 88;
      }
      else
      {
        LOBYTE(v19) = 0;
      }
      *a4 = v18;
      *((uchar *)a4 + 2) = v19;
      a2[1] = v18;
      v20 = *((uchar *)a4 + 2);
      v21 = *((short *)dword_2215C54 + v20);
      v22 = 2 * (uchar)v6 & 7 | (v7 >> 7);
      v23 = v21 >> 2;
      if ( v22 & 2 )
        v23 += v21;
      if ( v22 & 1 )
        v23 += v21 >> 1;
      v24 = *a4;
      if ( v22 & 4 )
      {
        v25 = v24 - v23;
        if ( v25 < -32768 )
          LOWORD(v25) = -32768;
      }
      else
      {
        v25 = v24 + v23;
        if ( v25 > 0x7FFF )
          LOWORD(v25) = 0x7FFF;
      }
      v26 = v20 + *((char *)dword_2215C3C + v22);
      if ( v26 >= 0 )
      {
        if ( v26 > 88 )
          LOBYTE(v26) = 88;
      }
      else
      {
        LOBYTE(v26) = 0;
      }
      *a4 = v25;
      *((uchar *)a4 + 2) = v26;
      a2[2] = v25;
      v27 = *((uchar *)a4 + 2);
      v28 = v7 >> 4;
      v29 = *((short *)dword_2215C54 + v27);
      v30 = *a4;
      v31 = v29 >> 2;
      if ( (v7 >> 4) & 2 )
        v31 += v29;
      if ( v28 & 1 )
        v31 += v29 >> 1;
      if ( v28 & 4 )
      {
        v32 = v30 - v31;
        if ( v32 < -32768 )
          LOWORD(v32) = -32768;
      }
      else
      {
        v32 = v30 + v31;
        if ( v32 > 0x7FFF )
          LOWORD(v32) = 0x7FFF;
      }
      v33 = v27 + *((char *)dword_2215C3C + ((v7 >> 4) & 7));
      if ( v33 >= 0 )
      {
        if ( v33 > 88 )
          LOBYTE(v33) = 88;
      }
      else
      {
        LOBYTE(v33) = 0;
      }
      *a4 = v32;
      *((uchar *)a4 + 2) = v33;
      a2[3] = v32;
      v34 = *((uchar *)a4 + 2);
      v35 = v7 >> 1;
      v4 = *((short *)dword_2215C54 + v34);
      v36 = *a4;
      v37 = v4 >> 2;
      if ( (v7 >> 1) & 2 )
        v37 += v4;
      if ( v35 & 1 )
        v37 += v4 >> 1;
      if ( v35 & 4 )
      {
        v38 = v36 - v37;
        if ( v38 < -32768 )
          LOWORD(v38) = -32768;
      }
      else
      {
        v38 = v36 + v37;
        if ( v38 > 0x7FFF )
          LOWORD(v38) = 0x7FFF;
      }
      v39 = v34 + *((char *)dword_2215C3C + ((v7 >> 1) & 7));
      if ( v39 >= 0 )
      {
        if ( v39 > 88 )
          LOBYTE(v39) = 88;
      }
      else
      {
        LOBYTE(v39) = 0;
      }
      *a4 = v38;
      *((uchar *)a4 + 2) = v39;
      a2[4] = v38;
      v40 = 4 * (uchar)v7 & 7 | (v10 >> 6);
      v41 = *((uchar *)a4 + 2);
      v42 = *a4;
      v43 = *((short *)dword_2215C54 + v41);
      v44 = v43 >> 2;
      if ( v40 & 2 )
        v44 += v43;
      if ( v40 & 1 )
        v44 += v43 >> 1;
      if ( v40 & 4 )
      {
        v45 = v42 - v44;
        if ( v45 < -32768 )
          LOWORD(v45) = -32768;
      }
      else
      {
        v45 = v42 + v44;
        if ( v45 > 0x7FFF )
          LOWORD(v45) = 0x7FFF;
      }
      v46 = v41 + *((char *)dword_2215C3C + v40);
      if ( v46 >= 0 )
      {
        if ( v46 > 88 )
          LOBYTE(v46) = 88;
      }
      else
      {
        LOBYTE(v46) = 0;
      }
      *a4 = v45;
      *((uchar *)a4 + 2) = v46;
      a2[5] = v45;
      v47 = *((uchar *)a4 + 2);
      v48 = v10 >> 3;
      v49 = *((short *)dword_2215C54 + v47);
      v50 = *a4;
      v51 = v49 >> 2;
      if ( (v10 >> 3) & 2 )
        v51 += v49;
      if ( v48 & 1 )
        v51 += v49 >> 1;
      if ( v48 & 4 )
      {
        v52 = v50 - v51;
        if ( v52 < -32768 )
          LOWORD(v52) = -32768;
      }
      else
      {
        v52 = v50 + v51;
        if ( v52 > 0x7FFF )
          LOWORD(v52) = 0x7FFF;
      }
      v53 = v47 + *((char *)dword_2215C3C + ((v10 >> 3) & 7));
      if ( v53 >= 0 )
      {
        if ( v53 > 88 )
          LOBYTE(v53) = 88;
      }
      else
      {
        LOBYTE(v53) = 0;
      }
      *a4 = v52;
      *((uchar *)a4 + 2) = v53;
      a2[6] = v52;
      v54 = *((uchar *)a4 + 2);
      v55 = *a4;
      v56 = *((short *)dword_2215C54 + v54);
      v57 = v56 >> 2;
      if ( v10 & 2 )
        v57 += v56;
      if ( v10 & 1 )
        v57 += v56 >> 1;
      if ( v10 & 4 )
      {
        v58 = v55 - v57;
        if ( v58 < -32768 )
          LOWORD(v58) = -32768;
      }
      else
      {
        v58 = v55 + v57;
        if ( v58 > 0x7FFF )
          LOWORD(v58) = 0x7FFF;
      }
      v59 = v54 + *((char *)dword_2215C3C + (v10 & 7));
      if ( v59 >= 0 )
      {
        if ( v59 > 88 )
          LOBYTE(v59) = 88;
      }
      else
      {
        LOBYTE(v59) = 0;
      }
      *a4 = v58;
      *((uchar *)a4 + 2) = v59;
      a2[7] = v58;
      result += 3;
      a2 += 8;
      ++v61;
    }
    while ( v61 < v60 );
  }
  return result;
}

//----- (02201C78) --------------------------------------------------------
uchar *__fastcall Function_2201c78(uchar *result, short *a2, uint a3, short *a4)
{
  int v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  char v12;
  int v13;
  int v14;
  int v15;
  char v16;
  int v17;
  int v18;
  int v19;
  int v20;
  int v21;
  char v22;
  int v23;
  int v24;
  int v25;
  int v26;
  int v27;
  int v28;
  int v29;
  char v30;
  int v31;
  int v32;
  int v33;
  int v34;
  int v35;
  int v36;
  int v37;
  int v38;
  char v39;
  int v40;
  int v41;
  int v42;
  int v43;
  int v44;
  int v45;
  int v46;
  char v47;
  int v48;
  int v49;
  int v50;
  int v51;
  int v52;
  int v53;
  char v54;
  int v55;
  int v56;
  int v57;
  int v58;
  int v59;
  int v60;
  int v61;
  int v62;
  char v63;
  int v64;
  int v65;
  int v66;
  int v67;
  int v68;
  int v69;
  int v70;
  uint v71;
  uint v72;

  v71 = a3 >> 3;
  v72 = 0;
  if ( a3 >> 3 )
  {
    do
    {
      v5 = *a4;
      v6 = *((uchar *)a4 + 2);
      v7 = *a2 - v5;
      if ( v7 < 0 )
        v4 = 4;
      v8 = *((short *)dword_2215C54 + v6);
      if ( v7 >= 0 )
        v4 = 0;
      else
        v7 = v5 - *a2;
      if ( v7 >= v8 )
      {
        v4 |= 2u;
        v7 -= v8;
      }
      if ( v7 >= v8 >> 1 )
        v4 |= 1u;
      v9 = v8 >> 2;
      if ( v4 & 2 )
        v9 += v8;
      if ( v4 & 1 )
        v9 += v8 >> 1;
      if ( v4 & 4 )
        v9 = -v9;
      v10 = v5 + v9;
      if ( v5 + v9 < -32768 )
        v10 = -32768;
      if ( v10 > 0x7FFF )
        LOWORD(v10) = 0x7FFF;
      v11 = v6 + *((char *)dword_2215C3C + v4);
      if ( v11 >= 0 )
      {
        if ( v11 > 88 )
          LOBYTE(v11) = 88;
      }
      else
      {
        LOBYTE(v11) = 0;
      }
      *a4 = v10;
      *((uchar *)a4 + 2) = v11;
      v12 = v4;
      v13 = (uchar)v11;
      v14 = *a4;
      v15 = *((short *)dword_2215C54 + (uchar)v11);
      v16 = 32 * v12;
      v17 = a2[1] - v14;
      if ( v17 >= 0 )
      {
        v18 = 0;
      }
      else
      {
        v18 = 4;
        v17 = v14 - a2[1];
      }
      if ( v17 >= v15 )
      {
        v18 |= 2u;
        v17 -= v15;
      }
      if ( v17 >= v15 >> 1 )
        v18 |= 1u;
      v19 = v15 >> 2;
      if ( v18 & 2 )
        v19 += v15;
      if ( v18 & 1 )
        v19 += v15 >> 1;
      if ( v18 & 4 )
        v19 = -v19;
      v20 = v14 + v19;
      if ( v14 + v19 < -32768 )
        v20 = -32768;
      if ( v20 > 0x7FFF )
        LOWORD(v20) = 0x7FFF;
      v21 = v13 + *((char *)dword_2215C3C + v18);
      if ( v21 >= 0 )
      {
        if ( v21 > 88 )
          LOBYTE(v21) = 88;
      }
      else
      {
        LOBYTE(v21) = 0;
      }
      *a4 = v20;
      *((uchar *)a4 + 2) = v21;
      v22 = v16 | 4 * v18;
      v21 = (uchar)v21;
      v23 = *a4;
      v24 = *((short *)dword_2215C54 + (uchar)v21);
      v25 = a2[2] - v23;
      if ( v25 >= 0 )
      {
        v26 = 0;
      }
      else
      {
        v26 = 4;
        v25 = v23 - a2[2];
      }
      if ( v25 >= v24 )
      {
        v26 |= 2u;
        v25 -= v24;
      }
      if ( v25 >= v24 >> 1 )
        v26 |= 1u;
      v27 = v24 >> 2;
      if ( v26 & 2 )
        v27 += v24;
      if ( v26 & 1 )
        v27 += v24 >> 1;
      if ( v26 & 4 )
        v27 = -v27;
      v28 = v23 + v27;
      if ( v23 + v27 < -32768 )
        v28 = -32768;
      if ( v28 > 0x7FFF )
        LOWORD(v28) = 0x7FFF;
      v29 = v21 + *((char *)dword_2215C3C + v26);
      if ( v29 >= 0 )
      {
        if ( v29 > 88 )
          LOBYTE(v29) = 88;
      }
      else
      {
        LOBYTE(v29) = 0;
      }
      *a4 = v28;
      v30 = v26;
      *((uchar *)a4 + 2) = v29;
      *result = v22 | ((int)(uchar)v26 >> 1);
      v31 = *((uchar *)a4 + 2);
      v32 = *a4;
      v33 = *((short *)dword_2215C54 + v31);
      v34 = a2[3] - v32;
      if ( v34 >= 0 )
      {
        v35 = 0;
      }
      else
      {
        v35 = 4;
        v34 = v32 - a2[3];
      }
      if ( v34 >= v33 )
      {
        v35 |= 2u;
        v34 -= v33;
      }
      if ( v34 >= v33 >> 1 )
        v35 |= 1u;
      v36 = v33 >> 2;
      if ( v35 & 2 )
        v36 += v33;
      if ( v35 & 1 )
        v36 += v33 >> 1;
      if ( v35 & 4 )
        v36 = -v36;
      v37 = v32 + v36;
      if ( v32 + v36 < -32768 )
        v37 = -32768;
      if ( v37 > 0x7FFF )
        v37 = 0x7FFF;
      v38 = v31 + *((char *)dword_2215C3C + v35);
      if ( v38 >= 0 )
      {
        if ( v38 > 88 )
          LOBYTE(v38) = 88;
      }
      else
      {
        LOBYTE(v38) = 0;
      }
      *a4 = v37;
      *((uchar *)a4 + 2) = v38;
      v39 = 16 * v35;
      v40 = (uchar)v38;
      v41 = *a4;
      v42 = a2[4] - v41;
      if ( v42 < 0 )
        v37 = 4;
      v43 = *((short *)dword_2215C54 + (uchar)v38);
      if ( v42 >= 0 )
        v37 = 0;
      else
        v42 = v41 - a2[4];
      if ( v42 >= v43 )
      {
        v37 |= 2u;
        v42 -= v43;
      }
      if ( v42 >= v43 >> 1 )
        v37 |= 1u;
      v44 = v43 >> 2;
      if ( v37 & 2 )
        v44 += v43;
      if ( v37 & 1 )
        v44 += v43 >> 1;
      if ( v37 & 4 )
        v44 = -v44;
      v45 = v41 + v44;
      if ( v41 + v44 < -32768 )
        v45 = -32768;
      if ( v45 > 0x7FFF )
        LOWORD(v45) = 0x7FFF;
      v46 = v40 + *((char *)dword_2215C3C + v37);
      if ( v46 >= 0 )
      {
        if ( v46 > 88 )
          LOBYTE(v46) = 88;
      }
      else
      {
        LOBYTE(v46) = 0;
      }
      *a4 = v45;
      *((uchar *)a4 + 2) = v46;
      v47 = v39 | 2 * v37;
      v48 = *a4;
      v46 = (uchar)v46;
      v49 = a2[5] - v48;
      if ( v49 < 0 )
        v37 = 4;
      v50 = *((short *)dword_2215C54 + v46);
      if ( v49 >= 0 )
        v37 = 0;
      else
        v49 = v48 - a2[5];
      if ( v49 >= v50 )
      {
        v37 |= 2u;
        v49 -= v50;
      }
      if ( v49 >= v50 >> 1 )
        v37 |= 1u;
      v51 = v50 >> 2;
      if ( v37 & 2 )
        v51 += v50;
      if ( v37 & 1 )
        v51 += v50 >> 1;
      if ( v37 & 4 )
        v51 = -v51;
      v52 = v48 + v51;
      if ( v52 < -32768 )
        v52 = -32768;
      if ( v52 > 0x7FFF )
        LOWORD(v52) = 0x7FFF;
      v53 = v46 + *((char *)dword_2215C3C + v37);
      if ( v53 >= 0 )
      {
        if ( v53 > 88 )
          LOBYTE(v53) = 88;
      }
      else
      {
        LOBYTE(v53) = 0;
      }
      *a4 = v52;
      v54 = v37;
      *((uchar *)a4 + 2) = v53;
      result[1] = v47 | (v30 << 7) | ((int)(uchar)v37 >> 2);
      v55 = *((uchar *)a4 + 2);
      v56 = *a4;
      v57 = *((short *)dword_2215C54 + v55);
      v58 = a2[6] - v56;
      if ( v58 >= 0 )
      {
        v59 = 0;
      }
      else
      {
        v59 = 4;
        v58 = v56 - a2[6];
      }
      if ( v58 >= v57 )
      {
        v59 |= 2u;
        v58 -= v57;
      }
      if ( v58 >= v57 >> 1 )
        v59 |= 1u;
      v60 = v57 >> 2;
      if ( v59 & 2 )
        v60 += v57;
      if ( v59 & 1 )
        v60 += v57 >> 1;
      if ( v59 & 4 )
        v60 = -v60;
      v61 = v56 + v60;
      if ( v56 + v60 < -32768 )
        v61 = -32768;
      if ( v61 > 0x7FFF )
        LOWORD(v61) = 0x7FFF;
      v62 = v55 + *((char *)dword_2215C3C + v59);
      if ( v62 >= 0 )
      {
        if ( v62 > 88 )
          LOBYTE(v62) = 88;
      }
      else
      {
        LOBYTE(v62) = 0;
      }
      *a4 = v61;
      *((uchar *)a4 + 2) = v62;
      v63 = 8 * v59;
      v64 = (uchar)v62;
      v65 = *a4;
      v66 = *((short *)dword_2215C54 + (uchar)v62);
      v67 = a2[7] - v65;
      if ( v67 >= 0 )
      {
        v68 = 0;
      }
      else
      {
        v68 = 4;
        v67 = v65 - a2[7];
      }
      if ( v67 >= v66 )
      {
        v68 |= 2u;
        v67 -= v66;
      }
      if ( v67 >= v66 >> 1 )
        v68 |= 1u;
      v69 = v66 >> 2;
      if ( v68 & 2 )
        v69 += v66;
      if ( v68 & 1 )
        v69 += v66 >> 1;
      if ( v68 & 4 )
        v69 = -v69;
      v70 = v65 + v69;
      if ( v70 < -32768 )
        v70 = -32768;
      if ( v70 > 0x7FFF )
        LOWORD(v70) = 0x7FFF;
      a2 += 8;
      v4 = v64 + *((char *)dword_2215C3C + v68);
      if ( v4 >= 0 )
      {
        if ( v4 > 88 )
          v4 = 88;
      }
      else
      {
        v4 = 0;
      }
      *a4 = v70;
      *((uchar *)a4 + 2) = v4;
      result[2] = v63 | v68 | (v54 << 6);
      result += 3;
      ++v72;
    }
    while ( v72 < v71 );
  }
  return result;
}

//----- (02202184) --------------------------------------------------------
uchar *__fastcall Function_2202184(uchar *result, ushort *a2, uint a3, short *a4)
{
  uint v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;
  int v14;
  int v15;
  int v16;
  int v17;
  int v18;
  int v19;
  int v20;
  int v21;
  int v22;
  int v23;
  int v24;

  v4 = 0;
  if ( a3 )
  {
    do
    {
      v5 = *((uchar *)a4 + 2);
      v6 = *a4;
      v7 = *((short *)dword_2215C54 + v5);
      if ( !(*result & 1) )
        v7 = 0;
      if ( *result & 2 )
      {
        v8 = v6 - v7;
        if ( v8 < -32768 )
          LOWORD(v8) = -32768;
      }
      else
      {
        v8 = v6 + v7;
        if ( v8 > 0x7FFF )
          LOWORD(v8) = 0x7FFF;
      }
      v9 = v5 + *((char *)&dword_2215C38 + (*result & 3));
      if ( v9 >= 0 )
      {
        if ( v9 > 88 )
          LOBYTE(v9) = 88;
      }
      else
      {
        LOBYTE(v9) = 0;
      }
      *a4 = v8;
      *((uchar *)a4 + 2) = v9;
      *a2 = v8;
      v10 = *((uchar *)a4 + 2);
      v11 = *a4;
      v12 = *((short *)dword_2215C54 + v10);
      if ( !(((int)(uchar)*result >> 2) & 1) )
        v12 = 0;
      if ( ((int)(uchar)*result >> 2) & 2 )
      {
        v13 = v11 - v12;
        if ( v13 < -32768 )
          LOWORD(v13) = -32768;
      }
      else
      {
        v13 = v11 + v12;
        if ( v13 > 0x7FFF )
          LOWORD(v13) = 0x7FFF;
      }
      v14 = v10 + *((char *)&dword_2215C38 + (((int)(uchar)*result >> 2) & 3));
      if ( v14 >= 0 )
      {
        if ( v14 > 88 )
          LOBYTE(v14) = 88;
      }
      else
      {
        LOBYTE(v14) = 0;
      }
      *a4 = v13;
      *((uchar *)a4 + 2) = v14;
      a2[1] = v13;
      v15 = *((uchar *)a4 + 2);
      v16 = *a4;
      v17 = *((short *)dword_2215C54 + v15);
      if ( !(((int)(uchar)*result >> 4) & 1) )
        v17 = 0;
      if ( ((int)(uchar)*result >> 4) & 2 )
      {
        v18 = v16 - v17;
        if ( v18 < -32768 )
          LOWORD(v18) = -32768;
      }
      else
      {
        v18 = v16 + v17;
        if ( v18 > 0x7FFF )
          LOWORD(v18) = 0x7FFF;
      }
      v19 = v15 + *((char *)&dword_2215C38 + (((int)(uchar)*result >> 4) & 3));
      if ( v19 >= 0 )
      {
        if ( v19 > 88 )
          LOBYTE(v19) = 88;
      }
      else
      {
        LOBYTE(v19) = 0;
      }
      *a4 = v18;
      *((uchar *)a4 + 2) = v19;
      a2[2] = v18;
      v20 = *((uchar *)a4 + 2);
      v21 = *a4;
      v22 = *((short *)dword_2215C54 + v20);
      if ( !(((int)(uchar)*result >> 6) & 1) )
        v22 = 0;
      if ( ((int)(uchar)*result >> 6) & 2 )
      {
        v23 = v21 - v22;
        if ( v23 < -32768 )
          LOWORD(v23) = -32768;
      }
      else
      {
        v23 = v21 + v22;
        if ( v23 > 0x7FFF )
          LOWORD(v23) = 0x7FFF;
      }
      v24 = v20 + *((char *)&dword_2215C38 + (((int)(uchar)*result >> 6) & 3));
      if ( v24 >= 0 )
      {
        if ( v24 > 88 )
          LOBYTE(v24) = 88;
      }
      else
      {
        LOBYTE(v24) = 0;
      }
      *a4 = v23;
      *((uchar *)a4 + 2) = v24;
      ++v4;
      a2[3] = v23;
      a2 += 4;
      ++result;
    }
    while ( v4 < a3 );
  }
  return result;
}

//----- (0220239C) --------------------------------------------------------
uchar *__fastcall Function_220239c(uchar *result, short *a2, uint a3, short *a4)
{
  uint v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  char v12;
  int v13;
  int v14;
  int v15;
  bool v16;
  int v17;
  int v18;
  int v19;
  int v20;
  int v21;
  char v22;
  int v23;
  int v24;
  int v25;
  int v26;
  int v27;
  char v28;
  int v29;
  int v30;
  bool v31;
  int v32;
  int v33;
  int v34;
  int v35;
  uint v36;

  v4 = 0;
  v36 = a3 >> 2;
  if ( a3 >> 2 )
  {
    do
    {
      v5 = *((uchar *)a4 + 2);
      v6 = *a4;
      v7 = *((short *)dword_2215C54 + v5);
      v8 = *a2 - v6;
      if ( v8 >= 0 )
      {
        v9 = 0;
      }
      else
      {
        v9 = 2;
        v8 = v6 - *a2;
      }
      if ( v8 >= v7 )
        v9 |= 1u;
      if ( !(v9 & 1) )
        v7 = 0;
      if ( v9 & 2 )
        v7 = -v7;
      v10 = v6 + v7;
      if ( v10 < -32768 )
        v10 = -32768;
      if ( v10 > 0x7FFF )
        LOWORD(v10) = 0x7FFF;
      v11 = v5 + *((char *)&dword_2215C38 + v9);
      if ( v11 >= 0 )
      {
        if ( v11 > 88 )
          v11 = 88;
      }
      else
      {
        v11 = 0;
      }
      *a4 = v10;
      *((uchar *)a4 + 2) = v11;
      v12 = v9;
      v13 = *a4;
      v14 = a2[1];
      v15 = (uchar)v11;
      v17 = v14 - v13;
      v16 = v14 - v13 < 0;
      v18 = 2 * (uchar)v11;
      if ( v16 )
        v11 = 2;
      v19 = *(short *)((char *)dword_2215C54 + v18);
      if ( v16 )
        v17 = -v17;
      else
        v11 = 0;
      if ( v17 >= v19 )
        v11 |= 1u;
      if ( !(v11 & 1) )
        v19 = 0;
      if ( v11 & 2 )
        v19 = -v19;
      v20 = v13 + v19;
      if ( v13 + v19 < -32768 )
        v20 = -32768;
      if ( v20 > 0x7FFF )
        LOWORD(v20) = 0x7FFF;
      v21 = v15 + *((char *)&dword_2215C38 + v11);
      if ( v21 >= 0 )
      {
        if ( v21 > 88 )
          LOBYTE(v21) = 88;
      }
      else
      {
        LOBYTE(v21) = 0;
      }
      *a4 = v20;
      *((uchar *)a4 + 2) = v21;
      v22 = v12 | 4 * v11;
      v23 = *a4;
      v21 = (uchar)v21;
      v24 = a2[2] - v23;
      if ( v24 < 0 )
        v11 = 2;
      v25 = *((short *)dword_2215C54 + v21);
      if ( v24 >= 0 )
        v11 = 0;
      else
        v24 = v23 - a2[2];
      if ( v24 >= v25 )
        v11 |= 1u;
      if ( !(v11 & 1) )
        v25 = 0;
      if ( v11 & 2 )
        v25 = -v25;
      v26 = v23 + v25;
      if ( v23 + v25 < -32768 )
        v26 = -32768;
      if ( v26 > 0x7FFF )
        LOWORD(v26) = 0x7FFF;
      v27 = v21 + *((char *)&dword_2215C38 + v11);
      if ( v27 >= 0 )
      {
        if ( v27 > 88 )
          LOBYTE(v27) = 88;
      }
      else
      {
        LOBYTE(v27) = 0;
      }
      *a4 = v26;
      *((uchar *)a4 + 2) = v27;
      v28 = v22 | 16 * v11;
      v29 = a2[3];
      v30 = *a4;
      v27 = (uchar)v27;
      a2 += 4;
      v32 = v29 - v30;
      v31 = v29 - v30 < 0;
      if ( v31 )
        v11 = 2;
      v33 = *((short *)dword_2215C54 + v27);
      if ( v31 )
        v32 = -v32;
      else
        v11 = 0;
      if ( v32 >= v33 )
        v11 |= 1u;
      if ( !(v11 & 1) )
        v33 = 0;
      if ( v11 & 2 )
        v33 = -v33;
      v34 = v30 + v33;
      if ( v30 + v33 < -32768 )
        v34 = -32768;
      if ( v34 > 0x7FFF )
        LOWORD(v34) = 0x7FFF;
      v35 = v27 + *((char *)&dword_2215C38 + v11);
      if ( v35 >= 0 )
      {
        if ( v35 > 88 )
          LOBYTE(v35) = 88;
      }
      else
      {
        LOBYTE(v35) = 0;
      }
      *a4 = v34;
      *((uchar *)a4 + 2) = v35;
      *result++ = v28 | ((uchar)v11 << 6);
      ++v4;
    }
    while ( v4 < v36 );
  }
  return result;
}

//----- (022025CC) --------------------------------------------------------
uchar *__fastcall Function_22025cc(uchar *result, ushort *a2, int a3, int a4)
{
  int v4;

  v4 = a4;
  LOWORD(v4) = *(ushort *)result;
  BYTE2(v4) = result[2];
  switch ( a4 )
  {
    case 2:
      return Function_2202184(result + 4, a2, a3 - 4, (short *)&v4);
    case 3:
      return Function_22017e4(result + 4, a2, a3 - 4, (short *)&v4);
    case 4:
      result = Function_2201504(result + 4, a2, a3 - 4, (short *)&v4);
      break;
  }
  return result;
}

//----- (02202638) --------------------------------------------------------
uchar *__fastcall Function_2202638(uchar *result, short *a2, uint a3, int a4, int a5)
{
  *(ushort *)result = *(ushort *)a4;
  *((ushort *)result + 1) = *(uchar *)(a4 + 2);
  switch ( a5 )
  {
    case 2:
      return Function_220239c(result + 4, a2, a3, (short *)a4);
    case 3:
      return Function_2201c78(result + 4, a2, a3, (short *)a4);
    case 4:
      result = Function_2201658(result + 4, a2, a3, (short *)a4);
      break;
  }
  return result;
}

//----- (02202698) --------------------------------------------------------
int Function_2202698()
{
  short v0;
  int v1;
  uint i;
  int v3;

  v0 = OS_GetTickLo();
  dword_221A0E8 = 1;
  LOWORD(dword_221A400[1248]) = v0;
  dword_221A400[1256] = 0;
  dword_221A400[1249] = 0;
  if ( dword_221A400[3578] == 1 )
    dword_221A400[1255] = 0;
  else
    dword_221A400[1255] = 4;
  dword_221A400[1257] = 1088;
  dword_221A400[1251] = *((uchar *)dword_2215D08 + 2 * dword_221A400[1255] + 1)
                      + 68 * *((uchar *)dword_2215D08 + 2 * dword_221A400[1255])
                      + 12;
  dword_221A400[2208] = 0;
  dword_221A400[2209] = 0;
  dword_221A400[2211] = 0;
  dword_221A400[2210] = 0;
  dword_221A400[2212] = 0;
  dword_221A400[2213] = 0;
  v1 = Function_22054bc();
  for ( i = 0; i < 3; ++i )
  {
    dword_221A400[i + 1259] = 0;
    Function_22038f4(i);
    v1 = Function_2203bd4(&dword_221A400[37 * i + 1262], i, -1);
  }
  v3 = Function_2203504(v1);
  Function_22055d0(v3);
  return 1;
}

//----- (02202794) --------------------------------------------------------
int *Function_2202794()
{
  int *result;

  result = &dword_221A400[1248];
  dword_221A400[1256] = 0;
  return result;
}

//----- (022027A8) --------------------------------------------------------
int __fastcall Function_22027a8(int a1)
{
  int v1;
  int v3;
  bool v4;
  uint i;
  uint j;

  v1 = a1;
  if ( !a1 )
    return 0;
  if ( dword_221A400[1256] == 3 )
    return 0;
  v3 = *(uint *)(a1 + 12);
  v4 = v3 == 2;
  if ( v3 != 2 )
    v4 = v3 == 3;
  if ( !v4 )
    return 0;
  for ( i = 0; i < 3; ++i )
  {
    if ( dword_221A400[i + 1259] == v1 )
      return 1;
  }
  for ( j = 0; j < 3; ++j )
  {
    if ( !dword_221A400[j + 1259] )
    {
      dword_221A400[j + 1259] = v1;
      break;
    }
  }
  ++dword_221A400[1256];
  dword_221A400[1249] |= *(uint *)(v1 + 8);
  Function_2203bd4(&dword_221A400[37 * j + 1262], j, *(uchar *)(v1 + 5));
  Function_22038f4(j);
  if ( *(uint *)(v1 + 12) != 2 )
    return 1;
  if ( dword_221A400[1256] == 1 )
  {
    Function_2205270();
    LOWORD(dword_221A400[1248]) = OS_GetTickLo();
    LOWORD(dword_221A400[1252]) = 0;
    BYTE2(dword_221A400[1252]) = 0;
    dword_221A400[1253] = 1;
    dword_221A400[2208] = 0;
    dword_221A400[2209] = 0;
    dword_221A400[2211] = 0;
    dword_221A400[2210] = 0;
    dword_221A400[2212] = 0;
    dword_221A400[2213] = 0;
  }
  return 1;
}

//----- (022028E0) --------------------------------------------------------
int *__fastcall Function_22028e0(int a1)
{
  int v1;
  int v2;
  int *result;

  v1 = a1;
  v2 = 0;
  while ( dword_221A400[v2 + 1259] != a1 )
  {
    if ( (uint)++v2 >= 3 )
      goto LABEL_5;
  }
  dword_221A400[v2 + 1259] = 0;
  --dword_221A400[1256];
  Function_2203c60(&dword_221A400[37 * v2 + 1262]);
  Function_2203930(v2);
  Function_2203544(v2);
  dword_221A400[1249] &= ~*(uint *)(v1 + 8);
LABEL_5:
  result = &dword_221A400[1248];
  if ( !dword_221A400[1256] )
  {
    dword_221A400[1253] = 1;
    Function_2205270();
    result = &dword_221A400[1248];
    dword_221A400[1249] = 0;
  }
  return result;
}

//----- (02202994) --------------------------------------------------------
int __fastcall Function_2202994(uint *a1, uint a2)
{
  uint v2;
  int v3;
  int result;
  uint i;
  int v6;
  uint v7;
  int *v8;
  int v9;

  v2 = a2;
  v3 = 0;
  if ( a2 != dword_221A400[1257] )
    return 0;
  if ( !dword_221A400[1256] )
    return 0;
  for ( i = 0; i < 3; ++i )
  {
    v6 = dword_221A400[i + 1259];
    if ( v6 && *(uint *)(v6 + 12) == 2 )
    {
      v3 = 1;
      break;
    }
  }
  if ( !v3 )
    return 0;
  if ( dword_221A400[2209] & 1 )
    v7 = 0;
  else
    v7 = 0x118u;
  dword_221A400[v7 + 1648] = 1599488852;
  v8 = &dword_221A400[v7 + 1648];
  if ( dword_221A400[1255] < 2 )
    MIi_CpuCopyFast(a1, (uint *)v8 + 3, v2, 0x5F564354u);
  else
    MIi_CpuCopyFast(a1, (uint *)v8 + 4, v2, 0x5F564354u);
  *((uchar *)v8 + 4) = 64;
  *((ushort *)v8 + 3) = ++LOWORD(dword_221A400[1248]);
  OS_GetTick();
  ll_udiv();
  v8[2] = v9;
  result = 1;
  ++dword_221A400[2209];
  return result;
}

//----- (02202AA4) --------------------------------------------------------
int __fastcall Function_2202aa4(uint *a1, uint a2, int a3, uint *a4)
{
  int v4;
  int *v5;
  uint *v6;
  int v7;
  int v8;
  int v9;
  ull v10;
  int v11;
  int v12;
  uint v13;
  uint v14;
  uint v15;
  bool v16;
  bool v17;
  int result;
  uint v19;
  uint v20;
  bool v21;
  bool v22;
  int v23;
  uint v24;
  int v25;
  int v26;
  uint *v27;
  uint v28;

  v4 = a3;
  v5 = &dword_221A400[37 * a3 + 1262];
  v27 = a1;
  v28 = a2;
  v6 = a4;
  v7 = 1;
  v8 = Function_2203bc4(a3);
  if ( v8 )
  {
    while ( 1 )
    {
      LODWORD(v10) = OS_GetTick();
      HIDWORD(v10) = v9;
      v11 = Function_2203b20(v4);
      v12 = v11;
      if ( !v11 )
      {
        v5[2] = v8;
        return 0;
      }
      v13 = *(uint *)(v11 + 1132);
      v14 = *(uint *)(v11 + 1136);
      v15 = v10 + 52;
      v16 = v14 >= (v10 + 52) >> 32;
      v17 = v14 == (v10 + 52) >> 32;
      if ( v14 == (v10 + 52) >> 32 )
      {
        v16 = v13 >= v15;
        v17 = v13 == v15;
      }
      if ( !v17 && v16 )
        break;
      if ( v10 <= __PAIR__(v14, v13) + 35660 )
      {
        v19 = v5[22];
        v20 = *(uint *)(v12 + 24);
        v21 = v19 + 1 == v20;
        if ( v19 + 1 != v20 )
          v21 = v19 == 0;
        if ( !v21 && v19 <= v20 && !*(uint *)(v12 + 1116) )
          ++v5[5];
        v22 = v7 == 0;
        v5[22] = *(uint *)(v12 + 24);
        if ( v7 )
          v22 = v5[28] == 0;
        if ( v22 )
        {
          v23 = v10 - *(uint *)(v12 + 1124);
          v24 = -v5[10];
          v5[10] = v23;
          v25 = v23 + (v24 >> 4);
          v5[11] = v25;
          *v5 = v25;
          MIi_CpuCopyFast(*(uint **)(v12 + 1140), v27, v28, v15);
          Function_2203c8c(&dword_221A400[37 * v4 + 1262], v12);
          if ( v6 )
            *v6 |= 1 << *(uchar *)(v12 + 16);
          return 1;
        }
        v8 = Function_2203c8c(&dword_221A400[37 * v4 + 1262], v12);
        Function_2203b20(v4);
        --v5[28];
      }
      else
      {
        v5[22] = *(uint *)(v12 + 24);
        v8 = Function_2203c8c(&dword_221A400[37 * v4 + 1262], v12);
        Function_2203b20(v4);
        v7 = 0;
      }
      if ( !v8 )
        goto LABEL_30;
    }
    if ( *(uint *)(v12 + 1116) || !v5[15] )
    {
      result = 0;
    }
    else
    {
      ++v5[8];
      MIi_CpuCopyFast(*(uint **)(v5[15] + 1140), v27, v28, v15);
      Function_220523c(v5[15]);
      v5[15] = 0;
      if ( v6 )
        *v6 |= 1 << *(uchar *)(v12 + 16);
      result = 1;
    }
  }
  else
  {
LABEL_30:
    v26 = v5[15];
    if ( v26 )
    {
      Function_220523c(v26);
      v5[15] = 0;
    }
    result = 0;
  }
  return result;
}

//----- (02202CF0) --------------------------------------------------------
int __fastcall Function_2202cf0(uint *a1, uint a2, uint *a3)
{
  uint *v3;
  uint *v4;
  uint v5;
  int v6;
  int v7;
  uint v8;

  v3 = a3;
  v4 = a1;
  if ( a3 )
    *a3 = 0;
  v5 = a2;
  v6 = 0;
  if ( a2 == dword_221A400[1257] && dword_221A400[1256] )
  {
    v7 = 0;
    while ( Function_2202aa4(v4, v5, v7, v3) != 1 )
    {
      if ( (uint)++v7 >= 3 )
        goto LABEL_9;
    }
    v6 = 1;
LABEL_9:
    if ( v6 )
    {
      v8 = v7 + 1;
      if ( v7 == 2 )
      {
        v6 = 1;
      }
      else if ( (uint)(v7 + 1) < 3 )
      {
        do
        {
          if ( Function_2202aa4((uint *)&dword_221A400[1373], v5, v8, v3) == 1 )
            Function_22058a0(v4, &dword_221A400[1373], v4, v5);
          ++v8;
        }
        while ( v8 < 3 );
      }
    }
    else
    {
      MIi_CpuClearFast(0, v4, v5);
    }
  }
  else
  {
    MIi_CpuClearFast(0, a1, a2);
    v6 = 0;
  }
  if ( dword_221A400[1254] )
    Function_220564c(v4, v5);
  return v6;
}

//----- (02202E0C) --------------------------------------------------------
int __fastcall Function_2202e0c(int a1)
{
  if ( a1 >= 5 )
    return 0;
  if ( dword_221A400[3578] != 1 && (uint)a1 <= 1 )
    return 0;
  dword_221A400[1251] = *((uchar *)dword_2215D08 + 2 * a1 + 1)
                      + 68 * *((uchar *)dword_2215D08 + 2 * a1)
                      + 12;
  dword_221A400[1255] = a1;
  LOWORD(dword_221A400[1252]) = 0;
  BYTE2(dword_221A400[1252]) = 0;
  return 1;
}

//----- (02202E80) --------------------------------------------------------
int *__fastcall Function_2202e80(int a1)
{
  int v1;
  int *result;

  v1 = a1;
  dword_221A0E8 = a1;
  result = (int *)Function_2205270();
  if ( !v1 )
  {
    result = &dword_221A400[1248];
    dword_221A400[1250] = 1;
  }
  return result;
}

//----- (02202EB0) --------------------------------------------------------
int __fastcall Function_2202eb0(int result)
{
  dword_221A400[1254] = result;
  return result;
}

//----- (02202EC0) --------------------------------------------------------
int *Function_2202ec0()
{
  int v0;
  int *result;
  int v2;
  int *v3;
  short *v4;
  int v5;
  int v6;
  int v7;
  char v8;

  v0 = dword_221A400[2209] - dword_221A400[2208];
  if ( (uint)(dword_221A400[2209] - dword_221A400[2208]) > 1 )
  {
    dword_221A400[2208] = dword_221A400[2209] - 1;
    v0 = 1;
  }
  if ( !v0 )
    return 0;
  if ( dword_221A400[2208] & 1 )
    v2 = 0;
  else
    v2 = 280;
  v3 = &dword_221A400[v2 + 1648];
  v4 = (short *)&dword_221A400[v2 + 1651];
  if ( dword_221A400[1255] >= 2 )
    v4 = (short *)(v3 + 4);
  v5 = Function_22054e4(v4, dword_221A400[1257]);
  REG_SQRTCNT = 0;
  REG_SQRT_PARAM_L = v5;
  while ( REG_SQRTCNT & 0x8000 )
    ;
  v6 = REG_SQRT_RESULT;
  if ( dword_221A400[1254] )
    Function_2205880(v4, dword_221A400[1257], REG_SQRT_RESULT);
  *((uchar *)v3 + 5) = dword_221A400[1255];
  v7 = Function_22052dc(v5, v6, 0);
  dword_221A400[1258] = v7;
  if ( v7 )
  {
    if ( v7 == 1 )
    {
      *((uchar *)v3 + 5) |= 0x80u;
    }
    else if ( v7 == 3 )
    {
      *((uchar *)v3 + 4) = 65;
    }
    if ( dword_221A400[1253] )
    {
      v8 = *((uchar *)v3 + 5);
      dword_221A400[1253] = 0;
      *((uchar *)v3 + 5) = v8 | 0x80;
    }
    if ( dword_221A400[1255] < 2 )
    {
      if ( dword_221A400[1255] == 1 )
      {
        Function_2203798(v4, v4, (uint)dword_221A400[1257] >> 1);
      }
      else if ( !dword_221A400[1255] )
      {
        Function_2203898(v4, v4, (uint)dword_221A400[1257] >> 1);
      }
    }
    else
    {
      if ( *((uchar *)v3 + 5) & 0x80 )
      {
        LOWORD(dword_221A400[1252]) = 0;
        BYTE2(dword_221A400[1252]) = 0;
      }
      Function_2202638(
        (uchar *)v4 - 4,
        v4,
        (uint)dword_221A400[1257] >> 1,
        (int)&dword_221A400[1252],
        dword_221A400[1255]);
    }
    dword_221A400[2211] = dword_221A400[1249] & ~(1 << SLOBYTE(dword_221A400[3574]));
    dword_221A400[2213] = Function_20d2fe4(dword_221A400[1249] & ~(1 << SLOBYTE(dword_221A400[3574]))) - 1;
    if ( dword_221A400[2213] <= 7 )
    {
      result = v3;
      dword_221A400[2212] = 0;
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    ++dword_221A400[2208];
    result = 0;
  }
  return result;
}

//----- (0220313C) --------------------------------------------------------
int __fastcall Function_220313c(int a1, int a2, int a3, int a4, int a5)
{
  int v5;
  int v6;
  int v7;
  int v8;
  int *v9;
  int result;
  int *v11;
  uint v12;
  int v13;
  int v14;
  int v15;
  uint v16;
  int v17;
  int v18;
  int v19;
  int v20;

  v5 = a1;
  v6 = a2;
  v7 = a3;
  v8 = a4;
  v9 = 0;
  if ( !dword_221A400[1256] )
    return 0;
  v11 = &dword_221A400[1262];
  v12 = 0;
  while ( a1 != v11[14] )
  {
    ++v12;
    v11 += 37;
    if ( v12 >= 3 )
      goto LABEL_7;
  }
  v9 = &dword_221A400[37 * v12 + 1262];
LABEL_7:
  if ( !v9 )
    return 0;
  v13 = *(uchar *)(v6 + 4);
  if ( v13 == 65 )
  {
    result = 0;
    v9[12] = *(ushort *)(v6 + 6);
    v9[19] = 0;
    v9[27] = 1;
  }
  else if ( v13 == 64 )
  {
    v14 = *(uchar *)(v6 + 5) & 0x7F;
    v9[9] = v14;
    if ( v14 < 5 )
    {
      v15 = *((uchar *)dword_2215D08 + 2 * v14);
      if ( v7 == *((uchar *)dword_2215D08 + 2 * v14 + 1) + 68 * v15 + 12 )
      {
        if ( v5 )
          v15 = 1 << v5;
        if ( !v5 )
          v15 = 1;
        if ( dword_221A400[1249] & v15 )
        {
          v17 = Function_2205208(dword_221A400[1249]);
          if ( v17 )
            goto LABEL_34;
          Function_2203930(v9[13]);
          v18 = Function_2203544(v9[13]);
          v17 = Function_2205208(v18);
          if ( !v17 )
          {
            v19 = Function_22039a0();
            v20 = Function_22035a0(v19);
            v17 = Function_2205208(v20);
          }
          if ( v17 )
          {
LABEL_34:
            MI_CpuCopy8(v6 + 12, v17 + 1116 - (v7 - 12), v7 - 12, v16);
            *(uchar *)(v17 + 17) = v9[13];
            *(uint *)(v17 + 12) = v14;
            *(uint *)(v17 + 1140) = v17 + 1116 - (v7 - 12);
            *(uint *)(v17 + 20) = v7 - 12;
            *(uint *)(v17 + 1124) = v8;
            *(uint *)(v17 + 1128) = a5;
            *(uchar *)(v17 + 16) = v5;
            *(uint *)(v17 + 1116) = *(uchar *)(v6 + 5) & 0x80;
            *(uint *)(v17 + 1120) = *(uint *)(v6 + 8);
            *(uint *)(v17 + 24) = *(ushort *)(v6 + 6);
            if ( Function_2203db0(v9, v17) )
            {
              Function_220360c(v17);
              result = 1;
            }
            else
            {
              Function_220523c(v17);
              result = 0;
            }
          }
          else
          {
            result = 0;
          }
        }
        else
        {
          result = 0;
        }
      }
      else
      {
        result = 0;
      }
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (02203328) --------------------------------------------------------
int Function_2203328()
{
  int v0;
  uint v2;
  int v3;
  int v4;
  int v5;
  int i;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;

  v0 = Function_2203694();
  if ( !v0 )
    return 0;
  v2 = OS_DisableInterrupts();
  v3 = *(uchar *)(v0 + 17);
  v4 = v2;
  v5 = Function_22036a4(v3);
  for ( i = 0; i < v5; ++i )
  {
    v7 = Function_22036b4(v3);
    v8 = v7;
    v9 = *(uint *)(v7 + 12);
    if ( v9 < 2 )
    {
      v10 = *(uint *)(v7 + 1140);
      v11 = *(uint *)(v8 + 20);
      if ( v9 == 1 )
        Function_2203844(v10, v8 + 28, v11);
      else
        Function_22038c4(v10, v8 + 28, v11);
    }
    else
    {
      Function_22025cc(*(uchar **)(v7 + 1140), (ushort *)(v7 + 28), *(uint *)(v7 + 20), v9);
    }
    *(uint *)(v8 + 1140) = v8 + 28;
    Function_2203704(v8);
    if ( Function_2203a20(v8, *(uchar *)(v8 + 17)) < 0 )
      Function_220523c(v8);
  }
  OS_RestoreInterrupts(v4);
  return v5;
}

//----- (022033F8) --------------------------------------------------------
int Function_22033f8()
{
  int result;
  int *v1;
  bool v2;
  int v3;
  int i;
  uint v5;

  if ( !dword_221A400[1256] )
    return 1;
  if ( dword_221A400[2210] )
  {
    v3 = 1;
    if ( dword_221A400[3578] == 2 )
      v3 = *(uchar *)(++dword_221A400[2212] + 3 * dword_221A400[2213] + 35740946);
    for ( i = 0; i < v3; ++i )
    {
      v5 = __clz(dword_221A400[2211]);
      if ( v5 == 32 )
        break;
      dword_221A400[2211] &= ~(0x80000000 >> v5);
      Function_21e4c98((uchar)(31 - v5), dword_221A400[2210], dword_221A400[1251]);
      if ( !dword_221A400[2211] )
      {
        ++dword_221A400[2208];
        dword_221A400[2210] = 0;
        dword_221A400[2211] = 0;
        break;
      }
    }
    result = 1;
  }
  else
  {
    v1 = Function_2202ec0();
    v2 = v1 == 0;
    dword_221A400[2210] = (int)v1;
    if ( v1 )
      v2 = dword_221A400[1254] == 0;
    result = v2 != 0;
  }
  return result;
}

//----- (02203504) --------------------------------------------------------
uint Function_2203504()
{
  int v0;
  int v1;

  v0 = OS_DisableInterrupts();
  v1 = 0;
  dword_221A400[2215] = 0;
  dword_221A400[2214] = 0;
  do
    dword_221A400[v1++ + 2216] = 0;
  while ( v1 < 3 );
  return OS_RestoreInterrupts(v0);
}

//----- (02203544) --------------------------------------------------------
uint __fastcall Function_2203544(int a1)
{
  int v1;
  int v2;
  int i;

  v1 = a1;
  v2 = OS_DisableInterrupts();
  for ( i = Function_22036b4(v1); i; i = Function_22036b4(v1) )
  {
    Function_2203704(i);
    Function_220523c(i);
  }
  dword_221A400[v1 + 2216] = 0;
  return OS_RestoreInterrupts(v2);
}

//----- (022035A0) --------------------------------------------------------
uint Function_22035a0()
{
  int v0;
  int v1;
  int v2;
  int v3;

  v0 = OS_DisableInterrupts();
  v1 = dword_221A400[2214];
  while ( v1 )
  {
    v2 = v1;
    v1 = *(uint *)(v1 + 8);
    Function_220523c(v2);
  }
  v3 = 0;
  dword_221A400[2214] = 0;
  dword_221A400[2215] = 0;
  do
    dword_221A400[v3++ + 2216] = 0;
  while ( v3 < 3 );
  return OS_RestoreInterrupts(v0);
}

//----- (0220360C) --------------------------------------------------------
int __fastcall Function_220360c(int a1)
{
  int v1;
  int v2;

  v1 = a1;
  v2 = OS_DisableInterrupts();
  if ( dword_221A400[2214] )
  {
    *(uint *)(v1 + 4) = dword_221A400[2215];
    *(uint *)(v1 + 8) = 0;
    *(uint *)(dword_221A400[2215] + 8) = v1;
    dword_221A400[2215] = v1;
  }
  else
  {
    dword_221A400[2214] = v1;
    *(uint *)(v1 + 4) = 0;
    *(uint *)(dword_221A400[2214] + 8) = 0;
    dword_221A400[2215] = dword_221A400[2214];
  }
  ++dword_221A400[*(uchar *)(v1 + 17) + 2216];
  OS_RestoreInterrupts(v2);
  return dword_221A400[*(uchar *)(v1 + 17) + 2216];
}

//----- (02203694) --------------------------------------------------------
int Function_2203694()
{
  return dword_221A400[2214];
}

//----- (022036A4) --------------------------------------------------------
int __fastcall Function_22036a4(int a1)
{
  return dword_221A400[a1 + 2216];
}

//----- (022036B4) --------------------------------------------------------
int __fastcall Function_22036b4(int a1)
{
  int v1;
  int v2;
  int v3;
  int result;

  v1 = a1;
  v2 = dword_221A400[2214];
  v3 = OS_DisableInterrupts();
  if ( dword_221A400[2214] )
  {
    while ( *(uchar *)(v2 + 17) != v1 )
    {
      v2 = *(uint *)(v2 + 8);
      if ( !v2 )
        goto LABEL_5;
    }
    OS_RestoreInterrupts(v3);
    result = v2;
  }
  else
  {
LABEL_5:
    OS_RestoreInterrupts(v3);
    result = 0;
  }
  return result;
}

//----- (02203704) --------------------------------------------------------
int __fastcall Function_2203704(int a1)
{
  int v1;
  int v2;
  int v3;
  int v4;

  v1 = a1;
  v2 = OS_DisableInterrupts();
  v3 = *(uint *)(v1 + 4);
  if ( v3 )
  {
    *(uint *)(v3 + 8) = *(uint *)(v1 + 8);
  }
  else
  {
    dword_221A400[2214] = *(uint *)(v1 + 8);
    if ( dword_221A400[2214] )
      *(uint *)(dword_221A400[2214] + 4) = 0;
  }
  v4 = *(uint *)(v1 + 8);
  if ( v4 )
  {
    *(uint *)(v4 + 4) = *(uint *)(v1 + 4);
  }
  else
  {
    dword_221A400[2215] = *(uint *)(v1 + 4);
    if ( dword_221A400[2215] )
      *(uint *)(dword_221A400[2215] + 8) = 0;
  }
  --dword_221A400[*(uchar *)(v1 + 17) + 2216];
  OS_RestoreInterrupts(v2);
  return dword_221A400[*(uchar *)(v1 + 17) + 2216];
}

//----- (02203798) --------------------------------------------------------
int __fastcall Function_2203798(int result, int a2, uint a3)
{
  int v3;
  uint v4;
  int *v5;
  int v6;
  int v7;
  int v8;
  int v9;

  v4 = 0;
  if ( a3 )
  {
    do
    {
      v5 = &dword_221A0EC;
      v6 = *(short *)(a2 + 2 * v4) >> 2;
      if ( v6 < 0 )
        v3 = 127;
      if ( v6 >= 0 )
        v3 = 255;
      else
        v6 = -v6;
      if ( v6 > 8159 )
        v6 = 8159;
      v7 = 0;
      while ( 1 )
      {
        v8 = *v5;
        ++v5;
        if ( v6 + 33 <= v8 )
          break;
        if ( ++v7 >= 8 )
        {
          v7 = 8;
          break;
        }
      }
      if ( v7 < 8 )
        v9 = (((v6 + 33) >> (v7 + 1)) & 0xF | 16 * v7) ^ v3;
      else
        LOBYTE(v9) = v3 ^ 0x7F;
      *(uchar *)(result + v4++) = v9;
    }
    while ( v4 < a3 );
  }
  return result;
}

//----- (02203844) --------------------------------------------------------
int __fastcall Function_2203844(int result, int a2, uint a3)
{
  uint v3;
  int v4;
  int v5;
  short v6;
  int v7;

  v3 = 0;
  if ( a3 )
  {
    do
    {
      v4 = ~*(uchar *)(result + v3);
      v5 = ((8 * v4 & 0x7F) + 132) << ((v4 & 0x70) >> 4);
      if ( v4 & 0x80 )
        v6 = 132 - v5;
      else
        v6 = v5 - 132;
      v7 = 2 * v3++;
      *(ushort *)(a2 + v7) = v6;
    }
    while ( v3 < a3 );
  }
  return result;
}

//----- (02203898) --------------------------------------------------------
int __fastcall Function_2203898(int result, int a2, uint a3)
{
  uint v3;

  v3 = 0;
  if ( a3 )
  {
    do
    {
      *(uchar *)(result + v3) = *(ushort *)(a2 + 2 * v3) >> 8;
      ++v3;
    }
    while ( v3 < a3 );
  }
  return result;
}

//----- (022038C4) --------------------------------------------------------
int __fastcall Function_22038c4(int result, int a2, uint a3)
{
  uint v3;
  short v4;
  int v5;

  v3 = 0;
  if ( a3 )
  {
    do
    {
      v4 = *(char *)(result + v3);
      v5 = 2 * v3++;
      *(ushort *)(a2 + v5) = v4 << 8;
    }
    while ( v3 < a3 );
  }
  return result;
}

//----- (022038F4) --------------------------------------------------------
uint __fastcall Function_22038f4(int a1)
{
  int v1;
  int v2;

  v1 = a1;
  v2 = OS_DisableInterrupts();
  dword_221A400[v1 + 2225] = 0;
  dword_221A400[v1 + 2219] = 0;
  dword_221A400[v1 + 2222] = 0;
  return OS_RestoreInterrupts(v2);
}

//----- (02203930) --------------------------------------------------------
uint __fastcall Function_2203930(int a1)
{
  int v1;
  int v2;
  int i;
  int v4;

  v1 = a1;
  v2 = OS_DisableInterrupts();
  for ( i = dword_221A400[v1 + 2219]; i; i = dword_221A400[v1 + 2219] )
  {
    v4 = *(uint *)(i + 8);
    dword_221A400[v1 + 2219] = v4;
    if ( v4 )
      *(uint *)(v4 + 4) = 0;
    Function_220523c(i);
  }
  dword_221A400[v1 + 2225] = 0;
  dword_221A400[v1 + 2222] = 0;
  return OS_RestoreInterrupts(v2);
}

//----- (022039A0) --------------------------------------------------------
uint Function_22039a0()
{
  int v0;
  int v1;
  int i;
  int v3;

  v0 = 0;
  v1 = OS_DisableInterrupts();
  while ( v0 < 3 )
  {
    for ( i = dword_221A400[v0 + 2219]; i; i = dword_221A400[v0 + 2219] )
    {
      v3 = *(uint *)(i + 8);
      dword_221A400[v0 + 2219] = v3;
      if ( v3 )
        *(uint *)(v3 + 4) = 0;
      Function_220523c(i);
    }
    dword_221A400[v0 + 2225] = 0;
    dword_221A400[v0++ + 2222] = 0;
  }
  return OS_RestoreInterrupts(v1);
}

//----- (02203A20) --------------------------------------------------------
int __fastcall Function_2203a20(uint *a1, uint a2)
{
  uint *v2;
  uint v3;
  int v5;
  uint *v6;
  int v7;

  v2 = a1;
  v3 = a2;
  if ( !a1 )
    return -1;
  if ( a2 >= 3 )
    return -1;
  v5 = OS_DisableInterrupts();
  if ( dword_221A400[v3 + 2219] )
  {
    v6 = (uint *)dword_221A400[v3 + 2225];
    if ( v6 )
    {
      while ( v6[6] >= v2[6] )
      {
        v6 = (uint *)v6[1];
        if ( !v6 )
          goto LABEL_15;
      }
      v2[1] = v6;
      v2[2] = v6[2];
      v6[2] = v2;
      v7 = v2[2];
      if ( v7 )
        *(uint *)(v7 + 4) = v2;
      if ( v6 == (uint *)dword_221A400[v3 + 2225] )
        dword_221A400[v3 + 2225] = (int)v2;
    }
    else
    {
LABEL_15:
      v2[1] = 0;
      v2[2] = dword_221A400[v3 + 2219];
      *(uint *)(dword_221A400[v3 + 2219] + 4) = v2;
      dword_221A400[v3 + 2219] = (int)v2;
    }
  }
  else
  {
    dword_221A400[v3 + 2219] = (int)v2;
    v2[1] = 0;
    *(uint *)(dword_221A400[v3 + 2219] + 8) = 0;
    dword_221A400[v3 + 2225] = dword_221A400[v3 + 2219];
  }
  ++dword_221A400[v3 + 2222];
  OS_RestoreInterrupts(v5);
  return dword_221A400[v3 + 2222];
}

//----- (02203B20) --------------------------------------------------------
int __fastcall Function_2203b20(int a1)
{
  int v1;
  int v2;
  int result;

  v1 = a1;
  v2 = OS_DisableInterrupts();
  if ( dword_221A400[v1 + 2219] )
  {
    OS_RestoreInterrupts(v2);
    result = dword_221A400[v1 + 2219];
  }
  else
  {
    OS_RestoreInterrupts(v2);
    result = 0;
  }
  return result;
}

//----- (02203B5C) --------------------------------------------------------
int __fastcall Function_2203b5c(int a1)
{
  int v1;
  int v2;
  int v3;
  int v4;
  int v5;

  v1 = a1;
  v2 = OS_DisableInterrupts();
  v3 = dword_221A400[v1 + 2219];
  if ( v3 )
  {
    v4 = *(uint *)(v3 + 8);
    v5 = dword_221A400[v1 + 2222];
    dword_221A400[v1 + 2219] = v4;
    dword_221A400[v1 + 2222] = v5 - 1;
    if ( v4 )
      *(uint *)(v4 + 4) = 0;
    else
      dword_221A400[v1 + 2225] = 0;
  }
  OS_RestoreInterrupts(v2);
  return dword_221A400[v1 + 2222];
}

//----- (02203BC4) --------------------------------------------------------
int __fastcall Function_2203bc4(int a1)
{
  return dword_221A400[a1 + 2222];
}

//----- (02203BD4) --------------------------------------------------------
int __fastcall Function_2203bd4(ushort *a1, int a2, int a3)
{
  int v3;
  int v4;
  uint *v5;
  int result;

  v3 = a2;
  v4 = a3;
  v5 = a1;
  MI_CpuFill8(a1, 0, 0x28u);
  v5[1] = 79071;
  v5[10] = 0;
  v5[11] = 0;
  v5[13] = v3;
  v5[14] = v4;
  v5[31] = 0;
  v5[32] = 0;
  v5[33] = 0;
  v5[34] = 0;
  v5[35] = 79071;
  v5[36] = 0;
  v5[19] = 0;
  v5[17] = 0;
  v5[18] = 0;
  v5[27] = 0;
  v5[28] = 0;
  v5[20] = 0;
  v5[21] = 0;
  v5[22] = 0;
  result = 1;
  v5[23] = 1;
  v5[15] = 0;
  v5[16] = 0;
  v5[12] = 0;
  return result;
}

//----- (02203C60) --------------------------------------------------------
int __fastcall Function_2203c60(int a1)
{
  int v1;
  int v2;
  int result;

  v1 = a1;
  v2 = *(uint *)(a1 + 60);
  if ( v2 )
  {
    Function_220523c(v2);
    *(uint *)(v1 + 60) = 0;
  }
  result = -1;
  *(uint *)(v1 + 56) = -1;
  return result;
}

//----- (02203C8C) --------------------------------------------------------
int __fastcall Function_2203c8c(int a1, int a2)
{
  int v2;
  int v3;
  int v4;

  v2 = a1;
  v3 = *(uint *)(a1 + 60);
  v4 = a2;
  if ( v3 )
    Function_220523c(v3);
  *(uint *)(v2 + 60) = v4;
  return Function_2203b5c(*(uint *)(v2 + 52));
}

//----- (02203CB8) --------------------------------------------------------
int __fastcall Function_2203cb8(int result, short a2)
{
  *(ushort *)(result + 104) = a2;
  *(uint *)(result + 100) = 65537;
  *(uint *)(result + 96) = 0;
  *(uint *)(result + 92) = 0;
  return result;
}

//----- (02203CD8) --------------------------------------------------------
int __fastcall Function_2203cd8(int a1, int a2, uint a3)
{
  int v3;
  uint v4;
  uint v5;
  int v6;
  uint v7;
  int result;
  uint v9;

  v3 = a1;
  v4 = *(ushort *)(a1 + 104);
  v5 = a3;
  v6 = a2;
  v7 = (a3 - v4) & 0xFFFF;
  if ( v7 >= 0xBB8 )
  {
    if ( v7 > 0xFF9C )
    {
      v9 = v5 + *(uint *)(a1 + 96);
      if ( v9 > *(uint *)(a1 + 84) + 65436 )
      {
        *(uint *)(v6 + 24) = v9 - 0x10000;
        return 1;
      }
    }
    else
    {
      if ( v5 != *(uint *)(a1 + 100) )
      {
        *(uint *)(a1 + 100) = (v5 + 1) & 0xFFFF;
        return 0;
      }
      Function_2203cb8(a1, v5);
      *(uint *)(v3 + 84) = (v5 - 1) & 0xFFFF;
    }
  }
  else
  {
    if ( v5 < v4 )
      *(uint *)(a1 + 96) += 0x10000;
    *(ushort *)(a1 + 104) = v5;
  }
  result = 1;
  *(uint *)(v6 + 24) = v5 + *(uint *)(v3 + 96);
  return result;
}

//----- (02203DB0) --------------------------------------------------------
int __fastcall Function_2203db0(int a1, int a2)
{
  uint *v2;
  int v3;
  int v4;
  int result;
  uint v6;
  uint v7;
  int v8;
  uint *v9;
  int v10;
  uint v11;
  long long v12;
  uint v13;
  int v14;
  int v15;
  ull v16;
  uint v17;
  uint v18;
  uint v19;
  bool v20;
  bool v21;
  int v22;
  int v23;
  int v24;
  uint v25;
  int v26;
  int v27;
  uint v28;
  int v29;

  v2 = (uint *)a1;
  v3 = a2;
  v4 = 0;
  if ( *(uint *)(a1 + 92) )
  {
    Function_2203cb8(a1, *(uint *)(a2 + 24));
  }
  else
  {
    if ( !Function_2203cd8(a1, a2, *(uint *)(a2 + 24) & 0xFFFF) )
    {
      result = 0;
      ++v2[5];
      return result;
    }
    v2[4] = *(uint *)(v3 + 24);
    v6 = *(uint *)(v3 + 24);
    v7 = v2[21];
    if ( v7 == v6 )
    {
      result = 0;
      ++v2[5];
      return result;
    }
    if ( v7 + 1 != v6 && !*(uint *)(v3 + 1116) )
    {
      v8 = v6 - v7;
      if ( (int)(v6 - v7) < 0 )
        v8 = v7 - v6;
      if ( v8 > 100 )
      {
        v2[21] = v6;
        return 0;
      }
      if ( v7 > v6 )
        ++v2[7];
    }
  }
  v2[21] = *(uint *)(v3 + 24);
  if ( !v2[19] )
  {
    v2[19] = *(uint *)(v3 + 1120);
    v9 = v2 + 17;
    v10 = *(uint *)(v3 + 1128);
    *v9 = *(uint *)(v3 + 1124);
    v9[1] = v10;
    v2[27] = 0;
  }
  v11 = v2[32];
  LODWORD(v12) = (*(uint *)(v3 + 1120) - v2[19]) << 6;
  v13 = v12 - (*(uint *)(v3 + 1124) - v2[17]);
  if ( v11 && !*(uint *)(v3 + 1116) )
  {
    v2[32] = v13;
    v14 = v13 - v11;
    if ( (int)(v13 - v11) < 0 )
      v14 = v11 - v13;
    if ( v14 > (ull)((int)(2 * (v2[31] + 35608)) + 52365LL) )
      v2[33] = v14 / 35608 + 2;
    if ( (int)v2[33] <= 0 )
    {
      v15 = v2[31] + ((int)(v14 - v2[31]) >> 4);
      v2[31] = v15;
      v2[6] = v15;
    }
  }
  else
  {
    v2[32] = v13;
  }
  HIDWORD(v12) = v2[18];
  *(ull *)(v3 + 1132) = v12 + v2[17] + v2[1];
  LODWORD(v16) = OS_GetTick();
  v17 = *(uint *)(v3 + 1132);
  v18 = *(uint *)(v3 + 1136);
  if ( __PAIR__(v18, v17) + 35608 < v16 )
    return 0;
  v19 = v16 + 523656;
  v20 = v18 >= (v16 + 523656) >> 32;
  v21 = v18 == (v16 + 523656) >> 32;
  if ( v18 == (v16 + 523656) >> 32 )
  {
    v20 = v17 >= v19;
    v21 = v17 == v19;
  }
  if ( !v21 && v20 )
    return 0;
  if ( (int)v2[33] <= 0 )
  {
    v22 = 3 * v2[31];
    v23 = v22 / 35608;
    if ( v22 <= v2[35] )
    {
      if ( v22 < (int)v2[34] )
      {
        v25 = v2[36] + 1;
        v2[36] = v25;
        if ( v25 > 0x46 )
        {
          v2[35] = 35608 * (v23 + 1) + 79071;
          v26 = 35608 * v23 - 17804;
          v2[34] = v26;
          v27 = 35608 * v23 + 223;
          if ( v26 < 0 )
            v2[34] = 0;
          v2[1] = v27 + 78848;
          v2[36] = 0;
        }
      }
    }
    else
    {
      v24 = 35608 * (v23 + 1);
      v2[35] = v24 + 79071;
      v2[34] = v24 + 25659;
      v2[1] = 35608 * v23 + 79071;
      v2[36] = 0;
    }
    if ( v2[1] > 0x68520 )
      v2[1] = 427296;
    v28 = v2[27];
    if ( v28 >= 0x10 )
    {
      v2[29] = (int)(v13 + 31 * v2[29]) / 32;
    }
    else
    {
      v2[27] = v28 + 1;
      v2[29] = v13;
      v2[30] = v13;
    }
    v29 = v2[30] - v2[29];
    if ( v29 > 34561 )
      v4 = 1;
    v2[3] = v29;
    if ( v29 < -34561 )
    {
      v4 = -1;
      ++v2[28];
    }
    if ( v4 )
    {
      v2[27] = 0;
      v2[19] = 0;
    }
  }
  result = 1;
  --v2[33];
  return result;
}

//----- (02204160) --------------------------------------------------------
int Function_2204160()
{
  bool v0;
  int result;

  v0 = dword_221A400[3578] == 0;
  if ( dword_221A400[3578] )
    v0 = dword_221A400[3578] == 2;
  if ( v0 )
    result = 0;
  else
    result = Function_2204700();
  return result;
}

//----- (02204188) --------------------------------------------------------
int __fastcall Function_2204188(int *a1)
{
  int v1;
  int v2;
  int result;

  v1 = 0;
  v2 = dword_221A400[2233];
  if ( !a1 )
    return 0;
  if ( dword_221A400[3578] == 2 )
  {
    if ( a1 == &dword_221A400[2243] )
      dword_221A400[2243] = 0;
    result = 1;
  }
  else if ( dword_221A400[2233] )
  {
    while ( (int *)v2 != a1 )
    {
      v1 = v2;
      v2 = *(uint *)(v2 + 20);
      if ( !v2 )
        goto LABEL_16;
    }
    *a1 = 0;
    if ( v1 )
    {
      *(uint *)(v1 + 20) = a1[5];
    }
    else if ( *(uint *)(v2 + 20) )
    {
      dword_221A400[2233] = *(uint *)(v2 + 20);
    }
    else
    {
      dword_221A400[2233] = 0;
    }
    a1[5] = dword_221A400[2232];
    dword_221A400[2232] = (int)a1;
    result = 1;
  }
  else
  {
LABEL_16:
    result = 0;
  }
  return result;
}

//----- (02204244) --------------------------------------------------------
int __fastcall Function_2204244(int a1, int a2, int a3, uint a4)
{
  int v4;
  int v5;
  int v6;
  int result;
  bool v8;

  v4 = a1;
  v5 = a2;
  v6 = a3;
  if ( !a1 )
    return -1;
  if ( a4 < 0x10 )
    return -1;
  if ( dword_221A400[3577] == 1 )
    return -3;
  if ( a2 < 0 || a2 >= 5 )
    return -3;
  *(uchar *)(a3 + 4) = -1;
  Function_2204a50();
  if ( !Function_2204bbc(v4, v6) )
    return -3;
  v8 = dword_221A400[3578] == 1;
  if ( dword_221A400[3578] == 1 )
    v8 = v5 == 0;
  if ( !v8 || Function_2204b70(v4) )
    result = 0;
  else
    result = -3;
  return result;
}

//----- (022042F4) --------------------------------------------------------
int Function_22042f4()
{
  int result;

  if ( dword_221A400[3578] == 2 )
    result = -3;
  else
    result = Function_220476c();
  return result;
}

//----- (02204318) --------------------------------------------------------
int __fastcall Function_2204318(int a1, int a2, int a3, uint a4)
{
  int v4;
  int v5;
  int v6;
  int result;
  bool v8;
  int v9;

  v4 = a1;
  v5 = a2;
  v6 = a3;
  if ( !a1 )
    return -1;
  if ( a4 < 0x10 )
    return -1;
  if ( a2 < 0 || a2 >= 6 )
    return -3;
  *(uchar *)(a3 + 4) = 0;
  Function_2204a50();
  if ( !v5 )
  {
    v8 = dword_221A400[3578] == 1;
    if ( dword_221A400[3578] == 1 )
      v8 = *(uint *)(v4 + 12) == 4;
    if ( v8 && !Function_2204b70(v4) )
      return -3;
    v9 = 1;
    if ( *(uchar *)(v4 + 4) )
      v9 = 1 << *(uchar *)(v4 + 4);
    *(uint *)(v4 + 8) = v9;
  }
  if ( Function_2204bbc(v4, v6) )
    result = 0;
  else
    result = -3;
  return result;
}

//----- (022043D0) --------------------------------------------------------
int Function_22043d0()
{
  int result;

  if ( dword_221A400[3578] == 2 )
    result = -3;
  else
    result = Function_22047b0();
  return result;
}

//----- (022043F4) --------------------------------------------------------
int __fastcall Function_22043f4(int a1)
{
  int v1;
  int result;
  int v3;

  v1 = a1;
  if ( dword_221A400[3578] != 3 )
    return -2;
  if ( dword_221A400[2228] == 3 )
    return -6;
  if ( a1 == LOBYTE(dword_221A400[3574]) )
    return -1;
  if ( Function_2204c44() )
    return 0;
  v3 = Function_2204160();
  if ( !v3 )
    return -1;
  *(uchar *)(v3 + 4) = v1;
  *(uchar *)(v3 + 5) = v1;
  *(uint *)(v3 + 12) = 2;
  *(uint *)(v3 + 8) = 1 << v1;
  ((void (__fastcall *)(int, int))dword_221A400[3575])(v1, 7);
  result = 0;
  ++dword_221A400[2228];
  return result;
}

//----- (022044AC) --------------------------------------------------------
int __fastcall Function_22044ac(ushort **a1, uint a2)
{
  ushort **v2;
  ushort *v3;
  bool v4;
  uint v6;
  uint v7;
  int v8;

  v2 = a1;
  v3 = *a1;
  v4 = v3 == 0;
  if ( v3 )
  {
    a2 = (uint)v2[1];
    v4 = a2 == 0;
  }
  if ( v4 || a2 > 8 )
    return 0;
  dword_221A400[2232] = (int)v3;
  MI_CpuFill8(v3, 0, 24 * (uint)v2[1]);
  MI_CpuFill8(&dword_221A400[2243], 0, 0x18u);
  MI_CpuFill8(&dword_221A400[2237], 0, 0x18u);
  v6 = (uint)v2[1];
  v7 = 0;
  if ( v6 != 1 )
  {
    v8 = 0;
    do
    {
      *(uint *)(dword_221A400[2232] + v8 + 20) = dword_221A400[2232] + 24 * ++v7;
      v6 = (uint)v2[1];
      v8 += 24;
    }
    while ( v7 < v6 - 1 );
  }
  *(uint *)(dword_221A400[2232] + 24 * v6 - 4) = 0;
  dword_221A400[2233] = 0;
  dword_221A400[2229] = 0;
  dword_221A400[2228] = 0;
  dword_221A400[3579] = 0;
  dword_221A400[2234] = (int)OS_GetTick;
  dword_221A400[2235] = 1566083941;
  dword_221A400[2236] = 2531011;
  return 1;
}

//----- (022045C0) --------------------------------------------------------
int *Function_22045c0()
{
  int *result;

  result = &dword_221A400[2228];
  dword_221A400[2233] = 0;
  dword_221A400[2232] = 0;
  return result;
}

//----- (022045D8) --------------------------------------------------------
uint Function_22045d8()
{
  uint result;
  int v1;
  uint v2;
  int v3;
  bool v4;
  bool v5;

  result = OS_GetTick();
  if ( dword_221A400[3578] == 2 && dword_221A400[3577] && *(ull *)&dword_221A400[2230] )
  {
    v4 = result >= dword_221A400[2230];
    v2 = result - dword_221A400[2230];
    result = 0;
    v3 = v1 - (dword_221A400[2231] + !v4);
    v4 = 1;
    v5 = v3 == 0;
    if ( !v3 )
    {
      v4 = v2 >= 0xEFB5F7;
      v5 = v2 == 15709687;
    }
    if ( !v5 && v4 )
    {
      dword_221A400[2230] = 0;
      dword_221A400[2231] = 0;
      dword_221A400[2243] = 0;
      dword_221A400[2246] = 0;
      Function_22048dc(0);
      result = ((int (__fastcall *)(uint, int))dword_221A400[3575])(LOBYTE(dword_221A400[2244]), 9);
    }
  }
  return result;
}

//----- (02204684) --------------------------------------------------------
int __fastcall Function_2204684(int a1, uchar *a2, int a3, int a4)
{
  if ( a3 != 16 )
    return 0;
  if ( (uchar)a2[8] != a1 || (uchar)a2[9] != LOBYTE(dword_221A400[3574]) )
    return 0;
  if ( a2[5] != 16 )
    return Function_2204f90(a2, a4);
  if ( dword_221A400[3577] )
    return Function_2204e00(a2, a4);
  return Function_2204cc4(a2, a4);
}

//----- (02204700) --------------------------------------------------------
int __fastcall Function_2204700(uint a1)
{
  int result;

  if ( a1 >= 0x20 )
    return 0;
  if ( a1 == LOBYTE(dword_221A400[3574]) )
    return 0;
  if ( !dword_221A400[2232] )
    return 0;
  dword_221A400[2232] = *(uint *)(dword_221A400[2232] + 20);
  Function_220491c(dword_221A400[2232]);
  result = dword_221A400[2232];
  *(uint *)(dword_221A400[2232] + 20) = dword_221A400[2233];
  dword_221A400[2233] = dword_221A400[2232];
  return result;
}

//----- (0220476C) --------------------------------------------------------
int __fastcall Function_220476c(int a1, int a2)
{
  int v2;
  int result;
  char v4;

  v2 = a1;
  result = Function_2204244(a1, a2, (int)&v4, 0x10u);
  if ( !result )
  {
    if ( Function_2204964(v2, &v4) )
      result = 0;
    else
      result = -4;
  }
  return result;
}

//----- (022047B0) --------------------------------------------------------
int __fastcall Function_22047b0(int a1, int a2)
{
  int v2;
  int result;
  char v4;

  v2 = a1;
  result = Function_2204318(a1, a2, (int)&v4, 0x10u);
  if ( !result )
  {
    if ( Function_2204964(v2, &v4) )
      result = 0;
    else
      result = -4;
  }
  return result;
}

//----- (022047F4) --------------------------------------------------------
int __fastcall Function_22047f4(int result, int a2)
{
  if ( *(uchar *)(a2 + 10) == 1 )
  {
    *(uchar *)(a2 + 11) = *(uchar *)(result + 4);
    result = dword_221A400[2229];
    *(uint *)(a2 + 12) = dword_221A400[2229];
  }
  return result;
}

//----- (0220481C) --------------------------------------------------------
int __fastcall Function_220481c(int a1, int a2)
{
  int v2;
  int v3;
  int v4;
  int v5;
  uint v6;
  bool v7;
  int result;
  int v9;

  v9 = a1;
  v2 = a2;
  v3 = 0;
  Function_22047f4(a1, a2);
  v6 = 0;
  do
  {
    if ( v6 )
      v4 = 1 << v6;
    if ( !v6 )
      v4 = 1;
    v7 = (dword_221A400[2229] & v4) == 0;
    if ( dword_221A400[2229] & v4 )
      v7 = v6 == LOBYTE(dword_221A400[3574]);
    if ( !v7 )
    {
      *(uchar *)(v2 + 9) = v6;
      if ( Function_21e4ae8(v6, v2, 16, v5) )
        ++v3;
    }
    v6 = (v6 + 1) & 0xFF;
  }
  while ( v6 < 0x20 );
  if ( *(uchar *)(v2 + 10) == 1 )
  {
    *(uint *)(v9 + 8) = dword_221A400[2229];
  }
  else if ( !*(uchar *)(v2 + 10) )
  {
    *(uint *)(v9 + 8) = 0;
  }
  if ( v3 )
    result = 0;
  else
    result = -4;
  return result;
}

//----- (022048DC) --------------------------------------------------------
int __fastcall Function_22048dc(char a1)
{
  char v1;
  char v3;
  char v4;
  char v5;

  v1 = a1;
  v4 = -1;
  Function_2204a50(&dword_221A400[2243], &v3, 4);
  v5 = v1;
  return Function_220481c((int)&dword_221A400[2243], (int)&v3);
}

//----- (0220491C) --------------------------------------------------------
int __fastcall Function_220491c(int result, char a2)
{
  uchar *v2;
  int v3;

  v2 = (uchar *)result;
  v3 = 6;
  do
  {
    *v2 = 0;
    v2[1] = 0;
    v2[2] = 0;
    v2[3] = 0;
    v2 += 4;
    --v3;
  }
  while ( v3 );
  *(uint *)result = dword_221A400[3578];
  *(uint *)(result + 12) = 0;
  *(uchar *)(result + 4) = a2;
  return result;
}

//----- (02204964) --------------------------------------------------------
int __fastcall Function_2204964(int a1, int a2, int a3, int a4)
{
  int v4;
  bool v5;

  v4 = *(uchar *)(a2 + 4);
  v5 = v4 == 255;
  if ( v4 == 255 )
    v5 = *(uchar *)(a2 + 6) == 4;
  if ( v5 )
  {
    Function_220481c(a1, a2);
  }
  else if ( !Function_21e4ae8(*(uchar *)(a1 + 4), a2, 16, a4) )
  {
    return 0;
  }
  return 1;
}

//----- (022049A4) --------------------------------------------------------
int __fastcall Function_22049a4(uchar *a1, int a2)
{
  int v2;
  int result;
  int v4;
  int v5;

  *(uchar *)(a2 + 5) = a1[11];
  if ( (uchar)a1[4] == 255 )
  {
    if ( !a1[6] )
    {
      v2 = 1;
      if ( *(uchar *)(a2 + 4) )
        v2 = 1 << *(uchar *)(a2 + 4);
      *(uint *)(a2 + 8) = v2;
    }
    result = *((uchar *)dword_2215D28 + (uchar)a1[6]);
  }
  else if ( a1[4] )
  {
    result = 12;
  }
  else if ( a1[6] )
  {
    result = *((uchar *)dword_2215D30 + (uchar)a1[6]);
  }
  else
  {
    v4 = *(uint *)(a2 + 12);
    if ( v4 == 1 )
    {
      v5 = 1;
      if ( *(uchar *)(a2 + 4) )
        v5 = 1 << *(uchar *)(a2 + 4);
      *(uint *)(a2 + 8) = v5;
      result = 7;
    }
    else if ( v4 == 5 )
    {
      result = 9;
    }
    else
    {
      result = 12;
    }
  }
  return result;
}

//----- (02204A50) --------------------------------------------------------
int __fastcall Function_2204a50(int a1, int a2, char a3)
{
  char v3;
  int result;

  *(uint *)a2 = 1599488852;
  *(uchar *)(a2 + 5) = 16;
  *(uchar *)(a2 + 6) = a3;
  *(uchar *)(a2 + 8) = dword_221A400[3574];
  v3 = *(uchar *)(a1 + 4);
  result = 0;
  *(uchar *)(a2 + 9) = v3;
  *(uchar *)(a2 + 10) = 0;
  *(uchar *)(a2 + 11) = dword_221A400[3574];
  *(uint *)(a2 + 12) = 0;
  return result;
}

//----- (02204A98) --------------------------------------------------------
int __fastcall Function_2204a98(int a1, int *a2)
{
  int v2;
  uint *v3;
  int result;
  int v5;

  v2 = *((uchar *)a2 + 6);
  v3 = (uint *)a1;
  if ( !*((uchar *)a2 + 4) )
    v2 += 5;
  if ( v2 < 0 || v2 >= 11 )
    v2 = -1;
  if ( v2 < 0 )
    return -1;
  if ( dword_221A400[3578] == 1 )
    a2 = dword_2215DBC + 66;
  if ( dword_221A400[3578] != 1 )
    a2 = dword_2215D38;
  v5 = *((char *)a2 + 11 * *(uint *)(a1 + 12) + v2);
  if ( v5 == -3 )
  {
    Function_22047b0(a1, 3);
    v3[3] = 0;
    result = -3;
    *v3 = 0;
  }
  else if ( v5 == -2 )
  {
    Function_22047b0(a1, 1);
    v3[3] = 0;
    result = -2;
    *v3 = 0;
  }
  else
  {
    result = *((char *)a2 + 11 * *(uint *)(a1 + 12) + v2);
  }
  return result;
}

//----- (02204B70) --------------------------------------------------------
int __fastcall Function_2204b70(uint *a1)
{
  uint *v1;

  v1 = (uint *)dword_221A400[2233];
  if ( !dword_221A400[2233] )
    return 1;
  while ( !*v1 || v1[3] != 2 || a1 == v1 )
  {
    v1 = (uint *)v1[5];
    if ( !v1 )
      return 1;
  }
  return 0;
}

//----- (02204BBC) --------------------------------------------------------
int __fastcall Function_2204bbc(int a1, int a2)
{
  int *v2;
  int v3;
  int v5;

  v2 = (int *)*(uchar *)(a2 + 4);
  v3 = *(uchar *)(a2 + 6);
  if ( !*(uchar *)(a2 + 4) )
    v3 += 5;
  if ( v3 < 0 || v3 >= 11 )
    v3 = -1;
  if ( v3 < 0 )
    return -1;
  if ( dword_221A400[3578] == 1 )
    v2 = dword_2215D38 + 66;
  if ( dword_221A400[3578] != 1 )
    v2 = dword_2215DBC;
  v5 = *((char *)v2 + 11 * *(uint *)(a1 + 12) + v3);
  if ( v5 == -1 )
    return 1;
  if ( v5 == -2 )
    return 0;
  *(uint *)(a1 + 12) = v5;
  return 1;
}

//----- (02204C44) --------------------------------------------------------
int *__fastcall Function_2204c44(int a1)
{
  int v1;
  int *result;

  v1 = dword_221A400[2233];
  if ( dword_221A400[3578] == 2 )
  {
    if ( dword_221A400[2243] && LOBYTE(dword_221A400[2244]) == a1 )
      result = &dword_221A400[2243];
    else
      result = 0;
  }
  else if ( dword_221A400[2233] )
  {
    while ( !*(uint *)v1 || *(uchar *)(v1 + 4) != a1 )
    {
      v1 = *(uint *)(v1 + 20);
      if ( !v1 )
        goto LABEL_11;
    }
    result = (int *)v1;
  }
  else
  {
LABEL_11:
    result = 0;
  }
  return result;
}

//----- (02204CC4) --------------------------------------------------------
int __fastcall Function_2204cc4(uchar *a1, int *a2)
{
  uchar *v2;
  int *v3;
  int v4;
  int result;
  int *v6;
  int *v7;
  int v8;
  int v9;
  int *v10;
  int v11;

  v2 = a1;
  v3 = a2;
  if ( a1[4] != 255 )
    goto LABEL_21;
  v4 = a1[6];
  if ( v4 == 4 )
    return Function_2205008();
  if ( v4 == 3 )
    return 0;
LABEL_21:
  v6 = Function_2204c44(a1[8]);
  v7 = v6;
  if ( v6 )
  {
    v8 = Function_2204a98((int)v6, (int *)v2);
    if ( v8 == -2 )
    {
      *v3 = 12;
      *v7 = 0;
      v3[1] = (int)v7;
      result = 1;
    }
    else if ( v8 == -1 )
    {
      result = 0;
    }
    else
    {
      *v3 = Function_22049a4(v2, (int)v7);
      v3[1] = (int)v7;
      v7[3] = v8;
      result = *v3 != 0;
    }
  }
  else
  {
    v9 = Function_2204700(v2[8]);
    v10 = (int *)v9;
    if ( v9 )
    {
      v11 = Function_2204a98(v9, (int *)v2);
      if ( (uint)(v11 + 2) > 1 )
      {
        *v3 = Function_22049a4(v2, (int)v10);
        v3[1] = (int)v10;
        v10[3] = v11;
        result = *v3 != 0;
      }
      else
      {
        Function_2204188(v10);
        result = 0;
      }
    }
    else
    {
      Function_220491c((int)&dword_221A400[2237], v2[8]);
      Function_22047b0((int)&dword_221A400[2237], 3);
      result = 0;
    }
  }
  return result;
}

//----- (02204E00) --------------------------------------------------------
int __fastcall Function_2204e00(uchar *a1, int *a2, int a3, int a4)
{
  uchar *v4;
  int *v5;
  int v6;
  int result;
  int v8;
  bool v9;
  int v10;

  v4 = a1;
  v5 = a2;
  if ( dword_221A400[2243] == 2 )
  {
    if ( LOBYTE(dword_221A400[2244]) != (uchar)a1[8] )
    {
      Function_22048dc(1);
      return 0;
    }
    v6 = Function_2204a98((int)&dword_221A400[2243], (int *)a1);
    switch ( v6 )
    {
      case -3:
        return 0;
      case -2:
        *v5 = 12;
        v5[1] = 0;
        return 1;
      case -1:
        return 0;
    }
    *v5 = Function_22049a4(v4, (int)&dword_221A400[2243]);
    v5[1] = (int)&dword_221A400[2243];
    dword_221A400[2246] = v6;
  }
  else
  {
    if ( a1[8] )
      a4 = 1 << a1[8];
    if ( !a1[8] )
      a4 = 1;
    if ( !(dword_221A400[2229] & a4) )
      return 0;
    LOBYTE(dword_221A400[2244]) = a1[8];
    dword_221A400[2243] = 2;
    dword_221A400[2246] = 0;
    v8 = Function_2204a98((int)&dword_221A400[2243], (int *)a1);
    v9 = v8 == -3;
    if ( v8 != -3 )
      v9 = v8 == -2;
    if ( v9 || v8 == -1 )
    {
      result = 0;
      dword_221A400[2243] = 0;
      return result;
    }
    *v5 = Function_22049a4(v4, (int)&dword_221A400[2243]);
    v5[1] = (int)&dword_221A400[2243];
    dword_221A400[2246] = v8;
  }
  if ( *v5 == 10 )
  {
    Function_22048dc(1);
    dword_221A400[2230] = OS_GetTick();
    dword_221A400[2231] = v10;
  }
  else
  {
    Function_22048dc(0);
    dword_221A400[2230] = 0;
    dword_221A400[2231] = 0;
  }
  return 1;
}

//----- (02204F90) --------------------------------------------------------
int __fastcall Function_2204f90(int a1, uint *a2)
{
  int v2;
  int v3;
  uint *v4;
  bool v5;
  int result;
  int *v7;

  v2 = a1;
  v3 = *(uchar *)(a1 + 4);
  v4 = a2;
  v5 = v3 == 255;
  if ( v3 == 255 )
    v5 = *(uchar *)(v2 + 6) == 4;
  if ( v5 )
    return 0;
  v7 = Function_2204c44(*(uchar *)(v2 + 8));
  if ( v7 )
  {
    *v4 = 2;
    v4[1] = v7;
    *v7 = 0;
    Function_22047b0((int)v7, 2);
    result = 1;
  }
  else
  {
    Function_220491c((int)&dword_221A400[2237], *(uchar *)(v2 + 8));
    Function_22047b0((int)&dword_221A400[2237], 2);
    result = 0;
  }
  return result;
}

//----- (02205008) --------------------------------------------------------
int __fastcall Function_2205008(int a1, uint *a2)
{
  bool v3;
  int v4;
  bool v5;

  if ( dword_221A400[3578] != 2 )
    return 0;
  if ( BYTE1(dword_221A400[3574]) != *(uchar *)(a1 + 8) )
    return 0;
  if ( *(uchar *)(a1 + 10) )
  {
    if ( *(uchar *)(a1 + 10) != 1 )
      return 0;
    dword_221A400[2243] = 2;
    if ( *(uchar *)(a1 + 11) == LOBYTE(dword_221A400[3574]) )
    {
      dword_221A400[2246] = 2;
      *a2 = 7;
      v4 = *(uint *)(a1 + 12);
    }
    else
    {
      dword_221A400[2246] = 3;
      *a2 = 6;
      v4 = *(uchar *)(a1 + 11);
      v5 = v4 == 0;
      if ( *(uchar *)(a1 + 11) )
        v4 = 1 << v4;
      if ( v5 )
        v4 = 1;
    }
    dword_221A400[2245] = v4;
    BYTE1(dword_221A400[2244]) = *(uchar *)(a1 + 11);
    a2[1] = &dword_221A400[2243];
  }
  else
  {
    if ( !dword_221A400[2243] )
      return 0;
    v3 = dword_221A400[2246] == 5;
    if ( dword_221A400[2246] != 5 )
      v3 = dword_221A400[2246] == 2;
    if ( v3 )
      *a2 = 9;
    else
      *a2 = 5;
    dword_221A400[2243] = 0;
    dword_221A400[2246] = 0;
    a2[1] = &dword_221A400[2243];
  }
  return 1;
}

//----- (02205128) --------------------------------------------------------
int __fastcall Function_2205128(int a1, uint a2)
{
  uint v2;
  int result;
  uint v4;
  int v5;

  v2 = a2 / 0x478;
  dword_221A400[2250] = a1;
  if ( a2 / 0x478 < 4 || v2 > 0x48 )
    return 0;
  if ( !a1 )
    return 0;
  if ( a1 & 0x1F )
  {
    result = 0;
    dword_221A400[2250] = 0;
  }
  else
  {
    MIi_CpuClearFast(0, (uint *)a1, a2);
    v4 = 0;
    if ( v2 != 1 )
    {
      v5 = 0;
      do
      {
        *(uint *)(dword_221A400[2250] + v5) = dword_221A400[2250] + 1144 * ++v4;
        v5 += 1144;
      }
      while ( v4 < v2 - 1 );
    }
    *(uint *)(dword_221A400[2250] + 1144 * v2 - 1144) = 0;
    result = 1;
    dword_221A400[2249] = dword_221A400[2250];
  }
  return result;
}

//----- (022051F0) --------------------------------------------------------
int *Function_22051f0()
{
  int *result;

  result = &dword_221A400[2249];
  dword_221A400[2249] = 0;
  dword_221A400[2250] = 0;
  return result;
}

//----- (02205208) --------------------------------------------------------
int Function_2205208()
{
  int v0;
  int v1;

  v0 = 0;
  v1 = OS_DisableInterrupts();
  if ( dword_221A400[2249] )
  {
    v0 = dword_221A400[2249];
    dword_221A400[2249] = *(uint *)dword_221A400[2249];
  }
  OS_RestoreInterrupts(v1);
  return v0;
}

//----- (0220523C) --------------------------------------------------------
uint __fastcall Function_220523c(uint *a1)
{
  uint *v1;
  int v2;

  v1 = a1;
  v2 = OS_DisableInterrupts();
  *v1 = dword_221A400[2249];
  dword_221A400[2249] = (int)v1;
  v1[1] = 0;
  v1[2] = 0;
  return OS_RestoreInterrupts(v2);
}

//----- (02205270) --------------------------------------------------------
int *Function_2205270()
{
  int v0;
  int *result;

  v0 = 0;
  do
    dword_221A400[v0++ + 2254] = 0x1000000;
  while ( v0 < 4 );
  dword_221A400[2252] = 0;
  result = &dword_221A114;
  dword_221A400[2251] = 0;
  dword_221A114 = 0;
  dword_221A118 = 0;
  dword_221A400[2253] = 0;
  return result;
}

//----- (022052BC) --------------------------------------------------------
int __fastcall Function_22052bc(int result, int a2, int a3, uint a4)
{
  if ( result )
    result = MI_CpuCopy8((int)&dword_221A114, result, 0x10u, a4);
  return result;
}

//----- (022052DC) --------------------------------------------------------
int __fastcall Function_22052dc(int a1, uint a2, uchar *a3)
{
  uint v3;
  int v4;
  int v5;
  uint v6;
  uint v7;
  int v8;
  int v9;

  dword_221A118 = a2 >> 8;
  if ( a3 )
    *a3 = BYTE1(a2);
  v3 = 0;
  v4 = 0;
  do
  {
    v5 = dword_221A400[v4++ + 2254];
    v3 += v5;
  }
  while ( v4 < 4 );
  REG_SQRTCNT = 0;
  REG_SQRT_PARAM_L = v3 >> 2;
  while ( REG_SQRTCNT & 0x8000 )
    ;
  if ( a2 && a2 >= 2 * REG_SQRT_RESULT )
  {
    v6 = 0;
    v7 = 0;
    do
    {
      v8 = dword_221A400[v7++ + 2254];
      v6 += v8;
    }
    while ( v7 < 4 );
    REG_SQRTCNT = 0;
    REG_SQRT_PARAM_L = v6 >> 2;
    while ( REG_SQRTCNT & 0x8000 )
      ;
    dword_221A400[2251] = (uint)(3 * REG_SQRT_RESULT) >> 1;
    dword_221A400[2252] = 0;
    v9 = 1;
    dword_221A114 = 1;
  }
  else
  {
    v9 = 0;
  }
  dword_221A400[dword_221A400[2252] + 2254] = a1;
  dword_221A400[2252] = (LOBYTE(dword_221A400[2252]) + 1) & 3;
  return v9;
}

//----- (022054BC) --------------------------------------------------------
int *Function_22054bc()
{
  dword_221A11C = 15;
  dword_221A120 = 1020;
  return Function_2205270();
}

//----- (022054E4) --------------------------------------------------------
int __fastcall Function_22054e4(short *a1, uint a2)
{
  int v2;
  int v3;
  int v4;
  uint v5;
  int v6;
  int v7;
  uint v8;
  short v9;
  int v10;
  int v11;

  v2 = 3743 * *a1;
  v3 = (v2 + dword_221A400[2259] + 3390 * dword_221A400[2262]) >> 12;
  v4 = v3 * v3;
  v5 = a2 >> 1;
  dword_221A400[2262] = (v2 + dword_221A400[2259] + 3390 * dword_221A400[2262]) >> 12;
  v6 = -v2;
  dword_221A400[2259] = -v2;
  v7 = v3 * v3 >> 31;
  v8 = 1;
  if ( v5 > 1 )
  {
    do
    {
      v9 = a1[v8];
      v10 = (int)&a1[v8++];
      v11 = 3743 * v9;
      *(ushort *)(v10 - 2) = v3;
      v3 = (v11 + v6 + 3390 * v3) >> 12;
      v7 = (__PAIR__((uint)v7, v4) + v3 * v3) >> 32;
      v4 += v3 * v3;
      v6 = -v11;
    }
    while ( v8 < v5 );
    dword_221A400[2259] = -v11;
    dword_221A400[2262] = v3;
  }
  a1[v5 - 1] = v3;
  REG_DIVCNT = 1;
  REG_DIV_NUMER_L = v4;
  REG_DIV_NUMER_H = v7;
  REG_DIV_DENOM_L = v5;
  REG_DIV_DENOM_H = 0;
  while ( REG_DIVCNT & 0x8000 )
    ;
  return REG_DIV_RESULT_L;
}

//----- (022055D0) --------------------------------------------------------
int *Function_22055d0()
{
  int v0;
  int v1;
  int v2;
  int *result;
  int v4;

  v0 = 0;
  dword_221A400[2261] = 0;
  dword_221A400[2260] = 413;
  v1 = 0;
  do
  {
    v2 = 2 * v0++;
    *(ushort *)((char *)&dword_221A400[2547] + v2) = 0;
  }
  while ( v0 < 2048 );
  result = &dword_221A400[2263];
  do
  {
    v4 = *((short *)dword_221A124 + v1);
    dword_221A400[v1 + 2269] = 0;
    dword_221A400[v1++ + 2263] = v4;
  }
  while ( v1 < 6 );
  return result;
}

//----- (0220564C) --------------------------------------------------------
uint *__fastcall Function_220564c(uint *a1, uint a2, int a3, uint a4)
{
  return MIi_CpuCopyFast(a1, (uint *)&dword_221A400[2275], a2, a4);
}

//----- (02205664) --------------------------------------------------------
int *__fastcall Function_2205664(int *result, int a2, uint a3, uint a4)
{
  uint v4;
  uint v5;
  int v6;
  int v7;
  short v8;
  short v9;
  uint v10;
  int v11;
  int v12;
  ull v13;

  v13 = 0LL;
  v4 = 0;
  v5 = a3 >> 1;
  if ( v5 )
  {
    do
    {
      *((ushort *)&dword_221A400[2547] + dword_221A400[2261]) = *(ushort *)(a2 + 2 * v4);
      dword_221A400[2269] = *((short *)&dword_221A400[2547] + dword_221A400[2260]);
      dword_221A400[2274] = dword_221A400[2273];
      dword_221A400[2273] = dword_221A400[2272];
      dword_221A400[2272] = dword_221A400[2271];
      dword_221A400[2271] = dword_221A400[2270];
      v6 = dword_221A400[2273] * dword_221A400[2267]
         + dword_221A400[2274] * dword_221A400[2268]
         + dword_221A400[2272] * dword_221A400[2266]
         + dword_221A400[2271] * dword_221A400[2265]
         + dword_221A400[2270] * dword_221A400[2264]
         + dword_221A400[2269] * dword_221A400[2263];
      dword_221A400[2270] = dword_221A400[2269];
      if ( v6 <= 1073709056 )
      {
        if ( v6 < -1073741824 )
          v6 = -1073741824;
      }
      else
      {
        v6 = 1073709056;
      }
      dword_221A400[2261] = (dword_221A400[2261] + 1) & 0x7FF;
      v7 = 2 * v4;
      dword_221A400[2260] = (dword_221A400[2260] + 1) & 0x7FF;
      *(ushort *)(a2 + v7) = v6 >> 15;
      v8 = *(ushort *)(a2 + 2 * v4);
      v9 = *((ushort *)result + v4++);
      *(ushort *)(a2 + v7) = v9;
      v13 += v8 * (int)v8;
    }
    while ( v4 < v5 );
  }
  REG_DIVCNT = 1;
  REG_DIV_NUMER_H = v13 >> 32;
  REG_DIV_NUMER_L = v13;
  REG_DIV_DENOM_L = v5;
  REG_DIV_DENOM_H = 0;
  while ( REG_DIVCNT & 0x8000 )
    ;
  REG_SQRTCNT = 0;
  REG_SQRT_PARAM_L = REG_DIV_RESULT_L;
  while ( REG_SQRTCNT & 0x8000 )
    ;
  if ( 3 * REG_SQRT_RESULT >= 2 * a4 )
  {
    if ( a4 < REG_SQRT_RESULT )
      LOWORD(dword_221A400[2258]) = 4;
    v10 = 0;
    if ( SLOWORD(dword_221A400[2258]) < 4 )
      ++LOWORD(dword_221A400[2258]);
    if ( v5 )
    {
      do
      {
        v11 = 2 * v10;
        v12 = *((short *)result + v10++);
        *(ushort *)((char *)result + v11) = v12 >> SLOBYTE(dword_221A400[2258]);
      }
      while ( v10 < v5 );
    }
  }
  else
  {
    result = &dword_221A400[2258];
    LOWORD(dword_221A400[2258]) = 0;
  }
  return result;
}

//----- (02205880) --------------------------------------------------------
int *__fastcall Function_2205880(int *a1, uint a2, uint a3)
{
  return Function_2205664(a1, (int)&dword_221A400[2275], a2, a3);
}

//----- (022058A0) --------------------------------------------------------
int __fastcall Function_22058a0(int result, int a2, int a3, uint a4)
{
  uint v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;

  v4 = 0;
  if ( a4 >> 1 )
  {
    do
    {
      v5 = *(short *)(result + 2 * v4) + *(short *)(a2 + 2 * v4);
      if ( v5 <= 0x7FFF )
      {
        if ( v5 < -32768 )
          LOWORD(v5) = -32768;
      }
      else
      {
        LOWORD(v5) = 0x7FFF;
      }
      *(ushort *)(a3 + 2 * v4) = v5;
      v6 = *(short *)(result + 2 * v4 + 2) + *(short *)(a2 + 2 * v4 + 2);
      if ( v6 <= 0x7FFF )
      {
        if ( v6 < -32768 )
          LOWORD(v6) = -32768;
      }
      else
      {
        LOWORD(v6) = 0x7FFF;
      }
      *(ushort *)(a3 + 2 * v4 + 2) = v6;
      v7 = *(short *)(result + 2 * v4 + 4) + *(short *)(a2 + 2 * v4 + 4);
      if ( v7 <= 0x7FFF )
      {
        if ( v7 < -32768 )
          LOWORD(v7) = -32768;
      }
      else
      {
        LOWORD(v7) = 0x7FFF;
      }
      *(ushort *)(a3 + 2 * v4 + 4) = v7;
      v8 = *(short *)(result + 2 * v4 + 6) + *(short *)(a2 + 2 * v4 + 6);
      if ( v8 <= 0x7FFF )
      {
        if ( v8 < -32768 )
          LOWORD(v8) = -32768;
      }
      else
      {
        LOWORD(v8) = 0x7FFF;
      }
      v9 = a3 + 2 * v4;
      v4 += 4;
      *(ushort *)(v9 + 6) = v8;
    }
    while ( v4 < a4 >> 1 );
  }
  return result;
}

//----- (02205988) --------------------------------------------------------
int __fastcall Function_2205988(int a1)
{
  int v1;
  int result;
  int v3;
  bool v4;
  uint v5;
  bool v6;
  uint v7;

  v1 = a1;
  Function_2000b9c_Dummy("[SDK+Abiosso:libVCT 1.3.1]");
  if ( !v1 )
    return 0;
  if ( dword_221A400[3573] )
    return 1;
  v3 = *(uint *)(v1 + 8);
  v4 = v3 == 1;
  if ( v3 != 1 )
    v4 = v3 == 2;
  if ( !v4 && v3 != 3 )
    return 0;
  if ( !*(uint *)(v1 + 24) )
    return 0;
  v5 = *(uint *)(v1 + 16);
  v6 = v5 == 0;
  if ( v5 )
    v6 = *(uint *)(v1 + 20) == 0;
  if ( v6 )
    return 0;
  if ( (v5 >> 31) + __ROR4__((v5 << 27) - (v5 >> 31), 27) )
    return 0;
  MI_CpuFill8(&dword_221A400[3574], 0, 0x18u);
  result = 0;
  dword_221A400[3575] = *(uint *)(v1 + 24);
  dword_221A400[3576] = *(uint *)(v1 + 28);
  dword_221A400[3578] = *(uint *)(v1 + 8);
  dword_221A400[3577] = 0;
  if ( *(uchar *)(v1 + 12) < 0x20u )
  {
    LOBYTE(dword_221A400[3574]) = *(uchar *)(v1 + 12);
    if ( Function_2205128(*(uint *)(v1 + 16), *(uint *)(v1 + 20)) )
    {
      if ( Function_22044ac((ushort **)v1, v7) )
      {
        if ( Function_2202698() )
        {
          result = 1;
          dword_221A400[3573] = 1;
        }
        else
        {
          Function_22045c0();
          Function_22051f0();
          result = 0;
        }
      }
      else
      {
        Function_22051f0();
        result = 0;
      }
    }
    else
    {
      Function_22051f0();
      result = 0;
    }
  }
  return result;
}

//----- (02205AC0) --------------------------------------------------------
int *Function_2205ac0()
{
  int *result;

  Function_2202794();
  Function_22045c0();
  Function_22051f0();
  result = &dword_221A400[3571];
  dword_221A400[3578] = 0;
  dword_221A400[3573] = 0;
  return result;
}

//----- (02205AE8) --------------------------------------------------------
int *Function_2205ae8()
{
  int *result;

  result = &dword_221A400[3571];
  if ( dword_221A400[3573] )
  {
    ++dword_221A400[3571];
    if ( !(dword_221A400[3571] & 0xF) )
      Function_22045d8();
    result = (int *)Function_22033f8();
    if ( result )
      result = (int *)Function_2203328();
  }
  return result;
}

//----- (02205B2C) --------------------------------------------------------
int __fastcall Function_2205b2c(int a1)
{
  int v1;
  int v2;
  int result;
  int v4;

  v1 = a1;
  v2 = Function_2205ba0();
  switch ( v2 )
  {
    case 0:
      goto LABEL_10;
    case 1:
      ((void (__fastcall *)(int, int))dword_221A400[3575])(v1, v4);
      return 1;
    case 2:
      result = 0;
      break;
    default:
LABEL_10:
      result = 1;
      break;
  }
  return result;
}

//----- (02205BA0) --------------------------------------------------------
int __fastcall Function_2205ba0(int a1, uint *a2, int a3, uint *a4)
{
  uchar *v4;
  int v5;
  int v6;
  int v7;
  int result;
  bool v9;
  int v10;
  int v11;
  int v12;
  bool v13;

  v4 = a2;
  v5 = a1;
  v6 = a3;
  v7 = (int)a4;
  if ( !a2 )
    return 0;
  if ( *a2 != 1599488852 )
    return 2;
  v9 = dword_221A400[3578] == 0;
  if ( dword_221A400[3578] )
    v9 = dword_221A400[3573] == 0;
  if ( v9 )
    return 0;
  *a4 = 0;
  a4[1] = 0;
  v10 = OS_GetTick();
  v12 = (uchar)v4[4];
  if ( (v12 & 0xF0) == 64 )
  {
    ++dword_221A400[3572];
    Function_220313c(v5, (int)v4, v6, v10, v11);
    result = 0;
  }
  else
  {
    v13 = v12 == 0;
    if ( v4[4] )
      v13 = v12 == 255;
    if ( v13 )
      result = Function_2204684(v5, v4, v6, v7) != 0;
    else
      result = 0;
  }
  return result;
}

//----- (02205C7C) --------------------------------------------------------
int __fastcall Function_2205c7c(void *a1)
{
  void *v1;
  int v2;

  v1 = a1;
  Function_2000b9c_Dummy("[SDK+NINTENDO:WiFi2.1.30003.0709200229]");
  off_221A134 = v1;
  v2 = Function_2205cf8();
  return Function_2205cb8(v2);
}

//----- (02205CB8) --------------------------------------------------------
int Function_2205cb8()
{
  int v0;

  v0 = Function_2205ef0(MEMORY[0x20]);
  if ( v0 >= 0 )
    dword_221A400[3583] = Function_2206224(dword_221A16C);
  return v0;
}

//----- (02205CF8) --------------------------------------------------------
int Function_2205cf8()
{
  int v0;
  int v1;
  int v2;
  int v3;
  int v4;

  MI_CpuFill8(&dword_221A400[3584], 0, 0x30u);
  dword_221A400[3585] = (int)MEMORY[0x18];
  dword_221A400[3586] = MEMORY[0x1C];
  dword_221A400[3588] = (int)Function_2205ed8;
  dword_221A400[3589] = 0;
  dword_221A400[3590] = 0;
  dword_221A400[3595] = dword_221A400[3580];
  v0 = MEMORY[0x24];
  if ( !MEMORY[0x24] )
    v0 = 0x4000;
  dword_221A400[3592] = v0;
  v1 = MEMORY[0x28];
  if ( !MEMORY[0x28] )
    v1 = MEMORY[0x18](dword_221A400[3592]);
  dword_221A400[3591] = v1;
  v2 = MEMORY[0x30];
  v3 = MEMORY[0x34];
  if ( !MEMORY[0x30] )
    v2 = 576;
  if ( !MEMORY[0x34] )
    v3 = 4288;
  word_221A156 = v3;
  word_221A158 = v3 / 2;
  dword_221A400[3593] = v2 - 40;
  dword_221A400[3728] = 0;
  if ( MEMORY[0] )
  {
    dword_221A400[3584] = 0;
    dword_221A400[3587] = (int)Function_2205ec0;
    dword_221A400[3582] = 1;
    dword_221A400[3594] = dword_221A400[3581];
  }
  else
  {
    dword_221A400[3582] = 0;
    dword_221A400[3584] = 1;
    dword_221A400[3587] = (int)Function_2205e54;
  }
  v4 = MEMORY[0x2C];
  if ( !MEMORY[0x2C] )
    v4 = 11;
  Function_2209108(v4);
  Function_221543c(Function_220962c);
  Function_22090b0(Function_2207d54);
  return Function_2208e24(&dword_221A400[3584]);
}

//----- (02205E54) --------------------------------------------------------
int *Function_2205e54()
{
  int *result;

  dword_221A400[3728] = MEMORY[4];
  dword_221A400[3715] = MEMORY[8];
  result = &dword_221A400[3580];
  dword_221A400[3719] = MEMORY[0xC];
  dword_221A400[3732] = MEMORY[0x10];
  dword_221A400[3733] = MEMORY[0x14];
  dword_221A400[3582] |= 2u;
  return result;
}

//----- (02205EC0) --------------------------------------------------------
int *Function_2205ec0()
{
  int *result;

  result = &dword_221A400[3580];
  dword_221A400[3582] |= 2u;
  return result;
}

//----- (02205ED8) --------------------------------------------------------
BOOL Function_2205ed8()
{
  return Function_2215398() != 0;
}

//----- (02205EF0) --------------------------------------------------------
int __fastcall Function_2205ef0(int a1)
{
  int v1;
  uint v2;
  int v3;
  int result;
  int i;

  v1 = a1;
  v2 = (4 * a1 + 3) & 0xFFFFFFFC;
  v3 = MEMORY[0x18](((44 * a1 + 3) & 0xFFFFFFFC) + v2);
  if ( !v3 )
    return -1;
  OS_InitMessageQueue(&dword_221A400[3597], v3, v1);
  for ( i = v3 + v2; v1 > 0; i += 44 )
  {
    Function_2206034(i);
    --v1;
  }
  result = 0;
  dword_221A400[3596] = v3;
  return result;
}

//----- (02205F84) --------------------------------------------------------
int Function_2205f84()
{
  int result;

  if ( dword_221A400[3604] < dword_221A400[3602] )
    return -1;
  MEMORY[0x1C](dword_221A400[3596]);
  result = 0;
  dword_221A400[3596] = 0;
  return result;
}

//----- (02205FCC) --------------------------------------------------------
int __fastcall Function_2205fcc(char a1, int a2, int a3, int a4)
{
  int result;
  int v5;

  v5 = a4;
  if ( OS_ReceiveMessage(&dword_221A400[3597], &v5, a1) )
    result = v5;
  else
    result = 0;
  return result;
}

//----- (02205FF4) --------------------------------------------------------
int __fastcall Function_2205ff4(int a1, int a2, int a3, int a4)
{
  char v4;
  int v5;
  int v6;
  int result;

  v4 = a3;
  v5 = a1;
  v6 = a2;
  result = Function_2205fcc(a3, a2, a3, a4);
  if ( result )
  {
    *(uint *)result = v5;
    *(uint *)(result + 4) = v6;
    *(uint *)(result + 8) = 0;
    *(uchar *)(result + 12) = *(uchar *)(v6 + 115);
    *(uchar *)(result + 13) = v4;
  }
  return result;
}

//----- (02206034) --------------------------------------------------------
int __fastcall Function_2206034(int result)
{
  if ( result )
    result = OS_SendMessage(&dword_221A400[3597], result, 0);
  return result;
}

//----- (02206054) --------------------------------------------------------
int __fastcall Function_2206054(int a1)
{
  int v1;

  v1 = *(uint *)(a1 + 100);
  if ( !v1 )
    v1 = *(uint *)(a1 + 104);
  return v1;
}

//----- (02206068) --------------------------------------------------------
int __fastcall Function_2206068(uint *a1, int a2)
{
  int v2;
  bool v3;
  int v4;
  int result;

  v2 = a2;
  v3 = !a2 || *(uchar *)(a2 + 13) & 1;
  v4 = OS_SendMessage(a1, a2, v3);
  if ( !v4 )
    Function_2206034(v2);
  if ( v4 )
    result = 0;
  else
    result = -42;
  return result;
}

//----- (022060B4) --------------------------------------------------------
int __fastcall Function_22060b4(int a1, int a2)
{
  int v2;
  uint *v3;

  v2 = a2;
  v3 = (uint *)Function_2206054(a1);
  return Function_2206068(v3, v2);
}

//----- (022060CC) --------------------------------------------------------
int __fastcall Function_22060cc(uint *a1, int a2, int a3, int a4)
{
  int v4;
  uint *v5;
  char v7;
  int v8;
  int v9[8];
  int v10;

  v10 = a4;
  v4 = a2;
  v5 = a1;
  if ( *(uchar *)(a2 + 13) == 1 )
  {
    OS_InitMessageQueue(v9, (int)&v7, 1);
    *(uint *)(v4 + 8) = v9;
    Function_2206068(v5, v4);
    OS_ReceiveMessage(v9, &v8, 1);
  }
  else
  {
    *(uint *)(a2 + 8) = 0;
    v8 = Function_2206068(a1, a2);
  }
  return v8;
}

//----- (0220613C) --------------------------------------------------------
int __fastcall Function_220613c(int a1, int a2, int a3, int a4)
{
  return Function_22060cc(*(uint **)(a1 + 100), a2, a3, a4);
}

//----- (0220614C) --------------------------------------------------------
int __fastcall Function_220614c(int a1, int a2, int a3, int a4)
{
  return Function_22060cc(*(uint **)(a1 + 104), a2, a3, a4);
}

//----- (0220615C) --------------------------------------------------------
int __fastcall Function_220615c(int a1, int a2)
{
  int v2;
  uint *v3;
  int v4;
  int v5;

  v2 = a2;
  v3 = (uint *)Function_2206054(a1);
  return Function_22060cc(v3, v2, v4, v5);
}

//----- (02206174) --------------------------------------------------------
int __fastcall Function_2206174(int *a1, int a2, int a3, int a4)
{
  int *v4;
  int result;
  int v6;
  int v7;
  int v8;
  uint *v9;
  int v10;
  int v11;

  v11 = a4;
  v4 = a1;
  while ( 1 )
  {
    Function_20c2944(v4, &v10, 1);
    result = v10;
    if ( !v10 )
      break;
    v6 = (*(int (**)(void))v10)();
    v7 = OS_DisableInterrupts();
    OS_DisableScheduler();
    OS_ReceiveMessage(v4, 0, 0);
    v8 = *(uint *)(v10 + 4);
    if ( v8 )
      *(uint *)(v8 + 108) = v6;
    v9 = *(uint **)(v10 + 8);
    if ( v9 )
      OS_SendMessage(v9, v6, 0);
    Function_2206034(v10);
    OS_EnableScheduler();
    OS_RestoreInterrupts(v7);
  }
  return result;
}

//----- (0220621C) --------------------------------------------------------
#error "Failed to decompile function. "

//----- (02206224) --------------------------------------------------------
int Function_2206224()
{
  int v0;
  int v1;
  int v3;

  v1 = Function_22062d4();
  if ( !v1 )
    return -49;
  v3 = Function_2205ff4((int)Function_2206260, v1, 1, v0);
  Function_220615c(v1, v3);
  return v1;
}

//----- (02206260) --------------------------------------------------------
int __fastcall Function_2206260(int a1)
{
  int v1;
  int v2;
  int v3;

  v1 = *(uint *)(a1 + 4);
  Function_220bcf0(*(uint *)(a1 + 4));
  switch ( *(char *)(v1 + 115) )
  {
    case 0:
    case 4:
      v2 = Function_220bdfc(*(uint *)(v1 + 104) + 32);
      Function_220bda8(v2);
      break;
    case 1:
      v3 = ((int (*)(void))Function_220bda8)();
      Function_220bd1c(v3);
      Function_220be54(Function_2207188);
      break;
    case 2:
      ((void (*)(void))Function_220bd1c)();
      break;
    default:
      break;
  }
  *(ushort *)(v1 + 112) = 1;
  return 0;
}

//----- (022062D4) --------------------------------------------------------
ushort *__fastcall Function_22062d4(int a1)
{
  int v1;
  uint v2;
  int v3;
  ushort *v4;
  ushort *v5;

  v1 = a1;
  v2 = Function_220633c();
  v3 = OS_DisableInterrupts();
  v4 = (ushort *)MEMORY[0x18](v2);
  v5 = v4;
  if ( v4 )
  {
    MI_CpuFill8(v4, 0, v2);
    Function_22063e4(v5, v1);
    Function_2208214(v5);
  }
  OS_RestoreInterrupts(v3);
  return v5;
}

//----- (0220633C) --------------------------------------------------------
int __fastcall Function_220633c(ushort *a1)
{
  ushort *v1;
  int v2;
  int v3;
  int v4;
  int v5;
  int v6;
  int v7;

  v1 = a1;
  v2 = 128;
  if ( a1[1] )
  {
    v3 = ((int (*)(void))Function_2208208)() + 404;
    v4 = v3 + Function_2208208(v1[4]);
    v2 = v4 + Function_22063bc(v1 + 8);
  }
  if ( v1[3] )
  {
    v5 = v2 + 272 + Function_2208208(v1[3]);
    v6 = v5 + Function_2208208(v1[5]);
    v7 = v6 + Function_2208208(v1[6]);
    v2 = v7 + Function_22063bc(v1 + 10);
  }
  return v2;
}

//----- (022063BC) --------------------------------------------------------
int __fastcall Function_22063bc(ushort *a1)
{
  ushort *v1;
  int v2;

  v1 = a1;
  v2 = Function_2208208(4 * *((uchar *)a1 + 3));
  return v2 + Function_2208208(*v1);
}

//----- (022063E4) --------------------------------------------------------
int __fastcall Function_22063e4(int a1, int a2)
{
  ushort *v2;
  int v3;
  int v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;

  v2 = (ushort *)a2;
  v3 = a1;
  v4 = a1 + 128;
  *(uchar *)(a1 + 115) = *(uchar *)a2;
  *(uchar *)(a1 + 114) = *(uchar *)(a2 + 1);
  if ( *(ushort *)(a2 + 2) )
  {
    *(uint *)(a1 + 100) = v4;
    *(ushort *)(a1 + 380) = *(ushort *)(a2 + 4);
    v5 = a1 + 128;
    v6 = Function_2206508(a1 + 404, a1 + 128, a2 + 16);
    v7 = Function_22064e0(v6, v3 + 60, v2[1]);
    v8 = Function_22064e0(v7, v3 + 80, v2[4]);
    *(ushort *)(v4 + 266) = v2[7];
    *(uint *)(v4 + 272) = 0;
    v4 = v8;
    *(uint *)(v5 + 268) = 0;
  }
  if ( v2[3] )
  {
    *(uint *)(v3 + 104) = v4;
    *(uint *)(v4 + 268) = v3;
    v9 = v4;
    v10 = Function_2206508(v4 + 272, v4, v2 + 10);
    v11 = Function_22064e0(v10, v3 + 72, v2[3]);
    v12 = Function_22064e0(v11, v3 + 88, v2[5]);
    v13 = Function_22064e0(v12, v4 + 248, v2[6]);
    *(uint *)(v4 + 264) = 0;
    v4 = v13;
    *(uint *)(v9 + 260) = 0;
  }
  else
  {
    *(uint *)(v3 + 104) = *(uint *)(dword_221A400[3583] + 104);
  }
  return v4;
}

//----- (022064E0) --------------------------------------------------------
int __fastcall Function_22064e0(int a1, uint *a2, int a3)
{
  int v3;

  v3 = a1;
  if ( !a3 )
    a1 = 0;
  a2[1] = a1;
  *a2 = a3;
  return v3 + Function_2208208(a3);
}

//----- (02206508) --------------------------------------------------------
int __fastcall Function_2206508(int a1, uint *a2, ushort *a3)
{
  ushort *v3;
  int v4;
  uint *v5;
  int v6;

  v3 = a3;
  v4 = a1;
  v5 = a2;
  v6 = Function_22063bc(a3);
  OS_InitMessageQueue(v5, v4, *((uchar *)v3 + 3));
  OS_InitMutex(v5 + 56);
  OS_CreateThread(v5 + 8, (int)Function_2206174, (int)v5, v4 + v6, *v3, *((uchar *)v3 + 2));
  OS_WakeupThreadDirect((int)(v5 + 8));
  return v4 + v6;
}

//----- (0220657C) --------------------------------------------------------
int __fastcall Function_220657c(int a1)
{
  int v1;
  int v3;
  int v4;
  int v5;
  bool v6;

  v1 = a1;
  if ( Function_22082cc() )
    return -28;
  v3 = 0;
  if ( v1 && *(ushort *)(v1 + 112) & 1 )
    v3 = 1;
  if ( !v3 )
    return -39;
  if ( *(ushort *)(v1 + 112) & 2 )
    return -28;
  v4 = *(char *)(v1 + 115);
  v5 = 1;
  v6 = v4 == 0;
  if ( *(uchar *)(v1 + 115) )
    v6 = v4 == 4;
  if ( !v6 )
    v5 = 0;
  if ( !v5 )
    return -28;
  if ( *(uchar *)(v1 + 114) == 1 )
    return 0;
  return -6;
}

//----- (022065FC) --------------------------------------------------------
int __fastcall Function_22065fc(int a1, int a2, int a3)
{
  int v3;
  int v4;
  int v5;
  int result;
  int v7;
  int v8;
  int v9;
  bool v10;
  int v11;
  int v12;

  v3 = a1;
  v4 = a2;
  v5 = a3;
  if ( Function_22082cc() )
    return -28;
  v7 = 0;
  if ( v3 && *(ushort *)(v3 + 112) & 1 )
    v7 = 1;
  if ( !v7 )
    return -39;
  if ( *(ushort *)(v3 + 112) & 2 )
    return -28;
  v8 = *(char *)(v3 + 115);
  v9 = 1;
  v10 = v8 == 0;
  if ( *(uchar *)(v3 + 115) )
    v10 = v8 == 4;
  if ( !v10 )
    v9 = 0;
  if ( !v9 )
    return -28;
  if ( *(uchar *)(v3 + 114) != 1 )
    return -6;
  result = Function_2206224();
  v11 = result;
  if ( result >= 0 )
  {
    v12 = *(ushort *)(v3 + 116);
    result = Function_2206808();
    if ( result >= 0 )
    {
      result = Function_22066c0(v11, v4, v5);
      if ( result >= 0 )
        result = v11;
    }
  }
  return result;
}

//----- (022066C0) --------------------------------------------------------
int __fastcall Function_22066c0(int a1, int a2, int a3)
{
  int v3;
  int v4;
  int v5;
  int v6;
  int v8;
  int v9;
  int v10;
  bool v11;
  int v12;
  int v13;
  int v14;

  v3 = a1;
  v4 = a2;
  v5 = a3;
  if ( Function_22082cc() )
    return -28;
  v8 = 0;
  if ( v3 && *(ushort *)(v3 + 112) & 1 )
    v8 = 1;
  if ( !v8 )
    return -39;
  if ( *(ushort *)(v3 + 112) & 2 )
    return -28;
  v9 = *(char *)(v3 + 115);
  v10 = 1;
  v11 = v9 == 0;
  if ( *(uchar *)(v3 + 115) )
    v11 = v9 == 4;
  if ( !v11 )
    v10 = 0;
  if ( !v10 )
    return -28;
  if ( *(uchar *)(v3 + 114) != 1 )
    return -6;
  if ( !*(ushort *)(v3 + 116) )
    return -28;
  v12 = Function_2205ff4((int)Function_2206790, v3, 1, v6);
  *(ushort *)(v12 + 16) = *(ushort *)(v3 + 116);
  *(uint *)(v12 + 20) = v4;
  *(uint *)(v12 + 24) = v5;
  v13 = *(short *)(v3 + 112) | 2;
  *(ushort *)(v3 + 112) = v13;
  return Function_220613c(v3, v12, v13, v14);
}

//----- (02206790) --------------------------------------------------------
int __fastcall Function_2206790(int a1)
{
  int v1;
  int v2;
  int v3;
  int v4;
  int v5;
  short v7;
  char v8;

  v1 = a1;
  v2 = *(uint *)(a1 + 4);
  v3 = *(uint *)(v2 + 100);
  OS_LockMutex((uint *)(v3 + 224));
  v4 = Function_220bd48(*(ushort *)(v1 + 16), 0, 0);
  Function_220be70(v4);
  *(uint *)(v3 + 248) = 0;
  v5 = Function_220bf9c(&v7, &v8);
  **(ushort **)(v1 + 20) = v7;
  **(uint **)(v1 + 24) = v5;
  *(ushort *)(v2 + 112) |= 4u;
  OS_UnlockMutex((int *)(v3 + 224));
  return 0;
}

//----- (02206808) --------------------------------------------------------
int __fastcall Function_2206808(int a1, short a2)
{
  int v2;
  short v3;
  int result;
  int v5;

  v2 = a1;
  v3 = a2;
  if ( Function_22082cc() )
    return -28;
  v5 = 0;
  if ( v2 && *(ushort *)(v2 + 112) & 1 )
    v5 = 1;
  if ( !v5 )
    return -39;
  if ( *(ushort *)(v2 + 112) & 2 )
    return -7;
  *(ushort *)(v2 + 116) = v3;
  if ( *(uchar *)(v2 + 115) == 1 )
    result = Function_2206960(v2);
  else
    result = 0;
  return result;
}

//----- (02206878) --------------------------------------------------------
int __fastcall Function_2206878(int a1, short a2, int a3)
{
  int v3;
  short v4;
  int v5;
  int result;
  int v7;
  int v8;
  int v9;
  bool v10;

  v3 = a1;
  v4 = a2;
  v5 = a3;
  if ( Function_22082cc() || *(ushort *)(v3 + 112) & 8 )
    return -28;
  v7 = 0;
  if ( v3 && *(ushort *)(v3 + 112) & 1 )
    v7 = 1;
  if ( !v7 )
    return -39;
  v8 = *(char *)(v3 + 115);
  v9 = 1;
  v10 = v8 == 0;
  if ( *(uchar *)(v3 + 115) )
    v10 = v8 == 4;
  if ( !v10 )
    v9 = 0;
  if ( v9 )
  {
    if ( *(ushort *)(v3 + 112) & 4 )
    {
      if ( *(uchar *)(v3 + 114) == 1 )
        result = -30;
      else
        result = 0;
    }
    else if ( *(ushort *)(v3 + 112) & 2 )
    {
      if ( *(ushort *)(v3 + 112) & 0x40 )
        result = *(uint *)(v3 + 108);
      else
        result = -26;
    }
    else
    {
      *(ushort *)(v3 + 118) = v4;
      *(uint *)(v3 + 120) = v5;
      result = Function_2206960(v3);
      if ( *(uchar *)(v3 + 114) != 1 )
        result = -26;
    }
  }
  else
  {
    *(ushort *)(v3 + 118) = v4;
    *(uint *)(v3 + 120) = v5;
    result = 0;
  }
  return result;
}

//----- (02206960) --------------------------------------------------------
int __fastcall Function_2206960(int a1, int a2, int a3, int a4)
{
  int v4;
  int v5;
  int v6;
  int v8;

  v4 = a1;
  v5 = Function_2205ff4((int)Function_22069b8, a1, *(char *)(a1 + 114), a4);
  if ( !v5 )
    return -33;
  *(ushort *)(v5 + 16) = *(ushort *)(v4 + 116);
  *(ushort *)(v5 + 18) = *(ushort *)(v4 + 118);
  *(uint *)(v5 + 20) = *(uint *)(v4 + 120);
  v8 = *(short *)(v4 + 112) | 2;
  *(ushort *)(v4 + 112) = v8;
  return Function_220613c(v4, v5, v8, v6);
}

//----- (022069B8) --------------------------------------------------------
int __fastcall Function_22069b8(int a1)
{
  int v1;
  int v2;
  int v3;
  int v4;
  int v5;
  bool v6;
  int result;

  v1 = a1;
  v2 = *(uint *)(a1 + 4);
  v3 = 0;
  v4 = *(uint *)(v2 + 100);
  OS_LockMutex((uint *)(v4 + 224));
  Function_220bd48(*(ushort *)(v1 + 16), *(ushort *)(v1 + 18), *(uint *)(v1 + 20));
  *(uint *)(v4 + 248) = 0;
  v5 = *(char *)(v1 + 12);
  v6 = v5 == 0;
  if ( *(uchar *)(v1 + 12) )
    v6 = v5 == 4;
  if ( v6 )
    v3 = Function_220bf5c(v5);
  OS_UnlockMutex((int *)(v4 + 224));
  if ( v3 )
  {
    result = -76;
    *(ushort *)(v2 + 112) |= 0x40u;
  }
  else
  {
    result = 0;
    *(ushort *)(v2 + 112) |= 4u;
  }
  return result;
}

//----- (02206A3C) --------------------------------------------------------
int __fastcall Function_2206a3c(int a1, int a2, int a3, int a4, int a5, int a6)
{
  int v6;
  int v7;
  int v8;
  int v9;
  int v11;
  int v12;
  int v13;
  int v14;
  bool v15;
  int v16;
  uint *v17;
  int v18;

  v6 = a1;
  v7 = a2;
  v8 = a3;
  v9 = a4;
  if ( Function_22082cc() )
    return -28;
  if ( !(a6 & 4) && *(uchar *)(v6 + 114) )
  {
    if ( OS_GetProcMode() == 18 )
      return -28;
    v11 = 1;
  }
  else
  {
    if ( *(uchar *)(v6 + 115) == 4 )
      return -28;
    v11 = 0;
  }
  v12 = 0;
  if ( v6 && *(ushort *)(v6 + 112) & 1 )
    v12 = 1;
  if ( !v12 )
    return -39;
  v13 = *(char *)(v6 + 115);
  v14 = 1;
  v15 = v13 == 0;
  if ( *(uchar *)(v6 + 115) )
    v15 = v13 == 4;
  if ( !v15 )
    v14 = 0;
  if ( v14 && (!(*(ushort *)(v6 + 112) & 4) || *(ushort *)(v6 + 112) & 8) )
    return -56;
  v16 = *(uint *)(v6 + 100);
  v17 = (uint *)(v16 + 224);
  if ( v11 & 1 )
  {
    OS_LockMutex(v17);
  }
  else if ( !OS_TryLockMutex((int)v17) )
  {
    return -6;
  }
  v18 = Function_2206b84(v6, v7, v8, v9, a5, v11, a6);
  OS_UnlockMutex((int *)(v16 + 224));
  return v18;
}

//----- (02206B84) --------------------------------------------------------
int __fastcall Function_2206b84(int a1, int a2, int a3, int a4, int a5, int a6, char a7)
{
  char v7;
  int v8;
  bool v9;
  int v10;
  int v11;
  int v12;

  v8 = a1;
  v9 = (a7 & 2) == 0;
  v10 = *(uint *)(a1 + 100);
  if ( a7 & 2 )
    v9 = v10 == 0;
  v11 = !v9;
  if ( v11 )
  {
    v7 = *(uchar *)(v10 + 254);
    *(uchar *)(v10 + 254) = 1;
  }
  if ( *(uchar *)(a1 + 115) == 1 )
  {
    v12 = Function_2207044(a1);
  }
  else
  {
    v12 = Function_2206c20(a1);
    if ( v12 >= 0 )
      Function_2206fac(v8);
  }
  if ( v11 )
    *(uchar *)(v10 + 254) = v7;
  return v12;
}

//----- (02206C20) --------------------------------------------------------
int __fastcall Function_2206c20(int a1, int a2, int a3, int a4, int a5, char a6)
{
  int v6;
  int v7;
  int v8;
  int v9;
  int result;

  v6 = a1;
  v7 = a2;
  v8 = a3;
  v9 = a4;
  if ( *(uchar *)(a1 + 115) == 4 )
    return Function_2206e10(a1, a2, a3, a4);
  result = Function_2206c94();
  if ( result == -6 )
  {
    if ( a6 & 1 )
      result = Function_2206e10(v6, v7, v8, v9);
  }
  return result;
}

//----- (02206C94) --------------------------------------------------------
int __fastcall Function_2206c94(int a1, uint a2, int a3, int a4, int a5)
{
  int v5;
  uint v6;
  int v7;
  ushort *v8;
  int v9;
  int v10;
  int v11;
  uint v12;
  int v13;
  int v14;
  int v15;
  bool v16;
  bool v17;
  short v19;
  short v20;
  int v21;
  int v22;
  int v23;

  v23 = a4;
  v5 = a1;
  v6 = a2;
  v7 = a3;
  v8 = (ushort *)a4;
  v9 = OS_DisableInterrupts();
  v10 = Function_2206d9c(v5, &v22, &v20, &v19, &v21);
  if ( v10 )
  {
    v13 = v22;
    if ( v22 )
    {
      v14 = *(char *)(v5 + 115);
      v15 = 1;
      if ( v7 > v22 )
        v7 = v22;
      v16 = v14 == 0;
      if ( *(uchar *)(v5 + 115) )
        v16 = v14 == 4;
      if ( !v16 )
        v15 = 0;
      if ( v15 )
        v13 = v7;
      MI_CpuCopy8(v10, v6, v7, v12);
      v11 = *(uint *)(v5 + 100);
      if ( !*(uchar *)(v11 + 254) )
        *(uint *)(v11 + 248) += v13;
    }
    else
    {
      v13 = -6;
    }
  }
  else
  {
    if ( v22 )
      v13 = -28;
    else
      v13 = 0;
    *(ushort *)(v5 + 112) &= 0xFFF9u;
  }
  if ( v13 >= 0 )
  {
    v17 = v8 == 0;
    if ( v8 )
    {
      v11 = a5;
      v17 = a5 == 0;
    }
    if ( !v17 )
    {
      *v8 = v19;
      *(uint *)v11 = v21;
    }
    if ( !*(ushort *)(v5 + 116) )
      *(ushort *)(v5 + 116) = v20;
  }
  OS_RestoreInterrupts(v9);
  return v13;
}

//----- (02206D9C) --------------------------------------------------------
int __fastcall Function_2206d9c(int a1, int *a2, ushort *a3, ushort *a4, uint *a5)
{
  int v5;
  int v6;
  int v7;
  int v8;
  int result;

  v5 = *(uint *)(a1 + 100);
  v6 = *(uint *)(v5 + 196);
  v7 = *(uint *)(v5 + 248);
  v8 = *(uint *)(v6 + 68) - v7;
  if ( v8 < 0 )
  {
    *a2 = -1;
    result = 0;
  }
  else
  {
    *a3 = *(ushort *)(v6 + 10);
    *a4 = *(ushort *)(v6 + 24);
    *a5 = *(uint *)(v6 + 28);
    *a2 = v8;
    if ( v8 || *(uchar *)(v6 + 8) == 4 )
      result = *(uint *)(v6 + 64) + v7;
    else
      result = 0;
  }
  return result;
}

//----- (02206E10) --------------------------------------------------------
int __fastcall Function_2206e10(int a1, int a2, int a3, int a4, int a5)
{
  int v5;
  int v6;
  int v7;
  int v8;
  uint *v9;
  int v10;

  v5 = a1;
  v6 = a2;
  v7 = a3;
  v8 = a4;
  v9 = (uint *)Function_2205ff4((int)Function_2206e5c, a1, 1, a4);
  v9[4] = v6;
  v9[5] = v7;
  v9[6] = v8;
  v9[7] = a5;
  return Function_220613c(v5, (int)v9, a5, v10);
}

//----- (02206E5C) --------------------------------------------------------
int __fastcall Function_2206e5c(uint *a1)
{
  int v1;
  int v2;
  uint v3;
  int v4;
  int v5;
  uint v6;
  int v7;
  int v8;
  bool v9;
  bool v10;
  int result;
  int v12;
  int v13;
  int v14;
  uint v15;
  uint v16;

  v1 = a1[1];
  v2 = *(uint *)(v1 + 100);
  v15 = a1[4];
  v3 = a1[5];
  v4 = *(uint *)(v2 + 248);
  v14 = a1[6];
  v13 = a1[7];
  while ( 1 )
  {
    v5 = Function_220c1d0(&v16);
    if ( !v5 || (int)(v16 - v4) > 0 )
      break;
    v7 = *(char *)(v1 + 115);
    v8 = 1;
    v9 = v7 == 0;
    if ( *(uchar *)(v1 + 115) )
      v9 = v7 == 4;
    if ( !v9 )
      v8 = 0;
    v10 = v8 == 0;
    if ( v8 )
      v10 = *(uchar *)(v1 + 8) == 4;
    if ( !v10 )
    {
      v5 = 0;
      break;
    }
    OS_Sleep(0xAu);
  }
  if ( *(ushort *)(v1 + 112) & 0x80 )
    return -15;
  if ( *(uchar *)(v1 + 115) == 4 )
  {
    if ( v5 )
    {
      if ( v3 > v16 )
        v3 = v16;
      MI_CpuCopy8(v5, v15, v3, v6);
      Function_220c2c4(v3);
      result = v3;
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    if ( v5 )
      v12 = Function_2206c94(v1, v15, v3, v14, v13);
    else
      v12 = 0;
    if ( v12 > 0 )
    {
      if ( *(uint *)(v2 + 248) >= (int)*(ushort *)(v2 + 252) )
        Function_2207008(v1);
      result = v12;
    }
    else
    {
      result = v12;
    }
  }
  return result;
}

//----- (02206FAC) --------------------------------------------------------
int __fastcall Function_2206fac(int a1, int a2, int a3, int a4)
{
  int v4;
  int result;
  int v6;
  int v7;
  int v8;

  v4 = a1;
  if ( *(uint *)(*(uint *)(a1 + 100) + 248) < (int)*(ushort *)(*(uint *)(a1 + 100) + 252) )
    return 0;
  v6 = Function_2205ff4((int)Function_2206ff8, a1, 0, a4);
  if ( v6 )
    result = Function_220613c(v4, v6, v7, v8);
  else
    result = -33;
  return result;
}

//----- (02206FF8) --------------------------------------------------------
int __fastcall Function_2206ff8(int a1)
{
  return Function_2207008(*(uint *)(a1 + 4));
}

//----- (02207008) --------------------------------------------------------
int __fastcall Function_2207008(int a1)
{
  int v1;
  uint v2;
  int v3;
  int v4;
  int v5;

  v1 = *(uint *)(a1 + 100);
  v2 = OS_DisableInterrupts();
  v3 = *(uint *)(v1 + 248);
  v4 = v2;
  if ( v3 )
  {
    v5 = *(uint *)(v1 + 248);
    *(uint *)(v1 + 248) = 0;
    Function_220c2c4(v5);
  }
  OS_RestoreInterrupts(v4);
  return v3;
}

//----- (02207044) --------------------------------------------------------
int __fastcall Function_2207044(int a1, uint a2, int a3, ushort *a4, uint *a5, char a6)
{
  int v6;
  int v7;
  int v8;
  int v9;
  ushort *v10;
  uint v11;
  uint v12;
  int v13;
  int v14;
  short v15;
  uint v17;
  int v18;
  int v19;

  v7 = a1;
  v8 = *(uint *)(a1 + 100);
  v17 = a2;
  v9 = *(uint *)(v8 + 260);
  v18 = a3;
  v10 = a4;
  v11 = OS_DisableInterrupts();
  v13 = *(uint *)(v8 + 260);
  v19 = v11;
  if ( !v13 )
  {
    while ( 1 )
    {
      if ( !(a6 & 1) )
      {
        v6 = -6;
        goto LABEL_11;
      }
      OS_SleepThread((uint *)(v8 + 268));
      if ( Function_22082cc(v7) )
        break;
      v14 = 0;
      if ( v7 && *(ushort *)(v7 + 112) & 1 )
        v14 = 1;
      if ( !v14 )
        break;
      v13 = *(uint *)(v8 + 260);
      if ( v13 )
        goto LABEL_11;
    }
    v6 = -56;
  }
LABEL_11:
  if ( v13 )
  {
    if ( v18 > *(ushort *)(v13 + 4) )
      v18 = *(ushort *)(v13 + 4);
    v15 = MI_CpuCopy8(v13 + 12, v17, v18, v12);
    if ( v10 )
      v15 = *(ushort *)(v13 + 6);
    if ( v10 )
      *v10 = v15;
    if ( a5 )
      *a5 = *(uint *)(v13 + 8);
    v6 = *(ushort *)(v13 + 4);
    if ( !*(uchar *)(v8 + 254) )
    {
      *(uint *)(v8 + 260) = *(uint *)v13;
      if ( !*(uint *)v13 )
        *(uint *)(v8 + 256) = 0;
      MEMORY[0x1C](v13);
      *(ushort *)(v8 + 264) -= v6;
    }
  }
  OS_RestoreInterrupts(v19);
  return v6;
}

//----- (02207188) --------------------------------------------------------
int __fastcall Function_2207188(int a1, uint a2, int a3)
{
  int v3;
  int v4;
  int v5;
  uint v6;
  int v7;
  int v8;
  uint v9;

  v3 = a3;
  v4 = *(uint *)(a3 + 100);
  v5 = a1;
  v6 = a2;
  v7 = OS_DisableInterrupts();
  if ( *(ushort *)(v4 + 266) < *(ushort *)(v4 + 264) + v6 )
  {
    ++dword_221A400[3606];
  }
  else
  {
    v8 = MEMORY[0x18](v6 + 12);
    if ( v8 )
    {
      *(ushort *)(v4 + 264) += v6;
      *(uint *)v8 = 0;
      *(ushort *)(v8 + 4) = v6;
      *(ushort *)(v8 + 6) = *(ushort *)(v3 + 24);
      v9 = *(uint *)(v3 + 28);
      *(uint *)(v8 + 8) = v9;
      MI_CpuCopy8(v5, v8 + 12, v6, v9);
      if ( *(uint *)(v4 + 256) )
        **(uint **)(v4 + 256) = v8;
      *(uint *)(v4 + 256) = v8;
      if ( !*(uint *)(v4 + 260) )
        *(uint *)(v4 + 260) = v8;
    }
    else
    {
      ++dword_221A400[3605];
    }
  }
  if ( !*(ushort *)(v3 + 116) )
    *(ushort *)(v3 + 116) = *(ushort *)(v3 + 10);
  *(ushort *)(v3 + 24) = *(ushort *)(v3 + 26);
  *(uint *)(v3 + 28) = *(uint *)(v3 + 32);
  OS_WakeupThread((int *)(v4 + 268));
  OS_RestoreInterrupts(v7);
  return 1;
}

//----- (0220729C) --------------------------------------------------------
int __fastcall Function_220729c(int a1, int a2, int a3, int a4, int a5, char a6)
{
  int v6;
  int v7;
  int v8;
  int v9;
  int v11;
  int v12;
  int v13;
  bool v14;
  int v15;
  int v16;
  int v17;

  v6 = a1;
  v7 = a2;
  v8 = a3;
  v9 = a4;
  if ( Function_22082cc(a1) )
    return -28;
  v11 = 0;
  if ( v6 && *(ushort *)(v6 + 112) & 1 )
    v11 = 1;
  if ( !v11 )
    return -39;
  v12 = *(char *)(v6 + 115);
  v13 = 1;
  v14 = v12 == 0;
  if ( *(uchar *)(v6 + 115) )
    v14 = v12 == 4;
  if ( !v14 )
    v13 = 0;
  if ( v13 && (!(*(ushort *)(v6 + 112) & 4) || *(ushort *)(v6 + 112) & 8) )
    return -56;
  v15 = *(uint *)(v6 + 104);
  if ( !(a6 & 4) && *(uchar *)(v6 + 114) )
  {
    OS_LockMutex((uint *)(v15 + 224));
    v16 = 1;
  }
  else
  {
    if ( !OS_TryLockMutex(v15 + 224) )
      return -6;
    v16 = 0;
  }
  v17 = Function_22073b0(v6, v7, v8, v9, a5, v16);
  OS_UnlockMutex((int *)(v15 + 224));
  return v17;
}

//----- (022073B0) --------------------------------------------------------
int __fastcall Function_22073b0(int a1, int a2, int a3, int a4, int a5, int a6)
{
  int v6;
  int v7;
  bool v8;
  int v9;
  int v10;
  int v11;
  int result;
  int v13;
  int v14;
  int v15;
  int v16;
  int v17;

  v17 = a4;
  v6 = a1;
  v7 = a2;
  v14 = a4;
  v8 = *(uchar *)(a1 + 115) == 1;
  v9 = a3;
  v10 = *(uint *)(*(uint *)(*(uint *)(a1 + 104) + 268) + 72);
  v11 = 0;
  if ( v8 )
  {
    if ( a3 > v10 - 42 )
      return -35;
    v15 = a3;
  }
  else
  {
    v15 = v10 - 54;
    if ( a3 <= v10 - 54 )
      v15 = a3;
  }
  if ( a3 <= 0 )
    goto LABEL_17;
  while ( 1 )
  {
    v13 = Function_22074b4(v6, v9, v15, &v16, a6);
    if ( v13 > 0 )
    {
      if ( Function_220755c(v6, v7, v13, v16, v14, a5, a6) <= 0 )
        return -6;
      v7 += v13;
      v9 -= v13;
      v11 += v13;
    }
    if ( !(a6 & 1) )
      break;
    if ( v9 <= 0 )
      goto LABEL_17;
  }
  if ( v13 > 0 )
LABEL_17:
    result = v11;
  else
    result = -6;
  return result;
}

//----- (022074B4) --------------------------------------------------------
int __fastcall Function_22074b4(int a1, int a2, int a3, uint *a4, char a5)
{
  int v5;
  int v6;
  int v7;
  uint *v8;
  int v9;
  int v10;
  int v11;
  int v12;

  v5 = a1;
  v6 = a2;
  v7 = a3;
  v8 = a4;
  v9 = *(uint *)(a1 + 104);
  if ( a3 > a2 )
    v7 = a2;
  v10 = OS_DisableInterrupts();
  while ( 1 )
  {
    v11 = Function_2207538(v5);
    v12 = v11;
    if ( v11 >= v7 )
      break;
    if ( !(a5 & 1) )
    {
      v12 = 0;
      goto LABEL_11;
    }
    OS_SleepThread((uint *)(v9 + 260));
  }
  if ( v11 >= v6 )
    v12 = v6;
  *v8 = *(ushort *)(v9 + 256);
LABEL_11:
  OS_RestoreInterrupts(v10);
  return v12;
}

//----- (02207538) --------------------------------------------------------
int __fastcall Function_2207538(int a1)
{
  int v1;
  int v2;
  int v3;
  int v4;
  int result;

  v1 = *(uint *)(a1 + 104);
  v2 = *(ushort *)(v1 + 256);
  v3 = *(ushort *)(v1 + 258);
  v4 = *(uint *)(v1 + 248);
  result = v3 - v2 - 1;
  if ( result < 0 )
    result += v4;
  return result;
}

//----- (0220755C) --------------------------------------------------------
int __fastcall Function_220755c(int a1, int a2, int a3, int a4, short a5, int a6, int a7)
{
  int v7;
  int v8;
  int v9;
  int v10;
  uint v11;
  int v12;
  bool v14;
  uint v15;
  int v16;
  int v17;
  int v18;
  short v19;
  int v20;

  v7 = a1;
  v8 = *(uint *)(a1 + 104);
  v9 = a2;
  v10 = a3;
  v11 = a4;
  v12 = Function_2205ff4((int)Function_22076d0, *(uint *)(v8 + 268), a7, a4);
  if ( !v12 )
    return -33;
  v14 = (a7 & 1) == 0;
  if ( a7 & 1 )
    v14 = *(uchar *)(v7 + 115) == 1;
  if ( v14 )
    *(uchar *)(v12 + 13) = 0;
  else
    *(uchar *)(v12 + 13) = 3;
  v15 = *(uint *)(v8 + 252);
  v16 = *(uint *)(v8 + 248);
  *(uint *)(v12 + 16) = v15 + v11;
  if ( (int)(v11 + v10) >= v16 )
  {
    *(uint *)(v12 + 20) = v16 - v11;
    *(uint *)(v12 + 24) = v15;
    v11 = v10 - *(uint *)(v12 + 20);
    *(uint *)(v12 + 28) = v11;
    MI_CpuCopy8(v9 + *(uint *)(v12 + 20), *(uint *)(v12 + 24), v11, v15);
  }
  else
  {
    *(uint *)(v12 + 20) = v10;
    *(uint *)(v12 + 24) = 0;
    LOWORD(v11) = v11 + v10;
    *(uint *)(v12 + 28) = 0;
  }
  MI_CpuCopy8(v9, *(uint *)(v12 + 16), *(uint *)(v12 + 20), v15);
  v19 = *(ushort *)(v8 + 256);
  *(ushort *)(v12 + 32) = v11;
  *(ushort *)(v8 + 256) = *(ushort *)(v12 + 32);
  if ( *(uchar *)(v7 + 115) == 1 )
  {
    if ( !*(ushort *)(v7 + 116) )
    {
      *(ushort *)(v7 + 116) = Function_220bc04();
      *(ushort *)(v7 + 10) = *(ushort *)(v7 + 116);
    }
    *(ushort *)(v12 + 36) = *(ushort *)(v7 + 116);
    v20 = *(uint *)(v7 + 120);
    if ( v20 && !a6 )
    {
      *(uint *)(v12 + 40) = v20;
      *(ushort *)(v12 + 38) = *(ushort *)(v7 + 118);
    }
    else
    {
      *(uint *)(v12 + 40) = a6;
      *(ushort *)(v12 + 38) = a5;
    }
  }
  else
  {
    *(uint *)(v12 + 40) = 0;
  }
  if ( Function_220614c(*(uint *)(v8 + 268), v12, v17, v18) )
  {
    v10 = 0;
    *(ushort *)(v8 + 256) = v19;
  }
  return v10;
}

//----- (022076D0) --------------------------------------------------------
int __fastcall Function_22076d0(int a1)
{
  int v1;
  int v2;
  int v3;
  int v4;
  int v5;
  int v6;
  bool v7;
  int v8;
  int v9;
  int v10;
  int v11;
  bool v12;
  int v13;
  bool v14;
  int v15;
  int v16;
  int v17;
  int v18;
  int v19;
  bool v20;
  int v21;

  v1 = a1;
  v2 = *(uint *)(a1 + 4);
  v3 = 0;
  v4 = *(char *)(v2 + 115);
  v5 = 1;
  v6 = *(uint *)(v2 + 104);
  v7 = v4 == 0;
  if ( *(uchar *)(v2 + 115) )
    v7 = v4 == 4;
  if ( !v7 )
    v5 = 0;
  if ( v5 && !(*(ushort *)(v2 + 112) & 4) )
  {
    v3 = -76;
  }
  else
  {
    v8 = *(uint *)(v1 + 40);
    if ( v8 )
      Function_220bd48(*(ushort *)(v1 + 36), *(ushort *)(v1 + 38), v8);
    v9 = *(char *)(v2 + 115);
    v10 = 1;
    v11 = *(uint *)(v2 + 76);
    v12 = v9 == 0;
    if ( *(uchar *)(v2 + 115) )
      v12 = v9 == 4;
    if ( !v12 )
      v10 = 0;
    if ( v10 )
      v13 = 54;
    else
      v13 = 42;
    v14 = v9 == 0;
    if ( *(uchar *)(v2 + 115) )
      v14 = v9 == 4;
    if ( v14 )
      v15 = Function_2207800(*(uint *)(v2 + 72) - v13);
    else
      v15 = *(uint *)(v2 + 72) - v13;
    while ( 1 )
    {
      v16 = Function_22078a4(v11 + v13, v15, v1);
      if ( v16 <= 0 )
        break;
      v17 = Function_220c6d8(v11 + v13, v16);
      if ( v17 <= 0 )
      {
        v18 = *(char *)(v2 + 115);
        v19 = 1;
        v20 = v18 == 0;
        if ( *(uchar *)(v2 + 115) )
          v20 = v18 == 4;
        if ( !v20 )
          v19 = 0;
        if ( v19 )
        {
          *(ushort *)(v2 + 112) &= 0xFFF1u;
          v21 = *(short *)(v2 + 112) | 0x80;
          *(ushort *)(v2 + 112) = v21;
          Function_220c078(v21);
        }
        v3 = -76;
        break;
      }
      v3 += v17;
    }
  }
  *(ushort *)(v6 + 258) = *(ushort *)(v1 + 32);
  OS_WakeupThread((int *)(v6 + 260));
  return v3;
}

//----- (02207800) --------------------------------------------------------
int __fastcall Function_2207800(uint a1)
{
  uint v1;
  int v2;
  int v3;
  int v4;
  int v5;
  bool v6;
  int v7;
  int v8;
  int result;

  v1 = a1;
  v2 = *(uint *)(dword_21CCC84 + 164);
  v3 = OS_DisableInterrupts();
  if ( v2 )
  {
    v5 = *(ushort *)(v2 + 46);
    v6 = v5 == 0;
    if ( *(ushort *)(v2 + 46) )
    {
      v4 = *(ushort *)(v2 + 44);
      v6 = v4 == 0;
    }
    if ( v6 )
    {
      v7 = 2 * dword_221A400[3593];
    }
    else
    {
      if ( v5 > v4 )
        v5 = v4;
      if ( v5 > dword_221A400[3593] )
        v5 = dword_221A400[3593];
      v7 = 2 * v5;
    }
  }
  else
  {
    v7 = 2 * dword_221A400[3593];
  }
  OS_RestoreInterrupts(v3);
  if ( v7 <= 0 || (v8 = s32_div_f(v1, v7), v8 <= 0) )
    result = v1;
  else
    result = v7 * v8;
  return result;
}

//----- (022078A4) --------------------------------------------------------
int __fastcall Function_22078a4(uint a1, int a2, int *a3, uint a4)
{
  int *v4;
  int v5;
  int v6;
  uint v7;

  v4 = a3;
  v5 = a3[5];
  v6 = a3[7];
  v7 = a1;
  if ( v5 <= a2 )
  {
    if ( v6 > a2 - v5 )
      v6 = a2 - v5;
  }
  else
  {
    v5 = a2;
    v6 = 0;
  }
  if ( v5 > 0 )
  {
    MI_CpuCopy8(a3[4], a1, v5, a4);
    v4[4] += v5;
    v4[5] -= v5;
  }
  if ( v6 > 0 )
  {
    MI_CpuCopy8(v4[6], v7 + v5, v6, a4);
    v4[6] += v6;
    v4[7] -= v6;
  }
  return v5 + v6;
}

//----- (0220793C) --------------------------------------------------------
int __fastcall Function_220793c(int a1)
{
  int v1;
  int v2;
  int result;
  int v4;
  int v5;
  bool v6;
  int v7;
  int v8;
  int v9;

  v1 = a1;
  if ( Function_22082cc(a1) )
    return -28;
  v4 = 0;
  if ( v1 && *(ushort *)(v1 + 112) & 1 )
    v4 = 1;
  if ( !v4 )
    return -39;
  if ( !(*(ushort *)(v1 + 112) & 4) || *(ushort *)(v1 + 112) & 8 )
    return -56;
  *(ushort *)(v1 + 112) |= 8u;
  v5 = *(uint *)(v1 + 104);
  v6 = v5 == 0;
  if ( v5 )
  {
    v4 = *(uint *)(v5 + 268);
    v6 = v4 == 0;
  }
  if ( v6 )
    return 0;
  v7 = Function_2205ff4((int)Function_22079e8, v4, *(char *)(v1 + 114), v2);
  if ( v7 )
    result = Function_220614c(*(uint *)(v5 + 268), v7, v8, v9);
  else
    result = -33;
  return result;
}

//----- (022079E8) --------------------------------------------------------
int __fastcall Function_22079e8(int a1)
{
  int v1;
  int v2;
  bool v3;

  v1 = 1;
  v2 = *(char *)(*(uint *)(a1 + 4) + 115);
  v3 = v2 == 0;
  if ( v2 )
    v3 = v2 == 4;
  if ( !v3 )
    v1 = 0;
  if ( v1 )
    Function_220c03c(v2);
  return 0;
}

//----- (02207A18) --------------------------------------------------------
BOOL __fastcall Function_2207a18(int a1)
{
  int v1;

  v1 = a1;
  return a1 >= 0 && Function_22082cc(a1) && !Function_2208300(v1);
}

//----- (02207A4C) --------------------------------------------------------
int __fastcall Function_2207a4c(int a1)
{
  int v1;
  int v3;
  int v4;
  int v5;
  int v6;
  bool v7;
  int v8;

  v1 = a1;
  if ( a1 <= 0 )
    return -28;
  if ( Function_2208300(a1) )
    return -26;
  if ( Function_22082cc(v1) )
    return 0;
  v4 = 0;
  if ( v1 && *(ushort *)(v1 + 112) & 1 )
    v4 = 1;
  if ( !v4 )
    return -39;
  if ( *(ushort *)(v1 + 112) & 0x10 )
    return -26;
  v5 = 1;
  *(ushort *)(v1 + 112) |= 0x18u;
  v6 = *(char *)(v1 + 115);
  v7 = v6 == 0;
  if ( *(uchar *)(v1 + 115) )
    v7 = v6 == 4;
  if ( !v7 )
    v5 = 0;
  if ( v5 )
    Function_2206068(*(uint **)(v1 + 104), 0);
  v8 = Function_2205ff4((int)Function_2207b1c, v1, 1, v3);
  *(uint *)(v8 + 8) = 0;
  Function_22060b4(v1, v8);
  return 0;
}

//----- (02207B1C) --------------------------------------------------------
int __fastcall Function_2207b1c(int a1)
{
  int v1;
  int v2;
  int v3;
  bool v4;
  uint v5;
  int v6;
  int v7;
  uint *v8;
  int v9;
  int result;

  v1 = *(uint *)(a1 + 4);
  v2 = 1;
  v3 = *(char *)(v1 + 115);
  v4 = v3 == 0;
  if ( *(uchar *)(v1 + 115) )
    v4 = v3 == 4;
  if ( !v4 )
    v2 = 0;
  if ( v2 )
  {
    v5 = Function_20c21d4(*(uint *)(v1 + 104) + 32);
    v6 = Function_220c03c(v5);
    v7 = Function_220c078(v6);
    v3 = Function_220bddc(v7);
  }
  Function_220bd04(v3);
  *(ushort *)(v1 + 112) &= 0xFFF9u;
  if ( *(uchar *)(v1 + 115) == 2 )
    v8 = *(uint **)(v1 + 104);
  else
    v8 = *(uint **)(v1 + 100);
  Function_2206068(v8, 0);
  v9 = OS_DisableInterrupts();
  Function_2208254(v1);
  Function_220823c(v1);
  OS_RestoreInterrupts(v9);
  result = 0;
  *(ushort *)(v1 + 112) |= 0x20u;
  return result;
}

//----- (02207BB4) --------------------------------------------------------
uint __fastcall Function_2207bb4(uint result)
{
  uint v1;
  int v2;
  int v3;
  bool v4;
  uint *v5;
  uint *v6;
  int v7;

  v1 = result;
  if ( result )
  {
    *(ushort *)(result + 112) = 0;
    v2 = *(char *)(result + 115);
    v3 = 1;
    v4 = v2 == 0;
    if ( *(uchar *)(result + 115) )
      v4 = v2 == 4;
    if ( !v4 )
      v3 = 0;
    if ( v3 )
    {
      Function_2207cb4(*(uint *)(result + 104));
      Function_2207cb4(*(uint *)(v1 + 100));
    }
    else if ( v2 == 1 )
    {
      v5 = *(uint **)(*(uint *)(result + 100) + 260);
      if ( v5 )
      {
        do
        {
          v6 = (uint *)*v5;
          MEMORY[0x1C](v5);
          v5 = v6;
        }
        while ( v6 );
      }
      *(ushort *)(*(uint *)(v1 + 100) + 264) = 0;
      *(uint *)(*(uint *)(v1 + 100) + 256) = 0;
      *(uint *)(*(uint *)(v1 + 100) + 260) = 0;
      OS_WakeupThread((int *)(*(uint *)(v1 + 100) + 268));
      Function_2207cb4(*(uint *)(v1 + 100));
    }
    else if ( v2 == 2 )
    {
      Function_2207cb4(*(uint *)(result + 104));
    }
    v7 = OS_DisableInterrupts();
    Function_2208254(v1);
    Function_22082b4(v1);
    MEMORY[0x1C](v1);
    result = OS_RestoreInterrupts(v7);
  }
  return result;
}

//----- (02207CB4) --------------------------------------------------------
uint __fastcall Function_2207cb4(uint result, int a2, int a3, int a4)
{
  int *v4;
  int v5;
  uint *v6;
  int v7;

  v7 = a4;
  v4 = (int *)result;
  if ( result )
  {
    Function_20c21d4(result + 32);
    v5 = OS_DisableInterrupts();
    OS_DisableScheduler();
    while ( OS_ReceiveMessage(v4, &v7, 0) )
    {
      if ( v7 )
      {
        v6 = *(uint **)(v7 + 8);
        if ( v6 )
          OS_SendMessage(v6, -11, 0);
        Function_2206034(v7);
      }
    }
    OS_EnableScheduler();
    OS_RescheduleThread();
    result = OS_RestoreInterrupts(v5);
  }
  return result;
}

//----- (02207D54) --------------------------------------------------------
uint Function_2207d54()
{
  int v0;
  uint i;

  v0 = OS_DisableInterrupts();
  for ( i = dword_221A400[3608]; dword_221A400[3608]; i = dword_221A400[3608] )
    Function_2207bb4(i);
  return OS_RestoreInterrupts(v0);
}

//----- (02207D90) --------------------------------------------------------
int Function_2207d90()
{
  int v0;
  uint v1;
  int v2;

  v0 = dword_221A400[3581];
  if ( !dword_221A400[3581] )
  {
    v0 = dword_221A400[3728];
    dword_221A400[3581] = dword_221A400[3728];
  }
  if ( Function_2207edc(v0) == -26 )
  {
    do
      v1 = OS_Sleep(0x64u);
    while ( Function_2207edc(v1) == -26 );
  }
  v2 = Function_2205f84();
  if ( v2 >= 0 )
  {
    Function_22090c0();
    Function_22090b0(0);
    if ( !MEMORY[0x28] )
      MEMORY[0x1C](dword_221A400[3591]);
    off_221A134 = 0;
  }
  return v2;
}

//----- (02207E34) --------------------------------------------------------
int Function_2207e34()
{
  int v0;
  int i;
  bool v2;
  int result;

  while ( 1 )
  {
    v0 = OS_DisableInterrupts();
    for ( i = dword_221A400[3607]; i; i = *(uint *)(i + 124) )
    {
      if ( i != dword_221A400[3583] && !(*(ushort *)(i + 112) & 0x10) )
        break;
    }
    OS_RestoreInterrupts(v0);
    if ( !i )
      break;
    Function_2207a4c(i);
  }
  if ( dword_221A400[3607] )
  {
    v2 = dword_221A400[3607] == dword_221A400[3583];
    if ( dword_221A400[3607] == dword_221A400[3583] )
      v2 = *(uint *)(dword_221A400[3607] + 124) == 0;
    if ( !v2 )
      goto LABEL_17;
  }
  if ( dword_221A400[3608] )
LABEL_17:
    result = -26;
  else
    result = 0;
  return result;
}

//----- (02207EDC) --------------------------------------------------------
int Function_2207edc()
{
  int v0;

  if ( dword_221A400[3583] )
  {
    v0 = Function_2207e34();
    if ( !v0 )
    {
      Function_2207a4c(dword_221A400[3583]);
      if ( Function_2207a18(dword_221A400[3583]) )
        dword_221A400[3583] = 0;
      v0 = -26;
    }
    Function_2207d54();
  }
  else if ( Function_2209060() )
  {
    Function_221543c(0);
    v0 = 0;
  }
  else
  {
    v0 = -26;
  }
  return v0;
}

//----- (02207F58) --------------------------------------------------------
int __fastcall Function_2207f58(int a1)
{
  int v1;
  int v3;
  int v4;
  char v5;
  int v6;
  int v7;
  int v8;
  int v9;

  v1 = a1;
  if ( !a1 )
    return 0;
  v3 = MEMORY[0x18](4048);
  if ( !v3 )
    return 0;
  MI_CpuFill8(&v5, 0, 0x64u);
  v7 = v3;
  v6 = 2920;
  v9 = v3 + 2920;
  v8 = 1126;
  Function_220bcf0(&v5);
  v4 = Function_220d8d8(v1);
  Function_220bd04(v4);
  MEMORY[0x1C](v3);
  return v4;
}

//----- (02208008) --------------------------------------------------------
int __fastcall Function_2208008(int a1)
{
  int v1;
  int v2;
  int v3;

  v1 = a1;
  v2 = OS_DisableInterrupts();
  dword_221A400[3732] = 0;
  dword_221A400[3733] = 0;
  v3 = Function_220d8d8(v1);
  OS_RestoreInterrupts(v2);
  return v3;
}

//----- (02208054) --------------------------------------------------------
int __fastcall Function_2208054(int a1, int a2)
{
  int v2;
  int v3;
  int result;

  v2 = a1;
  v3 = a2;
  if ( !Function_4_2208088() )
    return -39;
  result = 0;
  dword_221A400[3732] = v2;
  dword_221A400[3733] = v3;
  return result;
}

//----- (02208088) --------------------------------------------------------
int Function_4_2208088()
{
  if ( dword_221A400[3728] )
  {
    if ( !dword_221A400[3581] )
      dword_221A400[3581] = dword_221A400[3728];
  }
  else if ( (dword_221A400[3582] & 3) == 1 && OS_GetProcMode() != 18 )
  {
    OS_Sleep(0xAu);
  }
  return dword_221A400[3728];
}

//----- (022080F0) --------------------------------------------------------
int __fastcall Function_22080f0(int a1)
{
  int v1;
  int v2;
  int v3;
  int v4;
  int v5;
  bool v6;
  short v7;
  bool v8;

  v1 = 0;
  v2 = a1;
  if ( Function_22082cc(a1) )
    return 128;
  if ( *(ushort *)(v2 + 112) & 0x40 )
    v1 = 32;
  if ( *(uchar *)(v2 + 115) == 1 || *(ushort *)(v2 + 112) & 4 )
  {
    v3 = OS_DisableInterrupts();
    if ( Function_22081c0(v2) > 0 )
      v1 |= 1u;
    if ( Function_2207538(v2) > 0 )
      v1 |= 8u;
    OS_RestoreInterrupts(v3);
  }
  v4 = *(char *)(v2 + 115);
  v5 = 1;
  v6 = v4 == 0;
  if ( *(uchar *)(v2 + 115) )
    v6 = v4 == 4;
  if ( !v6 )
    v5 = 0;
  if ( v5 )
  {
    v7 = *(ushort *)(v2 + 112);
    v8 = (v7 & 4) == 0;
    if ( v7 & 4 )
      v8 = *(uchar *)(v2 + 8) == 4;
    if ( !v8 && !(v1 & 1) )
      *(ushort *)(v2 + 112) &= 0xFFF9u;
    if ( !(*(ushort *)(v2 + 112) & 2) && !(*(ushort *)(v2 + 112) & 4) )
      v1 |= 0x40u;
  }
  return v1;
}

//----- (022081C0) --------------------------------------------------------
int __fastcall Function_22081c0(int a1)
{
  int v1;
  int v2;
  int v3;
  int v4;
  bool v5;

  v1 = *(uint *)(a1 + 100);
  v2 = 0;
  if ( v1 )
  {
    v3 = *(char *)(a1 + 115);
    if ( v3 == 1 )
    {
      v4 = *(uint *)(v1 + 260);
      if ( v4 )
        v2 = *(ushort *)(v4 + 4);
    }
    else
    {
      v5 = v3 == 0;
      if ( *(uchar *)(a1 + 115) )
        v5 = v3 == 4;
      if ( v5 )
        v2 = *(uint *)(a1 + 68) - *(uint *)(v1 + 248);
    }
  }
  return v2;
}

//----- (02208208) --------------------------------------------------------
uint __fastcall Function_2208208(int a1)
{
  return (a1 + 3) & 0xFFFFFFFC;
}

//----- (02208214) --------------------------------------------------------
int __fastcall Function_2208214(int a1)
{
  return Function_220822c(&dword_221A400[3607], a1);
}

//----- (0220822C) --------------------------------------------------------
uint *__fastcall Function_220822c(uint *result, int a2)
{
  *(uint *)(a2 + 124) = *result;
  *result = a2;
  return result;
}

//----- (0220823C) --------------------------------------------------------
uint *__fastcall Function_220823c(int a1)
{
  return Function_220822c(&dword_221A400[3608], a1);
}

//----- (02208254) --------------------------------------------------------
int __fastcall Function_2208254(int a1)
{
  return Function_220826c(&dword_221A400[3607], a1);
}

//----- (0220826C) --------------------------------------------------------
uint *__fastcall Function_220826c(int a1, int a2)
{
  int v2;
  uint *result;

  v2 = a2;
  result = (uint *)Function_2208288();
  if ( result )
    *result = *(uint *)(v2 + 124);
  return result;
}

//----- (02208288) --------------------------------------------------------
int *__fastcall Function_2208288(int *result, int a2)
{
  int v2;

  v2 = *result;
  if ( !*result )
    return 0;
  while ( v2 != a2 )
  {
    result = (int *)(v2 + 124);
    v2 = *(uint *)(v2 + 124);
    if ( !v2 )
      return 0;
  }
  return result;
}

//----- (022082B4) --------------------------------------------------------
uint *__fastcall Function_22082b4(int a1)
{
  return Function_220826c((int)&dword_221A400[3608], a1);
}

//----- (022082CC) --------------------------------------------------------
BOOL __fastcall Function_22082cc(int a1)
{
  return a1 <= 0 || !Function_2208288(&dword_221A400[3607], a1);
}

//----- (02208300) --------------------------------------------------------
BOOL __fastcall Function_2208300(int a1)
{
  return Function_2208288(&dword_221A400[3608], a1) != 0;
}

//----- (02208324) --------------------------------------------------------
int Function_4_2208324()
{
  return Function_2206224();
}

//----- (02208350) --------------------------------------------------------
int __fastcall Function_4_2208350(int a1, int a2)
{
  return Function_2206808(a1, (uchar)(*(ushort *)(a2 + 2) >> 8) | (*(ushort *)(a2 + 2) << 8) & 0xFF00);
}

//----- (0220837C) --------------------------------------------------------
int __fastcall Function_220837c(int a1, int a2)
{
  return Function_2206878(
           a1,
           (uchar)(*(ushort *)(a2 + 2) >> 8) | (*(ushort *)(a2 + 2) << 8) & 0xFF00,
           (*(uint *)(a2 + 4) << 24) & 0xFF000000 | (*(uint *)(a2 + 4) << 8) & 0xFF0000 | (uchar)(*(uint *)(a2 + 4) >> 24) | (*(uint *)(a2 + 4) >> 8) & 0xFF00);
}

//----- (022083D8) --------------------------------------------------------
int __fastcall Function_22083d8(int a1, int a2, int a3, int a4)
{
  return Function_2206a3c(a1, a2, a3, 0, 0, a4);
}

//----- (022083FC) --------------------------------------------------------
int __fastcall Function_4_22083fc(int a1, int a2, int a3, int a4, int a5)
{
  int result;
  short v6;
  uint v7;
  int v8;

  v8 = a4;
  result = Function_2206a3c(a1, a2, a3, (int)&v6, (int)&v7, a4);
  if ( result >= 0 )
  {
    if ( a5 )
    {
      *(ushort *)(a5 + 2) = HIBYTE(v6) | (v6 << 8) & 0xFF00;
      *(uint *)(a5 + 4) = (v7 << 24) & 0xFF000000 | (v7 << 8) & 0xFF0000 | HIBYTE(v7) | (v7 >> 8) & 0xFF00;
    }
  }
  return result;
}

//----- (0220848C) --------------------------------------------------------
int __fastcall Function_220848c(int a1, int a2, int a3, char a4)
{
  return Function_220729c(a1, a2, a3, 0, 0, a4);
}

//----- (022084B0) --------------------------------------------------------
int __fastcall Function_4_22084b0(int a1, int a2, int a3, char a4, int a5)
{
  int v5;
  int v6;

  if ( a5 )
  {
    v5 = (uchar)(*(ushort *)(a5 + 2) >> 8) | (*(ushort *)(a5 + 2) << 8) & 0xFF00;
    v6 = (*(uint *)(a5 + 4) << 24) & 0xFF000000 | (*(uint *)(a5 + 4) << 8) & 0xFF0000 | (uchar)(*(uint *)(a5 + 4) >> 24) | (*(uint *)(a5 + 4) >> 8) & 0xFF00;
  }
  else
  {
    v5 = 0;
    v6 = 0;
  }
  return Function_220729c(a1, a2, a3, v5, v6, a4);
}

//----- (02208534) --------------------------------------------------------
int __fastcall Function_2208534(int a1)
{
  return Function_220793c(a1);
}

//----- (02208540) --------------------------------------------------------
int __fastcall Function_4_2208540(int a1)
{
  return Function_2207a4c(a1);
}

//----- (0220854C) --------------------------------------------------------
int *__fastcall Function_220854c(int a1)
{
  uchar *v1;
  uint v2;
  int *result;

  v1 = (uchar *)a1;
  v2 = Function_2207f58(a1);
  if ( !v2 )
    return 0;
  MI_CpuFill8(&dword_221A400[3643], 0, 0x101u);
  Function_20d3354((int)&dword_221A400[3643], v1, 257);
  dword_221A400[3617] = (int)&dword_221A400[3643];
  dword_221A400[3618] = 0;
  dword_221A400[3619] = 262146;
  dword_221A400[3620] = (int)&dword_221A400[3615];
  dword_221A400[3615] = (int)&dword_221A400[3609];
  dword_221A400[3616] = 0;
  result = &dword_221A400[3617];
  dword_221A400[3609] = (v2 << 24) & 0xFF000000 | (v2 << 8) & 0xFF0000 | HIBYTE(v2) | (v2 >> 8) & 0xFF00;
  return result;
}

//----- (0220860C) --------------------------------------------------------
int __fastcall Function_220860c(int a1, int a2)
{
  int v2;
  int v3;
  uint v5;
  short v6;

  v2 = a1;
  v3 = a2;
  if ( !a1 )
    return -39;
  v5 = Function_4_2208088();
  if ( v2 )
    v6 = *(ushort *)(v2 + 116);
  if ( !v2 )
    v6 = 0;
  if ( !v5 )
    v6 = 0;
  *(uchar *)v3 = 8;
  *(uchar *)(v3 + 1) = 2;
  *(ushort *)(v3 + 2) = HIBYTE(v6) | (v6 << 8) & 0xFF00;
  *(uint *)(v3 + 4) = (v5 << 24) & 0xFF000000 | (v5 << 8) & 0xFF0000 | (v5 >> 24) | (v5 >> 8) & 0xFF00;
  return 0;
}

//----- (022086A0) --------------------------------------------------------
uint Function_22086a0()
{
  uint v0;

  v0 = Function_4_2208088();
  return (v0 << 24) & 0xFF000000 | (v0 << 8) & 0xFF0000 | HIBYTE(v0) | (v0 >> 8) & 0xFF00;
}

//----- (022086D8) --------------------------------------------------------
int __fastcall Function_22086d8(uint *a1, uint *a2)
{
  return Function_2208054(
           (*a1 << 24) & 0xFF000000 | (*a1 << 8) & 0xFF0000 | (uchar)(*a1 >> 24) | (*a1 >> 8) & 0xFF00,
           (*a2 << 24) & 0xFF000000 | (*a2 << 8) & 0xFF0000 | (uchar)(*a2 >> 24) | (*a2 >> 8) & 0xFF00);
}

//----- (02208744) --------------------------------------------------------
int __fastcall Function_2208744(int a1)
{
  return Function_220657c(a1);
}

//----- (02208750) --------------------------------------------------------
int __fastcall Function_2208750(int a1, int a2)
{
  int v2;
  int result;
  short v4;
  uint v5;

  v2 = a2;
  result = Function_22065fc(a1, (int)&v4, (int)&v5);
  if ( result >= 0 )
  {
    *(ushort *)(v2 + 2) = HIBYTE(v4) | (v4 << 8) & 0xFF00;
    *(uint *)(v2 + 4) = (v5 << 24) & 0xFF000000 | (v5 << 8) & 0xFF0000 | HIBYTE(v5) | (v5 >> 8) & 0xFF00;
  }
  return result;
}

//----- (022087CC) --------------------------------------------------------
int __fastcall Function_22087cc(int a1, int a2, char a3)
{
  int result;

  if ( !a1 )
    return -1;
  if ( a2 == 3 )
  {
    if ( *(uchar *)(a1 + 114) == 1 )
      result = 0;
    else
      result = 4;
  }
  else
  {
    if ( a2 == 4 )
    {
      if ( a3 & 4 )
        *(uchar *)(a1 + 114) = 0;
      else
        *(uchar *)(a1 + 114) = 1;
    }
    result = 0;
  }
  return result;
}

//----- (0220881C) --------------------------------------------------------
int *__fastcall Function_220881c(int a1)
{
  int v1;
  int *result;

  v1 = a1 + 4;
  result = (int *)((int (__fastcall *)(uint, int))dword_221A400[3612])(0, a1 + 4);
  if ( result )
  {
    *result = v1;
    ++result;
  }
  return result;
}

//----- (02208848) --------------------------------------------------------
int __fastcall Function_2208848(int result)
{
  if ( result )
    result = ((int (__fastcall *)(uint, int, uint))dword_221A400[3610])(0, result - 4, *(uint *)(result - 4));
  return result;
}

//----- (02208874) --------------------------------------------------------
int __fastcall Function_4_2208874(uint *a1, int a2, int a3)
{
  int v3;

  v3 = a1[3];
  if ( v3 == 1 )
    a3 = 1;
  if ( v3 != 1 )
    a3 = 0;
  dword_221A400[3625] = a3;
  dword_221A400[3626] = (a1[4] << 24) & 0xFF000000 | (a1[4] << 8) & 0xFF0000 | (uchar)(a1[4] >> 24) | (a1[4] >> 8) & 0xFF00;
  dword_221A400[3627] = (a1[5] << 24) & 0xFF000000 | (a1[5] << 8) & 0xFF0000 | (uchar)(a1[5] >> 24) | (a1[5] >> 8) & 0xFF00;
  dword_221A400[3628] = (a1[6] << 24) & 0xFF000000 | (a1[6] << 8) & 0xFF0000 | (uchar)(a1[6] >> 24) | (a1[6] >> 8) & 0xFF00;
  dword_221A400[3629] = (a1[7] << 24) & 0xFF000000 | (a1[7] << 8) & 0xFF0000 | (uchar)(a1[7] >> 24) | (a1[7] >> 8) & 0xFF00;
  dword_221A400[3630] = (a1[8] << 24) & 0xFF000000 | (a1[8] << 8) & 0xFF0000 | (uchar)(a1[8] >> 24) | (a1[8] >> 8) & 0xFF00;
  dword_221A400[3631] = (int)Function_220881c;
  dword_221A400[3632] = (int)Function_2208848;
  dword_221A400[3612] = a1[1];
  dword_221A400[3610] = a1[2];
  dword_221A400[3633] = 64;
  dword_221A400[3637] = a1[11];
  dword_221A400[3638] = a1[12];
  return Function_2205c7c(&dword_221A400[3625]);
}

//----- (022089E8) --------------------------------------------------------
int Function_4_22089e8()
{
  return Function_2207d90();
}

//----- (022089F4) --------------------------------------------------------
int *__fastcall Function_22089f4(int a1, int a2, int a3, int a4)
{
  int varg_r0;
  int varg_r1;
  int varg_r2;
  int varg_r3;

  varg_r0 = a1;
  varg_r1 = a2;
  varg_r2 = a3;
  varg_r3 = a4;
  Function_2208a74(2, &varg_r0, &dword_221A400[3639], 16);
  return &dword_221A400[3639];
}

//----- (02208A24) --------------------------------------------------------
int __fastcall Function_2208a24(int a1, uint *a2)
{
  uint *v2;
  uint v3;

  v2 = a2;
  v3 = Function_2208008(a1);
  if ( !v3 )
    return 0;
  *v2 = (v3 << 24) & 0xFF000000 | (v3 << 8) & 0xFF0000 | HIBYTE(v3) | (v3 >> 8) & 0xFF00;
  return 1;
}

//----- (02208A74) --------------------------------------------------------
uchar *__fastcall Function_2208a74(int a1, int a2, uchar *a3, uint a4)
{
  uchar *v4;
  uchar v6;
  uchar v7;
  uchar v8;
  uchar v9;
  int v10;
  uint v11;

  v11 = a4;
  v4 = a3;
  if ( a1 != 2 )
    return 0;
  if ( a4 < 0x10 )
    return 0;
  MI_CpuCopy8(a2, (uint)&v10, 4u, a4);
  Function_4_2208af8(v10, &v6);
  OS_SNPrintf(v4, 16, "%d.%d.%d.%d", v9, v8, v7, v6);
  return v4;
}

//----- (02208AF8) --------------------------------------------------------
int __fastcall Function_4_2208af8(int result, uchar *a2)
{
  *a2 = HIBYTE(result);
  a2[1] = BYTE2(result);
  a2[2] = BYTE1(result);
  a2[3] = result;
  return result;
}

//----- (02208B18) --------------------------------------------------------
int __fastcall Function_4_2208b18(int a1, uint a2, uint a3, uint a4)
{
  int v4;
  uint v5;
  uint v6;
  bool v7;
  uint v8;
  int v9;
  int v10;
  uint v11;
  int v12;
  int v13;
  int v15;

  v5 = a3;
  v6 = a4;
  v7 = a4 == -1;
  if ( a4 == -1 )
    v7 = a3 == -1;
  if ( !v7 )
    v4 = 1;
  v15 = a1;
  v8 = a2;
  if ( v7 )
    v4 = 0;
  while ( 1 )
  {
    v9 = 0;
    v10 = v15;
    v11 = 0;
    if ( v8 )
    {
      do
      {
        v12 = *(short *)(v10 + 4) | 0xE0;
        v13 = v12 & Function_22080f0(*(uint *)v10);
        *(ushort *)(v10 + 6) = v13;
        ++v11;
        if ( v13 )
          ++v9;
        v10 += 8;
      }
      while ( v11 < v8 );
    }
    if ( v9 > 0 || v4 && (ll)__PAIR__(v6, v5) <= 0 )
      break;
    OS_Sleep(1u);
    v6 = (__PAIR__(v6, v5) - 523) >> 32;
    v5 -= 523;
  }
  return v9;
}

//----- (02208BCC) --------------------------------------------------------
int __fastcall Function_2208bcc(int a1, int a2)
{
  int v2;
  int v3;
  int v5;
  int v6;
  bool v7;
  int v8;

  v2 = a1;
  v3 = a2;
  if ( Function_22082cc(a1) )
    return -28;
  v5 = *(char *)(v2 + 115);
  v6 = 1;
  v7 = v5 == 0;
  if ( *(uchar *)(v2 + 115) )
    v7 = v5 == 4;
  if ( !v7 )
    v6 = 0;
  if ( !v6 )
    return -28;
  v8 = 0;
  if ( v2 && *(ushort *)(v2 + 112) & 1 )
    v8 = 1;
  if ( !v8 )
    return -39;
  if ( *(ushort *)(v2 + 112) & 2 )
    return -28;
  return Function_2208c4c(v2, v3);
}

//----- (02208C4C) --------------------------------------------------------
int __fastcall Function_2208c4c(int a1, int a2, int a3, int a4)
{
  int v4;
  int v5;
  int v6;
  int v7;
  int v8;

  v4 = a1;
  v5 = a2;
  v6 = Function_2205ff4((int)Function_2208c88, a1, 1, a4);
  if ( !v6 )
    return -33;
  *(uint *)(v6 + 16) = v5;
  return Function_220613c(v4, v6, v7, v8);
}

//----- (02208C88) --------------------------------------------------------
int __fastcall Function_2208c88(int a1)
{
  int v1;
  int v2;
  int v3;
  int v4;
  int v5;

  v1 = a1;
  v2 = *(uint *)(a1 + 4);
  v3 = *(uint *)(v2 + 100);
  v4 = *(uint *)(v3 + 196);
  OS_LockMutex((uint *)(v3 + 224));
  v5 = *(uint *)(v1 + 16);
  if ( v5 )
  {
    *(uint *)(v4 + 12) = v5;
    Function_2210dc0(1);
    *(uchar *)(v2 + 115) = 4;
  }
  else
  {
    *(uchar *)(v2 + 115) = 0;
    Function_2210dc0(0);
    *(uint *)(v4 + 12) = 0;
  }
  OS_UnlockMutex((int *)(v3 + 224));
  return 0;
}

//----- (02208CEC) --------------------------------------------------------
int __fastcall Function_2208cec(int result, int a2, int a3, int a4)
{
  int i;
  int v5;
  bool v6;
  int v7;
  bool v8;
  int v9;
  int *v10;
  int v11;

  dword_221A400[3711] = result;
  dword_221A400[3728] = 0;
  dword_221A400[3715] = 0;
  dword_221A400[3719] = 0;
  dword_221A400[3732] = 0;
  if ( LOBYTE(dword_221A400[3728]) )
    a4 = 1;
  dword_221A400[3733] = 0;
  if ( !dword_221A400[3728] )
    a4 = 0;
  dword_221A400[3716] = 0;
  if ( a4 )
  {
    MI_CpuFill8(&dword_221A400[3740], 0, 0x60u);
    for ( i = dword_21CCC88; i; i = *(uint *)(i + 104) )
    {
      v5 = *(uint *)(i + 164);
      v6 = v5 == 0;
      if ( v5 )
        v6 = *(uint *)v5 == 0;
      if ( !v6 )
      {
        v7 = *(uchar *)(v5 + 8);
        v8 = v7 == 10;
        if ( v7 != 10 )
          v8 = v7 == 11;
        if ( !v8 )
          *(uchar *)(v5 + 8) = 0;
        if ( *(uint *)(v5 + 4) )
        {
          *(uint *)(v5 + 4) = 0;
          OS_WakeupThreadDirect(*(uint *)v5);
        }
      }
    }
    v9 = 0;
    v10 = &dword_221A400[3910];
    do
    {
      v11 = *((ushort *)v10 + 2);
      if ( *((ushort *)v10 + 2) )
      {
        v11 = ((int (__fastcall *)(int))dword_221A400[3724])(v10[13]);
        *((ushort *)v10 + 2) = 0;
      }
      ++v9;
      v10 += 14;
    }
    while ( v9 < 8 );
    result = Function_2210ed0(v11);
  }
  return result;
}

//----- (02208DF0) --------------------------------------------------------
uint Function_2208df0()
{
  uint result;

  if ( dword_221A400[3717] )
    result = OS_Sleep(dword_221A400[3717]);
  else
    result = Function_20c233c();
  return result;
}

//----- (02208E18) --------------------------------------------------------
void Function_2208e18()
{
  ;
}

//----- (02208E1C) --------------------------------------------------------
int Function_2208e1c()
{
  return 1;
}

//----- (02208E24) --------------------------------------------------------
uint __fastcall Function_2208e24(int *a1)
{
  int *v1;
  int v2;
  int v3;
  int v4;
  bool v5;
  void (*v6)();
  int v7;
  void (*v8)();
  int (*v9)();
  long long v10;
  int v11;

  v1 = a1;
  Function_2000b9c_Dummy("[SDK+UBIQUITOUS:CPS]");
  v2 = v1[6];
  if ( *(ull *)(v1 + 5) )
  {
    dword_221A400[3734] = v1[5];
    dword_221A400[3735] = v2;
  }
  else
  {
    dword_221A400[3734] = OS_GetTick();
    dword_221A400[3735] = v3;
  }
  dword_221A400[3736] = 1812433253;
  dword_221A400[3737] = 1566083941;
  dword_221A400[3738] = 2531011;
  dword_221A400[3739] = 0;
  v4 = v1[1];
  v5 = v4 == 0;
  if ( v4 )
    v5 = v1[2] == 0;
  if ( v5 )
  {
    v6 = Function_2208e18;
    dword_221A400[3713] = (int)Function_2208e18;
  }
  else
  {
    dword_221A400[3713] = v1[1];
    v6 = (void (*)())v1[2];
  }
  dword_221A400[3724] = (int)v6;
  dword_221A400[3712] = *v1;
  v7 = v1[9];
  if ( !v7 )
    LOWORD(v7) = 1460;
  HIWORD(dword_221A400[3708]) = v7;
  dword_221A400[3721] = v1[10];
  dword_221A400[3717] = v1[11];
  v8 = (void (*)())v1[3];
  if ( !v8 )
    v8 = Function_2208e18;
  dword_221A400[3714] = (int)v8;
  v9 = (int (*)())v1[4];
  if ( !v9 )
    v9 = Function_2208e1c;
  dword_221A400[3726] = (int)v9;
  dword_221A400[3730] = v1[7];
  dword_221A400[3731] = v1[8];
  dword_221A400[3720] = 0;
  dword_221A400[3718] = 0;
  v10 = *(ull *)&dword_221A400[3738] + *(ull *)&dword_221A400[3736] * *(ull *)&dword_221A400[3734];
  v11 = 3976 * (ull)HIDWORD(v10) >> 32;
  *(ull *)&dword_221A400[3734] = *(ull *)&dword_221A400[3738]
                                  + *(ull *)&dword_221A400[3736] * *(ull *)&dword_221A400[3734];
  LOWORD(dword_221A400[3710]) = v11 + 1024;
  OS_GetMacAddress((uint)&dword_221A400[4022], v11 + 1024, (int)&dword_221A400[3708], 3976 * HIDWORD(v10));
  BYTE1(dword_221A400[3708]) = 0;
  OS_CreateThread(&dword_221A400[3862], (int)Function_220bb94, 0, (int)&dword_221A400[5256], 2048, 16);
  OS_CreateThread(&dword_221A400[3814], (int)Function_220c8c0, 0, (int)&dword_221A400[4744], 2048, 16);
  OS_WakeupThreadDirect((int)&dword_221A400[3862]);
  return OS_WakeupThreadDirect((int)&dword_221A400[3814]);
}

//----- (02209060) --------------------------------------------------------
BOOL Function_2209060()
{
  int v0;
  bool v1;
  int *v2;
  BOOL v3;

  v0 = OS_DisableInterrupts();
  v3 = Function_20c2204((int)&dword_221A400[3814]);
  v1 = v3 == 0;
  if ( !v3 )
  {
    v2 = &dword_221A400[3708];
    v1 = dword_221A400[3725] == 0;
  }
  if ( v1 )
  {
    v2[17] = 1;
    OS_WakeupThreadDirect((int)&dword_221A400[3814]);
  }
  OS_RestoreInterrupts(v0);
  return v3;
}

//----- (022090B0) --------------------------------------------------------
int __fastcall Function_22090b0(int result)
{
  dword_221A400[3723] = result;
  return result;
}

//----- (022090C0) --------------------------------------------------------
int *Function_22090c0()
{
  int v0;
  int v1;
  int *result;

  Function_2209060();
  Function_20c21d4((int)&dword_221A400[3814]);
  Function_20c2140(&dword_221A400[3862]);
  dword_221A400[3729] = 0;
  Function_2208cec(0, (int)&dword_221A400[3708], v0, v1);
  result = &dword_221A400[3708];
  dword_221A400[3730] = 0;
  dword_221A400[3731] = 0;
  return result;
}

//----- (02209108) --------------------------------------------------------
int __fastcall Function_2209108(int a1)
{
  int v1;

  v1 = a1;
  dword_221A190 = a1;
  OS_SetThreadPriority((int)&dword_221A400[3862], a1);
  return OS_SetThreadPriority((int)&dword_221A400[3814], v1);
}

//----- (02209140) --------------------------------------------------------
uint __fastcall Function_2209140(ushort *a1, uint a2, uint a3)
{
  uint i;
  int v4;
  uint v5;

  if ( (uchar)a1 & 1 )
  {
    for ( ; a2 > 1; ++a1 )
    {
      a2 -= 2;
      a3 += _byteswap_ushort(*a1);
    }
  }
  else
  {
    for ( i = (((ushort)a3 << 8) | ((int)(ushort)a3 >> 8)) & 0xFFFF; a2 > 1; i += v4 )
    {
      v4 = *a1;
      ++a1;
      a2 -= 2;
    }
    v5 = (i >> 8) & 0xFF00FF | (i << 8) & 0xFF00FF00;
    a3 = (v5 << 16) | (v5 >> 16);
  }
  if ( a2 )
    a3 += *(uchar *)a1 << 8;
  return ((a3 >> 16) + (ushort)a3 + (((a3 >> 16) + (ushort)a3) >> 16)) & 0xFFFF;
}

//----- (022091F4) --------------------------------------------------------
int __fastcall Function_22091f4(int a1)
{
  int result;

  result = (a1 ^ 0xFFFF) & 0xFFFF;
  if ( !result )
    result = 0xFFFF;
  return result;
}

//----- (02209210) --------------------------------------------------------
int __fastcall Function_2209210(ushort *a1, uint a2)
{
  ushort v2;

  v2 = Function_2209140(a1, a2, 0);
  return Function_22091f4(v2);
}

//----- (0220922C) --------------------------------------------------------
BOOL __fastcall Function_220922c(ushort *a1, uint a2, int a3, uint a4)
{
  int v4;
  uint v5;
  uint v6;
  int v7;

  v4 = a3;
  v5 = a2;
  v6 = Function_2209140(a1, a2, a4);
  v7 = Function_2209140((ushort *)(v4 + 12), 8u, v6) + v5;
  if ( v7 & 0x10000 )
    v7 = (v7 + 1) & 0xFFFF;
  return v7 != 0xFFFF;
}

//----- (0220927C) --------------------------------------------------------
int __fastcall Function_220927c(int a1)
{
  int v1;
  bool v2;

  v1 = 1;
  v2 = a1 == -1;
  if ( a1 != -1 )
    v2 = a1 == 2130706433;
  if ( !v2 && (a1 & dword_221A400[3715]) != (dword_221A400[3728] & dword_221A400[3715]) )
    v1 = 0;
  return v1;
}

//----- (022092BC) --------------------------------------------------------
int __fastcall Function_22092bc(int a1)
{
  int v1;

  v1 = a1;
  if ( !Function_220927c(a1) )
    v1 = dword_221A400[3719];
  return v1;
}

//----- (022092E0) --------------------------------------------------------
int __fastcall Function_22092e0(int a1)
{
  int v1;
  int v2;

  v1 = a1;
  v2 = 0;
  if ( Function_220927c(a1) && ~dword_221A400[3715] == (~dword_221A400[3715] & v1) )
    v2 = 1;
  return v2;
}

//----- (0220931C) --------------------------------------------------------
BOOL __fastcall Function_220931c(int a1)
{
  return (a1 & 0xF0000000) == -536870912;
}

//----- (02209330) --------------------------------------------------------
int __fastcall Function_2209330(int a1)
{
  int v1;
  int v2;
  bool v3;
  int v4;
  int v5;
  int v6;

  v1 = 1;
  v2 = a1;
  v3 = dword_221A400[3728] == 0;
  v4 = 1;
  if ( dword_221A400[3728] )
    v3 = v2 == dword_221A400[3728];
  if ( !v3 )
    v4 = 0;
  v5 = 1;
  v6 = 1;
  if ( !v4 && v2 != 2130706433 )
    v6 = 0;
  if ( !v6 && !Function_22092e0(v2) )
    v5 = 0;
  if ( !v5 && !Function_220931c(v2) )
    v1 = 0;
  return v1;
}

//----- (022093B0) --------------------------------------------------------
int __fastcall Function_22093b0(ushort *a1, ushort *a2)
{
  int v2;
  int v3;
  int v4;
  int v5;

  v2 = 0;
  do
  {
    v4 = *a1;
    ++a1;
    v3 = v4;
    v5 = *a2;
    ++a2;
    if ( v3 != v5 )
      return 1;
    ++v2;
  }
  while ( v2 < 3 );
  return 0;
}

//----- (022093DC) --------------------------------------------------------
int *__fastcall Function_22093dc(int a1, int a2, int a3, uint a4)
{
  int v4;
  int v5;
  int v6;
  bool v7;
  char v8;
  int *result;

  v4 = a1;
  v5 = a2;
  v6 = a3;
  MI_CpuCopy8((int)&byte_221A19C, a1 + 6, 6u, a4);
  v7 = Function_221545c(v4, v4 + 6, v5 - 6, v6) < 0;
  if ( v7 )
    v8 = 1;
  result = &dword_221A400[3708];
  if ( !v7 )
    v8 = 0;
  LOBYTE(dword_221A400[3708]) = v8;
  return result;
}

//----- (02209438) --------------------------------------------------------
int *__fastcall Function_2209438(int *result, int a2, uchar *a3, int a4, int a5, uint a6)
{
  int v6;
  uchar *v7;
  bool v8;
  int v9;
  int v10;
  bool v11;
  int v12;
  int v13;
  bool v14;
  uint v15;
  uint v16;
  uint v17;
  bool v18;

  v6 = (int)result;
  v7 = a3;
  v8 = dword_221A400[3730] == 0;
  if ( dword_221A400[3730] )
    result = (int *)dword_221A400[3731];
  v9 = a4;
  if ( dword_221A400[3730] )
    v8 = result == 0;
  if ( !v8 )
  {
    result = (int *)(a4 + a6);
    if ( a4 + a6 >= 8 && (uint)result <= 0x5E4 )
    {
      v10 = *a3;
      v11 = v10 == 170;
      if ( v10 == 170 )
        v11 = a3[1] == 170;
      if ( v11 )
      {
        v12 = a3[2];
        v11 = v12 == 3;
        if ( v12 == 3 )
          v11 = a3[6] == 8;
      }
      if ( v11 )
      {
        v13 = a3[7];
        v14 = v13 == 0;
        if ( v7[7] )
          v14 = v13 == 6;
        if ( v14 )
        {
          v15 = ((uint)result + 9) & 0xFFFE;
          v16 = dword_221A400[3718] + v15;
          if ( (uint)dword_221A400[3718] >= dword_221A400[3720]
            || (result = (int *)dword_221A400[3720], dword_221A400[3720] > v16) )
          {
            if ( v16 == dword_221A400[3731] )
            {
              result = (int *)dword_221A400[3720];
              v16 = 0;
              if ( !dword_221A400[3720] )
                return result;
            }
            else if ( v16 > dword_221A400[3731] )
            {
              result = (int *)dword_221A400[3720];
              v16 = v15;
              if ( dword_221A400[3720] <= v15 )
                return result;
            }
            if ( dword_221A400[3718] + v15 > dword_221A400[3731] )
            {
              if ( (uint)(dword_221A400[3731] - dword_221A400[3718]) >= 2 )
                *(ushort *)(dword_221A400[3730] + dword_221A400[3718]) = 0;
              dword_221A400[3718] = 0;
            }
            *(ushort *)(dword_221A400[3730] + dword_221A400[3718]) = v15;
            MI_CpuCopy8(a2, dword_221A400[3730] + dword_221A400[3718] + 2, 6u, dword_221A400[3730]);
            MI_CpuCopy8(v6, dword_221A400[3730] + dword_221A400[3718] + 8, 6u, dword_221A400[3730]);
            MI_CpuCopy8((int)(v7 + 6), dword_221A400[3730] + dword_221A400[3718] + 14, v9 - 6, dword_221A400[3730]);
            v18 = a5 == 0;
            if ( a5 )
            {
              v17 = a6;
              v18 = a6 == 0;
            }
            if ( !v18 )
              MI_CpuCopy8(a5, dword_221A400[3730] + dword_221A400[3718] + 8 + v9, v17, dword_221A400[3730]);
            result = &dword_221A400[3708];
            dword_221A400[3718] = v16;
          }
        }
      }
    }
  }
  return result;
}

//----- (0220962C) --------------------------------------------------------
int *__fastcall Function_220962c(int *a1, int a2, uchar *a3, int a4)
{
  int *result;

  Function_2209438(a1, a2, a3, a4, 0, 0);
  result = &dword_221A400[3708];
  if ( dword_221A400[3729] )
  {
    result = (int *)Function_20c2204(dword_221A400[3729]);
    if ( !result )
      result = (int *)OS_WakeupThreadDirect(dword_221A400[3729]);
  }
  return result;
}

//----- (02209684) --------------------------------------------------------
int __fastcall Function_2209684(uint *a1)
{
  uint *v1;
  int i;
  int v3;

  v1 = a1;
  for ( i = OS_DisableInterrupts(); dword_221A400[3720] == dword_221A400[3718]; dword_221A400[3729] = 0 )
  {
    dword_221A400[3729] = dword_21CCC84;
    OS_SleepThread(0);
  }
  OS_RestoreInterrupts(i);
  do
  {
    if ( (uint)(dword_221A400[3731] - dword_221A400[3720]) < 2 )
      dword_221A400[3720] = 0;
    v3 = *(ushort *)(dword_221A400[3730] + dword_221A400[3720]);
    if ( !*(ushort *)(dword_221A400[3730] + dword_221A400[3720]) )
      dword_221A400[3720] = 0;
  }
  while ( !v3 );
  *v1 = v3 - 2;
  return dword_221A400[3730] + dword_221A400[3720] + 2;
}

//----- (02209744) --------------------------------------------------------
uint Function_2209744()
{
  int v0;

  v0 = OS_DisableInterrupts();
  dword_221A400[3720] += *(ushort *)(dword_221A400[3730] + dword_221A400[3720]);
  if ( (uint)dword_221A400[3720] >= dword_221A400[3731] )
    dword_221A400[3720] = 0;
  return OS_RestoreInterrupts(v0);
}

//----- (02209788) --------------------------------------------------------
int *__fastcall Function_2209788(int a1)
{
  int v1;
  int *v2;
  int v3;
  bool v4;
  int *v5;
  int *v6;
  uint v7;

  v1 = a1;
  v2 = (int *)OS_DisableInterrupts();
  v3 = (int)v2;
  v4 = v1 == 2130706433;
  if ( v1 != 2130706433 )
    v2 = &dword_221A400[3708];
  v5 = 0;
  if ( v1 != 2130706433 )
    v4 = v1 == v2[20];
  if ( v4 )
  {
    v5 = &dword_221A400[4022];
  }
  else if ( Function_22092e0(v1) || Function_220931c(v1) )
  {
    v5 = dword_221A194;
  }
  else
  {
    v6 = &dword_221A400[3740];
    v7 = 0;
    while ( v1 != *v6 )
    {
      ++v7;
      v6 += 3;
      if ( v7 >= 8 )
        goto LABEL_14;
    }
    HIWORD(dword_221A400[3 * v7 + 3742]) = (uint)OS_GetTick() >> 16;
    v5 = &dword_221A400[3 * v7 + 3741];
  }
LABEL_14:
  OS_RestoreInterrupts(v3);
  return v5;
}

//----- (02209858) --------------------------------------------------------
int *__fastcall Function_2209858(int a1, int a2, int a3, int a4)
{
  int v4;
  uint v5;
  uint v6;
  char v8;
  char v9;
  short v10;
  char v11;
  char v12;
  short v13;
  char v14;
  char v15;
  short v16;
  short v17;
  short v18;
  short v19;
  int v20;

  v20 = a4;
  v4 = a1;
  MI_CpuFill8(&v8, 0, 0x2Au);
  MI_CpuFill8(&v8, 255, 6u);
  MI_CpuCopy8((int)&dword_221A400[4022], (uint)&v9, 6u, v5);
  v11 = 1;
  v10 = 1544;
  v14 = 1;
  v12 = 8;
  v13 = 1030;
  MI_CpuCopy8((int)&dword_221A400[4022], (uint)&v15, 6u, v6);
  v16 = (HIWORD(dword_221A400[3728]) << 8) | (dword_221A400[3728] >> 24);
  v17 = (LOWORD(dword_221A400[3728]) << 8) | ((int)LOWORD(dword_221A400[3728]) >> 8);
  v18 = (HIWORD(v4) << 8) | (v4 >> 24);
  v19 = ((ushort)v4 << 8) | ((int)(ushort)v4 >> 8);
  return Function_22093dc((int)&v8, 42, 0, 0);
}

//----- (02209954) --------------------------------------------------------
int *__fastcall Function_2209954(int a1, int a2, int a3, int a4)
{
  uint v4;
  int v5;
  uint v6;
  int *result;

  v4 = 0;
  v5 = a1;
  do
  {
    Function_2209858(v5, a2, a3, a4);
    v6 = 0;
    do
    {
      if ( !dword_221A400[3728] )
        return 0;
      OS_Sleep(0x64u);
      result = Function_2209788(v5);
      if ( result )
        return result;
      ++v6;
    }
    while ( v6 < 0x14 );
    ++v4;
  }
  while ( v4 < 8 );
  return 0;
}

//----- (022099C4) --------------------------------------------------------
int *__fastcall Function_22099c4(int *result, int a2, int a3)
{
  int v3;
  int v4;
  bool v5;
  int v6;
  int v7;
  int *v8;
  int v9;
  uint v10;
  int v11;
  int *v12;
  uint v13;
  uint v14;
  int v15;
  int v16;
  int v17;

  v3 = a2;
  v4 = (int)result;
  v5 = a2 == 2130706433;
  if ( a2 != 2130706433 )
    result = &dword_221A400[3708];
  v6 = a3;
  if ( a2 != 2130706433 )
  {
    result = (int *)result[20];
    v5 = a2 == (uint)result;
  }
  if ( !v5 )
  {
    result = (int *)Function_220927c(a2);
    if ( result )
    {
      result = (int *)Function_220931c(v3);
      if ( !result )
      {
        v7 = OS_GetTick();
        v8 = &dword_221A400[3740];
        v9 = HIWORD(v7);
        v10 = 0;
        do
        {
          result = (int *)*v8;
          if ( v3 == *v8 )
          {
            HIWORD(dword_221A400[3 * v10 + 3742]) = v9;
            return (int *)MI_CpuCopy8(v4, (uint)&dword_221A400[3 * v10 + 3741], 6u, 0x221DE7Au);
          }
          ++v10;
          v8 += 3;
        }
        while ( v10 < 8 );
        if ( v6 )
        {
          v11 = 0;
          v12 = &dword_221A400[3740];
          v13 = 0;
          v14 = 0;
          while ( *v12 )
          {
            v15 = *((ushort *)v12 + 5);
            v12 += 3;
            v16 = (v9 - v15) << 16;
            if ( v11 < v16 >> 16 )
              v13 = v14;
            ++v14;
            if ( v11 < v16 >> 16 )
              v11 = (uint)v16 >> 16;
            if ( v14 >= 8 )
              goto LABEL_21;
          }
          v13 = v14;
LABEL_21:
          v17 = 12 * v13;
          dword_221A400[3 * v13 + 3740] = v3;
          MI_CpuCopy8(v4, (uint)&dword_221A400[3 * v13 + 3741], 6u, (uint)&dword_221A400[3740]);
          result = dword_221A400 + 14970;
          *(ushort *)(v17 + 35774074) = v9;
        }
      }
    }
  }
  return result;
}

//----- (02209B00) --------------------------------------------------------
int *__fastcall Function_2209b00(int a1, int a2, int a3, uint a4, int a5, ushort a6)
{
  int v6;
  int v7;
  int v8;
  uint v9;
  uint v10;
  int *result;
  int v12;
  int v13;
  int v14;
  uint v15;

  v6 = a1;
  v7 = a2;
  v8 = a3;
  v9 = a4;
  *(ushort *)(a1 - 2) = (a6 << 8) | ((int)a6 >> 8);
  if ( Function_220931c(a5) )
  {
    *(uchar *)(v6 - 14) = 1;
    *(uchar *)(v6 - 13) = 0;
    *(uchar *)(v6 - 12) = 94;
    *(uchar *)(v6 - 11) = BYTE2(a5) & 0x7F;
    *(uchar *)(v6 - 10) = BYTE1(a5);
    *(uchar *)(v6 - 9) = a5;
    goto LABEL_8;
  }
  result = (int *)Function_22092bc(a5);
  v12 = (int)result;
  if ( result )
  {
    result = Function_2209788((int)result);
    if ( !result )
      result = Function_2209954(v12, v13, v14, v15);
    if ( result )
    {
      MI_CpuCopy8((int)result, v6 - 14, 6u, v15);
LABEL_8:
      MI_CpuCopy8((int)&dword_221A400[4022], v6 - 8, 6u, v10);
      return Function_22093dc(v6 - 14, v7 + 14, v8, v9);
    }
  }
  return result;
}

//----- (02209BD0) --------------------------------------------------------
uint __fastcall Function_2209bd0(int a1, int a2, int a3, uint a4, int a5, ushort a6)
{
  int v6;
  uint v7;
  int v8;
  int v9;
  int v10;
  uint v11;
  bool v12;
  bool v13;
  uint result;
  int v15;

  v6 = a2;
  v7 = a4;
  v8 = a1;
  *(ushort *)(a1 - 18) = (((ushort)a2 + 20 + (ushort)a4) << 8) | ((int)((a2 + 20 + a4) & 0xFFFF) >> 8);
  *(ushort *)(a1 - 14) = (a6 << 8) | ((int)a6 >> 8);
  v9 = a3;
  *(ushort *)(a1 - 10) = 0;
  v10 = Function_2209210((ushort *)(a1 - 20), 0x14u);
  *(ushort *)(v8 - 10) = ((ushort)v10 << 8) | (v10 >> 8);
  v12 = a5 == 2130706433;
  if ( a5 != 2130706433 )
    v12 = a5 == dword_221A400[3728];
  if ( !v12 )
    Function_2209b00(v8 - 20, v6 + 20, v9, v7, a5, 0x800u);
  v13 = a5 == 2130706433;
  if ( a5 != 2130706433 )
    v13 = a5 == dword_221A400[3728];
  if ( v13 || (result = Function_220931c(a5)) != 0 )
  {
    MI_CpuCopy8((int)&byte_221A19C, v8 - 28, 8u, v11);
    v15 = OS_DisableInterrupts();
    Function_2209438(&dword_221A400[4022], (int)&dword_221A400[4022], (uchar *)(v8 - 28), v6 + 28, v9, v7);
    result = OS_RestoreInterrupts(v15);
  }
  return result;
}

//----- (02209CF8) --------------------------------------------------------
uint __fastcall Function_2209cf8(int a1, uint a2, int a3, uint a4, int a5, char a6)
{
  int v6;
  int v7;
  uint v8;
  int v9;
  uint v10;
  int v11;
  int v12;
  uint result;

  v6 = a1;
  *(uchar *)(a1 - 20) = 69;
  v7 = 0;
  *(uchar *)(a1 - 19) = 0;
  *(ushort *)(a1 - 16) = (++HIWORD(dword_221A400[3709]) << 8) | ((int)HIWORD(dword_221A400[3709]) >> 8);
  *(uchar *)(a1 - 12) = -128;
  *(uchar *)(a1 - 11) = a6;
  *(ushort *)(a1 - 8) = (HIWORD(dword_221A400[3728]) << 8) | (dword_221A400[3728] >> 24);
  *(ushort *)(a1 - 6) = (LOWORD(dword_221A400[3728]) << 8) | ((int)LOWORD(dword_221A400[3728]) >> 8);
  v8 = a2;
  *(ushort *)(a1 - 4) = (HIWORD(a5) << 8) | (a5 >> 24);
  v9 = a3;
  v10 = a4;
  *(ushort *)(a1 - 2) = ((ushort)a5 << 8) | ((int)(ushort)a5 >> 8);
  if ( a2 > 0x5C8 )
  {
    v11 = a1;
    if ( a2 > 0x5C8 )
    {
      do
      {
        Function_2209bd0(v6, 0, v11, 0x5C8u, a5, v7 | 0x2000);
        v8 -= 1480;
        v11 += 1480;
        v7 = (v7 + 185) & 0xFFFF;
      }
      while ( v8 > 0x5C8 );
    }
    if ( v8 )
    {
      if ( v10 )
        Function_2209bd0(v6, 0, v11, v8, a5, v7 | 0x2000);
      else
        Function_2209bd0(v6, 0, v11, v8, a5, v7);
      v7 = (v7 + (v8 >> 3)) & 0xFFFF;
      v8 = 0;
    }
  }
  if ( v8 + v10 > 0x5C8 )
  {
    do
    {
      v12 = 1480 - v8;
      Function_2209bd0(v6, v8, v9, 1480 - v8, a5, v7 | 0x2000);
      v10 -= 1480 - v8;
      v8 = 0;
      v9 += v12;
      v7 = (v7 + 185) & 0xFFFF;
    }
    while ( v10 > 0x5C8 );
  }
  result = v8 + v10;
  if ( v8 + v10 )
    result = Function_2209bd0(v6, v8, v9, v10, a5, v7);
  return result;
}

//----- (02209EF0) --------------------------------------------------------
uint __fastcall Function_2209ef0(ushort *a1, uint a2, int a3)
{
  int v3;
  ushort *v4;
  uint v5;
  ushort *v6;
  uint v7;
  ushort v8;
  int v9;

  v3 = a3;
  v4 = *(ushort **)(a3 + 76);
  v5 = a2;
  v4[17] = 8;
  v6 = a1;
  v4[19] = dword_21CCC84;
  v4[18] = 0;
  *(ushort *)(a3 + 10) = LOWORD(dword_221A400[3709])++;
  v4[20] = dword_221A400[3709];
  v7 = Function_2209140(v4 + 17, 8u, 0);
  v8 = Function_2209140(v6, v5, v7);
  v9 = Function_22091f4(v8);
  v4[18] = ((ushort)v9 << 8) | (v9 >> 8);
  return Function_2209cf8((int)(v4 + 17), 8u, (int)v6, v5, *(uint *)(v3 + 28), 1);
}

//----- (02209FA0) --------------------------------------------------------
uint __fastcall Function_2209fa0(ushort *a1, uint a2, int a3)
{
  int v3;
  uint v4;
  ushort *v5;
  ushort *v6;
  int v7;
  ushort *v8;
  uint v9;
  ushort v10;
  int v11;

  v3 = a3;
  v4 = a2;
  v5 = *(ushort **)(a3 + 76);
  v6 = v5 + 17;
  *(v6 - 6) = (HIWORD(dword_221A400[3728]) << 8) | (dword_221A400[3728] >> 24);
  *(v6 - 5) = (LOWORD(dword_221A400[3728]) << 8) | ((int)LOWORD(dword_221A400[3728]) >> 8);
  v7 = (ushort)(*(uint *)(a3 + 28) >> 16) >> 8;
  *(v6 - 4) = ((ushort)v7 << 8) | (v7 >> 8);
  *(v6 - 3) = ((ushort)*(uint *)(v3 + 28) << 8) | ((*(uint *)(v3 + 28) & 0xFFFF) >> 8);
  *(v6 - 2) = 4352;
  v6[2] = (((ushort)a2 + 8) << 8) | ((int)((a2 + 8) & 0xFFFF) >> 8);
  v8 = a1;
  *(v6 - 1) = v5[19];
  v6[1] = (*(ushort *)(a3 + 24) << 8) | ((int)*(ushort *)(a3 + 24) >> 8);
  v5[17] = (*(ushort *)(v3 + 10) << 8) | ((int)*(ushort *)(v3 + 10) >> 8);
  v6[3] = 0;
  v9 = Function_2209140(v5 + 11, 0x14u, 0);
  v10 = Function_2209140(v8, v4, v9);
  v11 = Function_22091f4(v10);
  v6[3] = ((ushort)v11 << 8) | (v11 >> 8);
  return Function_2209cf8((int)v6, 8u, (int)v8, v4, *(uint *)(v3 + 28), 17);
}

//----- (0220A0DC) --------------------------------------------------------
int __fastcall Function_220a0dc(int result, uint a2, int a3, char a4)
{
  int v4;
  ushort *v5;
  uint v6;
  char v7;
  int v8;
  uint v9;
  int v10;
  int v11;
  int v12;
  int v13;
  uint v14;
  ushort v15;
  int v16;

  v4 = a3;
  v5 = (ushort *)result;
  v6 = a2;
  v7 = a4;
  if ( *(uchar *)(a3 + 8) )
  {
    if ( (int *)dword_21CCC84 == &dword_221A400[3862] )
      v8 = 35775234;
    else
      v8 = *(uint *)(a3 + 76) + 34;
    if ( a4 & 2 )
      v9 = 24;
    else
      v9 = 20;
    *(ushort *)(v8 - 12) = (HIWORD(dword_221A400[3728]) >> 8 << 8) | ((int)(ushort)(HIWORD(dword_221A400[3728]) >> 8) >> 8);
    *(ushort *)(v8 - 10) = (LOWORD(dword_221A400[3728]) << 8) | ((int)LOWORD(dword_221A400[3728]) >> 8);
    v10 = (ushort)(*(uint *)(a3 + 28) >> 16) >> 8;
    *(ushort *)(v8 - 8) = ((ushort)v10 << 8) | (v10 >> 8);
    *(ushort *)(v8 - 6) = ((ushort)*(uint *)(a3 + 28) << 8) | ((*(uint *)(a3 + 28) & 0xFFFF) >> 8);
    *(ushort *)(v8 - 4) = 1536;
    *(ushort *)(v8 - 2) = (((ushort)v9 + (ushort)a2) << 8) | ((int)((v9 + a2) & 0xFFFF) >> 8);
    *(ushort *)v8 = (*(ushort *)(a3 + 10) << 8) | ((int)*(ushort *)(a3 + 10) >> 8);
    *(ushort *)(v8 + 2) = (*(ushort *)(a3 + 24) << 8) | ((int)*(ushort *)(a3 + 24) >> 8);
    v11 = (ushort)(*(uint *)(a3 + 40) >> 16) >> 8;
    *(ushort *)(v8 + 4) = ((ushort)v11 << 8) | (v11 >> 8);
    *(ushort *)(v8 + 6) = ((ushort)*(uint *)(a3 + 40) << 8) | ((*(uint *)(a3 + 40) & 0xFFFF) >> 8);
    v12 = (ushort)(*(uint *)(a3 + 36) >> 16) >> 8;
    *(ushort *)(v8 + 8) = ((ushort)v12 << 8) | (v12 >> 8);
    *(ushort *)(v8 + 10) = ((ushort)*(uint *)(a3 + 36) << 8) | ((*(uint *)(a3 + 36) & 0xFFFF) >> 8);
    *(uchar *)(v8 + 12) = 16 * (v9 >> 2);
    *(uchar *)(v8 + 13) = a4;
    *(ushort *)(v8 + 14) = ((*(ushort *)(a3 + 60) - *(ushort *)(a3 + 68)) << 8) | (((*(uint *)(a3 + 60)
                                                                                - *(uint *)(a3 + 68)) & 0xFFFF) >> 8);
    *(ushort *)(v8 + 16) = 0;
    *(ushort *)(v8 + 18) = 0;
    if ( a4 & 2 )
    {
      v13 = (ushort)(((uint)HIWORD(dword_221A400[3708]) + 33816576) >> 16) >> 8;
      *(ushort *)(v8 + 20) = ((ushort)v13 << 8) | (v13 >> 8);
      *(ushort *)(v8 + 22) = (HIWORD(dword_221A400[3708]) << 8) | (((HIWORD(dword_221A400[3708]) + 33816576) & 0xFFFF) >> 8);
    }
    v14 = Function_2209140((ushort *)(v8 - 12), v9 + 12, 0);
    v15 = Function_2209140(v5, v6, v14);
    v16 = Function_22091f4(v15);
    *(ushort *)(v8 + 16) = ((ushort)v16 << 8) | (v16 >> 8);
    Function_2209cf8(v8, v9, (int)v5, v6, *(uint *)(v4 + 28), 6);
    result = *(uint *)(v4 + 40) + v6;
    *(uint *)(v4 + 40) = result;
    if ( v7 & 3 )
    {
      result = *(uint *)(v4 + 40) + 1;
      *(uint *)(v4 + 40) = result;
    }
  }
  return result;
}

//----- (0220A350) --------------------------------------------------------
int *__fastcall Function_220a350(int a1)
{
  int v1;
  uint v2;
  uint v3;

  v1 = a1;
  *(ushort *)(a1 + 6) = 512;
  MI_CpuCopy8(a1 + 8, a1 + 18, 0xAu, 0x200u);
  MI_CpuCopy8((int)&dword_221A400[4022], v1 + 8, 6u, v2);
  *(ushort *)(v1 + 14) = (HIWORD(dword_221A400[3728]) << 8) | (dword_221A400[3728] >> 24);
  *(ushort *)(v1 + 16) = (LOWORD(dword_221A400[3728]) << 8) | ((int)LOWORD(dword_221A400[3728]) >> 8);
  MI_CpuCopy8(v1 + 18, v1 - 14, 6u, (LOWORD(dword_221A400[3728]) << 8) | ((int)LOWORD(dword_221A400[3728]) >> 8));
  MI_CpuCopy8((int)&dword_221A400[4022], v1 - 8, 6u, v3);
  return Function_22093dc(v1 - 14, 42, 0, 0);
}

//----- (0220A3F8) --------------------------------------------------------
int __fastcall Function_220a3f8(int result, uint a2)
{
  int *v2;
  bool v3;
  bool v4;
  int v5;
  int v6;
  bool v7;
  int v8;
  int v9;
  int v10;
  BOOL v11;
  bool v12;

  v2 = (int *)result;
  if ( a2 >= 0x1C )
  {
    result = Function_22093b0((ushort *)(result + 8), (ushort *)&dword_221A400[4022]);
    v3 = result == 0;
    if ( result )
    {
      result = dword_221A400[3728];
      v3 = dword_221A400[3728] == 0;
    }
    if ( !v3 )
    {
      result = *(ushort *)v2;
      v4 = result == 256;
      if ( result == 256 )
      {
        result = *((ushort *)v2 + 1);
        v4 = result == 8;
      }
      if ( v4 )
      {
        result = 1030;
        v4 = *((ushort *)v2 + 2) == 1030;
      }
      if ( v4 )
      {
        v5 = *((ushort *)v2 + 3);
        result = ((v5 << 8) | (v5 >> 8)) << 16;
        v6 = ((v5 << 8) | (v5 >> 8)) & 0xFFFF;
        v7 = v6 == 1;
        if ( v6 != 1 )
          v7 = v6 == 2;
        if ( v7 )
        {
          v8 = *((ushort *)v2 + 8);
          result = dword_221A400[3728];
          v9 = ((v8 << 8) | (v8 >> 8)) & 0xFFFF | (((*((ushort *)v2 + 7) << 8) | ((int)*((ushort *)v2 + 7) >> 8)) << 16);
          if ( v9 == dword_221A400[3728] )
            v8 = 1;
          v10 = ((*((ushort *)v2 + 13) << 8) | ((int)*((ushort *)v2 + 13) >> 8)) & 0xFFFF | (((*((ushort *)v2 + 12) << 8) | ((int)*((ushort *)v2 + 12) >> 8)) << 16);
          if ( v9 != dword_221A400[3728] )
            v8 = 0;
          v11 = dword_221A400[3728] == v10;
          if ( !v8 )
            result = (int)Function_22099c4(v2 + 2, v9, dword_221A400[3728] == v10);
          if ( v6 == 1 && v11 )
          {
            result = (int)Function_220a350((int)v2);
          }
          else if ( v6 == 2 )
          {
            v12 = v11 == 0;
            if ( v11 )
              v12 = v8 == 0;
            if ( !v12 )
            {
              result = (int)&dword_221A400[3708];
              BYTE1(dword_221A400[3708]) = 1;
            }
          }
        }
      }
    }
  }
  return result;
}

//----- (0220A53C) --------------------------------------------------------
int __fastcall Function_220a53c(int a1, ushort *a2, uint a3)
{
  int v3;
  ushort *v4;
  uint v5;
  int result;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;

  v3 = a1;
  v4 = a2;
  v5 = a3;
  result = Function_22092bc(((*(ushort *)(a1 + 14) << 8) | ((int)*(ushort *)(a1 + 14) >> 8)) & 0xFFFF | (((*(ushort *)(a1 + 12) << 8) | ((int)*(ushort *)(a1 + 12) >> 8)) << 16));
  v7 = result;
  if ( result )
  {
    if ( Function_2209788(result) )
    {
      *(uchar *)v4 = 0;
      v4[1] = 0;
      v11 = Function_2209210(v4, v5);
      v4[1] = ((ushort)v11 << 8) | (v11 >> 8);
      result = Function_2209cf8(
                 (int)v4,
                 v5,
                 0,
                 0,
                 ((*(ushort *)(v3 + 14) << 8) | ((int)*(ushort *)(v3 + 14) >> 8)) & 0xFFFF | (((*(ushort *)(v3 + 12) << 8) | ((int)*(ushort *)(v3 + 12) >> 8)) << 16),
                 1);
    }
    else
    {
      result = (int)Function_2209858(v7, v8, v9, v10);
    }
  }
  return result;
}

//----- (0220A620) --------------------------------------------------------
uint __fastcall Function_220a620(int a1, int a2, int a3)
{
  int v3;
  int v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  bool v10;
  int v11;
  bool v12;
  int v13;
  int v14;
  int v15;
  uint v16;

  v3 = a1;
  v4 = a2;
  v5 = a3;
  v7 = OS_DisableInterrupts();
  v8 = dword_21CCC88;
  if ( dword_21CCC88 )
  {
    while ( 1 )
    {
      v9 = *(uint *)(v8 + 164);
      v10 = v9 == 0;
      if ( v9 )
      {
        v6 = *(uint *)v9;
        v10 = *(uint *)v9 == 0;
      }
      if ( !v10 )
      {
        v11 = *(uchar *)(v9 + 8);
        v12 = v11 == 11;
        if ( v11 == 11 )
          v12 = *(ushort *)(v4 + 4) == (ushort)v6;
        if ( v12 )
        {
          v13 = *(ushort *)(v9 + 10);
          v14 = *(ushort *)(v4 + 6);
          v12 = v13 == v14;
          if ( v13 == v14 )
            v12 = *(uint *)(v9 + 68) == 0;
        }
        if ( v12 )
        {
          v15 = *(ushort *)(v3 + 14);
          v6 = ((v15 << 8) | (v15 >> 8)) << 16;
          if ( *(uint *)(*(uint *)(v8 + 164) + 28) == (((v15 << 8) | (v15 >> 8)) & 0xFFFF | (((*(ushort *)(v3 + 12) << 8) | ((int)*(ushort *)(v3 + 12) >> 8)) << 16)) )
            break;
        }
      }
      v8 = *(uint *)(v8 + 104);
      if ( !v8 )
        return OS_RestoreInterrupts(v7);
    }
    v16 = *(uint *)(v9 + 60);
    if ( v5 - 8 <= v16 )
      *(uint *)(v9 + 68) = v5 - 8;
    else
      *(uint *)(v9 + 68) = v16;
    MI_CpuCopy8(v4 + 8, *(uint *)(v9 + 64), *(uint *)(v9 + 68), ((v15 << 8) | (v15 >> 8)) << 16);
    if ( *(uint *)(v9 + 4) == 3 )
    {
      *(uint *)(v9 + 4) = 0;
      OS_WakeupThreadDirect(*(uint *)v9);
    }
  }
  return OS_RestoreInterrupts(v7);
}

//----- (0220A720) --------------------------------------------------------
BOOL __fastcall Function_220a720(int a1, int a2, int a3)
{
  bool v3;

  v3 = a1 == 0;
  if ( a1 )
  {
    a3 = -1;
    v3 = a1 == -1;
  }
  return !v3 && a2 && a2 != a3;
}

//----- (0220A740) --------------------------------------------------------
uint __fastcall Function_220a740(ushort *a1, ushort *a2, uint a3)
{
  ushort *v3;
  uint v4;
  ushort *v5;
  uint result;
  int v7;

  v3 = a2;
  v4 = a3;
  v5 = a1;
  result = Function_2209210(a2, a3);
  if ( result == 0xFFFF )
  {
    v7 = (ushort)v5[8];
    result = Function_220a720(
               (((ushort)v5[7] << 8) | ((int)(ushort)v5[7] >> 8)) & 0xFFFF | ((ushort)((v5[6] << 8) | ((int)(ushort)v5[6] >> 8)) << 16),
               (((ushort)v5[9] << 8) | ((int)(ushort)v5[9] >> 8)) & 0xFFFF | (((v7 << 8) | (v7 >> 8)) << 16),
               ((v7 << 8) | (v7 >> 8)) & 0xFFFF);
    if ( result )
    {
      result = *(uchar *)v3;
      if ( *(uchar *)v3 )
      {
        if ( result == 8 )
          result = Function_220a53c((int)v5, v3, v4);
      }
      else
      {
        result = Function_220a620((int)v5, (int)v3, v4);
      }
    }
  }
  return result;
}

//----- (0220A810) --------------------------------------------------------
int __fastcall Function_220a810(int a1, ushort *a2)
{
  int v2;
  int v3;
  bool v4;
  int v5;

  v2 = dword_21CCC88;
  if ( !dword_21CCC88 )
    return 0;
  while ( 1 )
  {
    v3 = *(uint *)(v2 + 164);
    v4 = v3 == 0;
    if ( v3 )
      v4 = *(uint *)v3 == 0;
    if ( !v4
      && *(uchar *)(v3 + 8) == 1
      && *(ushort *)(v3 + 10) == (((a2[1] << 8) | ((int)a2[1] >> 8)) & 0xFFFF)
      && (!*(ushort *)(v3 + 24) || *(ushort *)(v3 + 24) == (((*a2 << 8) | ((int)*a2 >> 8)) & 0xFFFF)) )
    {
      v5 = *(uint *)(v3 + 28);
      if ( !v5
        || v5 == (((*(ushort *)(a1 + 14) << 8) | ((int)*(ushort *)(a1 + 14) >> 8)) & 0xFFFF | (((*(ushort *)(a1 + 12) << 8) | ((int)*(ushort *)(a1 + 12) >> 8)) << 16)) )
      {
        break;
      }
    }
    v2 = *(uint *)(v2 + 104);
    if ( !v2 )
      return 0;
  }
  return *(uint *)(v2 + 164);
}

//----- (0220A8E4) --------------------------------------------------------
int __fastcall Function_220a8e4(int a1, ushort *a2, int a3)
{
  int v3;
  int v4;
  int v5;
  bool v6;
  int v7;
  int v8;

  v3 = *(uchar *)(a3 + 8);
  v4 = 0;
  v5 = 0;
  v6 = v3 == 10;
  if ( v3 != 10 )
    v6 = v3 == 11;
  if ( !v6 )
    v5 = 1;
  v7 = 0;
  v8 = 0;
  if ( v5 && *(ushort *)(a3 + 10) == (((a2[1] << 8) | ((int)a2[1] >> 8)) & 0xFFFF) )
    v8 = 1;
  if ( v8 && *(ushort *)(a3 + 24) == (((*a2 << 8) | ((int)*a2 >> 8)) & 0xFFFF) )
    v7 = 1;
  if ( v7
    && *(uint *)(a3 + 28) == (((*(ushort *)(a1 + 14) << 8) | ((int)*(ushort *)(a1 + 14) >> 8)) & 0xFFFF | (((*(ushort *)(a1 + 12) << 8) | ((int)*(ushort *)(a1 + 12) >> 8)) << 16)) )
  {
    v4 = 1;
  }
  return v4;
}

//----- (0220A998) --------------------------------------------------------
uint *__fastcall Function_220a998(int a1, ushort *a2)
{
  int v2;
  int v3;
  ushort *v4;
  uint *v5;
  bool v6;

  v2 = a1;
  v3 = dword_21CCC88;
  v4 = a2;
  if ( !dword_21CCC88 )
    return 0;
  while ( 1 )
  {
    v5 = *(uint **)(v3 + 164);
    v6 = v5 == 0;
    if ( v5 )
      v6 = *v5 == 0;
    if ( !v6 && Function_220a8e4(v2, v4, *(uint *)(v3 + 164)) )
      break;
    v3 = *(uint *)(v3 + 104);
    if ( !v3 )
      return 0;
  }
  return v5;
}

//----- (0220A9FC) --------------------------------------------------------
int __fastcall Function_220a9fc(int a1, int a2)
{
  uchar *v2;
  int v3;
  int result;
  int v5;
  int v6;
  int v7;
  int v8;

  *(ushort *)(a2 + 46) = 536;
  v2 = (uchar *)(a1 + 20);
  v3 = *(uchar *)(a1 + 12) & 0xF0;
  result = v3 / 4 - 20;
  v5 = v3 / 4 - 21;
  if ( v3 / 4 != 20 )
  {
    do
    {
      v6 = *v2++;
      result = v6;
      if ( !v6 )
        break;
      if ( result != 1 )
      {
        if ( result == 2 )
        {
          v7 = v2[1];
          v8 = v2[2];
          v2 += 3;
          v5 -= 3;
          result = v8 | (v7 << 8);
          *(ushort *)(a2 + 46) = result;
        }
        else
        {
          result = *v2 - 1;
          v5 -= result;
          v2 += result;
        }
      }
    }
    while ( v5-- != 0 );
  }
  return result;
}

//----- (0220AA80) --------------------------------------------------------
int *__fastcall Function_220aa80(int a1)
{
  int v1;
  int *result;

  v1 = Function_22092bc(a1);
  if ( v1 )
    result = Function_2209788(v1);
  else
    result = (int *)1;
  return result;
}

//----- (0220AA9C) --------------------------------------------------------
int *__fastcall Function_220aa9c(int a1, char a2)
{
  int v2;
  char v3;
  int v5;
  int v6;
  int v7;
  int v8;

  v2 = a1;
  v3 = a2;
  if ( Function_220aa80(*(uint *)(a1 + 28)) || (int *)dword_21CCC84 != &dword_221A400[3862] )
    return (int *)Function_220a0dc(0, 0, v2, v3);
  v5 = Function_22092bc(*(uint *)(v2 + 28));
  return Function_2209858(v5, v6, v7, v8);
}

//----- (0220AB10) --------------------------------------------------------
int *__fastcall Function_220ab10(int a1)
{
  return Function_220aa9c(a1, 16);
}

//----- (0220AB24) --------------------------------------------------------
int *__fastcall Function_220ab24(int a1)
{
  return Function_220aa9c(a1, 17);
}

//----- (0220AB38) --------------------------------------------------------
int *__fastcall Function_220ab38(int a1, ushort *a2, int a3)
{
  int v3;
  ushort *v4;
  int v5;
  int *result;
  int v7;

  v3 = a1;
  v4 = a2;
  v5 = a3;
  MI_CpuFill8(&dword_221A400[3789], 0, 0x64u);
  HIWORD(dword_221A400[3791]) = (v4[1] << 8) | ((int)v4[1] >> 8);
  LOWORD(dword_221A400[3795]) = (*v4 << 8) | ((int)*v4 >> 8);
  dword_221A400[3796] = ((*(ushort *)(v3 + 14) << 8) | ((int)*(ushort *)(v3 + 14) >> 8)) & 0xFFFF | (((*(ushort *)(v3 + 12) << 8) | ((int)*(ushort *)(v3 + 12) >> 8)) << 16);
  if ( *((uchar *)v4 + 13) & 0x10 )
  {
    dword_221A400[3799] = ((v4[5] << 8) | ((int)v4[5] >> 8)) & 0xFFFF | (((v4[4] << 8) | ((int)v4[4] >> 8)) << 16);
    result = Function_220aa9c((int)&dword_221A400[3789], 4);
  }
  else
  {
    dword_221A400[3799] = 0;
    v7 = v5 + (((v4[3] << 8) | ((int)v4[3] >> 8)) & 0xFFFF | (((v4[2] << 8) | ((int)v4[2] >> 8)) << 16));
    dword_221A400[3798] = v5
                        + (((v4[3] << 8) | ((int)v4[3] >> 8)) & 0xFFFF | (((v4[2] << 8) | ((int)v4[2] >> 8)) << 16));
    if ( *((uchar *)v4 + 13) & 3 )
      dword_221A400[3798] = v7 + 1;
    result = Function_220aa9c((int)&dword_221A400[3789], 20);
  }
  return result;
}

//----- (0220AC74) --------------------------------------------------------
int *__fastcall Function_220ac74(ushort *a1, ushort *a2, int a3)
{
  int v3;
  ushort *v4;
  ushort *v5;
  long long v6;

  v3 = a3;
  v4 = a1;
  v5 = a2;
  *(uchar *)(a3 + 8) = 3;
  LODWORD(v6) = OS_GetTick();
  *(uint *)(v3 + 16) = v6 >> 16;
  *(uint *)(v3 + 20) = ((v4[9] << 8) | ((int)v4[9] >> 8)) & 0xFFFF | (((v4[8] << 8) | ((int)v4[8] >> 8)) << 16);
  *(ushort *)(v3 + 24) = (*v5 << 8) | ((int)*v5 >> 8);
  *(uint *)(v3 + 28) = ((v4[7] << 8) | ((int)v4[7] >> 8)) & 0xFFFF | (((v4[6] << 8) | ((int)v4[6] >> 8)) << 16);
  *(uint *)(v3 + 36) = (((v5[3] << 8) | ((int)v5[3] >> 8)) & 0xFFFF | (((v5[2] << 8) | ((int)v5[2] >> 8)) << 16))
                       + 1;
  Function_220a9fc((int)v5, v3);
  return Function_220aa9c(v3, 18);
}

//----- (0220AD60) --------------------------------------------------------
int __fastcall Function_220ad60(int a1, ushort *a2, int a3)
{
  ushort *v3;
  ushort *v4;
  int v5;
  uint *v6;
  int v7;
  int v8;

  v3 = (ushort *)a1;
  v4 = a2;
  v5 = a3;
  v6 = Function_220a998(a1, a2);
  v7 = (int)v6;
  if ( !v6 )
    return 0;
  v8 = *((uchar *)v6 + 8);
  if ( v8 == 1 )
  {
    Function_220ac74(v3, v4, v7);
  }
  else if ( (uchar)(v8 - 3) > 1u )
  {
    Function_220ab38((int)v3, v4, v5);
  }
  else
  {
    --*(uint *)(v7 + 40);
    Function_220ac74(v3, v4, v7);
  }
  return 1;
}

//----- (0220ADE8) --------------------------------------------------------
int *__fastcall Function_220ade8(ushort *a1, ushort *a2, int a3)
{
  ushort *v3;
  ushort *v4;
  int v5;
  int *result;
  int v7;

  v3 = a1;
  v4 = a2;
  v5 = a3;
  result = (int *)Function_220a720(
                    ((a1[7] << 8) | ((int)a1[7] >> 8)) & 0xFFFF | (((v3[6] << 8) | ((int)v3[6] >> 8)) << 16),
                    ((a1[9] << 8) | ((int)a1[9] >> 8)) & 0xFFFF | (((a1[8] << 8) | ((int)a1[8] >> 8)) << 16),
                    a3);
  if ( result )
  {
    result = (int *)Function_220ad60((int)v3, v4, v5);
    if ( !result )
    {
      v7 = Function_220a810((int)v3, v4);
      if ( v7 )
      {
        result = Function_220ac74(v3, v4, v7);
      }
      else
      {
        Function_20c233c();
        result = (int *)Function_220a810((int)v3, v4);
        if ( result )
          result = Function_220ac74(v3, v4, (int)result);
      }
    }
  }
  return result;
}

//----- (0220AEC0) --------------------------------------------------------
int *__fastcall Function_220aec0(int a1, ushort *a2, int a3)
{
  int v3;
  ushort *v4;
  int v5;
  uint *v6;
  int v7;
  int *result;

  v3 = a1;
  v4 = a2;
  v5 = a3;
  v6 = Function_220a998(a1, a2);
  v7 = (int)v6;
  if ( !v6 || *((uchar *)v6 + 8) != 2 )
    return Function_220ab38(v3, v4, v5);
  Function_20c233c();
  *(uint *)(v7 + 36) = (((v4[3] << 8) | ((int)v4[3] >> 8)) & 0xFFFF | (((v4[2] << 8) | ((int)v4[2] >> 8)) << 16))
                       + 1;
  *(uint *)(v7 + 48) = ((v4[5] << 8) | ((int)v4[5] >> 8)) & 0xFFFF | (((v4[4] << 8) | ((int)v4[4] >> 8)) << 16);
  *(ushort *)(v7 + 44) = (v4[7] << 8) | ((int)v4[7] >> 8);
  Function_220a9fc((int)v4, v7);
  Function_220ab10(v7);
  *(uchar *)(v7 + 8) = 4;
  result = *(int **)(v7 + 4);
  if ( result == (int *)1 )
  {
    *(uint *)(v7 + 4) = 0;
    result = (int *)OS_WakeupThreadDirect(*(uint *)v7);
  }
  return result;
}

//----- (0220AFB8) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x220B0C8 for case 0"

//----- (0220B0A0) --------------------------------------------------------
void Function_220b0a0()
{
  JUMPOUT(&loc_220B0C8);
}

//----- (0220B0A4) --------------------------------------------------------
void Function_220b0a4()
{
  JUMPOUT(&loc_220B2AC);
}

//----- (0220B0A8) --------------------------------------------------------
void Function_220b0a8()
{
  JUMPOUT(&loc_220B0C8);
}

//----- (0220B0AC) --------------------------------------------------------
void Function_220b0ac()
{
  JUMPOUT(&loc_220B0E0);
}

//----- (0220B0B0) --------------------------------------------------------
void Function_220b0b0()
{
  JUMPOUT(&loc_220B10C);
}

//----- (0220B0B4) --------------------------------------------------------
void Function_220b0b4()
{
  JUMPOUT(&loc_220B2AC);
}

//----- (0220B0B8) --------------------------------------------------------
void Function_220b0b8()
{
  JUMPOUT(&loc_220B288);
}

//----- (0220B0BC) --------------------------------------------------------
void Function_220b0bc()
{
  JUMPOUT(&loc_220B214);
}

//----- (0220B0C0) --------------------------------------------------------
void Function_220b0c0()
{
  JUMPOUT(&loc_220B214);
}

//----- (0220B0C4) --------------------------------------------------------
void Function_220b0c4()
{
  int v0;
  int v1;

  *(uchar *)(v0 + 8) = 0;
  if ( *(uint *)(v0 + 4) == 2 )
  {
    *(uint *)(v0 + 4) = 0;
    OS_WakeupThreadDirect(*(uint *)v0);
  }
  Function_20c233c();
  JUMPOUT(__CS__, v1);
}

//----- (0220B2D0) --------------------------------------------------------
uint *__fastcall Function_220b2d0(int a1, ushort *a2, int a3)
{
  int v3;
  ushort *v4;
  int v5;
  uint *result;
  uint *v7;
  int v8;

  v3 = a1;
  v4 = a2;
  v5 = a3;
  result = Function_220a998(a1, a2);
  v7 = result;
  if ( result )
  {
    v8 = *((uchar *)result + 8);
    switch ( v8 )
    {
      case 4:
        ++result[9];
        Function_220ab24((int)result);
        result = (uint *)6;
        *((uchar *)v7 + 8) = 6;
        break;
      case 7:
        ++result[9];
        Function_220ab10((int)result);
        result = (uint *)9;
        *((uchar *)v7 + 8) = 9;
        break;
      case 8:
        ++result[9];
        Function_220ab10((int)result);
        *((uchar *)v7 + 8) = 0;
        result = (uint *)v7[1];
        if ( result == (uint *)2 )
        {
          v7[1] = 0;
          result = (uint *)OS_WakeupThreadDirect(*v7);
        }
        break;
      default:
        result = Function_220ab38(v3, v4, v5);
        break;
    }
  }
  return result;
}

//----- (0220B39C) --------------------------------------------------------
uint *__fastcall Function_220b39c(int a1, ushort *a2)
{
  uint *result;
  uint *v3;

  result = Function_220a998(a1, a2);
  v3 = result;
  if ( result )
  {
    Function_20c233c();
    *((uchar *)v3 + 8) = 0;
    result = (uint *)(v3[1] - 1);
    if ( (uint)result <= 1 )
    {
      v3[1] = 0;
      result = (uint *)OS_WakeupThreadDirect(*v3);
    }
  }
  return result;
}

//----- (0220B3D8) --------------------------------------------------------
int *__fastcall Function_220b3d8(int a1, ushort *a2, uint a3)
{
  ushort *v3;
  ushort *v4;
  uint v5;
  int *result;
  int v7;
  int v8;

  v3 = (ushort *)a1;
  v4 = a2;
  v5 = a3;
  result = (int *)Function_220922c(a2, a3, a1, 6u);
  if ( result )
    return result;
  result = (int *)((uchar)(v4[6] & 0xF0) + ((uint)((v4[6] & 0xF0) >> 1) >> 30));
  v7 = *((uchar *)v4 + 13) & 0x17;
  v8 = v5 - (uchar)(v4[6] & 0xF0) / 4;
  if ( v7 > 16 )
  {
    if ( v7 <= 18 && v7 >= 17 )
    {
      if ( v7 == 17 )
        return (int *)Function_220afb8(v3, v4, v8);
      if ( v7 == 18 )
      {
        if ( !(*((uchar *)v4 + 13) & 0x28) )
          result = Function_220aec0((int)v3, v4, v8);
        return result;
      }
    }
LABEL_22:
    if ( *((uchar *)v4 + 13) & 4 )
      result = Function_220b39c((int)v3, v4);
    else
      result = Function_220ab38((int)v3, v4, v8);
    return result;
  }
  if ( v7 >= 16 )
    return (int *)Function_220afb8(v3, v4, v8);
  if ( v7 > 2 || v7 < 1 )
    goto LABEL_22;
  if ( v7 == 1 )
    return Function_220b2d0((int)v3, v4, v8);
  if ( v7 != 2 )
    goto LABEL_22;
  if ( !(*((uchar *)v4 + 13) & 0x28) )
    result = Function_220ade8(v3, v4, v8);
  return result;
}

//----- (0220B4F8) --------------------------------------------------------
uint __fastcall Function_220b4f8(int a1, ushort *a2, uint a3)
{
  ushort *v3;
  ushort *v4;
  uint v5;
  uint result;
  int v7;
  int v8;
  int v9;
  bool v10;
  int v11;
  bool v12;
  int v13;
  uint v14;
  int (__fastcall *v15)(uint, uint, int);

  v3 = a2;
  v4 = (ushort *)a1;
  v5 = a3;
  if ( !a2[3] || (result = Function_220922c(a2, a3, a1, 0x11u)) == 0 )
  {
    v7 = OS_DisableInterrupts();
    v8 = dword_21CCC88;
    if ( dword_21CCC88 )
    {
      while ( 1 )
      {
        v9 = *(uint *)(v8 + 164);
        v10 = v9 == 0;
        if ( v9 )
          v10 = *(uint *)v9 == 0;
        if ( !v10
          && *(uchar *)(v9 + 8) == 10
          && *(ushort *)(v9 + 10) == (((v3[1] << 8) | ((int)v3[1] >> 8)) & 0xFFFF)
          && (!*(ushort *)(v9 + 24) || *(ushort *)(v9 + 24) == (((*v3 << 8) | ((int)*v3 >> 8)) & 0xFFFF)) )
        {
          v11 = *(uint *)(v9 + 28);
          v12 = v11 == 0;
          if ( v11 )
            v12 = v11 == -1;
          if ( v12
            || v11 == (((v4[7] << 8) | ((int)v4[7] >> 8)) & 0xFFFF | (((v4[6] << 8) | ((int)v4[6] >> 8)) << 16)) )
          {
            break;
          }
        }
        v8 = *(uint *)(v8 + 104);
        if ( !v8 )
          goto LABEL_28;
      }
      v13 = v4[9];
      *(uint *)(v9 + 20) = ((v13 << 8) | (v13 >> 8)) & 0xFFFF | (((v4[8] << 8) | ((int)v4[8] >> 8)) << 16);
      if ( !*(uint *)(v9 + 28) )
      {
        v13 = v4[7];
        *(uint *)(v9 + 28) = ((v13 << 8) | (v13 >> 8)) & 0xFFFF | (((v4[6] << 8) | ((int)v4[6] >> 8)) << 16);
        *(ushort *)(v9 + 24) = (*v3 << 8) | ((int)*v3 >> 8);
      }
      if ( !*(uint *)(v9 + 68) )
      {
        v14 = *(uint *)(v9 + 60);
        if ( v5 - 8 <= v14 )
          *(uint *)(v9 + 68) = v5 - 8;
        else
          *(uint *)(v9 + 68) = v14;
        MI_CpuCopy8((int)(v3 + 4), *(uint *)(v9 + 64), *(uint *)(v9 + 68), v13);
        if ( *(uint *)(v9 + 4) == 3 )
        {
          *(uint *)(v9 + 4) = 0;
          OS_WakeupThreadDirect(*(uint *)v9);
        }
        else
        {
          v15 = *(int (__fastcall **)(uint, uint, int))(v9 + 56);
          if ( v15 )
          {
            if ( v15(*(uint *)(v9 + 64), *(uint *)(v9 + 68), v9) )
              *(uint *)(v9 + 68) = 0;
          }
        }
      }
    }
LABEL_28:
    result = OS_RestoreInterrupts(v7);
  }
  return result;
}

//----- (0220B704) --------------------------------------------------------
ushort *__fastcall Function_220b704(ushort *result, uint *a2)
{
  int *v2;
  uchar *v3;
  int v4;
  int v5;
  int v6;
  int *v7;
  uint v8;
  int v9;
  int v10;
  bool v11;
  bool v12;
  int v13;
  uint v14;
  int v15;
  long long v16;
  uint v17;
  uint v18;
  uint v19;
  uint v20;
  int v21;
  int v22;
  uint *v23;
  uint v24;
  int v25;

  v2 = 0;
  v3 = (uchar *)result;
  *a2 = 0;
  v4 = result[3];
  v23 = a2;
  v25 = ((v4 << 8) | (v4 >> 8)) & 0xFFFF;
  if ( !(((v4 << 8) | (v4 >> 8)) & 0x3FFF) )
    return result;
  v5 = ((result[7] << 8) | ((int)result[7] >> 8)) & 0xFFFF;
  v6 = result[2];
  v7 = &dword_221A400[3910];
  v8 = 0;
  v9 = 4 * *v3 & 0x3F;
  v10 = v5 | (((*((ushort *)v3 + 6) << 8) | ((int)*((ushort *)v3 + 6) >> 8)) << 16);
  do
  {
    if ( *((ushort *)v7 + 2) )
    {
      v11 = *v7 == (v5 | (((*((ushort *)v3 + 6) << 8) | ((int)*((ushort *)v3 + 6) >> 8)) << 16));
      if ( *v7 == (v5 | (((*((ushort *)v3 + 6) << 8) | ((int)*((ushort *)v3 + 6) >> 8)) << 16)) )
        v11 = *((ushort *)v7 + 3) == v6;
      if ( v11 )
        break;
    }
    ++v8;
    v12 = *((ushort *)v7 + 2) == 0;
    if ( !*((ushort *)v7 + 2) )
      v12 = v2 == 0;
    if ( v12 )
      v2 = v7;
    v7 += 14;
  }
  while ( v8 < 8 );
  v24 = (((*((ushort *)v3 + 1) << 8) | ((int)*((ushort *)v3 + 1) >> 8)) & 0xFFFF) - v9;
  v13 = ((ushort)((ushort)v4 << 8) | (ushort)(v4 >> 8)) & 0x1FFF;
  v14 = v24 + 8 * v13;
  if ( v8 != 8 )
    goto LABEL_18;
  if ( !v2 || v14 > 0x1000 )
    return 0;
  v7 = v2;
  v15 = ((int (__fastcall *)(int))dword_221A400[3713])(v9 + 4110);
  v11 = v15 == 0;
  v2[13] = v15;
  result = 0;
  if ( !v11 )
  {
    *v2 = v10;
    *((ushort *)v2 + 3) = v6;
    *((ushort *)v2 + 4) = 0;
    LODWORD(v16) = OS_GetTick();
    v2[11] = v16 >> 16;
    v2[12] = v2[13] + 14 + v9;
    MI_CpuCopy8((int)v3, v2[13] + 14, v9, v17);
LABEL_18:
    if ( *((ushort *)v7 + 2) != 8 && v14 <= 0x1000 )
    {
      v18 = v13 + ((v24 + 7) >> 3);
      if ( !(v25 & 0x2000) )
      {
        *((ushort *)v7 + 5) = v14;
        *((ushort *)v7 + 4) = v18;
      }
      *((ushort *)v7 + *((ushort *)v7 + 2) + 6) = v13;
      *((ushort *)v7 + (ushort)(*((ushort *)v7 + 2))++ + 14) = v18;
      MI_CpuCopy8((int)&v3[v9], v7[12] + 8 * v13, v24, v18);
      if ( *((ushort *)v7 + 4) )
      {
        v19 = 0;
        v20 = 0;
        if ( *((ushort *)v7 + 2) )
        {
          do
          {
            v21 = (int)v7 + 2 * v20;
            if ( *(ushort *)(v21 + 12) > v19 || v19 >= *(ushort *)(v21 + 28) )
            {
              ++v20;
            }
            else
            {
              v19 = *(ushort *)(v21 + 28);
              v20 = 0;
            }
          }
          while ( v20 < *((ushort *)v7 + 2) );
        }
        if ( v19 >= *((ushort *)v7 + 4) )
        {
          v22 = v7[13];
          *(ushort *)(v22 + 16) = ((*((ushort *)v7 + 5) + (4 * *(uchar *)(v22 + 14) & 0x3F)) << 8) | (((*((ushort *)v7 + 5) + (4 * *(uchar *)(v22 + 14) & 0x3F)) & 0xFFFF) >> 8);
          *((ushort *)v7 + 2) = 0;
          *v23 = 1;
          result = (ushort *)(v22 + 14);
        }
        else
        {
          result = 0;
        }
      }
      else
      {
        result = 0;
      }
    }
    else
    {
      *((ushort *)v7 + 2) = 0;
      ((void (__fastcall *)(int))dword_221A400[3724])(v7[13]);
      result = 0;
    }
  }
  return result;
}

//----- (0220B9D0) --------------------------------------------------------
ushort *__fastcall Function_220b9d0(ushort *a1, uint a2, int a3, int a4)
{
  ushort *v4;
  int v5;
  int v6;
  int v7;
  uint v8;
  ushort *result;
  int v10;
  ushort *v11;
  int v12;
  ushort *v13;
  uint v14;
  ushort *v15;

  v15 = (ushort *)a4;
  v4 = a1;
  v5 = a1[7];
  v6 = a1[6];
  v7 = ((a1[9] << 8) | ((int)a1[9] >> 8)) & 0xFFFF | (((a1[8] << 8) | ((int)a1[8] >> 8)) << 16);
  v8 = a2;
  if ( v7 != (((v5 << 8) | (v5 >> 8)) & 0xFFFF | (((v6 << 8) | (v6 >> 8)) << 16)) )
  {
    result = (ushort *)Function_2209330(v7);
    if ( !result )
      return result;
    v10 = v4[1];
    result = (ushort *)(((v10 << 8) | (v10 >> 8)) << 16);
    if ( v8 < (((v10 << 8) | (v10 >> 8)) & 0xFFFFu) )
      return result;
    result = (ushort *)Function_2209210(v4, 4 * *(uchar *)v4 & 0x3F);
    if ( result != (ushort *)0xFFFF )
      return result;
    if ( dword_221A400[3728] == (((v4[9] << 8) | ((int)v4[9] >> 8)) & 0xFFFF | (((v4[8] << 8) | ((int)v4[8] >> 8)) << 16)) )
      Function_22099c4(
        (int *)v4 - 2,
        ((v4[7] << 8) | ((int)v4[7] >> 8)) & 0xFFFF | (((v4[6] << 8) | ((int)v4[6] >> 8)) << 16),
        1);
  }
  result = Function_220b704(v4, &v15);
  v11 = result;
  if ( result )
  {
    v12 = *((uchar *)result + 9);
    v13 = (ushort *)((char *)result + (4 * *(uchar *)result & 0x3F));
    v14 = (((result[1] << 8) | ((int)result[1] >> 8)) & 0xFFFF) - (4 * *(uchar *)result & 0x3F);
    if ( v12 == 17 )
    {
      Function_220b4f8((int)result, v13, v14);
    }
    else if ( dword_221A400[3728] )
    {
      if ( v12 == 1 )
      {
        Function_220a740(result, v13, v14);
      }
      else if ( v12 == 6 )
      {
        Function_220b3d8((int)result, v13, v14);
      }
    }
    result = v15;
    if ( v15 )
      result = (ushort *)((int (__fastcall *)(ushort *))dword_221A400[3724])(v11 - 7);
  }
  return result;
}

//----- (0220BB94) --------------------------------------------------------
void __fastcall __noreturn Function_220bb94(int a1, int a2, int a3, uint a4)
{
  int v4;
  int v5;
  int v6;
  uint v7;

  v7 = a4;
  while ( 1 )
  {
    v4 = Function_2209684(&v7);
    if ( v7 > 0x22 )
    {
      v5 = *(ushort *)(v4 + 12);
      v6 = ((v5 << 8) | (v5 >> 8)) & 0xFFFF;
      if ( v6 == 2048 )
      {
        Function_220b9d0((ushort *)(v4 + 14), v7 - 14, v5, v7);
      }
      else if ( v6 == 2054 )
      {
        Function_220a3f8(v4 + 14, v7 - 14);
      }
    }
    Function_2209744();
  }
}

//----- (0220BC04) --------------------------------------------------------
int Function_220bc04()
{
  int v0;
  int v1;
  int v2;
  bool v3;

  do
  {
    v0 = 0;
    ++LOWORD(dword_221A400[3710]);
    if ( LOWORD(dword_221A400[3710]) < 0x400u || LOWORD(dword_221A400[3710]) >= 0x1388u )
      LOWORD(dword_221A400[3710]) = 1024;
    v1 = dword_21CCC88;
    if ( dword_21CCC88 )
    {
      while ( 1 )
      {
        v2 = *(uint *)(v1 + 164);
        v3 = v2 == 0;
        if ( v2 )
          v3 = *(uint *)v2 == 0;
        if ( !v3 && *(ushort *)(v2 + 10) == LOWORD(dword_221A400[3710]) )
          break;
        v1 = *(uint *)(v1 + 104);
        if ( !v1 )
          goto LABEL_11;
      }
      v0 = 1;
    }
LABEL_11:
    ;
  }
  while ( v0 );
  return LOWORD(dword_221A400[3710]);
}

//----- (0220BCAC) --------------------------------------------------------
long long Function_220bcac()
{
  long long result;

  HIDWORD(result) = &dword_221A400[3708];
  *(ull *)&dword_221A400[3734] = *(ull *)&dword_221A400[3738]
                                  + *(ull *)&dword_221A400[3736] * *(ull *)&dword_221A400[3734];
  LODWORD(result) = (*(ull *)&dword_221A400[3738] + *(ull *)&dword_221A400[3736] * *(ull *)&dword_221A400[3734]) >> 32;
  return result;
}

//----- (0220BCF0) --------------------------------------------------------
int __fastcall Function_220bcf0(int result)
{
  *(uint *)(dword_21CCC84 + 164) = result;
  return result;
}

//----- (0220BD04) --------------------------------------------------------
int Function_220bd04()
{
  int result;

  result = dword_21CCC84;
  *(uint *)(dword_21CCC84 + 164) = 0;
  return result;
}

//----- (0220BD1C) --------------------------------------------------------
int Function_220bd1c()
{
  int result;
  int v1;

  result = dword_21CCC84;
  v1 = *(uint *)(dword_21CCC84 + 164);
  if ( v1 )
  {
    *(uchar *)(v1 + 8) = 10;
    result = 0;
    *(uint *)(v1 + 68) = 0;
  }
  return result;
}

//----- (0220BD48) --------------------------------------------------------
int __fastcall Function_220bd48(int result, short a2, int a3)
{
  int v3;

  v3 = *(uint *)(dword_21CCC84 + 164);
  if ( v3 )
  {
    if ( a3 == 2130706433 )
      a3 = dword_221A400[3728];
    *(ushort *)(v3 + 26) = a2;
    *(ushort *)(v3 + 24) = *(ushort *)(v3 + 26);
    *(uint *)(v3 + 32) = a3;
    *(uint *)(v3 + 28) = a3;
    if ( !result )
      result = Function_220bc04();
    *(ushort *)(v3 + 10) = result;
  }
  return result;
}

//----- (0220BDA8) --------------------------------------------------------
int Function_220bda8()
{
  int result;
  int v1;

  result = dword_21CCC84;
  v1 = *(uint *)(dword_21CCC84 + 164);
  if ( v1 )
  {
    *(uint *)v1 = dword_21CCC84;
    result = 0;
    *(uchar *)(v1 + 8) = 0;
    *(uint *)(v1 + 68) = 0;
    *(uint *)(v1 + 96) = 0;
    *(uint *)(v1 + 56) = 0;
  }
  return result;
}

//----- (0220BDDC) --------------------------------------------------------
int Function_220bddc()
{
  int result;
  uint *v1;

  result = dword_21CCC84;
  v1 = *(uint **)(dword_21CCC84 + 164);
  if ( v1 )
  {
    result = 0;
    *v1 = 0;
  }
  return result;
}

//----- (0220BDFC) --------------------------------------------------------
int __fastcall Function_220bdfc(int result)
{
  *(uint *)(result + 164) = *(uint *)(dword_21CCC84 + 164);
  return result;
}

//----- (0220BE14) --------------------------------------------------------
uint __fastcall Function_220be14(int a1)
{
  int v1;
  int v2;
  int v3;

  v1 = a1;
  v2 = Function_220bcac();
  *(uint *)(v1 + 40) = v2;
  *(uint *)(v1 + 48) = v2;
  *(uchar *)(v1 + 8) = 1;
  v3 = OS_DisableInterrupts();
  *(uint *)(v1 + 4) = 1;
  OS_SleepThread(0);
  return OS_RestoreInterrupts(v3);
}

//----- (0220BE54) --------------------------------------------------------
int __fastcall Function_220be54(int result)
{
  int v1;

  v1 = *(uint *)(dword_21CCC84 + 164);
  if ( v1 )
    *(uint *)(v1 + 56) = result;
  return result;
}

//----- (0220BE70) --------------------------------------------------------
int Function_220be70()
{
  int result;

  result = *(uint *)(dword_21CCC84 + 164);
  if ( result )
  {
    if ( *(uchar *)(result + 9) )
      result = Function_221075c();
    else
      result = Function_220be14(result);
  }
  return result;
}

//----- (0220BEA8) --------------------------------------------------------
int __fastcall Function_220bea8(int a1)
{
  int v1;
  int v2;
  uint v3;
  long long v4;
  int v5;

  v1 = a1;
  v2 = Function_220bcac();
  v3 = 0;
  do
  {
    *(uint *)(v1 + 40) = v2;
    *(uchar *)(v1 + 8) = 2;
    LODWORD(v4) = OS_GetTick();
    *(uint *)(v1 + 16) = v4 >> 16;
    Function_220aa9c(v1, 2);
    v5 = OS_DisableInterrupts();
    if ( *(uchar *)(v1 + 8) == 2 && dword_221A400[3728] )
    {
      *(uint *)(v1 + 4) = 1;
      OS_SleepThread(0);
    }
    OS_RestoreInterrupts(v5);
    if ( *(uchar *)(v1 + 8) == 4 )
      return 0;
    if ( !dword_221A400[3728] )
      break;
    ++v3;
  }
  while ( v3 < 3 );
  return 1;
}

//----- (0220BF5C) --------------------------------------------------------
int Function_220bf5c()
{
  int v0;

  v0 = *(uint *)(dword_21CCC84 + 164);
  if ( !v0 )
    return 1;
  if ( *(uchar *)(v0 + 9) )
    return Function_2210898();
  return Function_220bea8(v0);
}

//----- (0220BF9C) --------------------------------------------------------
int __fastcall Function_220bf9c(ushort *a1, uint *a2)
{
  int v2;
  int v3;
  bool v4;

  v2 = *(uint *)(dword_21CCC84 + 164);
  if ( !v2 )
    return 0;
  v3 = *(uchar *)(v2 + 8);
  v4 = v3 == 4;
  if ( v3 != 4 )
    v4 = v3 == 10;
  if ( !v4 )
    return 0;
  if ( a1 )
    *a1 = *(ushort *)(v2 + 24);
  if ( a2 )
    *a2 = *(uint *)(v2 + 20);
  return *(uint *)(v2 + 28);
}

//----- (0220BFEC) --------------------------------------------------------
uint __fastcall Function_220bfec(int a1)
{
  int v1;
  uint result;

  v1 = a1;
  Function_20c233c();
  result = (uchar)(*(uchar *)(v1 + 8) - 3);
  if ( result > 1 )
  {
    if ( *(uchar *)(v1 + 8) )
      result = (uint)Function_220ab10(v1);
  }
  else
  {
    Function_220ab24(v1);
    result = 7;
    *(uchar *)(v1 + 8) = 7;
  }
  return result;
}

//----- (0220C03C) --------------------------------------------------------
uint Function_220c03c()
{
  uint result;
  int v1;

  result = dword_21CCC84;
  v1 = *(uint *)(dword_21CCC84 + 164);
  if ( v1 )
  {
    if ( *(uchar *)(v1 + 9) )
      Function_2210d08(*(uint *)(dword_21CCC84 + 164));
    result = Function_220bfec(v1);
  }
  return result;
}

//----- (0220C078) --------------------------------------------------------
int Function_220c078()
{
  int result;
  int v1;
  long long v2;
  int v3;
  int v4;
  bool v5;
  long long v6;

  result = dword_21CCC84;
  v1 = *(uint *)(dword_21CCC84 + 164);
  if ( v1 )
  {
    if ( *(uchar *)(v1 + 9) )
      Function_2210d88(*(uint *)(dword_21CCC84 + 164));
    LODWORD(v2) = OS_GetTick();
    v3 = v2 >> 16;
    while ( 1 )
    {
      v4 = ((int (*)(void))dword_221A400[3726])();
      v5 = v4 == 0;
      if ( v4 )
        v5 = *(uchar *)(v1 + 8) == 0;
      if ( v5 )
        break;
      LODWORD(v6) = OS_GetTick();
      if ( (int)((ull)(v6 >> 16) - v3) >= 39 )
        break;
      Function_2208df0();
    }
    result = 0;
    *(uchar *)(v1 + 8) = 0;
  }
  return result;
}

//----- (0220C100) --------------------------------------------------------
int __fastcall Function_220c100(uint *a1, uint *a2)
{
  uint *v2;
  uint *v3;
  uint v4;
  int v5;
  int i;

  v2 = a2;
  v3 = a1;
  v4 = OS_DisableInterrupts();
  v5 = v2[17];
  for ( i = v4; !v5; v5 = v2[17] )
  {
    v2[1] = 3;
    OS_SleepThread(0);
  }
  OS_RestoreInterrupts(i);
  *v3 = v5;
  return v2[16];
}

//----- (0220C154) --------------------------------------------------------
int __fastcall Function_220c154(uint *a1, int a2)
{
  int v2;
  int v3;
  uint *v4;
  bool v5;
  int v6;
  int v7;
  bool v8;
  int v9;
  int result;

  v2 = a2;
  v3 = *(uint *)(a2 + 68);
  v4 = a1;
  v5 = v3 == 0;
  if ( !v3 )
    v5 = *(uchar *)(v2 + 8) == 4;
  if ( v5 )
  {
    v6 = OS_DisableInterrupts();
    while ( 1 )
    {
      v7 = *(uint *)(v2 + 68);
      v8 = v7 == 0;
      if ( !v7 )
        v8 = *(uchar *)(v2 + 8) == 4;
      if ( !v8 )
        break;
      *(uint *)(v2 + 4) = 2;
      OS_SleepThread(0);
    }
    OS_RestoreInterrupts(v6);
  }
  else
  {
    Function_20c233c();
  }
  v9 = *(uint *)(v2 + 68);
  *v4 = v9;
  if ( v9 )
    result = *(uint *)(v2 + 64);
  else
    result = 0;
  return result;
}

//----- (0220C1D0) --------------------------------------------------------
int __fastcall Function_220c1d0(uint *a1)
{
  int v1;
  int result;

  v1 = *(uint *)(dword_21CCC84 + 164);
  if ( v1 )
  {
    if ( (uchar)(*(uchar *)(v1 + 8) - 10) > 1u )
    {
      if ( *(uchar *)(v1 + 9) )
        result = Function_22108ec();
      else
        result = Function_220c154(a1, v1);
    }
    else
    {
      result = Function_220c100(a1, (uint *)v1);
    }
  }
  else
  {
    *a1 = 0;
    result = 0;
  }
  return result;
}

//----- (0220C234) --------------------------------------------------------
int *__fastcall Function_220c234(uint a1, int a2)
{
  int v2;
  uint v3;
  uint v4;
  uint v5;
  int v6;
  int v7;
  char *v8;
  int v9;
  int *result;
  bool v11;

  v2 = a2;
  v3 = a1;
  v4 = OS_DisableInterrupts();
  v5 = *(uint *)(v2 + 68);
  v6 = v4;
  v7 = 0;
  if ( v5 == *(uint *)(v2 + 60) && v3 )
    v7 = 1;
  if ( v3 < v5 )
  {
    v8 = *(char **)(v2 + 64);
    v9 = v5 - v3;
    *(uint *)(v2 + 68) = v9;
    Function_20d50d8(v8, &v8[v3], v9);
  }
  else
  {
    *(uint *)(v2 + 68) = 0;
  }
  OS_RestoreInterrupts(v6);
  result = (int *)*(uchar *)(v2 + 8);
  v11 = result == (int *)10;
  if ( result != (int *)10 )
    v11 = result == (int *)11;
  if ( !v11 )
  {
    result = *(int **)(v2 + 68);
    if ( !result || v7 )
      result = Function_220ab10(v2);
  }
  return result;
}

//----- (0220C2C4) --------------------------------------------------------
int *__fastcall Function_220c2c4(int *result)
{
  int v1;

  v1 = *(uint *)(dword_21CCC84 + 164);
  if ( v1 )
  {
    if ( *(uchar *)(v1 + 9) )
      result = (int *)Function_22109c4();
    else
      result = Function_220c234((uint)result, v1);
  }
  return result;
}

//----- (0220C2FC) --------------------------------------------------------
uint __fastcall Function_220c2fc(int a1, uint a2, int a3, int a4)
{
  uint v4;
  uint v5;
  int v6;
  int v7;
  int v8;
  int v9;
  uint v10;
  int v11;
  int v12;

  v6 = a3;
  v7 = *(uint *)(a3 + 52);
  v8 = a4;
  v9 = a1;
  if ( a4 )
    v5 = 1;
  v10 = a2;
  if ( !a4 )
    v5 = *(ushort *)(a3 + 44);
  v11 = 2 * v7 + 4;
  while ( v10 && *(uchar *)(v6 + 8) == 4 )
  {
    v4 = *(ushort *)(v6 + 46);
    if ( v4 >= v5 )
      v4 = v5;
    if ( HIWORD(dword_221A400[3708]) < v4 )
      v4 = HIWORD(dword_221A400[3708]);
    if ( !v8 )
      v4 &= 0xFFFFFFFE;
    if ( v10 < v4 )
      v4 = v10;
    v12 = v11 + *(uint *)(v6 + 52) - v7;
    if ( !v12 )
      v4 = 0;
    v7 = *(uint *)(v6 + 52);
    v11 = v12 - 1;
    if ( !v4 )
      break;
    v5 -= v4;
    Function_220a0dc(v9, v4, v6, 24);
    Function_20c233c();
    v9 += v4;
    v10 -= v4;
  }
  return v4;
}

//----- (0220C3C0) --------------------------------------------------------
uint __fastcall Function_220c3c0(int a1, uint a2, int a3, uint a4, int a5, int a6)
{
  int v6;
  uint v7;
  uint result;
  bool v9;

  v6 = a3;
  v7 = a4;
  result = Function_220c2fc(a1, a2, a5, a6);
  v9 = result == 0;
  if ( result )
    v9 = v7 == 0;
  if ( !v9 )
    result = Function_220c2fc(v6, v7, a5, 0);
  return result;
}

//----- (0220C3FC) --------------------------------------------------------
int __fastcall Function_220c3fc(int a1, uint a2, int a3, uint a4, int a5)
{
  int v5;
  uint v6;
  int v7;
  int v8;
  long long v9;
  int v10;
  long long v11;
  int v12;
  long long v13;
  bool v14;
  uint v15;
  long long v16;
  int v17;
  bool v18;
  long long v19;
  int v20;
  long long v21;
  int v22;
  bool v23;
  long long v24;
  uint v26;
  int v27;
  int v28;

  v5 = a1;
  v28 = 0;
  v6 = a2;
  v7 = a3;
  v26 = a4;
  v8 = 0;
  *(uint *)(a5 + 52) = 0;
  LODWORD(v9) = OS_GetTick();
  v27 = v9 >> 16;
  while ( 1 )
  {
    v22 = ((int (*)(void))dword_221A400[3726])();
    v23 = v22 == 0;
    if ( v22 )
      v23 = v6 == 0;
    if ( v23 )
      break;
    if ( *(uchar *)(a5 + 8) != 4 )
      break;
    LODWORD(v24) = OS_GetTick();
    if ( (int)((ull)(v24 >> 16) - v27) >= 159 )
      break;
    v10 = *(uint *)(a5 + 40);
    Function_220c3c0(v5, v6, v7, v26, a5, v8);
    LODWORD(v11) = OS_GetTick();
    v12 = v11 >> 16;
    do
    {
      Function_2208df0();
      if ( !((int (*)(void))dword_221A400[3726])() )
        break;
      if ( *(uchar *)(a5 + 8) != 4 )
        break;
      if ( *(uint *)(a5 + 40) == *(uint *)(a5 + 48) )
        break;
      LODWORD(v13) = OS_GetTick();
      if ( (int)((ull)(v13 >> 16) - v12) >= 15 )
        break;
      v14 = v8 == 0;
      if ( v8 )
        v14 = *(ushort *)(a5 + 44) == 0;
    }
    while ( v14 );
    v15 = *(uint *)(a5 + 48) - v10;
    if ( v15 > *(uint *)(a5 + 40) - v10 )
      v15 = 0;
    v28 += v15;
    if ( v15 )
    {
      LODWORD(v16) = OS_GetTick();
      v27 = v16 >> 16;
    }
    *(uint *)(a5 + 40) = *(uint *)(a5 + 48);
    v17 = *(uchar *)(a5 + 8);
    v18 = v17 == 4;
    if ( v17 == 4 )
      v18 = *(ushort *)(a5 + 44) == 0;
    if ( v18 )
      v18 = v15 == 0;
    if ( v18 )
    {
      if ( !v8 )
      {
        LODWORD(v19) = OS_GetTick();
        v20 = v19 >> 16;
        do
        {
          if ( !((int (*)(void))dword_221A400[3726])() )
            break;
          LODWORD(v21) = OS_GetTick();
          if ( (int)((ull)(v21 >> 16) - v20) >= 15 )
            break;
          Function_2208df0();
        }
        while ( !*(ushort *)(a5 + 44) );
        if ( !*(ushort *)(a5 + 44) )
          v8 = 1;
      }
    }
    else
    {
      v8 = 0;
    }
    if ( v15 >= v6 )
    {
      v5 = v7 + v15 - v6;
      v7 = 0;
      v6 = v26 - (v15 - v6);
      v26 = 0;
    }
    else
    {
      v5 += v15;
      v6 -= v15;
    }
  }
  return v28;
}

//----- (0220C604) --------------------------------------------------------
int __fastcall Function_220c604(ushort *a1, uint a2, int a3, uint a4)
{
  uint v4;
  ushort *v5;
  int v6;
  uint v7;
  int v8;
  int result;

  v4 = a2;
  v5 = (ushort *)a3;
  v6 = *(uint *)(dword_21CCC84 + 164);
  v7 = a4;
  if ( !v6 )
    return 0;
  v8 = *(uchar *)(v6 + 8);
  if ( v8 == 10 )
  {
    if ( a2 )
      Function_2209fa0(a1, a2, *(uint *)(dword_21CCC84 + 164));
    if ( v7 )
      Function_2209fa0(v5, v7, v6);
    result = v4 + v7;
  }
  else if ( v8 == 11 )
  {
    if ( a2 )
      Function_2209ef0(a1, a2, *(uint *)(dword_21CCC84 + 164));
    if ( v7 )
      Function_2209ef0(v5, v7, v6);
    result = v4 + v7;
  }
  else
  {
    result = *(uchar *)(v6 + 9) ? Function_2210bd4() : Function_220c3fc(
                                                         (int)a1,
                                                         a2,
                                                         a3,
                                                         a4,
                                                         *(uint *)(dword_21CCC84 + 164));
  }
  if ( LOBYTE(dword_221A400[3708]) )
    return 0;
  return result;
}

//----- (0220C6D8) --------------------------------------------------------
int __fastcall Function_220c6d8(ushort *a1, uint a2)
{
  int v2;
  uint v3;
  uint v4;
  uint v5;
  int result;

  v2 = *(uint *)(dword_21CCC84 + 164);
  if ( !v2 )
    return 0;
  if ( !*(uint *)(v2 + 96) )
    return Function_220c604(a1, a2, 0, 0);
  v3 = Function_220c604(*(ushort **)(v2 + 92), *(uint *)(v2 + 96), (int)a1, a2);
  v4 = *(uint *)(v2 + 96);
  v5 = v3;
  if ( v3 >= v4 )
  {
    *(uint *)(v2 + 96) = 0;
    result = v3 - v4;
  }
  else
  {
    Function_20d50d8(*(char **)(v2 + 92), (char *)(*(uint *)(v2 + 92) + v3), v4 - v3);
    result = 0;
    *(uint *)(v2 + 96) -= v5;
  }
  return result;
}

//----- (0220C770) --------------------------------------------------------
int Function_220c770()
{
  int v0;
  int result;
  int v2;
  int v3;

  v0 = *(uint *)(dword_21CCC84 + 164);
  if ( !v0 )
    return 0;
  if ( *(uchar *)(v0 + 9) )
    return Function_2210b58();
  v2 = *(uint *)(v0 + 68);
  if ( v2 || (v3 = *(uchar *)(v0 + 8), v3 == 4) || (uchar)(v3 - 10) <= 1u )
    result = v2;
  else
    result = -1;
  return result;
}

//----- (0220C7E0) --------------------------------------------------------
int __fastcall Function_220c7e0(int a1, uint a2)
{
  int result;
  int v3;
  bool v4;

  result = dword_21CCC84;
  v3 = *(uint *)(dword_21CCC84 + 164);
  v4 = v3 == 0;
  if ( v3 )
  {
    a2 = *(uint *)(v3 + 96);
    v4 = a2 == 0;
  }
  if ( !v4 )
  {
    Function_220c604(*(ushort **)(v3 + 92), a2, 0, 0);
    result = 0;
    *(uint *)(v3 + 96) = 0;
  }
  return result;
}

//----- (0220C820) --------------------------------------------------------
int Function_220c820()
{
  int v0;
  int v1;
  long long v2;
  int v3;
  int v4;
  int v5;
  long long v6;
  int v7;
  int v8;
  int v9;

  ((void (*)(void))dword_221A400[3714])();
  LODWORD(v2) = dword_221A400[3728];
  if ( dword_221A400[3728] )
  {
    Function_2209858(dword_221A400[3728], SHIDWORD(v2), v0, v1);
    OS_Sleep(0x64u);
    Function_2209858(dword_221A400[3728], v3, v4, v5);
    LODWORD(v6) = OS_GetTick();
    v7 = v6 >> 16;
    while ( 1 )
    {
      LODWORD(v2) = ((int (*)(void))dword_221A400[3726])();
      if ( !(uint)v2 )
        break;
      LODWORD(v2) = OS_GetTick();
      LODWORD(v2) = (ull)(v2 >> 16) - v7;
      if ( (int)v2 >= 23 )
        break;
      if ( BYTE1(dword_221A400[3708]) )
      {
        LODWORD(v2) = Function_2208cec(4, SHIDWORD(v2), v8, v9);
        return v2;
      }
      OS_Sleep(0x64u);
    }
  }
  return v2;
}

//----- (0220C8C0) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x220C9A4 for case 0"

//----- (0220C994) --------------------------------------------------------
void Function_220c994()
{
  JUMPOUT(&loc_220C9A4);
}

//----- (0220C998) --------------------------------------------------------
void Function_220c998()
{
  JUMPOUT(&loc_220C9E8);
}

//----- (0220C99C) --------------------------------------------------------
void Function_220c99c()
{
  JUMPOUT(&loc_220CA0C);
}

//----- (0220C9A0) --------------------------------------------------------
void Function_220c9a0()
{
  int v0;
  int v1;
  int v2;
  int *v3;
  int i;
  int v5;
  bool v6;
  int v7;
  int v8;
  int *v9;

  v2 = 0;
  v3 = &dword_221A400[3740];
  while ( 1 )
  {
    if ( *v3 && (short)(v0 - *((ushort *)v3 + 5)) > 957 )
      *v3 = 0;
    ++v2;
    v3 += 3;
    if ( v2 >= 8 )
    {
      if ( dword_221A400[3719] && v1 == 1 )
        Function_2209858(dword_221A400[3719], 957, 0, v2);
      for ( i = dword_21CCC88; i; i = *(uint *)(i + 104) )
      {
        v5 = *(uint *)(i + 164);
        v6 = v5 == 0;
        if ( v5 )
          v6 = *(uint *)v5 == 0;
        if ( !v6 )
        {
          v7 = *(uchar *)(v5 + 8);
          if ( v7 != 3 || v0 - *(uint *)(v5 + 16) <= 39 )
          {
            if ( v7 != 2 || v0 - *(uint *)(v5 + 16) <= 39 )
            {
              if ( v7 != 4 && *(uint *)(v5 + 4) == 2 )
              {
                *(uint *)(v5 + 4) = 0;
                OS_WakeupThreadDirect(*(uint *)v5);
              }
            }
            else if ( *(uint *)(v5 + 4) == 1 )
            {
              *(uchar *)(v5 + 8) = 0;
              *(uint *)(v5 + 4) = 0;
              OS_WakeupThreadDirect(*(uint *)v5);
            }
          }
          else
          {
            *(uchar *)(v5 + 8) = 1;
            *(ushort *)(v5 + 24) = *(ushort *)(v5 + 26);
            *(uint *)(v5 + 28) = *(uint *)(v5 + 32);
          }
        }
      }
      v8 = 0;
      v9 = &dword_221A400[3910];
      while ( 1 )
      {
        if ( *((ushort *)v9 + 2) && v0 - v9[11] > 239 )
        {
          ((void (__fastcall *)(int))dword_221A400[3724])(v9[13]);
          *((ushort *)v9 + 2) = 0;
        }
        ++v8;
        v9 += 14;
        if ( v8 >= 8 )
        {
          Function_2210df0(v0);
          if ( !dword_221A400[3723] )
            JUMPOUT(&loc_220C91C);
          ((void (*)(void))dword_221A400[3723])();
          JUMPOUT(&loc_220C91C);
        }
      }
    }
  }
}

//----- (0220CC30) --------------------------------------------------------
int __fastcall Function_220cc30(ushort *a1, char a2, uint *a3)
{
  char v3;
  uint *v4;
  ushort *v5;
  long long v6;
  int v7;
  uint v8;

  v3 = a2;
  v4 = a3;
  v5 = a1;
  MI_CpuFill8(a1, 0, 0xECu);
  *v5 = 257;
  *((uchar *)v5 + 2) = 6;
  v6 = *(ull *)&dword_221A400[3738] + *(ull *)&dword_221A400[3736] * *(ull *)&dword_221A400[3734];
  *(ull *)&dword_221A400[3734] = *(ull *)&dword_221A400[3738]
                                  + *(ull *)&dword_221A400[3736] * *(ull *)&dword_221A400[3734];
  v7 = HIDWORD(v6) << 16;
  if ( v4 )
    *v4 = HIDWORD(v6);
  v5[2] = (HIWORD(v6) << 8) | (SHIDWORD(v6) >> 24);
  v5[3] = (HIWORD(v7) << 8) | (v7 >> 24);
  v5[6] = (HIWORD(dword_221A400[3728]) << 8) | (dword_221A400[3728] >> 24);
  v5[7] = (LOWORD(dword_221A400[3728]) << 8) | ((int)LOWORD(dword_221A400[3728]) >> 8);
  MI_CpuCopy8(
    (int)&dword_221A400[4022],
    (uint)(v5 + 14),
    6u,
    (LOWORD(dword_221A400[3728]) << 8) | ((int)LOWORD(dword_221A400[3728]) >> 8));
  v5[118] = -32157;
  v5[119] = 25427;
  v5[120] = 309;
  *((uchar *)v5 + 242) = v3;
  *((uchar *)v5 + 243) = 61;
  *((uchar *)v5 + 244) = 7;
  *((uchar *)v5 + 245) = 1;
  MI_CpuCopy8((int)&dword_221A400[4022], (uint)(v5 + 123), 6u, 1u);
  *((uchar *)v5 + 252) = 12;
  *((uchar *)v5 + 253) = 10;
  MI_CpuCopy8((int)"NintendoDS", (uint)(v5 + 127), 0xAu, v8);
  *((uchar *)v5 + 264) = 55;
  *((uchar *)v5 + 265) = 3;
  *((uchar *)v5 + 266) = 1;
  *((uchar *)v5 + 267) = 3;
  *((uchar *)v5 + 268) = 6;
  return (int)v5 + 269;
}

//----- (0220CDBC) --------------------------------------------------------
ushort *__fastcall Function_220cdbc(int a1, uint a2, ushort *a3, uint a4)
{
  ushort *v4;
  int v5;

  v4 = a3;
  if ( a4 < a2 )
  {
    v5 = a2 - a4;
    MI_CpuFill8(a3, a1, a2 - a4);
    v4 = (ushort *)((char *)v4 + v5);
  }
  return v4;
}

//----- (0220CDF0) --------------------------------------------------------
int __fastcall Function_220cdf0(int a1, int a2, int a3, int a4)
{
  int v4;
  ushort *v5;
  int v7;
  int v8;

  v8 = a4;
  v4 = Function_220cc30((ushort *)&dword_221A400[4049] + 1, 1, &v7);
  if ( dword_221A400[3721] )
  {
    *(uchar *)v4 = 50;
    *(uchar *)(v4 + 1) = 4;
    *(uchar *)(v4 + 2) = 0;
    *(uchar *)(v4 + 3) = BYTE2(dword_221A400[3721]);
    *(uchar *)(v4 + 4) = BYTE1(dword_221A400[3721]);
    *(uchar *)(v4 + 5) = dword_221A400[3721];
    v4 += 6;
  }
  *(uchar *)v4 = -1;
  v5 = Function_220cdbc(0, 0x12Cu, (ushort *)(v4 + 1), v4 - 35775301);
  Function_220c6d8((ushort *)&dword_221A400[4049] + 1, (uint)(v5 - 17887651));
  return v7;
}

//----- (0220CEB4) --------------------------------------------------------
int __fastcall Function_220ceb4(int a1, int a2, int a3, int a4)
{
  int v4;
  uchar *v5;
  int v6;
  ushort *v7;
  int v9;

  v9 = a4;
  v4 = a1;
  v5 = (uchar *)Function_220cc30((ushort *)&dword_221A400[4049] + 1, 3, &v9);
  v6 = (int)v5;
  if ( !v4 )
  {
    *v5 = 50;
    v5[1] = 4;
    v5[2] = HIBYTE(dword_221A400[3721]);
    v5[3] = BYTE2(dword_221A400[3721]);
    v5[4] = BYTE1(dword_221A400[3721]);
    v5[5] = dword_221A400[3721];
    v5[6] = 54;
    v5[7] = 4;
    v5[8] = HIBYTE(dword_221A400[3716]);
    v5[9] = BYTE2(dword_221A400[3716]);
    v5[10] = BYTE1(dword_221A400[3716]);
    v5[11] = dword_221A400[3716];
    v6 = (int)(v5 + 12);
  }
  *(uchar *)v6 = -1;
  v7 = Function_220cdbc(0, 0x12Cu, (ushort *)(v6 + 1), v6 - 35775301);
  Function_220c6d8((ushort *)&dword_221A400[4049] + 1, (uint)(v7 - 17887651));
  return v9;
}

//----- (0220CFBC) --------------------------------------------------------
int __fastcall Function_220cfbc(int a1, int a2, int a3, int a4)
{
  int v4;
  long long v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  bool v11;
  int v12;
  int *v13;
  uint v14;
  int v15;
  int v16;
  int v17;
  long long v18;
  int v20;
  int *v21;
  int v22;

  v22 = a4;
  v20 = a1;
  v4 = 15 * (a2 + 1);
  LODWORD(v5) = OS_GetTick();
  v6 = v5 >> 16;
  v7 = 0;
  while ( ((int (*)(void))dword_221A400[3726])() )
  {
    if ( v7 )
      break;
    LODWORD(v18) = OS_GetTick();
    if ( (int)((ull)(v18 >> 16) - v6) >= v4 )
      break;
    if ( Function_220c770() )
    {
      v8 = Function_220c1d0(&v21);
      v9 = v8;
      if ( (uint)v21 > 0xF0
        && *(uchar *)v8 == 2
        && v20 == (((*(ushort *)(v8 + 6) << 8) | ((int)*(ushort *)(v8 + 6) >> 8)) & 0xFFFF | (((*(ushort *)(v8 + 4) << 8) | ((int)*(ushort *)(v8 + 4) >> 8)) << 16))
        && !Function_22093b0((ushort *)(v8 + 28), (ushort *)&dword_221A400[4022]) )
      {
        v10 = _byteswap_ushort(*(ushort *)(v9 + 18));
        v11 = *(uchar *)(v9 + 236) == 99;
        v12 = v10 | (_byteswap_ushort(*(ushort *)(v9 + 16)) << 16);
        if ( *(uchar *)(v9 + 236) == 99 )
          v10 = *(uchar *)(v9 + 237);
        v13 = v21;
        v7 = 3;
        if ( *(uchar *)(v9 + 236) == 99 )
        {
          v11 = v10 == 130;
          if ( v10 == 130 )
            v10 = *(uchar *)(v9 + 238);
        }
        v14 = (uint)v21 + v9;
        if ( v11 )
        {
          v11 = v10 == 83;
          if ( v10 == 83 )
          {
            v13 = (int *)(v9 + 240);
            v11 = *(uchar *)(v9 + 239) == 99;
          }
        }
        if ( v11 )
        {
          while ( (uint)v13 < v14 )
          {
            v17 = *(uchar *)v13;
            v13 = (int *)((char *)v13 + 1);
            v16 = v17;
            if ( v17 == 255 )
              break;
            if ( v16 )
            {
              if ( v16 > 51 )
              {
                if ( v16 > 53 )
                {
                  if ( v16 == 54 )
                    dword_221A400[3716] = _byteswap_ushort(*(ushort *)((char *)v13 + 3)) | ((*((uchar *)v13 + 2) | (*((uchar *)v13 + 1) << 8)) << 16);
                }
                else if ( v16 == 53 )
                {
                  v15 = *((uchar *)v13 + 1);
                  if ( v15 == 2 )
                  {
                    v7 = 1;
                    dword_221A400[3721] = v12;
                  }
                  else if ( v15 == 5 )
                  {
                    v7 = 2;
                    dword_221A400[3728] = v12;
                  }
                }
              }
              else if ( v16 < 51 )
              {
                if ( v16 <= 6 && v16 >= 1 )
                {
                  switch ( v16 )
                  {
                    case 1:
                      dword_221A400[3715] = _byteswap_ushort(*(ushort *)((char *)v13 + 3)) | ((*((uchar *)v13
                                                                                              + 2) | (*((uchar *)v13 + 1) << 8)) << 16);
                      break;
                    case 3:
                      dword_221A400[3719] = _byteswap_ushort(*(ushort *)((char *)v13 + 3)) | ((*((uchar *)v13
                                                                                              + 2) | (*((uchar *)v13 + 1) << 8)) << 16);
                      break;
                    case 6:
                      if ( *(uchar *)v13 >= 8u )
                        dword_221A400[3733] = _byteswap_ushort(*(ushort *)((char *)v13 + 7)) | ((*((uchar *)v13
                                                                                                + 6) | (*((uchar *)v13 + 5) << 8)) << 16);
                      else
                        dword_221A400[3733] = 0;
                      dword_221A400[3732] = _byteswap_ushort(*(ushort *)((char *)v13 + 3)) | ((*((uchar *)v13
                                                                                              + 2) | (*((uchar *)v13 + 1) << 8)) << 16);
                      break;
                  }
                }
              }
              else
              {
                dword_221A400[3727] = _byteswap_ushort(*(ushort *)((char *)v13 + 3)) | ((*((uchar *)v13 + 2) | (*((uchar *)v13 + 1) << 8)) << 16);
              }
              v13 = (int *)((char *)v13 + *(uchar *)v13 + 1);
            }
          }
        }
      }
      Function_220c2c4(v21);
    }
    else
    {
      Function_2208df0();
    }
  }
  return v7;
}

//----- (0220D30C) --------------------------------------------------------
BOOL Function_220d30c()
{
  int v0;
  int v1;
  int v2;
  int v3;
  int v4;
  int v5;
  int v6;
  int v7;
  int v8;

  Function_220bda8();
  Function_220bd1c();
  v0 = Function_220bd48(68, 67, -1);
  v4 = 0;
  do
  {
    v5 = Function_220cdf0(v0, v1, v2, v3);
    v0 = Function_220cfbc(v5, v4, v6, v7);
    v8 = v0;
    if ( v0 == 1 )
      break;
    ++v4;
  }
  while ( v4 < 4 );
  Function_220bddc();
  return v8 == 1;
}

//----- (0220D364) --------------------------------------------------------
int __fastcall Function_220d364(uint *a1, int a2)
{
  int v2;
  uint *v3;
  int v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int result;
  uint v13;

  v2 = a2;
  v3 = a1;
  Function_220bda8();
  Function_220bd1c();
  if ( v2 == 1 )
    Function_220bd48(68, 67, dword_221A400[3716]);
  else
    Function_220bd48(68, 67, -1);
  v7 = 0;
  do
  {
    v8 = Function_220ceb4(v2, v4, v5, v6);
    v11 = Function_220cfbc(v8, v7, v9, v10);
    if ( v11 )
      break;
    ++v7;
  }
  while ( v7 < 4 );
  Function_220bddc();
  if ( v11 == 2 )
  {
    result = 1;
    *v3 = (uint)dword_221A400[3727] >> 1;
    dword_221A400[3722] = (uint)(3 * dword_221A400[3727]) >> 3;
  }
  else
  {
    v13 = (uint)dword_221A400[3722] >> 1;
    dword_221A400[3722] = (uint)dword_221A400[3722] >> 1;
    *v3 = (uint)dword_221A400[3722] >> 1;
    if ( v2 == 1 )
    {
      if ( v13 < 0x3C )
      {
        *v3 = 1;
        dword_221A400[3722] = (uint)dword_221A400[3727] >> 3;
      }
    }
    else if ( v2 == 2 && v13 < 0x3C )
    {
      *v3 = 1;
    }
    result = 0;
  }
  return result;
}

//----- (0220D460) --------------------------------------------------------
int Function_220d460()
{
  int v0;
  ushort *v1;

  Function_220bda8();
  Function_220bd1c();
  Function_220bd48(68, 67, dword_221A400[3716]);
  v0 = Function_220cc30((ushort *)&dword_221A400[4049] + 1, 7, 0);
  *(uchar *)v0 = -1;
  v1 = Function_220cdbc(0, 0x12Cu, (ushort *)(v0 + 1), v0 - 35775301);
  Function_220c6d8((ushort *)&dword_221A400[4049] + 1, (uint)(v1 - 17887651));
  return Function_220bddc();
}

//----- (0220D4CC) --------------------------------------------------------
int __fastcall Function_220d4cc(uchar *a1)
{
  int result;
  int v2;
  int v3;
  uchar *v4;
  int v5;

  v3 = *a1;
  result = (int)(a1 + 1);
  v2 = v3;
  if ( v3 )
  {
    while ( (v2 & 0xC0) != 192 )
    {
      v4 = (uchar *)(result + v2);
      v5 = *v4;
      result = (int)(v4 + 1);
      v2 = v5;
      if ( !v5 )
        return result;
    }
    ++result;
  }
  return result;
}

//----- (0220D4FC) --------------------------------------------------------
int __fastcall Function_220d4fc(uchar *a1, int a2, int a3, int a4, uint a5)
{
  int v5;
  int v6;
  int *v7;
  short v8;
  char *v9;
  uchar *v10;
  int v11;
  int v12;
  uint v13;
  char *v14;
  int *v15;
  int v17;
  int v18;
  long long v19;
  int v20;
  uchar *v21;
  int v22;
  int v23;
  uint v24;
  uchar *v25;
  int v26;
  int v27;
  bool v28;
  uchar *v29;
  uint v30;
  uint v31;
  long long v32;
  int *v33;
  short v34;
  short v35;
  short v36;
  short v37;
  short v38;
  short v39;
  char v40;
  uchar v41[3];
  int v42;

  v42 = a4;
  v5 = a3;
  v6 = a2;
  v34 = ((ushort)a3 << 8) | (a3 >> 8);
  LOBYTE(v7) = 0;
  if ( a2 == 32 )
  {
    v8 = 4097;
  }
  else
  {
    v8 = 1;
    v35 = 1;
  }
  v37 = 0;
  if ( v6 == 32 )
    v35 = v8;
  v36 = 256;
  v9 = &v40;
  v38 = 0;
  v39 = 0;
  v33 = 0;
  v12 = *a1;
  v10 = a1 + 1;
  v11 = v12;
  v13 = a4;
  v14 = v41;
  if ( v12 )
  {
    v15 = 0;
    do
    {
      if ( v11 == 46 )
      {
        *v9 = (char)v7;
        v9 = v14;
        v15 = 0;
        LOBYTE(v7) = 0;
        v33 = 0;
        ++v14;
      }
      else
      {
        if ( v14 - (char *)&v34 >= 60 )
          return -1;
        v7 = (int *)((char *)v15 + 1);
        v15 = v7;
        v33 = v7;
        *v14++ = v11;
      }
      v17 = *v10++;
      v11 = v17;
    }
    while ( v17 );
  }
  *v9 = (char)v33;
  *v14 = 0;
  v14[1] = BYTE1(v6);
  v14[2] = v6;
  v14[3] = 0;
  v14[4] = 1;
  Function_220c6d8((ushort *)&v34, v14 + 5 - (char *)&v34);
  v18 = 0;
  LODWORD(v19) = OS_GetTick();
  v20 = v19 >> 16;
  while ( ((int (*)(void))dword_221A400[3726])() )
  {
    if ( v18 )
      break;
    LODWORD(v32) = OS_GetTick();
    if ( (int)((ull)(v32 >> 16) - v20) >= 15 )
      break;
    if ( Function_220c770() )
    {
      v21 = (uchar *)Function_220c1d0(&v33);
      if ( (uint)v33 > 0xC
        && v5 == (((*(ushort *)v21 << 8) | ((int)*(ushort *)v21 >> 8)) & 0xFFFF) )
      {
        if ( (v21[3] & 0xF) == 3 )
        {
          v18 = -1;
        }
        else if ( !(v21[3] & 0xF) )
        {
          v22 = (uchar)v21[4];
          v23 = (uchar)v21[5];
          v24 = (uint)v33 + (uint)v21;
          v25 = v21 + 12;
          v26 = ((v23 | (v22 << 8)) & 0xFFFF) - 1;
          if ( (v23 | (v22 << 8)) & 0xFFFF )
          {
            do
            {
              v27 = Function_220d4cc(v25);
              v28 = v26 == 0;
              v25 = (uchar *)(v27 + 4);
              --v26;
            }
            while ( !v28 );
          }
          if ( (uint)v25 < v24 )
          {
            while ( 1 )
            {
              v29 = (uchar *)Function_220d4cc(v25);
              v30 = *v29;
              v31 = _byteswap_ushort(*((ushort *)v29 + 4));
              if ( v6 == ((v29[1] | (v30 << 8)) & 0xFFFF) )
                break;
              v25 = &v29[v31 + 10];
              if ( (uint)v25 >= v24 )
                goto LABEL_33;
            }
            if ( v6 == 12 )
            {
              if ( v31 <= a5 )
              {
                MI_CpuCopy8((int)(v29 + 10), v13, v31, v30);
                v18 = 1;
              }
              else
              {
                v18 = 2;
              }
            }
            else
            {
              v18 = _byteswap_ushort(*(ushort *)&v29[v31 + 8]) | ((v29[v31 + 7] | (v29[v31 + 6] << 8)) << 16);
            }
          }
        }
      }
LABEL_33:
      Function_220c2c4(v33);
    }
    else
    {
      Function_2208df0();
    }
  }
  return v18;
}

//----- (0220D7A4) --------------------------------------------------------
int __fastcall Function_220d7a4(uchar *a1, uint *a2)
{
  int v2;
  uint v3;

  *a2 = a1;
  v2 = 0;
  while ( 1 )
  {
    v3 = (uchar)(*a1 - 48);
    if ( v3 > 9 )
      break;
    v2 = v3 + 10 * v2;
    *a2 = ++a1;
  }
  return v2;
}

//----- (0220D7D8) --------------------------------------------------------
int __fastcall Function_220d7d8(uchar *a1, int *a2, int a3, int a4)
{
  int v4;
  uchar *v5;
  int *v6;
  int v7;
  uint v8;
  bool v10;
  uchar *v11;
  int v12;

  v12 = a4;
  v4 = 0;
  v5 = a1;
  v6 = a2;
  v7 = 0;
  do
  {
    v8 = Function_220d7a4(v5, &v11);
    if ( v5 == v11 )
      return 0;
    v5 = v11;
    if ( v8 > 0xFF )
      return 0;
    v10 = v7 == 3;
    if ( v7 != 3 )
    {
      v5 = v11 + 1;
      v10 = *v11 == 46;
    }
    if ( !v10 || v7 == 3 && *v5 )
      return 0;
    ++v7;
    v4 = v8 | (v4 << 8);
  }
  while ( v7 < 4 );
  *v6 = v4;
  return 1;
}

//----- (0220D874) --------------------------------------------------------
int __fastcall Function_220d874(uchar *a1, int a2, int a3)
{
  int v3;
  uchar *v4;
  int v5;
  int v7;

  v3 = a2;
  v4 = a1;
  v5 = a3;
  if ( !a2 )
    return -1;
  Function_220bda8();
  Function_220bd1c();
  Function_220bd48(0, 53, v3);
  v7 = Function_220d4fc(v4, 1, v5, 0, 0);
  Function_220bddc();
  return v7;
}

//----- (0220D8D8) --------------------------------------------------------
int __fastcall Function_220d8d8(uchar *a1)
{
  uchar *v1;
  int v3;
  int v4;
  char *v5;
  int v6;
  bool v7;
  char v8;
  char v9;
  short v10;
  short v11;
  int v12;

  *(ull *)&dword_221A400[3734] = *(ull *)&dword_221A400[3738]
                                  + *(ull *)&dword_221A400[3736]
                                  * (uint)(dword_221A400[3738] + dword_221A400[3736] * dword_221A400[3734]);
  v1 = a1;
  v10 = (*(ull *)&dword_221A400[3738] + *(ull *)&dword_221A400[3736] * *(ull *)&dword_221A400[3734]) >> 48;
  v11 = HIWORD(dword_221A400[3735]);
  if ( Function_220d7d8(a1, &v12, (int)&dword_221A400[3708], (uint)dword_221A400[3735] >> 16) )
    return v12;
  v3 = 0;
  v8 = 1;
  v9 = 1;
  do
  {
    v4 = 0;
    v5 = &v8;
    do
    {
      if ( *v5 )
      {
        v6 = Function_220d874(v1, dword_221A400[v4 + 3732], (ushort)*(&v10 + v4));
        v7 = v6 == 0;
        v12 = v6;
        if ( v6 )
          v7 = v6 == -1;
        if ( !v7 )
          goto LABEL_14;
        if ( v6 == -1 )
          *v5 = 0;
      }
      ++v4;
      ++v5;
    }
    while ( v4 < 2 );
    ++v3;
  }
  while ( v3 < 3 );
LABEL_14:
  if ( v12 == -1 )
    v12 = 0;
  return v12;
}

//----- (0220DA10) --------------------------------------------------------
uint __fastcall Function_220da10(uint a1)
{
  uint v1;
  int v2;
  int *v3;
  int v4;
  int v5;
  bool v6;
  uint v7;

  v1 = a1;
  v2 = 0;
  v3 = &dword_221A400[5258];
  v4 = OS_DisableInterrupts();
  *(uchar *)(v1 + 48) = 0;
  while ( 1 )
  {
    if ( *((uchar *)v3 + 90) )
    {
      v5 = v3[21];
      v6 = v5 == 0;
      if ( !v5 )
        v6 = *((ushort *)v3 + 44) == 0;
      if ( v6 && !Function_20d5190((uchar *)v3, (uchar *)(v1 + 116), 32) )
        break;
    }
    ++v2;
    v3 += 23;
    if ( v2 >= 4 )
      return OS_RestoreInterrupts(v4);
  }
  MI_CpuCopy8((int)(v3 + 8), v1, 0x30u, v7);
  *(uchar *)(v1 + 48) = 1;
  return OS_RestoreInterrupts(v4);
}

//----- (0220DAA4) --------------------------------------------------------
uint __fastcall Function_220daa4(uint a1, int a2, int a3)
{
  uint v3;
  int v4;
  int v5;
  uint v6;
  uint v7;
  int v8;
  int *v9;
  int v10;
  int v11;
  bool v12;
  uint v13;
  long long v14;

  v3 = a1;
  v4 = a2;
  v5 = a3;
  v6 = OS_DisableInterrupts();
  v8 = 0;
  v9 = &dword_221A400[5258];
  v10 = v6;
  *(uchar *)(v3 + 48) = 0;
  while ( 1 )
  {
    if ( *((uchar *)v9 + 90) )
    {
      v11 = v9[21];
      v12 = v11 == v4;
      if ( v11 == v4 )
        v12 = *((ushort *)v9 + 44) == v5;
      if ( v12 )
        break;
    }
    ++v8;
    v9 += 23;
    if ( v8 >= 4 )
      return OS_RestoreInterrupts(v10);
  }
  MI_CpuCopy8((int)v9, v3 + 116, 0x20u, v7);
  MI_CpuCopy8((int)(v9 + 8), v3, 0x30u, v13);
  LODWORD(v14) = OS_GetTick();
  v9[20] = v14 >> 16;
  *(uchar *)(v3 + 48) = 1;
  return OS_RestoreInterrupts(v10);
}

//----- (0220DB44) --------------------------------------------------------
uint __fastcall Function_220db44(int a1, int a2, int a3)
{
  int v3;
  int v4;
  int v5;
  int v6;
  int *v7;
  uint v8;
  uint v9;
  int v10;
  int *v11;
  int v12;
  int v13;
  bool v14;
  uint v15;

  v3 = a1;
  v4 = a2;
  v5 = a3;
  v6 = OS_DisableInterrupts();
  v7 = &dword_221A400[5258];
  v8 = (uint)OS_GetTick() >> 16;
  v9 = 0;
  v10 = 0;
  v11 = &dword_221A400[5258];
  v13 = v8 | (v12 << 16);
  while ( 1 )
  {
    v14 = *((uchar *)v11 + 90) == 0;
    if ( *((uchar *)v11 + 90) )
      v14 = v4 == 0;
    if ( !v14 && v4 == v11[21] && v5 && v5 == *((ushort *)v11 + 44) )
      break;
    if ( v9 != -1 )
    {
      if ( *((uchar *)v11 + 90) )
      {
        if ( v13 - v11[20] > v9 )
        {
          v9 = v13 - v11[20];
          v7 = v11;
        }
      }
      else
      {
        v9 = -1;
        v7 = v11;
      }
    }
    ++v10;
    v11 += 23;
    if ( v10 >= 4 )
      goto LABEL_15;
  }
  v7 = v11;
LABEL_15:
  MI_CpuCopy8(v3 + 116, (uint)v7, 0x20u, (uint)v11);
  MI_CpuCopy8(v3, (uint)(v7 + 8), 0x30u, v15);
  v7[20] = v13;
  *((uchar *)v7 + 90) = 1;
  v7[21] = v4;
  *((ushort *)v7 + 44) = v5;
  return OS_RestoreInterrupts(v6);
}

//----- (0220DC30) --------------------------------------------------------
uint __fastcall Function_220dc30(int a1)
{
  int v1;
  uchar *v2;
  int v3;
  int v4;

  v1 = a1;
  v2 = (uchar *)&dword_221A400[5258];
  v3 = OS_DisableInterrupts();
  v4 = 0;
  while ( !v2[90] || Function_20d5190(v2, (uchar *)(v1 + 116), 32) )
  {
    ++v4;
    v2 += 92;
    if ( v4 >= 4 )
      return OS_RestoreInterrupts(v3);
  }
  v2[90] = 0;
  return OS_RestoreInterrupts(v3);
}

//----- (0220DC98) --------------------------------------------------------
int Function_220dc98()
{
  char v1;
  char v2;

  RTC_GetDate((int)&v2);
  RTC_GetTime((int)&v1);
  return RTC_ConvertDateTimeToSecond((int *)&v2, &v1) + 946684800;
}

//----- (0220DCD0) --------------------------------------------------------
int Function_220dcd0()
{
  return -1;
}

//----- (0220DCE0) --------------------------------------------------------
int __fastcall Function_220dce0(int result)
{
  dword_221A1C0 = result;
  return result;
}

//----- (0220DCF0) --------------------------------------------------------
int Function_220dcf0()
{
  return -1;
}

//----- (0220DD3C) --------------------------------------------------------
uint __fastcall Function_220dd3c(uint result)
{
  if ( result < 0x20 )
    result = OS_SetThreadPriority(dword_21CCC84, result);
  return result;
}

//----- (0220DD60) --------------------------------------------------------
int __fastcall Function_220dd60(int result, int a2)
{
  uint *v2;
  bool v3;

  v2 = *(uint **)(dword_21CCC84 + 164);
  v3 = v2 == 0;
  if ( v2 )
  {
    v2 = (uint *)v2[3];
    v3 = v2 == 0;
  }
  if ( !v3 )
  {
    v2[517] = result;
    v2[518] = a2;
  }
  return result;
}

//----- (0220DD88) --------------------------------------------------------
int **__fastcall Function_220dd88(int a1, uint *a2)
{
  int v2;
  uint *v3;
  int v4;
  int v5;
  int **v6;

  v2 = *(uint *)(a1 + 2072);
  v3 = a2;
  v4 = 0;
  if ( v2 <= 0 )
    return 0;
  v5 = *(uint *)(a1 + 2068);
  while ( 1 )
  {
    v6 = *(int ***)(v5 + 4 * v4);
    if ( !Function_20d8d14(*v6, v3) )
      break;
    if ( ++v4 >= v2 )
      return 0;
  }
  return v6;
}

//----- (0220DDD4) --------------------------------------------------------
int __fastcall Function_220ddd4(uint *a1)
{
  int v1;
  uchar *v2;
  bool v3;
  int v4;
  int result;
  int v6;

  v1 = *(uchar *)*a1;
  v2 = (uchar *)(*a1 + 1);
  if ( !(v1 & 0x80) || (v3 = (v1 & 0x7F) == 0, v4 = (v1 & 0x7F) - 1, v1 = 0, v3) )
  {
LABEL_7:
    *a1 = v2;
    result = v1;
  }
  else
  {
    while ( !(v1 & 0xFF000000) )
    {
      v6 = *v2++;
      v3 = v4-- == 0;
      v1 = v6 + (v1 << 8);
      if ( v3 )
        goto LABEL_7;
    }
    result = -1;
  }
  return result;
}

//----- (0220DE24) --------------------------------------------------------
uchar *__fastcall Function_220de24(uchar *result, char *a2, int a3)
{
  uchar *v3;
  int v4;
  char v5;
  bool v6;

  v3 = result;
  if ( *result )
  {
    do
      v4 = (char)(result++)[1];
    while ( v4 );
    if ( result - v3 >= 255 )
      return result;
    *result = 44;
    result[1] = 32;
    result += 2;
  }
  while ( 1 )
  {
    v6 = a3-- == 0;
    if ( v6 || result - v3 >= 255 )
      break;
    v5 = *a2++;
    *result++ = v5;
  }
  *result = 0;
  return result;
}

//----- (0220DE90) --------------------------------------------------------
int __fastcall Function_220de90(uchar *a1, int a2)
{
  int v2;
  uchar *v3;
  int v4;
  bool v5;
  int v6;
  uint v7;
  int v8;
  int v9;
  int v10;

  v2 = a1[1];
  v4 = *a1;
  v3 = a1 + 2;
  v5 = a2 == 23;
  v6 = v2 + 10 * v4;
  v7 = v6 - 528;
  if ( v5 )
  {
    if ( v7 >= 0x32 )
      v10 = v6 + 1372;
    else
      v10 = v6 + 1472;
  }
  else
  {
    v8 = v3[1];
    v9 = *v3;
    v3 += 2;
    v10 = v8 + 10 * v9 - 528 + 100 * v7;
  }
  return ((v3[1] + 10 * *v3 - 528) << 8) + (v10 << 16) + v3[3] + 10 * v3[2] - 528;
}

//----- (0220DF10) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x220E384 for case 0"

//----- (0220DF70) --------------------------------------------------------
void Function_220df70()
{
  JUMPOUT(&loc_220E384);
}

//----- (0220DF74) --------------------------------------------------------
void Function_220df74()
{
  JUMPOUT(&loc_220E384);
}

//----- (0220DF78) --------------------------------------------------------
void Function_220df78()
{
  JUMPOUT(&loc_220DFD4);
}

//----- (0220DF7C) --------------------------------------------------------
void Function_220df7c()
{
  JUMPOUT(&loc_220E0CC);
}

//----- (0220DF80) --------------------------------------------------------
void Function_220df80()
{
  JUMPOUT(&loc_220E384);
}

//----- (0220DF84) --------------------------------------------------------
void Function_220df84()
{
  JUMPOUT(&loc_220E384);
}

//----- (0220DF88) --------------------------------------------------------
void Function_220df88()
{
  JUMPOUT(&loc_220E14C);
}

//----- (0220DF8C) --------------------------------------------------------
void Function_220df8c()
{
  JUMPOUT(&loc_220E384);
}

//----- (0220DF90) --------------------------------------------------------
void Function_220df90()
{
  JUMPOUT(&loc_220E384);
}

//----- (0220DF94) --------------------------------------------------------
void Function_220df94()
{
  JUMPOUT(&loc_220E384);
}

//----- (0220DF98) --------------------------------------------------------
void Function_220df98()
{
  JUMPOUT(&loc_220E384);
}

//----- (0220DF9C) --------------------------------------------------------
void Function_220df9c()
{
  JUMPOUT(&loc_220E384);
}

//----- (0220DFA0) --------------------------------------------------------
void Function_220dfa0()
{
  JUMPOUT(&loc_220E1E4);
}

//----- (0220DFA4) --------------------------------------------------------
void Function_220dfa4()
{
  JUMPOUT(&loc_220E384);
}

//----- (0220DFA8) --------------------------------------------------------
void Function_220dfa8()
{
  JUMPOUT(&loc_220E384);
}

//----- (0220DFAC) --------------------------------------------------------
void Function_220dfac()
{
  JUMPOUT(&loc_220E384);
}

//----- (0220DFB0) --------------------------------------------------------
void Function_220dfb0()
{
  JUMPOUT(&loc_220E2B4);
}

//----- (0220DFB4) --------------------------------------------------------
void Function_220dfb4()
{
  JUMPOUT(&loc_220E334);
}

//----- (0220DFB8) --------------------------------------------------------
void Function_220dfb8()
{
  JUMPOUT(&loc_220E384);
}

//----- (0220DFBC) --------------------------------------------------------
void Function_220dfbc()
{
  JUMPOUT(&loc_220E1E4);
}

//----- (0220DFC0) --------------------------------------------------------
void Function_220dfc0()
{
  JUMPOUT(&loc_220E1E4);
}

//----- (0220DFC4) --------------------------------------------------------
void Function_220dfc4()
{
  JUMPOUT(&loc_220E384);
}

//----- (0220DFC8) --------------------------------------------------------
void Function_220dfc8()
{
  JUMPOUT(&loc_220E1E4);
}

//----- (0220DFCC) --------------------------------------------------------
void Function_220dfcc()
{
  JUMPOUT(&loc_220E264);
}

//----- (0220DFD0) --------------------------------------------------------
void Function_220dfd0()
{
  JUMPOUT(&loc_220E264);
}

//----- (0220E188) --------------------------------------------------------
void Function_220e188()
{
  JUMPOUT(&loc_220E1D4);
}

//----- (0220E18C) --------------------------------------------------------
void Function_220e18c()
{
  JUMPOUT(&loc_220E1A0);
}

//----- (0220E190) --------------------------------------------------------
void Function_220e190()
{
  JUMPOUT(&loc_220E1A0);
}

//----- (0220E194) --------------------------------------------------------
void Function_220e194()
{
  JUMPOUT(&loc_220E1B0);
}

//----- (0220E198) --------------------------------------------------------
void Function_220e198()
{
  JUMPOUT(&loc_220E1B0);
}

//----- (0220E19C) --------------------------------------------------------
void Function_220e19c()
{
  int v0;
  char v1;
  int v2;
  int v3;
  int *v4;
  int v5;
  int v6;
  int v7;

  if ( v2 != 2 )
    *(uchar *)(v3 + 1454) = v1;
  v6 = v5 + v0;
  *v4 = v6;
  JUMPOUT(__CS__, v7);
}

//----- (0220E400) --------------------------------------------------------
int __fastcall Function_220e400(int a1, uint *a2)
{
  int v2;
  int v3;
  uint *v4;
  bool v5;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;
  int v14;
  int v15;
  bool v16;
  int v17;
  int i;
  bool v19;

  v2 = a1;
  v3 = *(uint *)(a1 + 1444);
  v4 = a2;
  v5 = v3 == 0;
  if ( v3 )
  {
    v3 = *(uint *)(v2 + 1448);
    v5 = v3 == 0;
  }
  if ( !v5 )
  {
    v3 = a2[4];
    v5 = v3 == 0;
    if ( v3 )
    {
      v3 = a2[3];
      v5 = v3 == 0;
      if ( v3 )
      {
        v3 = a2[2];
        v5 = v3 == 0;
        if ( v3 )
        {
          v3 = a2[1];
          v5 = v3 == 0;
        }
      }
    }
  }
  if ( v5 )
    return 2;
  v7 = 2 * v3 / 2;
  v8 = ((int (__fastcall *)(int))dword_221A400[3713])(8 * v7);
  v9 = v8;
  if ( !v8 )
    return 2;
  v10 = v8 + 2 * v7;
  v11 = v10 + 2 * v7;
  v12 = v11 + 2 * v7;
  Function_2212c28(v8 + 2 * v7, *(uint *)(v2 + 1444), *(uint *)(v2 + 1448), v7);
  Function_2212c28(v10 + 2 * v7, v4[4], v4[3], v7);
  Function_2212c28(v11 + 2 * v7, v4[2], v4[1], v7);
  v13 = Function_220dcf0();
  Function_2212614(v9, v9 + 2 * v7, v10 + 2 * v7, v7, v12);
  Function_220dd3c(v13);
  Function_2212c84(v9 + 2 * v7, v9, v4[1], v7);
  v14 = *(uchar *)(v9 + 2 * v7);
  v15 = 0;
  v16 = v14 == 0;
  if ( !v14 )
    v16 = *(uchar *)(v10 + 1) == 1;
  if ( v16 )
  {
    v17 = v4[1];
    for ( i = 2; i < v17; ++i )
    {
      if ( *(uchar *)(v10 + i) != 255 )
        break;
    }
    if ( i + 1 >= v17 )
      goto LABEL_29;
    v19 = *(uchar *)(v10 + i) == 0;
    if ( !*(uchar *)(v10 + i) )
      v19 = *(uchar *)(v10 + i + 1) == 48;
    if ( !v19
      || Function_20d5190(
           (uchar *)(v2 + 1128),
           (uchar *)(v10 + v17 - *(uint *)(v2 + 1148)),
           *(uint *)(v2 + 1148)) )
    {
LABEL_29:
      v15 = 2;
    }
  }
  else
  {
    v15 = 2;
  }
  ((void (__fastcall *)(int))dword_221A400[3724])(v9);
  return v15;
}

//----- (0220E5A8) --------------------------------------------------------
int __fastcall Function_220e5a8(int a1)
{
  uint *v1;
  int v2;
  int result;
  int v4;
  int v5;
  int v6;
  int **v7;

  v1 = (uint *)a1;
  if ( *(uchar *)(a1 + 1455) )
    v2 = 0;
  else
    v2 = 0x8000;
  if ( *(uint *)(a1 + 1116) == -1 )
    return v2 | 4;
  v4 = *(uint *)(a1 + 1112);
  if ( v4 == 3 )
  {
    Function_2211338(v1 + 255);
    v5 = v1[281] - v1[280];
    Function_2211380(v1 + 255);
    Function_2211438(v1 + 255, v1 + 282);
    v1[287] = 16;
  }
  else
  {
    if ( v4 != 4 )
      return v2 | 3;
    Function_2211bf8(v1 + 210);
    v6 = v1[281] - v1[280];
    Function_2211c4c(v1 + 210);
    Function_2211d04(v1 + 210, v1 + 282);
    v1[287] = 20;
  }
  v7 = Function_220dd88((int)v1, v1 + 364);
  if ( v7 )
    result = v2 | Function_220e400((int)v1, v7);
  else
    result = v2 | 1;
  return result;
}

//----- (0220E68C) --------------------------------------------------------
int __fastcall Function_220e68c(char *a1)
{
  char *v1;
  int v2;
  bool v3;

  v1 = a1;
  while ( 1 )
  {
    v2 = *a1;
    v3 = v2 == 46;
    if ( v2 != 46 )
      v3 = v2 == 0;
    if ( v3 )
      break;
    ++a1;
  }
  return a1 - v1;
}

//----- (0220E6B0) --------------------------------------------------------
int __fastcall Function_220e6b0(char *a1, char *a2)
{
  char *v2;
  char *v3;
  int v5;
  int v6;
  int v7;
  int v8;
  char *v9;
  int v10;
  int v11;

  v2 = a1;
  v3 = a2;
  while ( 1 )
  {
    while ( 1 )
    {
      v6 = *v3++;
      v5 = v6;
      v8 = *v2++;
      v7 = v8;
      if ( v8 != v5 )
        break;
      if ( !v7 )
        return 0;
    }
    if ( v5 != 42 )
      return 1;
    v9 = v2 - 1;
    v10 = Function_220e68c(v9);
    v11 = Function_220e68c(v3);
    if ( v11 > v10 )
      break;
    v2 = &v9[v10 - v11];
  }
  return 1;
}

//----- (0220E718) --------------------------------------------------------
int __fastcall Function_220e718(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int (*a8)(void))
{
  return a8();
}

//----- (0220E71C) --------------------------------------------------------
int Function_220e71c(int a1, ...)
{
  int v1;
  int v2;
  int v3;
  int v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int result;
  int v12;
  char *v13;
  int v14;
  int (__fastcall *v15)(int, int, int);
  uchar *v16;
  int v17;
  int v18;
  int v19;
  int v20;
  int varg_r0;
  uchar *varg_r1;
  va_list varg_r1a;
  int varg_r2;
  int varg_r3;
  va_list va1;

  va_start(va1, a1);
  va_start(varg_r1a, a1);
  varg_r1 = va_arg(va1, uchar *);
  varg_r2 = va_arg(va1, uint);
  varg_r3 = va_arg(va1, uint);
  varg_r0 = a1;
  v20 = varg_r3;
  v1 = a1;
  v2 = varg_r1[2];
  v3 = *varg_r1;
  v4 = varg_r1[1];
  varg_r1 += 3;
  *(uint *)(a1 + 1116) = -1;
  v5 = v2 + ((v4 + (v3 << 8)) << 8);
  RTC_GetDate((int)&v17);
  *(uint *)(v1 + 2060) = v19 + (v18 << 8) + ((v17 + 2000) << 16);
  *(uchar *)(v1 + 1712) = 0;
  *(uint *)(v1 + 1440) = 0;
  v6 = 0;
  *(uint *)(v1 + 1428) = 0;
  do
  {
    v7 = varg_r1[2];
    v8 = *varg_r1;
    v9 = varg_r1[1];
    varg_r1 += 3;
    *(uint *)(v1 + 1112) = -1;
    *(uchar *)(v1 + 1453) = 0;
    *(uchar *)(v1 + 1452) = 0;
    *(uchar *)(v1 + 1455) = 0;
    *(uchar *)(v1 + 1712) = 0;
    *(uchar *)(v1 + 1456) = 0;
    *(uchar *)(v1 + 1968) = 0;
    v10 = v7 + ((v9 + (v8 << 8)) << 8);
    *(uint *)(v1 + 2052) = varg_r1;
    *(uint *)(v1 + 2056) = v10;
    v5 -= v10 + 3;
    if ( Function_220df10(v1, (uchar **)varg_r1a, 0, 0)
      || *(uint *)(v1 + 1428) < 0x33u
      || !*(uint *)(v1 + 1440) )
    {
      result = 9;
      *(uchar *)(v1 + 1109) = 9;
      return result;
    }
    v12 = Function_220e5a8(v1);
    if ( !v6 )
    {
      v13 = *(char **)(v1 + 2048);
      if ( v13 )
      {
        if ( Function_220e6b0(v13, (char *)(v1 + 1968)) )
          v12 |= 0x4000u;
      }
    }
    v14 = (uchar)v12;
    if ( (uchar)v12 == 1 && v5 )
    {
      v16 = varg_r1 + 3;
      *(uchar *)(v1 + 1453) = 0;
      if ( Function_220df10(v1, &v16, 0, 0) )
      {
        result = 9;
        *(uchar *)(v1 + 1109) = 9;
        return result;
      }
      v12 = v12 & 0xFFFFFF00 | Function_220e400(v1, (uint *)(v1 + 1152));
    }
    v15 = *(int (__fastcall **)(int, int, int))(v1 + 2064);
    if ( v15 )
      v12 = v15(v12, v1, v6);
    ++v6;
  }
  while ( v14 && !v12 && v5 );
  if ( v12 )
  {
    result = 9;
    *(uchar *)(v1 + 1109) = 9;
  }
  else
  {
    result = 3;
    *(uchar *)(v1 + 1109) = 3;
  }
  return result;
}

//----- (0220E940) --------------------------------------------------------
int __fastcall Function_220e940(int a1, int a2, int a3, uint a4)
{
  int v4;
  int v5;
  uint v6;
  int v7;
  int v8;
  uchar *v9;
  char v10;
  int result;

  v4 = a1;
  v5 = a2;
  MI_CpuCopy8(a2 + 2, a1 + 84, 0x20u, a4);
  v7 = *(uchar *)(v4 + 48);
  v8 = *(uchar *)(v5 + 34);
  v9 = (uchar *)(v5 + 35);
  if ( !*(uchar *)(v4 + 48) || v8 != 32 || Function_20d5190((uchar *)(v4 + 116), v9, 32) )
  {
    if ( v7 )
      Function_220dc30(v4);
    if ( v8 )
    {
      MI_CpuCopy8((int)v9, v4 + 116, 0x20u, v6);
      v10 = 1;
    }
    else
    {
      v10 = 0;
    }
    *(uchar *)(v4 + 48) = v10;
    *(uchar *)(v4 + 49) = 0;
  }
  else
  {
    *(uchar *)(v4 + 49) = 1;
  }
  result = 2;
  *(ushort *)(v4 + 50) = v9[v8 + 1] + (v9[v8] << 8);
  *(uchar *)(v4 + 1109) = 2;
  return result;
}

//----- (0220E9F4) --------------------------------------------------------
int __fastcall Function_220e9f4(uchar *a1, int a2, int a3, int a4)
{
  int v4;
  int v5;

  v4 = 0;
  if ( a2 <= 0 )
    return 0;
  while ( 1 )
  {
    v5 = a1[1] + (*a1 << 8);
    if ( a3 == 3 )
      v5 = a1[2] + (v5 << 8);
    if ( v5 == a4 )
      break;
    ++v4;
    a1 += a3;
    if ( v4 >= a2 )
      return 0;
  }
  return 1;
}

//----- (0220EA40) --------------------------------------------------------
int __fastcall Function_220ea40(uchar *a1, int a2, int a3)
{
  uchar *v3;
  int v4;
  int v5;
  uint v6;

  v3 = a1;
  v4 = a2;
  v5 = a3;
  v6 = 0;
  do
  {
    if ( Function_220e9f4(v3, v4, v5, *((ushort *)&dword_221A1BC + v6)) )
      return *((ushort *)&dword_221A1BC + v6);
    ++v6;
  }
  while ( v6 < 2 );
  return 0;
}

//----- (0220EAA0) --------------------------------------------------------
BOOL __fastcall Function_220eaa0(int a1)
{
  return a1 == 3;
}

//----- (0220EAB0) --------------------------------------------------------
int __fastcall Function_220eab0(int a1, uchar *a2)
{
  uchar *v2;
  int v3;
  int v4;
  int v5;
  int result;
  int v7;
  uint v8;
  int v9;
  int v10;
  uint v11;

  v2 = a2;
  v3 = a1;
  v4 = *a2;
  v5 = a2[1];
  result = Function_220eaa0(v4);
  if ( result )
  {
    v7 = v2[3] + (v2[2] << 8);
    result = (ushort)Function_220ea40(v2 + 8, v7 / 3, 3);
    if ( result )
    {
      *(ushort *)(v3 + 50) = result;
      v8 = v2[5] + (v2[4] << 8);
      v9 = v2[7] + (v2[6] << 8);
      *(uchar *)(v3 + 48) = 0;
      v10 = v7 + 8 + v8;
      if ( v9 < 32 )
      {
        MI_CpuFill8((ushort *)(v3 + 52), 0, 32 - v9);
        MI_CpuCopy8((int)&v2[v10], v3 + 84 - v9, v9, v11);
      }
      else
      {
        MI_CpuCopy8((int)&v2[v10], v3 + 52, 0x20u, v8);
      }
      result = 1;
      *(uchar *)(v3 + 1109) = 1;
    }
  }
  return result;
}

//----- (0220EB78) --------------------------------------------------------
int __fastcall Function_220eb78(uint a1, uchar *a2)
{
  uchar *v2;
  uint v3;
  int v4;
  int v5;
  int result;
  uint v7;
  uint v8;
  int v9;
  int v10;

  v2 = a2;
  v3 = a1;
  v4 = *a2;
  v5 = a2[1];
  result = Function_220eaa0(v4);
  if ( result )
  {
    MI_CpuCopy8((int)(v2 + 2), v3 + 52, 0x20u, v7);
    v9 = v2[34];
    v10 = (int)(v2 + 35);
    if ( v9 == 32 )
    {
      MI_CpuCopy8(v10, v3 + 116, 0x20u, v8);
      Function_220da10(v3);
    }
    else
    {
      *(uchar *)(v3 + 48) = 0;
    }
    result = (ushort)Function_220ea40(
                                 (uchar *)(v10 + v9 + 2),
                                 (*(uchar *)(v10 + v9 + 1) + (*(uchar *)(v10 + v9) << 8)) / 2,
                                 2);
    *(ushort *)(v3 + 50) = result;
    if ( result )
    {
      result = 1;
      *(uchar *)(v3 + 1109) = 1;
    }
  }
  return result;
}

//----- (0220EC14) --------------------------------------------------------
int __fastcall Function_220ec14(int result, int a2, uint *a3)
{
  bool v3;
  uint *v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;
  int v14;
  int v15;
  int v16;

  v4 = a3;
  v3 = a3 == 0;
  v16 = result;
  if ( a3 )
    result = *a3;
  v5 = a2;
  if ( a3 )
    v3 = result == 0;
  if ( !v3 )
  {
    v6 = 2 * result / 2 + 1;
    result = ((int (__fastcall *)(int))dword_221A400[3713])(20 * v6);
    v7 = result;
    if ( result )
    {
      v8 = result + 2 * v6;
      v9 = v8 + 2 * v6 + 2 * v6;
      v10 = v9;
      v11 = v9 + 2 * v6;
      v12 = v11 + 2 * v6;
      v13 = v11;
      v14 = v12 + 2 * v6;
      Function_2212c28(result, v5, *v4, v6);
      Function_2212c28(v7 + 2 * v6, v4[7], v4[6], v6);
      Function_2212c28(v12, v4[3], v4[2], v6);
      v15 = Function_220dcf0();
      Function_2212a1c(v10, v7, v7 + 2 * v6, v6, v12);
      Function_2212c28(v7 + 2 * v6, v4[9], v4[8], v6);
      Function_2212c28(v12, v4[5], v4[4], v6);
      Function_2212a1c(v13, v7, v7 + 2 * v6, v6, v12);
      Function_220dd3c(v15);
      Function_2212014(v7, v10, v13, v6);
      Function_2212c28(v7 + 2 * v6, v4[11], v4[10], v6);
      Function_2212190(v8 + 2 * v6, v7, v7 + 2 * v6, v6);
      Function_2212c28(v7 + 2 * v6, v4[5], v4[4], v6);
      Function_2212190(v7, v8 + 2 * v6, v7 + 2 * v6, v6);
      Function_2211ed4(v8 + 2 * v6, v7, v13, v6);
      Function_2212c28(v7 + 2 * v6, v4[1], *v4, v6);
      if ( Function_2211ea4(v8 + 2 * v6, v6) >= 0 )
      {
        Function_2212434(0, v8 + 2 * v6, v7 + 2 * v6, v12 + 2 * v6, v6, v14 + 2 * v6);
      }
      else
      {
        Function_2211fd4(v8 + 2 * v6, v6);
        Function_2212434(0, v8 + 2 * v6, v7 + 2 * v6, v12 + 2 * v6, v6, v14 + 2 * v6);
        Function_2212014(v12 + 2 * v6, v7 + 2 * v6, v12 + 2 * v6, v6);
      }
      Function_2212c84(v16, v12 + 2 * v6, 48, v6);
      result = ((int (__fastcall *)(int))dword_221A400[3724])(v7);
    }
  }
  return result;
}

//----- (0220EE54) --------------------------------------------------------
int __fastcall Function_220ee54(int a1, char *a2, int a3, int a4)
{
  int v4;
  int v5;
  char *v6;
  char v8;
  int v9;

  v9 = a4;
  v4 = a3;
  v5 = a1;
  v6 = a2;
  Function_2211bf8(a3 + 840);
  strlen(v6);
  Function_2211c4c(v4 + 840);
  Function_2211c4c(v4 + 840);
  Function_2211c4c(v4 + 840);
  Function_2211d04(v4 + 840, &v8);
  Function_2211338(v4 + 1020);
  Function_2211380(v4 + 1020);
  Function_2211380(v4 + 1020);
  return Function_2211438(v4 + 1020, v5);
}

//----- (0220EEF0) --------------------------------------------------------
int __fastcall Function_220eef0(int a1, int a2, int a3, int a4)
{
  uint v4;
  int v5;
  int v6;
  uint v7;
  char v9;
  char v10;
  char v11;

  v4 = a1;
  Function_220ee54((int)&v9, (char *)&dword_221A208, a1, a4);
  Function_220ee54((int)&v10, (char *)&dword_221A20C, v4, v5);
  Function_220ee54((int)&v11, (char *)&dword_221A210, v4, v6);
  return MI_CpuCopy8((int)&v9, v4, 0x30u, v7);
}

//----- (0220EF50) --------------------------------------------------------
int __fastcall Function_220ef50(int a1, int a2, int a3)
{
  int v3;
  int v4;
  int v5;
  int v6;
  int v7;
  int i;
  int v9;
  int v11;
  int v12;
  char v13;

  v3 = a1;
  v4 = *(ushort *)(a1 + 50);
  if ( v4 == 4 )
  {
    v12 = 16;
    v11 = 16;
    a3 = 0;
  }
  else if ( v4 == 5 )
  {
    v12 = 20;
    v11 = 16;
    a3 = 0;
  }
  v5 = 0;
  v6 = 2 * (a3 + v12 + v11);
  if ( v6 > 0 )
  {
    v7 = 0;
    do
    {
      Function_2211bf8(v3 + 840);
      for ( i = 0; i < v5 + 1; ++i )
        Function_2211c4c(v3 + 840);
      Function_2211c4c(v3 + 840);
      Function_2211c4c(v3 + 840);
      Function_2211c4c(v3 + 840);
      Function_2211d04(v3 + 840, &v13);
      Function_2211338(v3 + 1020);
      Function_2211380(v3 + 1020);
      Function_2211380(v3 + 1020);
      Function_2211438(v3 + 1020, v3 + 116 + v7);
      v7 += 16;
      ++v5;
    }
    while ( v7 < v6 );
  }
  v9 = v3 + 116;
  if ( *(uchar *)(v3 + 1108) )
  {
    *(uint *)(v3 + 468) = v9;
    *(uint *)(v3 + 472) = v9 + 2 * v12;
    *(uint *)(v3 + 188) = v9 + v12;
    *(uint *)(v3 + 192) = v9 + v12 + v12 + v11;
  }
  else
  {
    *(uint *)(v3 + 188) = v9;
    *(uint *)(v3 + 192) = v9 + 2 * v12;
    *(uint *)(v3 + 468) = v9 + v12;
    *(uint *)(v3 + 472) = v9 + v12 + v12 + v11;
  }
  Function_2211d9c(v3 + 480, *(uint *)(v3 + 472), 16);
  return Function_2211d9c(v3 + 200, *(uint *)(v3 + 192), 16);
}

//----- (0220F11C) --------------------------------------------------------
int __fastcall Function_220f11c(int a1, int a2)
{
  int v2;
  int v3;
  int v4;
  int v5;
  int v6;
  int v7;
  int result;

  v2 = a1;
  Function_220ec14(a1, a2, *(uint **)(a1 + 2076));
  Function_220eef0(v2, v3, v4, v5);
  Function_220db44(v2, 0, 0);
  Function_220ef50(v2, v6, v7);
  result = 5;
  *(uchar *)(v2 + 1109) = 5;
  return result;
}

//----- (0220F158) --------------------------------------------------------
int __fastcall Function_220f158(int a1, int a2, int a3, int a4)
{
  int v4;
  int v5;
  char v7;
  int v8;

  v8 = a4;
  v4 = a1;
  v5 = a2;
  Function_2211380(a1 + 932);
  Function_2211380(v4 + 932);
  MI_CpuFill8(&v7, 54, 0x30u);
  Function_2211380(v4 + 932);
  Function_2211438(v4 + 932, v5);
  Function_2211338(v4 + 932);
  Function_2211380(v4 + 932);
  MI_CpuFill8(&v7, 92, 0x30u);
  Function_2211380(v4 + 932);
  Function_2211380(v4 + 932);
  return Function_2211438(v4 + 932, v5);
}

//----- (0220F234) --------------------------------------------------------
int __fastcall Function_220f234(int a1, int a2, int a3, int a4)
{
  int v4;
  int v5;
  char v7;
  int v8;

  v8 = a4;
  v4 = a1;
  v5 = a2;
  Function_2211c4c(a1 + 748);
  Function_2211c4c(v4 + 748);
  MI_CpuFill8(&v7, 54, 0x28u);
  Function_2211c4c(v4 + 748);
  Function_2211d04(v4 + 748, v5);
  Function_2211bf8(v4 + 748);
  Function_2211c4c(v4 + 748);
  MI_CpuFill8(&v7, 92, 0x28u);
  Function_2211c4c(v4 + 748);
  Function_2211c4c(v4 + 748);
  return Function_2211d04(v4 + 748, v5);
}

//----- (0220F310) --------------------------------------------------------
int __fastcall Function_220f310(int a1, uchar *a2, int a3, uint a4)
{
  int v4;
  uchar *v5;
  int v6;
  uint v7;
  uint v8;
  int result;
  int v10;
  uint v11;
  char v12;

  v4 = a1;
  v5 = a2;
  MI_CpuCopy8(a1 + 932, a1 + 1020, 0x58u, a4);
  Function_220f158(v4, (int)&v12, 1, v6);
  MI_CpuCopy8(v4 + 1020, v4 + 932, 0x58u, v7);
  if ( Function_20d5190(v5, (uchar *)&v12, 16) )
  {
    result = 9;
    *(uchar *)(v4 + 1109) = 9;
  }
  else
  {
    MI_CpuCopy8(v4 + 748, v4 + 840, 0x5Cu, v8);
    Function_220f234(v4, (int)&v12, 1, v10);
    MI_CpuCopy8(v4 + 840, v4 + 748, 0x5Cu, v11);
    if ( Function_20d5190(v5 + 16, (uchar *)&v12, 20) )
    {
      result = 9;
      *(uchar *)(v4 + 1109) = 9;
    }
    else
    {
      result = 6;
      *(uchar *)(v4 + 1109) = 6;
    }
  }
  return result;
}

//----- (0220F3D0) --------------------------------------------------------
uchar *__fastcall Function_220f3d0(uchar *result)
{
  int v1;
  char v2;

  v1 = 8;
  do
  {
    v2 = *(result-- - 1);
    *result = v2 + 1;
    if ( v2 != -1 )
      break;
    --v1;
  }
  while ( v1 );
  return result;
}

//----- (0220F3F4) --------------------------------------------------------
int __fastcall Function_220f3f4(int a1, int a2, int a3)
{
  int v3;

  v3 = a3;
  Function_2211e10(a1 + 480);
  return v3;
}

//----- (0220F40C) --------------------------------------------------------
int __fastcall Function_220f40c(int a1, int a2)
{
  int v2;
  int v3;
  int v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  char v13;
  char v14;

  v3 = a2;
  v4 = a1;
  v5 = Function_220f3f4(a1, a2 + 5, *(uchar *)(a2 + 4) + (*(uchar *)(a2 + 3) << 8));
  v6 = *(ushort *)(v4 + 50);
  v7 = v5;
  if ( v6 == 4 )
  {
    v7 = v5 - 16;
    *(uchar *)(v3 + 3) = BYTE1(v7);
    *(uchar *)(v3 + 4) = v5 - 16;
    Function_2211338(v4 + 1020);
    v8 = *(uint *)(v4 + 468);
    Function_2211380(v4 + 1020);
    MI_CpuFill8(&v13, 54, 0x30u);
    Function_2211380(v4 + 1020);
    Function_2211380(v4 + 1020);
    Function_2211380(v4 + 1020);
    Function_2211380(v4 + 1020);
    Function_2211438(v4 + 1020, &v14);
    Function_2211338(v4 + 1020);
    v9 = *(uint *)(v4 + 468);
    Function_2211380(v4 + 1020);
    MI_CpuFill8(&v13, 92, 0x30u);
    Function_2211380(v4 + 1020);
    Function_2211380(v4 + 1020);
    Function_2211438(v4 + 1020, &v14);
    v2 = 16;
  }
  else if ( v6 == 5 )
  {
    v7 = v5 - 20;
    *(uchar *)(v3 + 3) = BYTE1(v7);
    *(uchar *)(v3 + 4) = v5 - 20;
    Function_2211bf8(v4 + 840);
    v10 = *(uint *)(v4 + 468);
    Function_2211c4c(v4 + 840);
    MI_CpuFill8(&v13, 54, 0x28u);
    Function_2211c4c(v4 + 840);
    Function_2211c4c(v4 + 840);
    Function_2211c4c(v4 + 840);
    Function_2211c4c(v4 + 840);
    Function_2211d04(v4 + 840, &v14);
    Function_2211bf8(v4 + 840);
    v11 = *(uint *)(v4 + 468);
    Function_2211c4c(v4 + 840);
    MI_CpuFill8(&v13, 92, 0x28u);
    Function_2211c4c(v4 + 840);
    Function_2211c4c(v4 + 840);
    Function_2211d04(v4 + 840, &v14);
    v2 = 20;
  }
  if ( Function_20d5190((uchar *)(v3 + 5 + v7), (uchar *)&v14, v2) )
    *(uchar *)(v4 + 1109) = 9;
  Function_220f3d0((uchar *)(v4 + 748));
  return v7 + 5;
}

//----- (0220F63C) --------------------------------------------------------
int __fastcall Function_220f63c(int a1, int a2, int a3, int a4)
{
  int v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  char v14;
  int v15;

  v15 = a4;
  v4 = a2;
  v5 = a1;
  v6 = *(ushort *)(a1 + 50);
  v7 = a2 + 5;
  v8 = *(uchar *)(a2 + 4) + (*(uchar *)(a2 + 3) << 8);
  if ( v6 == 4 )
  {
    Function_2211338(v5 + 1020);
    v9 = *(uint *)(v5 + 188);
    Function_2211380(v5 + 1020);
    MI_CpuFill8(&v14, 54, 0x30u);
    Function_2211380(v5 + 1020);
    Function_2211380(v5 + 1020);
    Function_2211380(v5 + 1020);
    Function_2211380(v5 + 1020);
    Function_2211438(v5 + 1020, v7 + v8);
    Function_2211338(v5 + 1020);
    v10 = *(uint *)(v5 + 188);
    Function_2211380(v5 + 1020);
    MI_CpuFill8(&v14, 92, 0x30u);
    Function_2211380(v5 + 1020);
    Function_2211380(v5 + 1020);
    Function_2211438(v5 + 1020, v7 + v8);
    v8 += 16;
  }
  else if ( v6 == 5 )
  {
    Function_2211bf8(v5 + 840);
    v11 = *(uint *)(v5 + 188);
    Function_2211c4c(v5 + 840);
    MI_CpuFill8(&v14, 54, 0x28u);
    Function_2211c4c(v5 + 840);
    Function_2211c4c(v5 + 840);
    Function_2211c4c(v5 + 840);
    Function_2211c4c(v5 + 840);
    Function_2211d04(v5 + 840, v7 + v8);
    Function_2211bf8(v5 + 840);
    v12 = *(uint *)(v5 + 188);
    Function_2211c4c(v5 + 840);
    MI_CpuFill8(&v14, 92, 0x28u);
    Function_2211c4c(v5 + 840);
    Function_2211c4c(v5 + 840);
    Function_2211d04(v5 + 840, v7 + v8);
    v8 += 20;
  }
  *(uchar *)(v4 + 3) = BYTE1(v8);
  *(uchar *)(v4 + 4) = v8;
  Function_2211e10(v5 + 200);
  Function_220f3d0((uchar *)(v5 + 468));
  return v8 + 5;
}

//----- (0220F840) --------------------------------------------------------
int __fastcall Function_220f840(uint a1, uint a2, int a3, uint a4)
{
  uint v4;
  uint v5;
  int v6;
  int v7;
  uint v8;
  uint v10;

  v10 = a4;
  v4 = a1;
  v5 = a2;
  v6 = a3;
  do
  {
    v7 = Function_220c154(&v10, v6);
    if ( !v10 )
      return -1;
    if ( v10 > v5 )
      v10 = v5;
    MI_CpuCopy8(v7, v4, v10, v8);
    Function_220c234(v10, v6);
    v5 -= v10;
    v4 += v10;
  }
  while ( (int)v5 > 0 );
  return 0;
}

//----- (0220F8AC) --------------------------------------------------------
int __fastcall Function_220f8ac(int a1)
{
  int v1;

  v1 = a1;
  Function_2211c4c(a1 + 748);
  return Function_2211380(v1 + 932);
}

//----- (0220F8D8) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x220F998 for case 0"

//----- (0220F988) --------------------------------------------------------
void Function_220f988()
{
  JUMPOUT(&loc_220F998);
}

//----- (0220F98C) --------------------------------------------------------
void Function_220f98c()
{
  JUMPOUT(&loc_220F9C8);
}

//----- (0220F990) --------------------------------------------------------
void Function_220f990()
{
  JUMPOUT(&loc_220F9DC);
}

//----- (0220F994) --------------------------------------------------------
void Function_220f994()
{
  JUMPOUT(&loc_220FB18);
}

//----- (0220FA48) --------------------------------------------------------
void Function_220fa48()
{
  JUMPOUT(&loc_220FAC0);
}

//----- (0220FA4C) --------------------------------------------------------
void Function_220fa4c()
{
  JUMPOUT(&loc_220FAC8);
}

//----- (0220FA50) --------------------------------------------------------
void Function_220fa50()
{
  JUMPOUT(&loc_220FAE0);
}

//----- (0220FA54) --------------------------------------------------------
void Function_220fa54()
{
  JUMPOUT(&loc_220FA8C);
}

//----- (0220FA58) --------------------------------------------------------
void Function_220fa58()
{
  JUMPOUT(&loc_220FAE0);
}

//----- (0220FA5C) --------------------------------------------------------
void Function_220fa5c()
{
  JUMPOUT(&loc_220FAE0);
}

//----- (0220FA60) --------------------------------------------------------
void Function_220fa60()
{
  JUMPOUT(&loc_220FAE0);
}

//----- (0220FA64) --------------------------------------------------------
void __fastcall Function_220fa64(int a1, int a2, int a3, uint a4)
{
  uchar *v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;

  Function_220f310(v8, v4, a3, a4);
  Function_220f8ac(v8);
  if ( v5 != v6 + 4 && *(uchar *)(v8 + 1109) != 9 )
    JUMPOUT(&loc_220F9E8);
  ((void (__fastcall *)(int))dword_221A400[3724])(v7);
  JUMPOUT(__CS__, v9);
}

//----- (0220FB58) --------------------------------------------------------
int __fastcall Function_220fb58(int a1, int a2, int a3, int a4)
{
  int v4;
  int v5;
  uchar *v6;
  int result;
  uint v8;
  uint v9;
  uchar *v10;
  int v11;
  bool v12;
  uint v13;
  uint v14;
  uint v15;
  uint v16;
  uint v17;
  int v18;

  v18 = a4;
  v4 = a1;
  v5 = *(uint *)(a1 + 12);
  do
  {
    v6 = (uchar *)Function_220c154(&v17, v4);
    if ( !v17 )
    {
      result = 9;
      *(uchar *)(v5 + 1109) = 9;
      return result;
    }
  }
  while ( v17 < 5 );
  if ( *v6 == 128 )
  {
    if ( !*(uchar *)(v5 + 1108) || *(uchar *)(v5 + 1109) )
    {
      *(uchar *)(v5 + 1109) = 9;
    }
    else
    {
      v17 = v6[1];
      Function_220c234(2u, v4);
      v8 = ((int (__fastcall *)(uint))dword_221A400[3713])(v17);
      v10 = (uchar *)v8;
      if ( !v8 )
      {
        result = 9;
        *(uchar *)(v5 + 1109) = 9;
        return result;
      }
      v11 = Function_220f840(v8, v17, v4, v9);
      v12 = v11 == 0;
      if ( !v11 )
        v12 = *v10 == 1;
      if ( v12 )
        Function_220eab0(v5, v10 + 1);
      else
        *(uchar *)(v5 + 1109) = 9;
      Function_220f8ac(v5);
      ((void (__fastcall *)(uchar *))dword_221A400[3724])(v10);
    }
  }
  else
  {
    v13 = v6[4] + (v6[3] << 8) + 5;
    v17 = v13;
    if ( v13 > 0x4805 )
    {
      result = 9;
      *(uchar *)(v5 + 1109) = 9;
      return result;
    }
    v14 = ((int (__fastcall *)(uint))dword_221A400[3713])(v13);
    v16 = v14;
    if ( !v14 )
    {
      result = 9;
      *(uchar *)(v5 + 1109) = 9;
      return result;
    }
    if ( Function_220f840(v14, v17, v4, v15) )
    {
      ((void (__fastcall *)(uint))dword_221A400[3724])(v16);
      result = 9;
      *(uchar *)(v5 + 1109) = 9;
      return result;
    }
    Function_220f8d8(v5, v16);
  }
  return *(uchar *)(v5 + 1109);
}

//----- (0220FCF8) --------------------------------------------------------
int __fastcall Function_220fcf8(int a1, int a2)
{
  int v2;
  int result;
  int v4;
  int v5;
  int v6;
  int v7;
  uchar *v8;
  int v9;
  int v10;
  char *v11;
  int v12;
  uint v13;
  uint v14;
  char v15[19];
  char v16;
  char v17;

  v2 = a1;
  result = LOBYTE(dword_221A400[5256]);
  v4 = a2;
  if ( !LOBYTE(dword_221A400[5256]) )
  {
    *(ull *)&dword_221A400[3734] = *(ull *)&dword_221A400[3738]
                                    + *(ull *)&dword_221A400[3736] * *(ull *)&dword_221A400[3734];
    v14 = (*(ull *)&dword_221A400[3738] + *(ull *)&dword_221A400[3736] * *(ull *)&dword_221A400[3734]) >> 32;
    result = Function_220fe28(&v14, 4);
  }
  v5 = 0;
  v6 = 20;
  while ( v5 < v4 )
  {
    if ( v6 == 20 )
    {
      Function_2211bf8(&v17);
      v7 = OS_DisableInterrupts();
      Function_2211c4c(&v17);
      Function_2211d6c(&v17, v15);
      v8 = (char *)&dword_221A400[5354] + 3;
      v9 = 1;
      v10 = 19;
      v11 = &v16;
      do
      {
        v12 = (uchar)*v11--;
        --v10;
        v13 = v9 + (uchar)*v8 + v12;
        *v8-- = v13;
        v9 = v13 >> 8;
      }
      while ( v10 >= 0 );
      v14 = v13;
      OS_RestoreInterrupts(v7);
      v6 = 0;
    }
    result = (uchar)v15[v6++];
    if ( result )
      *(uchar *)(v2 + v5++) = result;
  }
  return result;
}

//----- (0220FE28) --------------------------------------------------------
int *__fastcall Function_220fe28(int a1, int a2, int a3, int a4)
{
  int v4;
  int *result;
  char v6;
  int v7;

  v7 = a4;
  Function_2211bf8(&v6);
  v4 = OS_DisableInterrupts();
  Function_2211c4c(&v6);
  Function_2211c4c(&v6);
  Function_2211d04(&v6, &dword_221A400[5350]);
  OS_RestoreInterrupts(v4);
  result = &dword_221A400[5256];
  LOBYTE(dword_221A400[5256]) = 1;
  return result;
}

//----- (0220FE98) --------------------------------------------------------
int __fastcall Function_220fe98(int a1)
{
  int v1;
  int v2;
  int v3;
  uint v4;
  int v5;
  uchar *v6;
  uchar *v7;
  int result;
  uint v9;
  uint v10;
  int v11;
  uchar *v12;
  uint v13;
  int v14;

  v1 = a1;
  v2 = *(uint *)(a1 + 12);
  v3 = *(uint *)(v2 + 2080);
  if ( v3 )
    v4 = *(uint *)v3;
  else
    v4 = 0;
  v5 = Function_220dc98();
  *(uchar *)(v2 + 84) = HIBYTE(v5);
  *(uchar *)(v2 + 85) = BYTE2(v5);
  *(uchar *)(v2 + 86) = BYTE1(v5);
  *(uchar *)(v2 + 87) = v5;
  Function_220fcf8(v2 + 88, 28);
  v6 = (uchar *)((int (__fastcall *)(uint))dword_221A400[3713])(v4 + 157);
  v7 = v6;
  if ( v6 )
  {
    v6[5] = 2;
    v6[6] = 0;
    v6[7] = 0;
    v6[8] = 70;
    v6[9] = 3;
    v6[10] = 0;
    MI_CpuCopy8(v2 + 84, (uint)(v6 + 11), 0x20u, 0);
    v7[43] = 32;
    if ( *(uchar *)(v2 + 48) )
    {
      MI_CpuCopy8(v2 + 116, (uint)(v7 + 44), 0x20u, v9);
      *(uchar *)(v2 + 49) = 1;
      v11 = (int)(v7 + 76);
    }
    else
    {
      Function_220fcf8((int)(v7 + 44), 28);
      v11 = (int)(v7 + 76);
      v7[72] = HIBYTE(dword_221A400[5257]);
      v7[73] = BYTE2(dword_221A400[5257]);
      v7[74] = BYTE1(dword_221A400[5257]);
      v7[75] = dword_221A400[5257];
      MI_CpuCopy8((int)(v7 + 44), v2 + 116, 0x20u, dword_221A400[5257]);
      *(uchar *)(v2 + 49) = 0;
      ++dword_221A400[5257];
    }
    *(uchar *)v11 = *(ushort *)(v2 + 50) >> 8;
    *(ushort *)(v11 + 1) = (uchar)*(ushort *)(v2 + 50);
    v12 = (uchar *)(v11 + 3);
    if ( !*(uchar *)(v2 + 49) )
    {
      if ( v4 )
      {
        *v12 = 11;
        v12[1] = (v4 + 6) >> 16;
        v12[2] = (ushort)(v4 + 6) >> 8;
        v12[3] = v4 + 6;
        v12[4] = (v4 + 3) >> 16;
        v12[5] = (ushort)(v4 + 3) >> 8;
        v12[6] = v4 + 3;
        v12[7] = BYTE2(v4);
        v12[8] = BYTE1(v4);
        v12[9] = v4;
        v13 = (uint)(v12 + 10);
        MI_CpuCopy8(*(uint *)(v3 + 4), v13, v4, v10);
        v12 = (uchar *)(v13 + v4);
      }
      *v12 = 14;
      v12[1] = 0;
      v12[2] = 0;
      v12[3] = 0;
      v12 += 4;
    }
    v14 = v12 - v7 - 5;
    *v7 = 22;
    v7[1] = 3;
    v7[2] = 0;
    v7[3] = BYTE1(v14);
    v7[4] = v14;
    Function_220f8ac(v2);
    Function_220c3fc((int)v7, v14 + 5, 0, 0, v1);
    ((void (__fastcall *)(uchar *))dword_221A400[3724])(v7);
    result = *(uchar *)(v2 + 49);
  }
  else
  {
    *(uchar *)(v2 + 1109) = 9;
    result = 1;
  }
  return result;
}

//----- (022100F8) --------------------------------------------------------
int __fastcall Function_22100f8(int a1)
{
  int v1;
  int v2;
  uchar *v3;
  uchar *v4;
  int result;
  int v6;
  uint v7;
  uint v8;
  int v9;
  uint v10;
  int v11;
  int v12;
  int v13;

  v1 = a1;
  v2 = *(uint *)(a1 + 12);
  v3 = (uchar *)((int (__fastcall *)(int))dword_221A400[3713])(131);
  v4 = v3;
  if ( v3 )
  {
    *v3 = 20;
    v3[1] = 3;
    v3[2] = 0;
    v3[3] = 0;
    v3[4] = 1;
    v3[5] = 1;
    MI_CpuFill8((ushort *)(v2 + 460), 0, 8u);
    v4[6] = 22;
    v4[7] = 3;
    v4[8] = 0;
    v4[9] = 0;
    v4[10] = 40;
    v4[11] = 20;
    v4[12] = 0;
    v4[13] = 0;
    v4[14] = 36;
    MI_CpuCopy8(v2 + 932, v2 + 1020, 0x58u, 0x24u);
    Function_220f158(v2, (int)(v4 + 15), 0, v6);
    MI_CpuCopy8(v2 + 1020, v2 + 932, 0x58u, v7);
    MI_CpuCopy8(v2 + 748, v2 + 840, 0x5Cu, v8);
    Function_220f234(v2, (int)(v4 + 31), 0, v9);
    MI_CpuCopy8(v2 + 840, v2 + 748, 0x5Cu, v10);
    Function_220f8ac(v2);
    v13 = Function_220f63c(v2, (int)(v4 + 6), v11, v12);
    Function_220c3fc((int)v4, v13 + 6, 0, 0, v1);
    result = ((int (__fastcall *)(uchar *))dword_221A400[3724])(v4);
  }
  else
  {
    result = 9;
    *(uchar *)(v2 + 1109) = 9;
  }
  return result;
}

//----- (02210250) --------------------------------------------------------
int __fastcall Function_2210250(int a1)
{
  int v1;
  uchar *v2;
  int v3;
  uchar *v4;
  int result;
  int v6;
  uint v7;
  uint v8;
  uchar *v9;
  uint v10;
  uchar *v11;
  int v12;
  short v13;
  int v14;
  uint v15;

  v1 = a1;
  v2 = *(uchar **)(a1 + 12);
  v3 = ((int (__fastcall *)(int))dword_221A400[3713])(152);
  v4 = (uchar *)v3;
  if ( v3 )
  {
    *(uchar *)(v3 + 9) = 3;
    *(uchar *)(v3 + 10) = 0;
    v6 = Function_220dc98();
    v2[52] = HIBYTE(v6);
    v2[53] = BYTE2(v6);
    v2[54] = BYTE1(v6);
    v2[55] = v6;
    Function_220fcf8((int)(v2 + 56), 28);
    MI_CpuCopy8((int)(v2 + 52), (uint)(v4 + 11), 0x20u, v7);
    Function_220daa4((uint)v2, *(uint *)(v1 + 28), *(ushort *)(v1 + 24));
    if ( v2[48] )
    {
      v4[43] = 32;
      MI_CpuCopy8((int)(v2 + 116), (uint)(v4 + 44), 0x20u, v8);
      v9 = v4 + 76;
    }
    else
    {
      v4[43] = 0;
      v9 = v4 + 44;
    }
    v10 = 0;
    *v9 = 0;
    v9[1] = 4;
    v11 = v9 + 2;
    do
    {
      v12 = 2 * v10;
      v13 = *((ushort *)&dword_221A1BC + v10++);
      *v11 = HIBYTE(v13);
      v11[1] = *(ushort *)((char *)&dword_221A1BC + v12);
      v11 += 2;
    }
    while ( v10 < 2 );
    *v11 = 1;
    v14 = v11 + 2 - v4 - 5;
    v11[1] = 0;
    v15 = v11 + 2 - v4 - 9;
    *v4 = 22;
    v4[1] = 3;
    v4[2] = 0;
    v4[3] = BYTE1(v14);
    v4[4] = v14;
    v4[5] = 1;
    v4[6] = v15 >> 16;
    v4[7] = BYTE1(v15);
    v4[8] = v15;
    Function_220c3fc((int)v4, v11 + 2 - v4, 0, 0, v1);
    Function_220f8ac((int)v2);
    result = ((int (__fastcall *)(uchar *))dword_221A400[3724])(v4);
  }
  else
  {
    result = 9;
    v2[1109] = 9;
  }
  return result;
}

//----- (022103E4) --------------------------------------------------------
int __fastcall Function_22103e4(int a1)
{
  int v1;
  int v2;
  int v3;
  int v4;
  uchar *v5;
  uchar *v6;
  int result;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  uchar *v13;
  int v14;
  uchar *v15;
  int i;
  int v17;
  short v18;

  v1 = a1;
  v2 = *(uint *)(a1 + 12);
  if ( *(uchar *)(v2 + 1452) )
    Function_220c3fc((int)dword_2215E40, 7u, 0, 0, a1);
  *(uchar *)v2 = 3;
  *(uchar *)(v2 + 1) = 0;
  Function_220fcf8(v2 + 2, 46);
  v3 = *(uint *)(v2 + 1428);
  v4 = 2 * v3 / 2;
  v5 = (uchar *)((int (__fastcall *)(uint))dword_221A400[3713])(*(uint *)(v2 + 1428));
  v6 = v5;
  if ( v5 )
  {
    *v5 = 0;
    v5[1] = 2;
    Function_220fcf8((int)(v5 + 2), v3 - 51);
    v6[v3 - 49] = 0;
    MI_CpuCopy8(v2, (uint)&v6[v3 - 48], 0x30u, v3 - 49);
    v8 = ((int (__fastcall *)(int))dword_221A400[3713])(8 * v4);
    v9 = v8;
    if ( v8 )
    {
      v10 = v8 + 2 * v4;
      v11 = v10 + 2 * v4;
      Function_2212c28(v10, v6, v3, 2 * v3 / 2);
      Function_2212c28(v11, v2 + 1432, *(uint *)(v2 + 1440), 2 * v3 / 2);
      Function_2212c28(v11 + 2 * v4, v2 + 1172, v3, 2 * v3 / 2);
      v12 = Function_220dcf0();
      Function_2212614(v9, v9 + 2 * v4, v11, 2 * v3 / 2, v11 + 2 * v4);
      Function_220dd3c(v12);
      v13 = (uchar *)((int (__fastcall *)(int))dword_221A400[3713])(v3 + 73);
      v14 = (int)v13;
      if ( v13 )
      {
        *v13 = 22;
        v13[1] = 3;
        v13[2] = 0;
        v13[3] = (ushort)(v3 + 4) >> 8;
        v13[4] = v3 + 4;
        v13[5] = 16;
        v13[6] = BYTE2(v3);
        v13[7] = BYTE1(v3);
        v13[8] = v3;
        v15 = v13 + 9;
        if ( v3 & 1 )
        {
          v15 = (uchar *)(v14 + 10);
          *(uchar *)(v14 + 9) = *(ushort *)(v9 + 2 * (v3 / 2));
        }
        for ( i = v3 / 2 - 1; i >= 0; v15 += 2 )
        {
          v17 = 2 * i;
          v18 = *(ushort *)(v9 + 2 * i--);
          *v15 = HIBYTE(v18);
          v15[1] = *(ushort *)(v9 + v17);
        }
        Function_220c3fc(v14, v3 + 9, 0, 0, v1);
        Function_220f8ac(v2);
        ((void (__fastcall *)(int))dword_221A400[3724])(v14);
        ((void (__fastcall *)(int))dword_221A400[3724])(v9);
        result = ((int (__fastcall *)(uchar *))dword_221A400[3724])(v6);
      }
      else
      {
        ((void (__fastcall *)(uchar *))dword_221A400[3724])(v6);
        ((void (__fastcall *)(int))dword_221A400[3724])(v9);
        result = 9;
        *(uchar *)(v2 + 1109) = 9;
      }
    }
    else
    {
      ((void (__fastcall *)(uchar *))dword_221A400[3724])(v6);
      result = 9;
      *(uchar *)(v2 + 1109) = 9;
    }
  }
  else
  {
    result = 9;
    *(uchar *)(v2 + 1109) = 9;
  }
  return result;
}

//----- (022106A4) --------------------------------------------------------
BOOL __fastcall Function_22106a4(int a1, int a2, int a3, int a4)
{
  int v4;
  int v5;
  int v6;
  int v7;
  BOOL result;

  v4 = a1;
  if ( Function_220fb58(a1, a2, a3, a4) == 7 )
    result = Function_220fb58(v4, v5, v6, v7) != 6;
  else
    result = 1;
  return result;
}

//----- (022106D4) --------------------------------------------------------
int __fastcall Function_22106d4(int a1, int a2, int a3, int a4)
{
  int v4;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;
  int v14;

  v4 = a1;
  if ( Function_220fb58(a1, a2, a3, a4) != 1 )
    return 1;
  if ( Function_220fe98(v4) )
  {
    Function_220ef50(*(uint *)(v4 + 12), v6, v7);
    Function_22100f8(v4);
    if ( Function_22106a4(v4, v9, v10, v11) )
      return 1;
  }
  else
  {
    if ( Function_220fb58(v4, v6, v7, v8) != 5 )
      return 1;
    if ( Function_22106a4(v4, v12, v13, v14) )
      return 1;
    Function_22100f8(v4);
  }
  return 0;
}

//----- (0221075C) --------------------------------------------------------
int __fastcall Function_221075c(int a1)
{
  int v1;
  int v2;
  int v3;
  int v4;
  int v5;
  int result;

  v1 = a1;
  v2 = *(uint *)(a1 + 12);
  while ( 1 )
  {
    Function_220be14(v1);
    *(uchar *)(v2 + 1109) = 0;
    *(uint *)(v2 + 468) = 0;
    *(uchar *)(v2 + 1108) = 1;
    Function_2211bf8(v2 + 748);
    Function_2211338(v2 + 932);
    if ( !Function_22106d4(v1, v3, v4, v5) )
      break;
    Function_220bfec(v1);
    *(ushort *)(v1 + 24) = *(ushort *)(v1 + 26);
    *(uint *)(v1 + 28) = *(uint *)(v1 + 32);
  }
  result = 8;
  *(uchar *)(v2 + 1109) = 8;
  return result;
}

//----- (022107C8) --------------------------------------------------------
int __fastcall Function_22107c8(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int (__fastcall *a10)(int, int, int, int))
{
  return a10(a1, a2, a3, a5);
}

//----- (022107CC) --------------------------------------------------------
int __fastcall Function_22107cc(int a1)
{
  int v1;
  uchar *v2;
  int v3;
  int v4;
  int v5;
  int v6;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  int v13;
  int v14;
  int v15;
  int v16;
  int v17;
  int v18;

  v1 = a1;
  v2 = *(uchar **)(a1 + 12);
  Function_2210250(a1);
  do
  {
    v6 = Function_220fb58(v1, v3, v4, v5);
    if ( v6 == 9 )
      return 1;
  }
  while ( v6 != 4 && !v2[49] );
  if ( v2[49] )
  {
    Function_220ef50((int)v2, v3, v4);
    if ( Function_22106a4(v1, v8, v9, v10) )
      return 1;
    Function_22100f8(v1);
  }
  else
  {
    Function_22103e4(v1);
    Function_220eef0((int)v2, v11, v12, v13);
    if ( v2[48] )
      Function_220db44((int)v2, *(uint *)(v1 + 28), *(ushort *)(v1 + 24));
    Function_220ef50((int)v2, v14, v15);
    Function_22100f8(v1);
    if ( Function_22106a4(v1, v16, v17, v18) )
      return 1;
  }
  v2[1109] = 8;
  return 0;
}

//----- (02210898) --------------------------------------------------------
int __fastcall Function_2210898(int a1)
{
  int v1;
  int v2;

  v1 = a1;
  v2 = *(uint *)(a1 + 12);
  if ( *(uchar *)(a1 + 8) != 4 && Function_220bea8(a1) )
    return 1;
  *(uchar *)(v2 + 1109) = 0;
  *(uint *)(v2 + 468) = 0;
  *(uchar *)(v2 + 1108) = 0;
  Function_2211bf8(v2 + 748);
  Function_2211338(v2 + 932);
  return Function_22107cc(v1);
}

//----- (022108EC) --------------------------------------------------------
int __fastcall Function_22108ec(uint *a1, int a2, int a3, int a4)
{
  int v4;
  int v5;
  uint *v6;
  int v7;
  int result;

  v4 = a2;
  v5 = *(uint *)(a2 + 12);
  v6 = a1;
  v7 = *(uint *)(v5 + 2084);
  if ( v7 && !*(uchar *)(v5 + 1110) )
  {
    if ( Function_220f840(
           v7 + *(uint *)(v5 + 2092),
           *(uint *)(v5 + 2088) - *(uint *)(v5 + 2092),
           a2,
           *(uint *)(v5 + 2092)) )
    {
      ((void (__fastcall *)(uint))dword_221A400[3724])(*(uint *)(v5 + 2084));
      result = 0;
      *(uint *)(v5 + 2084) = 0;
      *v6 = 0;
      return result;
    }
    Function_220f8d8(v5, *(uint *)(v5 + 2084));
    if ( !*(uchar *)(v5 + 1110) )
      *(uint *)(v5 + 2084) = 0;
  }
  if ( *(uint *)(v5 + 2084) )
  {
LABEL_11:
    *v6 = *(uint *)(v5 + 2088) - *(uint *)(v5 + 2092);
    result = *(uint *)(v5 + 2084) + *(uint *)(v5 + 2092);
  }
  else
  {
    while ( Function_220fb58(v4, a2, a3, a4) != 9 )
    {
      if ( *(uint *)(v5 + 2084) )
        goto LABEL_11;
    }
    result = 0;
    *v6 = 0;
  }
  return result;
}

//----- (022109C4) --------------------------------------------------------
int __fastcall Function_22109c4(uint a1, int a2)
{
  uint *v2;
  int v3;
  int v4;
  int result;

  v2 = *(uint **)(a2 + 12);
  v3 = v2[523];
  if ( a1 < v2[522] - v3 )
  {
    result = v3 + a1;
    v2[523] = result;
  }
  else
  {
    v4 = v2[521];
    if ( v4 )
      ((void (__fastcall *)(int))dword_221A400[3724])(v4);
    result = 0;
    v2[521] = 0;
  }
  return result;
}

//----- (02210A14) --------------------------------------------------------
uint __fastcall Function_2210a14(int a1, int a2, int a3, int a4)
{
  int v4;
  int v5;
  int v6;
  uint result;
  int v8;
  uint v9;
  int v10;
  int v11;
  int v12;
  uint v13;
  bool v14;
  uint v15;
  int v16;

  v16 = a4;
  v5 = a1;
  v6 = *(uint *)(a1 + 12);
  result = *(uint *)(a1 + 68);
  if ( *(uint *)(v6 + 2084) )
  {
    if ( !result )
      return result;
  }
  else
  {
    if ( result < 5 )
      return result;
    v8 = Function_220c154(&v15, v5);
    v9 = *(uchar *)(v8 + 4) + (*(uchar *)(v8 + 3) << 8) + 5;
    v15 = v9;
    if ( v9 > 0x4805 )
    {
      result = 9;
      *(uchar *)(v6 + 1109) = 9;
      return result;
    }
    v10 = ((int (__fastcall *)(uint))dword_221A400[3713])(v9);
    *(uint *)(v6 + 2084) = v10;
    if ( !v10 )
    {
      result = 9;
      *(uchar *)(v6 + 1109) = 9;
      return result;
    }
    *(uint *)(v6 + 2088) = v15;
    *(uint *)(v6 + 2092) = 0;
    *(uchar *)(v6 + 1110) = 0;
  }
  v11 = Function_220c154(&v15, v5);
  v12 = *(uint *)(v6 + 2088);
  v13 = v12 - *(uint *)(v6 + 2092);
  v14 = v15 >= v13;
  if ( v15 >= v13 )
  {
    v15 = v12 - *(uint *)(v6 + 2092);
    v4 = 1;
  }
  if ( !v14 )
    v4 = 0;
  MI_CpuCopy8(v11, *(uint *)(v6 + 2084) + *(uint *)(v6 + 2092), v15, *(uint *)(v6 + 2084));
  Function_220c234(v15, v5);
  if ( v4 )
  {
    Function_220f8d8(v6, *(uint *)(v6 + 2084));
    result = *(uchar *)(v6 + 1110);
    if ( !*(uchar *)(v6 + 1110) )
    {
      result = 0;
      *(uint *)(v6 + 2084) = 0;
    }
  }
  else
  {
    result = *(uint *)(v6 + 2092) + v15;
    *(uint *)(v6 + 2092) = result;
  }
  return result;
}

//----- (02210B58) --------------------------------------------------------
int __fastcall Function_2210b58(int a1, int a2, int a3, int a4)
{
  int v4;
  int v5;
  int v6;
  bool v7;
  int v8;
  bool v9;

  v4 = a1;
  v5 = *(uint *)(a1 + 12);
  v6 = *(uint *)(v5 + 2084);
  v7 = v6 == 0;
  if ( v6 )
    v7 = *(uchar *)(v5 + 1110) == 0;
  if ( v7 )
    Function_2210a14(v4, a2, a3, a4);
  v8 = *(uint *)(v5 + 2084);
  v9 = v8 == 0;
  if ( v8 )
    v9 = *(uchar *)(v5 + 1110) == 0;
  if ( !v9 )
    return *(uint *)(v5 + 2088) - *(uint *)(v5 + 2092);
  if ( v8 || *(uchar *)(v4 + 8) == 4 && *(uchar *)(v5 + 1109) != 9 )
    return 0;
  return -1;
}

//----- (02210BD4) --------------------------------------------------------
int __fastcall Function_2210bd4(int a1, uint a2, int a3, int a4, int a5)
{
  uint v5;
  int v6;
  int v7;
  int v8;
  uint v9;
  uint v10;
  uchar *v11;
  uint v12;
  uint v13;
  int v14;
  int v15;
  uint v16;
  bool v17;
  int v19;
  int v20;

  v5 = a2;
  v6 = a1;
  v20 = *(uint *)(a5 + 12);
  v7 = a3;
  v8 = a2 + a4;
  v19 = 0;
  do
  {
    if ( v8 <= 2895 )
      v9 = v8;
    else
      v9 = 2895;
    v11 = (uchar *)((int (__fastcall *)(uint))dword_221A400[3713])(v9 + 25);
    if ( !v11 )
      break;
    if ( v5 < v9 )
      v12 = v5;
    else
      v12 = v9;
    MI_CpuCopy8(v6, (uint)(v11 + 5), v12, v10);
    v6 += v12;
    v5 -= v12;
    MI_CpuCopy8(v7, (uint)&v11[v12 + 5], v9 - v12, v13);
    *v11 = 23;
    v11[1] = 3;
    v11[2] = 0;
    v11[3] = BYTE1(v9);
    v7 += v9 - v12;
    v11[4] = v9;
    v16 = Function_220f63c(v20, (int)v11, v14, v15);
    if ( Function_220c3fc((int)v11, v16, 0, 0, a5) < v16 )
      v9 = 0;
    ((void (__fastcall *)(uchar *))dword_221A400[3724])(v11);
    v8 -= v9;
    v17 = v8 == 0;
    v19 += v9;
    if ( v8 )
      v17 = v9 == 0;
  }
  while ( !v17 );
  return v19;
}

//----- (02210D08) --------------------------------------------------------
int __fastcall Function_2210d08(int a1)
{
  int v1;
  int v2;
  int v3;
  int result;
  char v5;
  char v6;
  char v7;
  char v8;
  char v9;
  char v10;
  char v11;

  v1 = a1;
  v2 = *(uint *)(a1 + 12);
  if ( *(uchar *)(v2 + 1109) == 8 )
  {
    v5 = 21;
    v6 = 3;
    v7 = 0;
    v8 = 0;
    v9 = 2;
    v10 = 1;
    v11 = 0;
    v3 = Function_220f63c(v2, (int)&v5, 1, 2);
    Function_220c3fc((int)&v5, v3, 0, 0, v1);
  }
  result = 0;
  *(uchar *)(v2 + 1109) = 0;
  return result;
}

//----- (02210D88) --------------------------------------------------------
int __fastcall Function_2210d88(int a1)
{
  int v1;
  int v2;
  int result;

  v1 = *(uint *)(a1 + 12);
  *(uchar *)(v1 + 1109) = 0;
  v2 = *(uint *)(v1 + 2084);
  if ( v2 )
    ((void (__fastcall *)(int))dword_221A400[3724])(v2);
  result = 0;
  *(uint *)(v1 + 2084) = 0;
  return result;
}

//----- (02210DC0) --------------------------------------------------------
int __fastcall Function_2210dc0(char a1)
{
  char v1;
  int result;

  v1 = a1;
  Function_2000b9c_Dummy("[SDK+UBIQUITOUS:SSL]");
  result = *(uint *)(dword_21CCC84 + 164);
  if ( result )
    *(uchar *)(result + 9) = v1;
  return result;
}

//----- (02210DF0) --------------------------------------------------------
uint __fastcall Function_2210df0(int a1)
{
  int v1;
  int v2;
  int v3;
  int *v4;
  uint result;
  int i;
  int v7;
  bool v8;

  v1 = a1;
  v2 = OS_DisableInterrupts();
  v3 = 0;
  v4 = &dword_221A400[5258];
  do
  {
    if ( *((uchar *)v4 + 90) && v1 - v4[20] > 957 )
      *((uchar *)v4 + 90) = 0;
    ++v3;
    v4 += 23;
  }
  while ( v3 < 4 );
  OS_RestoreInterrupts(v2);
  result = (uint)&word_21CCC80;
  for ( i = dword_21CCC88; i; i = *(uint *)(i + 104) )
  {
    v7 = *(uint *)(i + 164);
    v8 = v7 == 0;
    if ( v7 )
    {
      result = *(uint *)v7;
      v8 = *(uint *)v7 == 0;
    }
    if ( !v8 )
    {
      result = *(uchar *)(v7 + 9);
      v8 = result == 0;
    }
    if ( !v8 )
    {
      result = *(uchar *)(v7 + 8);
      if ( result == 4 )
      {
        result = *(uchar *)(*(uint *)(v7 + 12) + 1109);
        if ( result < 8 )
        {
          result = v1 - *(uint *)(v7 + 16);
          if ( (int)result > 239 )
          {
            result = *(uint *)(v7 + 4);
            if ( result == 2 )
            {
              *(uchar *)(v7 + 8) = 0;
              *(uint *)(v7 + 4) = 0;
              result = OS_WakeupThreadDirect(*(uint *)v7);
            }
          }
        }
      }
    }
  }
  return result;
}

//----- (02210ED0) --------------------------------------------------------
ushort *Function_2210ed0()
{
  return MI_CpuFill8(&dword_221A400[5258], 0, 0x170u);
}

//----- (02210EEC) --------------------------------------------------------
int __fastcall Function_2210eec(uint a1, int a2, uint a3)
{
  return MI_CpuCopy8(a2, a1, a3, a1);
}

//----- (02210F04) --------------------------------------------------------
int __fastcall Function_2210f04(uint a1, int a2, uint a3)
{
  return MI_CpuCopy8(a2, a1, a3, a1);
}

//----- (02210F1C) --------------------------------------------------------
uint *__fastcall Function_2210f1c(uint *a1, int a2)
{
  int v2;
  int v3;
  int v4;
  int v5;
  int v6;
  uchar *v7;
  int v8;
  int *v9;
  uint v10;
  int v11;
  uint v12;
  uint v13;
  uint v14;
  int v15;
  uchar *v16;
  int *v17;
  uint v18;
  int v19;
  uint v20;
  int v21;
  int v22;
  int v23;
  uint v24;
  uint v25;
  uchar *v26;
  int v27;
  int *v28;
  uint v29;
  uint v30;
  uint v31;
  int v32;
  uint v33;
  int v34;
  uchar *v35;
  int *v36;
  uint v37;
  int v38;
  uint v39;
  uint v40;
  uint v41;
  uint *result;
  uint *v43;
  uint v44[1];

  v43 = a1;
  v2 = *a1;
  v3 = a1[1];
  v4 = a1[2];
  v5 = a1[3];
  Function_2210f04((uint)v44, a2, 0x40u);
  v6 = 0;
  v7 = (uchar *)byte_221A224;
  v8 = 0;
  do
  {
    v9 = &dword_221A2A4[v6];
    v10 = v2 + dword_221A2A4[v6] + (v5 ^ v3 & (v4 ^ v5)) + v44[*v7];
    v11 = (v10 >> 25) | (v10 << 7);
    v2 = v3 + v11;
    v12 = v5 + v9[1] + (v4 ^ (v3 + v11) & (v3 ^ v4)) + v44[v7[1]];
    v5 = v3 + v11 + ((v12 >> 20) | (v12 << 12));
    v13 = v4 + v9[2] + (v3 ^ v5 & ((v3 + v11) ^ v3)) + v44[v7[2]];
    ++v8;
    v4 = v5 + ((v13 >> 15) | (v13 << 17));
    v14 = v3 + v9[3] + ((v3 + v11) ^ v4 & (v5 ^ (v3 + v11))) + v44[v7[3]];
    v7 += 4;
    v3 = v4 + ((v14 >> 10) | (v14 << 22));
    v6 += 4;
  }
  while ( v8 < 4 );
  v15 = 0;
  v16 = (uchar *)&byte_221A224[v6];
  do
  {
    v17 = &dword_221A2A4[v6];
    v18 = v2 + dword_221A2A4[v6] + (v4 ^ v5 & (v3 ^ v4)) + v44[*v16];
    v2 = v3 + ((v18 >> 27) | 32 * v18);
    v19 = v17[2];
    v20 = v5 + v17[1] + (v3 ^ v4 & (v2 ^ v3)) + v44[v16[1]];
    v21 = v17[3];
    v5 = v2 + ((v20 >> 23) | (v20 << 9));
    v22 = v16[2];
    v23 = v16[3];
    v16 += 4;
    v24 = v4 + v19 + (v2 ^ v3 & (v5 ^ v2)) + v44[v22];
    v4 = v5 + ((v24 >> 18) | (v24 << 14));
    v25 = v3 + v21 + (v5 ^ v2 & (v4 ^ v5)) + v44[v23];
    v3 = v4 + ((v25 >> 12) | (v25 << 20));
    v6 += 4;
    ++v15;
  }
  while ( v15 < 4 );
  v26 = (uchar *)&byte_221A224[v6];
  v27 = 0;
  do
  {
    v28 = &dword_221A2A4[v6];
    v29 = v2 + dword_221A2A4[v6] + (v5 ^ v3 ^ v4) + v44[*v26];
    v2 = v3 + ((v29 >> 28) | 16 * v29);
    v30 = v5 + v28[1] + (v4 ^ v2 ^ v3) + v44[v26[1]];
    v5 = v2 + ((v30 >> 21) | (v30 << 11));
    v31 = v4 + v28[2] + (v3 ^ v5 ^ v2) + v44[v26[2]];
    v4 = v5 + ((v31 >> 16) | (v31 << 16));
    v32 = v26[3];
    v26 += 4;
    v6 += 4;
    ++v27;
    v33 = v3 + v28[3] + (v2 ^ v4 ^ v5) + v44[v32];
    v3 = v4 + ((v33 >> 9) | (v33 << 23));
  }
  while ( v27 < 4 );
  v34 = 0;
  v35 = (uchar *)&byte_221A224[v6];
  do
  {
    v36 = &dword_221A2A4[v6];
    v37 = v2 + dword_221A2A4[v6] + (v4 ^ (v3 | ~v5)) + v44[*v35];
    v38 = (v37 >> 26) | (v37 << 6);
    v2 = v3 + v38;
    v39 = v5 + v36[1] + (v3 ^ ((v3 + v38) | ~v4)) + v44[v35[1]];
    v5 = v3 + v38 + ((v39 >> 22) | (v39 << 10));
    v40 = v4 + v36[2] + ((v3 + v38) ^ (v5 | ~v3)) + v44[v35[2]];
    ++v34;
    v4 = v5 + ((v40 >> 17) | (v40 << 15));
    v41 = v3 + v36[3] + (v5 ^ (v4 | ~(v3 + v38))) + v44[v35[3]];
    v35 += 4;
    v3 = v4 + ((v41 >> 11) | (v41 << 21));
    v6 += 4;
  }
  while ( v34 < 4 );
  *v43 += v2;
  v43[1] += v3;
  v43[2] += v4;
  result = v43;
  v43[3] += v5;
  return result;
}

//----- (02211338) --------------------------------------------------------
int __fastcall Function_2211338(ushort *a1)
{
  uint *v1;
  int result;

  v1 = a1;
  MI_CpuFill8(a1, 0, 0x58u);
  *v1 = 1732584193;
  v1[1] = -271733879;
  result = 271733878;
  v1[2] = -1732584194;
  v1[3] = 271733878;
  return result;
}

//----- (02211380) --------------------------------------------------------
int __fastcall Function_2211380(uint *a1, int a2, uint a3)
{
  uint *v3;
  uint v4;
  uint v5;
  uint v6;
  bool v7;
  int v8;
  uint v9;
  int v10;

  v3 = a1;
  v4 = a1[4];
  v5 = a3;
  v6 = v4 + 8 * a3;
  v3[4] = v6;
  v7 = v6 >= 8 * a3;
  if ( v6 < 8 * a3 )
    v6 = v3[5];
  if ( !v7 )
    v3[5] = v6 + 1;
  v8 = (v4 >> 3) & 0x3F;
  v9 = 64 - v8;
  v10 = a2;
  v3[5] += a3 >> 29;
  if ( a3 < v9 )
  {
    v9 = 0;
  }
  else
  {
    MI_CpuCopy8(a2, (uint)v3 + v8 + 24, 64 - ((v4 >> 3) & 0x3F), v4);
    v8 = 0;
    Function_2210f1c(v3, (int)(v3 + 6));
    for ( ; v9 + 63 < v5; v9 += 64 )
      Function_2210f1c(v3, v10 + v9);
  }
  return MI_CpuCopy8(v10 + v9, (uint)v3 + v8 + 24, v5 - v9, v4);
}

//----- (02211438) --------------------------------------------------------
int __fastcall Function_2211438(uint *a1, uint a2)
{
  uint *v2;
  uint v3;
  int v4;
  uint v5;

  v2 = a1;
  v3 = a2;
  Function_2210eec(a2, (int)(a1 + 4), 8u);
  v4 = (v2[4] >> 3) & 0x3F;
  if ( v4 >= 56 )
    v5 = 120 - v4;
  else
    v5 = 56 - v4;
  Function_2211380(v2, (int)dword_221A264, v5);
  Function_2211380(v2, v3, 8u);
  return Function_2210eec(v3, (int)v2, 0x10u);
}

//----- (022114A0) --------------------------------------------------------
int __fastcall Function_22114a0(int a1, int a2)
{
  uint v2;

  v2 = *(uint *)(a2 + 4 * a1) ^ *(uint *)(a2 + 4 * (((uchar)a1 + 2) & 0xF)) ^ *(uint *)(a2
                                                                                            + 4
                                                                                            * (((uchar)a1 + 13) & 0xF)) ^ *(uint *)(a2 + 4 * (a1 ^ 8));
  *(uint *)(a2 + 4 * a1) = (v2 >> 31) | 2 * v2;
  return (v2 >> 31) | 2 * v2;
}

//----- (022114E4) --------------------------------------------------------
uchar *__fastcall Function_22114e4(uchar *result, int *a2, uint a3)
{
  uint v3;
  uint v4;
  int v5;

  v3 = a3 >> 2;
  v4 = 0;
  if ( v3 )
  {
    do
    {
      v5 = *a2;
      ++a2;
      ++v4;
      *result = HIBYTE(v5);
      result[1] = BYTE2(v5);
      result[2] = BYTE1(v5);
      result[3] = v5;
      result += 4;
    }
    while ( v4 < v3 );
  }
  return result;
}

//----- (02211528) --------------------------------------------------------
int *__fastcall Function_2211528(int *result, int a2, uint a3)
{
  uint v3;
  int v4;
  int v5;

  v3 = 0;
  if ( a3 )
  {
    do
    {
      v4 = *(uchar *)(a2 + v3 + 3);
      v5 = (*(uchar *)(a2 + v3 + 1) << 16) | (*(uchar *)(a2 + v3) << 24) | (*(uchar *)(a2 + v3 + 2) << 8);
      v3 += 4;
      *result = v4 | v5;
      ++result;
    }
    while ( v3 < a3 );
  }
  return result;
}

//----- (02211570) --------------------------------------------------------
uint *__fastcall Function_2211570(uint *a1, int a2, int a3, int a4)
{
  uint v4;
  uint v5;
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;
  int v12;
  char *v13;
  uint v14;
  uint v15;
  int v16;
  uint v17;
  int v18;
  int v19;
  uint v20;
  int v21;
  uint v22;
  int v23;
  int v24;
  uint v25;
  int v26;
  int v27;
  uint v28;
  uint v29;
  int v30;
  int v31;
  uint v32;
  int v33;
  uint v34;
  int v35;
  int v36;
  uint v37;
  uint v38;
  int v39;
  uint v40;
  int v41;
  uint v42;
  int v43;
  uint v44;
  int v45;
  uint v46;
  int v47;
  uint v48;
  int v49;
  uint *result;
  uint *v51;
  int v52;
  int v53;
  int v54;
  char v55[60];
  int v56;
  int v57;

  v57 = a4;
  v51 = a1;
  v4 = *a1;
  v5 = a1[1];
  v6 = a1[2];
  v7 = a1[3];
  v8 = a1[4];
  Function_2211528((int *)v55, a2, 0x40u);
  v9 = 0;
  v10 = 0;
  do
  {
    v11 = v7 ^ v5 & (v6 ^ v7);
    v12 = (v5 >> 2) | (v5 << 30);
    v13 = &v55[4 * v9];
    v14 = v8 + *(uint *)&v55[4 * v9] + ((v4 >> 27) | 32 * v4) + v11 + 1518500249;
    v15 = v7 + *((uint *)v13 + 1) + ((v14 >> 27) | 32 * v14) + (v6 ^ v4 & (v12 ^ v6)) + 1518500249;
    v16 = (v4 >> 2) | (v4 << 30);
    v17 = v6 + *((uint *)v13 + 2) + ((v15 >> 27) | 32 * v15) + (v12 ^ v14 & (v16 ^ v12)) + 1518500249;
    v8 = (v14 >> 2) | (v14 << 30);
    v18 = *((uint *)v13 + 4);
    v5 = v12 + *((uint *)v13 + 3) + ((v17 >> 27) | 32 * v17) + (v16 ^ v15 & (v8 ^ v16)) + 1518500249;
    v7 = (v15 >> 2) | (v15 << 30);
    v4 = v16 + v18 + ((v5 >> 27) | 32 * v5) + (v8 ^ v17 & (v7 ^ v8)) + 1518500249;
    v6 = (v17 >> 2) | (v17 << 30);
    v9 += 5;
    ++v10;
  }
  while ( v10 < 3 );
  v19 = (v5 >> 2) | (v5 << 30);
  v20 = v8 + v56 + ((v4 >> 27) | 32 * v4) + (v7 ^ v5 & (v6 ^ v7)) + 1518500249;
  v21 = (v4 >> 2) | (v4 << 30);
  v22 = v7 + ((v20 >> 27) | 32 * v20) + (v6 ^ v4 & (v19 ^ v6)) + Function_22114a0(0, (int)v55) + 1518500249;
  v23 = ((v22 >> 27) | 32 * v22) + (v19 ^ v20 & (v21 ^ v19)) + Function_22114a0(1, (int)v55);
  v24 = (v20 >> 2) | (v20 << 30);
  v25 = v6 + v23 + 1518500249;
  v26 = ((v25 >> 27) | 32 * v25) + (v21 ^ v22 & (v24 ^ v21)) + Function_22114a0(2, (int)v55);
  v27 = (v22 >> 2) | (v22 << 30);
  v28 = v19 + v26 + 1518500249;
  v29 = v21 + ((v28 >> 27) | 32 * v28) + (v24 ^ v25 & (v27 ^ v24)) + Function_22114a0(3, (int)v55) + 1518500249;
  v30 = (v25 >> 2) | (v25 << 30);
  v31 = 4;
  v52 = 0;
  do
  {
    v32 = v24 + ((v29 >> 27) | 32 * v29) + (v27 ^ v28 ^ v30) + Function_22114a0(v31, (int)v55) + 1859775393;
    v33 = (v28 >> 2) | (v28 << 30);
    v34 = v27 + ((v32 >> 27) | 32 * v32) + (v30 ^ v29 ^ v33) + Function_22114a0(v31 + 1, (int)v55) + 1859775393;
    v35 = (v29 >> 2) | (v29 << 30);
    v36 = ((uchar)v31 + 2) & 0xF;
    v37 = v30 + ((v34 >> 27) | 32 * v34) + (v33 ^ v32 ^ v35) + Function_22114a0(v36, (int)v55) + 1859775393;
    v24 = (v32 >> 2) | (v32 << 30);
    v28 = v33 + ((v37 >> 27) | 32 * v37) + (v35 ^ v34 ^ v24) + Function_22114a0(v36 + 1, (int)v55) + 1859775393;
    v27 = (v34 >> 2) | (v34 << 30);
    v29 = v35 + ((v28 >> 27) | 32 * v28) + (v24 ^ v37 ^ v27) + Function_22114a0(v36 + 2, (int)v55) + 1859775393;
    ++v52;
    v30 = (v37 >> 2) | (v37 << 30);
    v31 = v36 + 3;
  }
  while ( v52 < 4 );
  v53 = 0;
  do
  {
    v38 = v24
        + ((v29 >> 27) | 32 * v29)
        + (v28 & (v30 | v27) | v30 & v27)
        + Function_22114a0(v31, (int)v55)
        - 1894007588;
    v39 = (v28 >> 2) | (v28 << 30);
    v40 = v27
        + ((v38 >> 27) | 32 * v38)
        + (v29 & (v39 | v30) | v39 & v30)
        + Function_22114a0(v31 + 1, (int)v55)
        - 1894007588;
    v41 = (v29 >> 2) | (v29 << 30);
    v42 = v30
        + ((v40 >> 27) | 32 * v40)
        + (v38 & (v41 | v39) | v41 & v39)
        + Function_22114a0(v31 + 2, (int)v55)
        - 1894007588;
    v24 = (v38 >> 2) | (v38 << 30);
    v43 = ((uchar)v31 + 3) & 0xF;
    v28 = v39
        + ((v42 >> 27) | 32 * v42)
        + (v40 & (v24 | v41) | v24 & v41)
        + Function_22114a0(v43, (int)v55)
        - 1894007588;
    v27 = (v40 >> 2) | (v40 << 30);
    v29 = v41
        + ((v28 >> 27) | 32 * v28)
        + (v42 & (v27 | v24) | v27 & v24)
        + Function_22114a0(v43 + 1, (int)v55)
        - 1894007588;
    ++v53;
    v30 = (v42 >> 2) | (v42 << 30);
    v31 = v43 + 2;
  }
  while ( v53 < 4 );
  v54 = 0;
  do
  {
    v44 = v24 + ((v29 >> 27) | 32 * v29) + (v27 ^ v28 ^ v30) + Function_22114a0(v31, (int)v55) - 899497514;
    v45 = (v28 >> 2) | (v28 << 30);
    v46 = v27 + ((v44 >> 27) | 32 * v44) + (v30 ^ v29 ^ v45) + Function_22114a0(v31 + 1, (int)v55) - 899497514;
    v47 = (v29 >> 2) | (v29 << 30);
    v48 = v30 + ((v46 >> 27) | 32 * v46) + (v45 ^ v44 ^ v47) + Function_22114a0(v31 + 2, (int)v55) - 899497514;
    v24 = (v44 >> 2) | (v44 << 30);
    v28 = v45 + ((v48 >> 27) | 32 * v48) + (v47 ^ v46 ^ v24) + Function_22114a0(v31 + 3, (int)v55) - 899497514;
    v27 = (v46 >> 2) | (v46 << 30);
    v49 = ((uchar)v31 + 4) & 0xF;
    v29 = v47 + ((v28 >> 27) | 32 * v28) + (v24 ^ v48 ^ v27) + Function_22114a0(v49, (int)v55) - 899497514;
    ++v54;
    v30 = (v48 >> 2) | (v48 << 30);
    v31 = v49 + 1;
  }
  while ( v54 < 4 );
  *v51 += v29;
  v51[1] += v28;
  v51[2] += v30;
  v51[3] += v27;
  result = v51;
  v51[4] += v24;
  return result;
}

//----- (02211BF8) --------------------------------------------------------
int __fastcall Function_2211bf8(ushort *a1)
{
  uint *v1;
  int result;

  v1 = a1;
  MI_CpuFill8(a1, 0, 0x5Cu);
  *v1 = 1732584193;
  v1[1] = -271733879;
  v1[2] = -1732584194;
  result = -1009589776;
  v1[3] = 271733878;
  v1[4] = -1009589776;
  return result;
}

//----- (02211C4C) --------------------------------------------------------
int __fastcall Function_2211c4c(uint *a1, int a2, uint a3)
{
  uint *v3;
  uint v4;
  uint v5;
  uint v6;
  bool v7;
  int v8;
  uint v9;
  int v10;
  int v11;
  int v12;
  int v13;

  v3 = a1;
  v4 = a1[6];
  v5 = a3;
  v6 = v4 + 8 * a3;
  v3[6] = v6;
  v7 = v6 >= 8 * a3;
  if ( v6 < 8 * a3 )
    v6 = v3[5];
  if ( !v7 )
    v3[5] = v6 + 1;
  v8 = (v4 >> 3) & 0x3F;
  v9 = 64 - v8;
  v10 = a2;
  v3[5] += a3 >> 29;
  if ( a3 < v9 )
  {
    v9 = 0;
  }
  else
  {
    MI_CpuCopy8(a2, (uint)v3 + v8 + 28, 64 - ((v4 >> 3) & 0x3F), v4);
    v8 = 0;
    Function_2211570(v3, (int)(v3 + 7), v11, v12);
    for ( ; v9 + 63 < v5; v9 += 64 )
      Function_2211570(v3, v10 + v9, v13, v4);
  }
  return MI_CpuCopy8(v10 + v9, (uint)v3 + v8 + 28, v5 - v9, v4);
}

//----- (02211D04) --------------------------------------------------------
uchar *__fastcall Function_2211d04(int *a1, uchar *a2)
{
  int *v2;
  uchar *v3;
  int v4;
  uint v5;

  v2 = a1;
  v3 = a2;
  Function_22114e4(a2, a1 + 5, 8u);
  v4 = ((uint)v2[6] >> 3) & 0x3F;
  if ( v4 >= 56 )
    v5 = 120 - v4;
  else
    v5 = 56 - v4;
  Function_2211c4c(v2, (int)dword_221A3A4, v5);
  Function_2211c4c(v2, (int)v3, 8u);
  return Function_22114e4(v3, v2, 0x14u);
}

//----- (02211D6C) --------------------------------------------------------
uchar *__fastcall Function_2211d6c(int *a1, uchar *a2)
{
  uchar *v2;
  int *v3;

  v2 = a2;
  v3 = a1;
  Function_2211c4c(a1, (int)dword_221A3A4 + 1, 0x2Cu);
  return Function_22114e4(v2, v3, 0x14u);
}

//----- (02211D9C) --------------------------------------------------------
int __fastcall Function_2211d9c(uchar *a1, int a2, int a3)
{
  int v3;
  int v4;
  int v5;
  int v6;
  int v7;
  int result;
  char v9;
  char v10;

  v3 = 0;
  *a1 = 0;
  a1[1] = 0;
  v4 = (int)(a1 + 2);
  do
  {
    *(uchar *)(v4 + v3) = v3;
    ++v3;
  }
  while ( v3 < 256 );
  v5 = 0;
  LOBYTE(v6) = 0;
  v7 = 0;
  result = 0;
  do
  {
    v9 = *(uchar *)(v4 + v7);
    v10 = *(uchar *)(a2 + v5);
    v5 = (uchar)(v5 + 1);
    v6 = (uchar)(v6 + v9 + v10);
    if ( v5 >= a3 )
      v5 = 0;
    *(uchar *)(v4 + v7++) = *(uchar *)(v4 + v6);
    *(uchar *)(v4 + v6) = v9;
  }
  while ( v7 < 256 );
  return result;
}

//----- (02211E10) --------------------------------------------------------
uchar *__fastcall Function_2211e10(uchar *result, int a2, int a3)
{
  int v3;
  int v4;
  int v5;
  int i;
  char v7;
  char v8;

  v3 = (int)(result + 2);
  LOBYTE(v4) = *result;
  LOBYTE(v5) = result[1];
  for ( i = 0; i < a3; ++i )
  {
    v4 = (uchar)(v4 + 1);
    v7 = *(uchar *)(v3 + v4);
    v5 = (uchar)(v5 + v7);
    v8 = *(uchar *)(v3 + v5);
    *(uchar *)(v3 + v4) = v8;
    *(uchar *)(v3 + v5) = v7;
    *(uchar *)(a2 + i) ^= *(uchar *)(v3 + (uchar)(v7 + v8));
  }
  *result = v4;
  result[1] = v5;
  return result;
}

//----- (02211E7C) --------------------------------------------------------
int __fastcall Function_2211e7c(int a1, int a2)
{
  while ( a2 && !*(ushort *)(a1 + 2 * a2 - 2) )
    --a2;
  return a2;
}

//----- (02211EA4) --------------------------------------------------------
int __fastcall Function_2211ea4(int a1, int a2)
{
  int result;

  if ( *(ushort *)(a1 + 2 * (a2 - 1)) & 0x8000 )
    result = -1;
  else
    result = Function_2211e7c(a1, a2) != 0;
  return result;
}

//----- (02211ED4) --------------------------------------------------------
int __fastcall Function_2211ed4(int a1, int a2, int a3, int a4)
{
  int v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int result;
  uint v10;
  int i;
  int v12;
  int v13;
  int v14;
  bool v15;

  v4 = a2;
  v5 = a4;
  v6 = a1;
  v7 = a3;
  v8 = Function_2211e7c(a2, a4);
  result = Function_2211e7c(v7, v5);
  if ( v8 < result )
    v8 = result;
  if ( v8 != v5 )
    ++v8;
  v10 = 0;
  for ( i = 0; i < v8; v10 = (uint)result >> 16 )
  {
    v12 = 2 * i;
    v13 = *(ushort *)(v4 + 2 * i);
    v14 = *(ushort *)(v7 + 2 * i++);
    result = v10 + v13 + v14;
    *(ushort *)(v6 + v12) = result;
  }
  v15 = v6 == v4;
  if ( v6 != v4 )
    v15 = v6 == v7;
  if ( !v15 )
    result = (int)MI_CpuFill8((ushort *)(v6 + 2 * i), 0, 2 * (v5 - i));
  return result;
}

//----- (02211F70) --------------------------------------------------------
int __fastcall Function_2211f70(int result, int a2, uint a3, int a4)
{
  int i;
  uint v5;
  int j;
  int v7;
  short v8;

  for ( i = 0; i < a4; ++i )
  {
    v5 = a3 + *(ushort *)(a2 + 2 * i);
    *(ushort *)(result + 2 * i) = v5;
    a3 = v5 >> 16;
    if ( !a3 )
      break;
  }
  if ( result != a2 )
  {
    for ( j = i + 1; j < a4; *(ushort *)(result + v7) = v8 )
    {
      v7 = 2 * j;
      v8 = *(ushort *)(a2 + 2 * j++);
    }
  }
  return result;
}

//----- (02211FD4) --------------------------------------------------------
int __fastcall Function_2211fd4(int a1, int a2)
{
  int v2;
  int i;
  int v4;
  short v5;

  v2 = a2;
  for ( i = 0; i < v2; *(ushort *)(a1 + v4) = ~v5 )
  {
    v4 = 2 * i;
    v5 = *(ushort *)(a1 + 2 * i++);
  }
  return Function_2211f70(a1, a1, 1u, v2);
}

//----- (02212014) --------------------------------------------------------
int __fastcall Function_2212014(int a1, int a2, int a3, int a4)
{
  int v4;
  int v5;
  int v6;
  int v7;
  int v8;
  int result;
  int v10;
  int v11;
  int v12;
  int v13;
  int v14;
  bool v15;

  v4 = a2;
  v5 = a4;
  v6 = a1;
  v7 = a3;
  v8 = Function_2211e7c(a2, a4);
  result = Function_2211e7c(v7, v5);
  if ( v8 < result )
    v8 = result;
  v10 = 0;
  if ( v8 != v5 )
    ++v8;
  v11 = 0;
  while ( v11 < v8 || v11 < v5 && v10 )
  {
    v12 = 2 * v11;
    v13 = *(ushort *)(v4 + 2 * v11);
    v14 = *(ushort *)(v7 + 2 * v11++);
    result = v10 + v13 - v14;
    *(ushort *)(v6 + v12) = result;
    v10 = result >> 16;
  }
  v15 = v6 == v4;
  if ( v6 != v4 )
    v15 = v6 == v7;
  if ( !v15 )
    result = (int)MI_CpuFill8((ushort *)(v6 + 2 * v11), 0, 2 * (v5 - v11));
  return result;
}

//----- (022120BC) --------------------------------------------------------
int __fastcall Function_22120bc(int result, int a2, int a3, int a4)
{
  int i;
  short v5;
  char v6;
  int j;
  int v8;
  short v9;

  for ( i = 0; i < a4; ++i )
  {
    v5 = *(ushort *)(a2 + 2 * i) - a3;
    v6 = ((uint)*(ushort *)(a2 + 2 * i) - a3) >> 16;
    *(ushort *)(result + 2 * i) = v5;
    a3 = v6 & 1;
    if ( !a3 )
      break;
  }
  if ( result != a2 )
  {
    for ( j = i + 1; j < a4; *(ushort *)(result + v8) = v9 )
    {
      v8 = 2 * j;
      v9 = *(ushort *)(a2 + 2 * j++);
    }
  }
  return result;
}

//----- (02212124) --------------------------------------------------------
int __fastcall Function_2212124(int a1, int a2, int a3)
{
  int v3;
  uint v4;
  uint v5;

  v3 = a3 - 1;
  if ( a3 - 1 < 0 )
    return 0;
  while ( 1 )
  {
    v4 = *(ushort *)(a2 + 2 * v3);
    v5 = *(ushort *)(a1 + 2 * v3);
    if ( v5 > v4 )
      return 1;
    if ( v5 < v4 )
      break;
    if ( --v3 < 0 )
      return 0;
  }
  return -1;
}

//----- (0221215C) --------------------------------------------------------
int __fastcall Function_221215c(int result, uint a2, int a3, int a4)
{
  int v4;
  int v5;
  uint v6;

  while ( a2 && a3 < a4 )
  {
    v4 = 2 * a3;
    v5 = *(ushort *)(result + 2 * a3++);
    v6 = a2 + v5;
    *(ushort *)(result + v4) = v6;
    a2 = v6 >> 16;
  }
  return result;
}

//----- (02212190) --------------------------------------------------------
int __fastcall Function_2212190(ushort *a1, int a2, int a3, int a4)
{
  int v4;
  int v5;
  int v6;
  int v7;
  int result;
  int i;
  int v10;
  int v11;
  bool v12;
  uchar v13;
  int v14;
  int v15;

  v4 = a4;
  v5 = a2;
  v6 = a3;
  v14 = (int)a1;
  MI_CpuFill8(a1, 0, 2 * a4);
  v7 = Function_2211e7c(v5, v4);
  result = Function_2211e7c(v6, v4);
  v15 = result;
  for ( i = 0; i < v15; ++i )
  {
    v10 = 0;
    v11 = v4 - i;
    while ( 1 )
    {
      v13 = __OFSUB__(v10, v7);
      v12 = v10 - v7 < 0;
      if ( v10 < v7 )
      {
        v13 = __OFSUB__(v10, v11);
        v12 = v10 - v11 < 0;
      }
      if ( !(v12 ^ v13) )
        break;
      Function_221215c(v14, *(ushort *)(v5 + 2 * v10) * *(ushort *)(v6 + 2 * i), i + v10, v4);
      ++v10;
    }
    result = v15;
  }
  return result;
}

//----- (0221223C) --------------------------------------------------------
ushort *__fastcall Function_221223c(int a1, int a2, int a3, int a4)
{
  int v4;
  int v5;
  int v6;
  int v7;
  int v8;
  uint v9;
  int i;
  int v11;
  int v12;
  uint v13;
  bool v14;
  uchar v15;

  v4 = a2;
  v5 = a4;
  v6 = a1;
  v7 = a3;
  v8 = Function_2211e7c(a2, a4);
  v9 = 0;
  for ( i = 0; i < v8; v9 = v13 >> 16 )
  {
    v11 = 2 * i;
    v12 = *(ushort *)(v4 + 2 * i++);
    v13 = v9 + v7 * v12;
    *(ushort *)(v6 + v11) = v13;
  }
  v15 = __OFSUB__(i, v5);
  v14 = i - v5 < 0;
  if ( i < v5 )
    v8 = 2 * i++;
  if ( v14 ^ v15 )
    *(ushort *)(v6 + v8) = v9;
  return MI_CpuFill8((ushort *)(v6 + 2 * i), 0, 2 * (v5 - i));
}

//----- (022122B4) --------------------------------------------------------
int __fastcall Function_22122b4(int a1, int a2, int a3)
{
  int v3;
  int v4;
  int v5;
  int v6;
  int v7;
  int v8;
  bool v9;
  int result;
  int v11;
  int v12;
  int v13;
  int i;
  int v15;
  uint v16;
  bool v17;
  uchar v18;
  int v19;

  v4 = a2;
  v5 = a3;
  v6 = a1;
  v7 = Function_2211e7c(a2, a3);
  v8 = v7;
  v18 = __OFSUB__(v5, 2 * v7);
  v9 = v5 == 2 * v7;
  v17 = v5 - 2 * v7 < 0;
  result = 2 * v7;
  if ( !((uchar)(v17 ^ v18) | v9) )
    result = (int)MI_CpuFill8((ushort *)(v6 + 2 * result), 0, 2 * (v5 - result));
  v11 = 0;
  if ( v8 > 0 )
  {
    v3 = 0;
    do
    {
      if ( v3 >= v5 )
        break;
      v12 = *(ushort *)(v4 + 2 * v11);
      result = 2 * v3;
      v13 = v12 * v12;
      *(ushort *)(v6 + 2 * v3) = v12 * v12;
      if ( v3 == v5 - 1 )
        break;
      ++v11;
      result += v6;
      *(ushort *)(result + 2) = HIWORD(v13);
      v3 += 2;
    }
    while ( v11 < v8 );
  }
  for ( i = 0; i < v8; ++i )
  {
    result = 2 * i;
    v15 = i + 1;
    v19 = 2 * i;
    while ( 1 )
    {
      v18 = __OFSUB__(v15, v8);
      v17 = v15 - v8 < 0;
      if ( v15 < v8 )
      {
        v3 = i + v15;
        v18 = __OFSUB__(i + v15, v5);
        v17 = i + v15 - v5 < 0;
      }
      if ( !(v17 ^ v18) )
        break;
      v16 = *(ushort *)(v4 + 2 * v15) * *(ushort *)(v4 + v19);
      if ( v16 > 0x7FFF8000 )
      {
        Function_221215c(v6, *(ushort *)(v4 + 2 * v15) * *(ushort *)(v4 + v19), v3, v5);
        result = Function_221215c(v6, v16, v3, v5);
      }
      else
      {
        result = Function_221215c(v6, 2 * v16, v3, v5);
      }
      ++v15;
    }
  }
  return result;
}

//----- (022123E8) --------------------------------------------------------
int __fastcall Function_22123e8(ushort *a1)
{
  int v1;

  v1 = *a1;
  return 0;
}

//----- (022123F4) --------------------------------------------------------
int __fastcall Function_22123f4(ushort *a1)
{
  int v1;

  v1 = *a1;
  return *(a1 - 1) << 16;
}

//----- (02212404) --------------------------------------------------------
int __fastcall Function_2212404(ushort *a1)
{
  int v1;

  v1 = *a1;
  return *(a1 - 2) | (*(a1 - 1) << 16);
}

//----- (02212418) --------------------------------------------------------
int __fastcall Function_2212418(ushort *a1)
{
  int v1;

  v1 = *(a1 - 1) | (*a1 << 16);
  return *(a1 - 3) | (*(a1 - 2) << 16);
}

//----- (02212434) --------------------------------------------------------
int __fastcall Function_2212434(uint a1, int a2, int a3, uint a4, int a5, int a6)
{
  int v6;
  int v7;
  int v8;
  int v9;
  int v10;
  uint v11;
  int v12;
  bool v13;
  bool v14;
  int v15;
  int v16;
  ushort *v17;
  uint v18;
  ushort v19;
  int result;
  uint v21;
  int v22;
  uint v23;

  v22 = a2;
  v6 = a6 + 2 * a5;
  v21 = a1;
  v7 = a3;
  v23 = a4;
  v8 = v6 + 2 * a5;
  MI_CpuFill8((ushort *)v6, 0, 4 * a5);
  v9 = Function_2211e7c(v22, a5);
  v10 = Function_2211e7c(v7, a5);
  v12 = v10;
  v13 = v9 == 0;
  v14 = v9 < 0;
  if ( v9 > 0 )
  {
    v13 = v10 == 0;
    v14 = v10 < 0;
  }
  if ( !v14 && !v13 )
  {
    v15 = v10 + a5 - v9 - 1;
    if ( v15 < a5 )
    {
      MI_CpuCopy8(v22, v6 + 2 * v15, 2 * v9, v11);
      if ( v12 <= 2 )
      {
        v17 = (ushort *)(v7 + 2 * v12 - 2);
        if ( v12 <= 1 )
        {
          v16 = 2 * v12;
          Function_22123e8(v17);
        }
        else
        {
          v16 = 2 * v12;
          Function_22123f4(v17);
        }
      }
      else
      {
        v16 = 2 * v12;
        Function_2212404((ushort *)(v7 + 2 * v12 - 2));
      }
      for ( ; v15 < a5; ++v15 )
      {
        Function_20d50d8((char *)(v6 + 2), (char *)v6, 2 * (2 * a5 - 1));
        Function_2212418((ushort *)(v8 + v16));
        ll_udiv();
        v19 = v18;
        if ( v18 > 0xFFFF )
          v19 = -1;
        while ( 1 )
        {
          Function_221223c(a6, v7, v19, a5);
          if ( Function_2212124(v8, a6, a5) >= 0 )
            break;
          --v19;
        }
        Function_2212014(v8, v8, a6, a5);
        *(ushort *)v6 = v19;
      }
    }
    else
    {
      MI_CpuCopy8(v22, v8, 2 * a5, v11);
    }
  }
  if ( v21 )
    MI_CpuCopy8(v6, v21, 2 * a5, v11);
  result = v23;
  if ( v23 )
    result = MI_CpuCopy8(v8, v23, 2 * a5, v11);
  return result;
}

//----- (02212614) --------------------------------------------------------
int __fastcall Function_2212614(ushort *a1, int a2, int a3, int a4, int a5)
{
  int v5;
  ushort *v6;
  int v7;
  int result;
  ushort *v9;
  uint v10;
  int v11;
  uint v12;
  uint v13;
  int v14;

  v5 = a4;
  v6 = a1;
  v14 = a2;
  v7 = a3;
  result = ((int (__fastcall *)(int))dword_221A400[3713])(8 * a4);
  v9 = (ushort *)result;
  if ( result )
  {
    MI_CpuFill8(v6 + 1, 0, 2 * (v5 - 1));
    *v6 = 1;
    v11 = 16 * (v5 - Function_2211e7c(v7, v5));
    if ( v11 < (uint)(16 * v5) )
    {
      while ( !(*(ushort *)(v7 + 2 * (v5 - (v11 >> 4)) - 2) & (0x8000u >> (v11 & 0xF))) )
      {
        if ( ++v11 >= (uint)(16 * v5) )
          goto LABEL_6;
      }
      MI_CpuCopy8(v14, (uint)v6, 2 * v5, v10);
      ++v11;
    }
LABEL_6:
    while ( v11 < (uint)(16 * v5) )
    {
      Function_22122b4((int)v9, (int)v6, v5);
      MI_CpuCopy8((int)v9, (uint)v6, 2 * v5, v12);
      if ( a5 )
        Function_2212434(0, (int)v6, a5, (uint)v6, v5, (int)&v9[v5]);
      if ( *(ushort *)(v7 + 2 * (v5 - (v11 >> 4)) - 2) & (0x8000u >> (v11 & 0xF)) )
      {
        Function_2212190(v9, (int)v6, v14, v5);
        MI_CpuCopy8((int)v9, (uint)v6, 2 * v5, v13);
        if ( a5 )
          Function_2212434(0, (int)v6, a5, (uint)v6, v5, (int)&v9[v5]);
      }
      ++v11;
    }
    result = ((int (__fastcall *)(ushort *))dword_221A400[3724])(v9);
  }
  return result;
}

//----- (022127A8) --------------------------------------------------------
int __fastcall Function_22127a8(uint a1, int a2, int a3, uint a4, uint a5)
{
  int v5;
  int v6;
  int v7;
  int v8;
  int v9;
  ushort *v10;
  uint v11;
  uint v12;
  uint v13;
  uint v14;
  uint v15;
  uint v16;
  uint v18;
  int v19;
  int v20;

  v5 = a4;
  v6 = a5 + 2 * a4;
  v7 = v6 + 2 * a4;
  v8 = v7 + 2 * a4;
  v9 = v8 + 2 * a4;
  v10 = (ushort *)(v9 + 2 * a4);
  v18 = a1;
  v20 = (int)&v10[a4];
  v11 = 2 * a4;
  v19 = a3;
  MI_CpuCopy8(a2, a5, 2 * a4, a4);
  MI_CpuCopy8(v19, v7, v11, v12);
  *(ushort *)(v7 + v11) = 1;
  while ( Function_2211ea4(a5, v5) > 0 )
  {
    Function_2212434(v6, v7, a5, (uint)v10, v5, v20);
    MI_CpuCopy8(a5, v7, v11, v13);
    MI_CpuCopy8((int)v10, a5, v11, v14);
    Function_2212190(v10, v6, v8, v5);
    Function_2212014((int)v10, v9, (int)v10, v5);
    MI_CpuCopy8(v8, v9, v11, v15);
    MI_CpuCopy8((int)v10, v8, v11, v16);
  }
  Function_2211ed4(v9, v9, v19, v5);
  return Function_2212434(0, v9, v19, v18, v5, v20);
}

//----- (022128F4) --------------------------------------------------------
ushort *__fastcall Function_22128f4(int a1, uint a2, int a3, uint a4, int a5, int a6, int a7, ushort *a8, ushort *a9)
{
  int v9;
  uint v10;
  int v11;
  char *v12;
  int v13;
  ushort *result;

  v9 = a4;
  v10 = 2 * a4;
  v11 = a3;
  v12 = (char *)a1;
  v13 = a2;
  MI_CpuCopy8(a1, a2, 2 * a4, a4);
  if ( v11 == 1 )
  {
    Function_22122b4((int)v12, v13, v9);
  }
  else if ( v11 )
  {
    Function_2212190(v12, v13, v11, v9);
  }
  Function_2212190(a8, (int)v12, a7, a5);
  MI_CpuFill8(&a8[a5], 0, 2 * (v9 - a5));
  Function_2212190(a9, (int)a8, a6, v9);
  Function_2211ed4((int)v12, (int)v12, (int)a9, v9);
  Function_20d50d8(v12, &v12[2 * a5], 2 * (v9 - a5));
  MI_CpuFill8(&v12[2 * v9 + -2 * a5], 0, 2 * a5);
  result = (ushort *)Function_2212124((int)v12, a6, v9);
  if ( !result )
    return MI_CpuFill8(v12, 0, v10);
  if ( result == (ushort *)1 )
    result = (ushort *)Function_2212014((int)v12, (int)v12, a6, v9);
  return result;
}

//----- (02212A1C) --------------------------------------------------------
ushort *__fastcall Function_2212a1c(uint a1, int a2, int a3, uint a4, int a5)
{
  uint v5;
  uint v6;
  uint v7;
  ushort *result;
  int v9;
  ushort *v10;
  int v11;
  int v12;
  uint v13;
  int v14;
  int v15;
  uint v16;
  ushort *v17;
  int v18;

  v5 = a4;
  v6 = 22 * a4;
  v7 = a1;
  v14 = a2;
  v15 = a3;
  result = (ushort *)((int (__fastcall *)(uint))dword_221A400[3713])(22 * a4);
  v18 = (int)result;
  if ( result )
  {
    MI_CpuFill8(result, 0, v6);
    v9 = v18 + 2 * v5;
    v10 = (ushort *)(v9 + 2 * v5 + 2 * v5);
    v17 = (ushort *)(v9 + 2 * v5);
    v16 = (uint)&v10[v5 + v5];
    v11 = v16 + 2 * v5;
    v12 = Function_2211e7c(a5, v5);
    *(ushort *)(v18 + 2 * v12) = 1;
    Function_22127a8(v9, v18, a5, v5, (uint)v17);
    Function_2212190(v10, v18, v9, v5);
    Function_22120bc(v9, (int)v10, 1, v5);
    Function_2212434(v9, v9, a5, 0, v5, v11);
    Function_2212190(v17, v14, v18, v5);
    Function_2212434(0, (int)v17, a5, (uint)v17, v5, v11);
    Function_2212434(0, v18, a5, v7, v5, v11);
    v13 = 0;
    if ( 16 * v12 )
    {
      do
      {
        Function_22128f4(v7, v16, 1, v5, v12, a5, v9, (ushort *)(v9 + 2 * v5 + 2 * v5), &v10[v5]);
        if ( *(ushort *)(v15 + 2 * (v12 - ((int)v13 >> 4)) - 2) & (0x8000u >> (v13 & 0xF)) )
          Function_22128f4(v7, v16, (int)v17, v5, v12, a5, v9, (ushort *)(v9 + 2 * v5 + 2 * v5), &v10[v5]);
        ++v13;
      }
      while ( v13 < 16 * v12 );
    }
    Function_22128f4(v7, v16, 0, v5, v12, a5, v9, (ushort *)(v9 + 2 * v5 + 2 * v5), &v10[v5]);
    result = (ushort *)((int (__fastcall *)(int))dword_221A400[3724])(v18);
  }
  return result;
}

//----- (02212C28) --------------------------------------------------------
int __fastcall Function_2212c28(ushort *a1, int a2, int a3, int a4)
{
  int v4;
  int v5;
  ushort *v6;
  int result;
  uchar *i;

  v4 = a2;
  v5 = a3;
  v6 = a1;
  MI_CpuFill8(a1, 0, 2 * a4);
  result = v5 - 1;
  for ( i = (uchar *)(v4 + v5 - 1); v5 > 1; i -= 2 )
  {
    v5 -= 2;
    result = *i + (*(i - 1) << 8);
    *v6 = result;
    ++v6;
  }
  if ( v5 > 0 )
  {
    result = *i;
    *v6 = result;
  }
  return result;
}

//----- (02212C84) --------------------------------------------------------
uchar *__fastcall Function_2212c84(int a1, short *a2, int a3)
{
  uchar *result;
  uchar *v4;
  short v5;

  for ( result = (uchar *)(a1 + a3 - 1); a3 > 1; *v4 = HIBYTE(v5) )
  {
    v4 = result - 1;
    a3 -= 2;
    *result = *a2;
    result -= 2;
    v5 = *a2;
    ++a2;
  }
  if ( a3 > 0 )
    *result = *a2;
  return result;
}

//----- (02212CC8) --------------------------------------------------------
int __fastcall Function_4_2212cc8(int a1, uint a2)
{
  int v2;
  uint v3;
  int v4;
  int v5;
  int result;
  int v7;

  v2 = a1;
  v3 = a2;
  v4 = OS_DisableInterrupts();
  v5 = v4;
  if ( dword_221A400[5355] )
  {
    OS_RestoreInterrupts(v4);
    result = 1;
  }
  else if ( v2 )
  {
    if ( v2 & 0x1F )
    {
      OS_RestoreInterrupts(v4);
      result = 1;
    }
    else if ( v3 >= 0x2300 )
    {
      dword_221A400[5355] = v2;
      *(uint *)(v2 + 8800) = 1;
      *(ushort *)(dword_221A400[5355] + 8832) = 0;
      *(ushort *)(dword_221A400[5355] + 8808) = 0;
      *(uchar *)(dword_221A400[5355] + 8810) = 0;
      *(uchar *)(dword_221A400[5355] + 8811) = 0;
      *(ushort *)(dword_221A400[5355] + 8834) = 0;
      *(ushort *)(dword_221A400[5355] + 8952) = 0;
      v7 = Function_2213c2c();
      Function_22152b4(v7);
      if ( !Function_20c3808() )
        OS_InitTick();
      if ( !Function_20c39fc() )
        Function_20c39bc();
      OS_CreateAlarm((uint *)(dword_221A400[5355] + 8908));
      OS_RestoreInterrupts(v5);
      result = 0;
    }
    else
    {
      OS_RestoreInterrupts(v4);
      result = 6;
    }
  }
  else
  {
    OS_RestoreInterrupts(v4);
    result = 1;
  }
  return result;
}

//----- (02212DE0) --------------------------------------------------------
int Function_4_2212de0()
{
  int v0;
  int result;

  v0 = OS_DisableInterrupts();
  if ( dword_221A400[5355] )
  {
    if ( *(uint *)(dword_221A400[5355] + 8800) == 1 )
    {
      dword_221A400[5355] = 0;
      OS_RestoreInterrupts(v0);
      result = 0;
    }
    else
    {
      OS_RestoreInterrupts(v0);
      result = 1;
    }
  }
  else
  {
    OS_RestoreInterrupts(v0);
    result = 1;
  }
  return result;
}

//----- (02212E38) --------------------------------------------------------
int __fastcall Function_4_2212e38(int a1, int a2)
{
  int v2;
  int v3;
  int v4;
  int v5;
  int result;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;

  v2 = a1;
  v3 = a2;
  v4 = OS_DisableInterrupts();
  v5 = v4;
  if ( dword_221A400[5355] )
  {
    v7 = *(uint *)(dword_221A400[5355] + 8800);
    switch ( v7 )
    {
      case 1:
        Function_2213974(v2, v3);
        switch ( WM_Init(dword_221A400[5355], *(uint *)(dword_221A400[5355] + 8812) & 0xFFFF) )
        {
          case 0:
            if ( WM_GetAllowedChannel() )
            {
              if ( WM_SetIndCallback((int)Function_2213f20) )
              {
                Function_2213d74(11);
                OS_RestoreInterrupts(v5);
                result = 7;
              }
              else
              {
                v11 = Function_20ceb94((int)Function_2213f98, v8, v9, v10);
                if ( v11 == 2 )
                {
                  Function_2213d74(2);
                  *(ushort *)(dword_221A400[5355] + 8832) = 1;
                  OS_RestoreInterrupts(v5);
                  result = 3;
                }
                else if ( v11 != 3 && v11 == 8 )
                {
                  Function_2213d74(12);
                  OS_RestoreInterrupts(v5);
                  result = 1;
                }
                else
                {
                  Function_2213d74(11);
                  OS_RestoreInterrupts(v5);
                  result = 7;
                }
              }
            }
            else if ( WM_Finish() )
            {
              Function_2213d74(11);
              OS_RestoreInterrupts(v5);
              result = 7;
            }
            else
            {
              OS_RestoreInterrupts(v5);
              result = 5;
            }
            break;
          case 3:
            Function_2213d74(11);
            OS_RestoreInterrupts(v5);
            result = 7;
            break;
          case 4:
            OS_RestoreInterrupts(v5);
            result = 5;
            break;
          default:
            Function_2213d74(11);
            OS_RestoreInterrupts(v5);
            result = 7;
            break;
        }
        break;
      case 2:
        OS_RestoreInterrupts(v4);
        result = 2;
        break;
      case 3:
        OS_RestoreInterrupts(v4);
        result = 0;
        break;
      default:
        OS_RestoreInterrupts(v4);
        result = 1;
        break;
    }
  }
  else
  {
    OS_RestoreInterrupts(v4);
    result = 1;
  }
  return result;
}

//----- (0221303C) --------------------------------------------------------
int Function_4_221303c()
{
  int v0;
  int v1;
  int v2;
  int v3;
  int result;
  int v5;
  int v6;

  v0 = OS_DisableInterrupts();
  v3 = v0;
  if ( dword_221A400[5355] )
  {
    v5 = *(uint *)(dword_221A400[5355] + 8800);
    switch ( v5 )
    {
      case 1:
        OS_RestoreInterrupts(v0);
        result = 0;
        break;
      case 3:
        v6 = Function_20cec88((int)Function_2213f98, 3, v1, v2);
        if ( v6 == 2 )
        {
          Function_2213d74(4);
          *(ushort *)(dword_221A400[5355] + 8832) = 2;
          OS_RestoreInterrupts(v3);
          result = 3;
        }
        else if ( v6 != 3 && v6 == 8 )
        {
          OS_RestoreInterrupts(v3);
          result = 4;
        }
        else
        {
          Function_2213d74(11);
          OS_RestoreInterrupts(v3);
          result = 7;
        }
        break;
      case 4:
        OS_RestoreInterrupts(v0);
        result = 2;
        break;
      default:
        OS_RestoreInterrupts(v0);
        result = 1;
        break;
    }
  }
  else
  {
    OS_RestoreInterrupts(v0);
    result = 1;
  }
  return result;
}

//----- (0221312C) --------------------------------------------------------
int __fastcall Function_4_221312c(int a1, int a2)
{
  bool v2;
  int result;

  v2 = a1 == 0;
  if ( a1 )
    v2 = a2 == 0;
  if ( v2 )
    result = Function_22132c4();
  else
    result = Function_221314c();
  return result;
}

//----- (0221314C) --------------------------------------------------------
int __fastcall Function_221314c(int a1, int a2, int a3)
{
  int v3;
  int v4;
  int v5;
  int v6;
  int v7;
  int result;
  int v9;
  int v10;

  v3 = a1;
  v4 = a2;
  v5 = a3;
  v6 = OS_DisableInterrupts();
  v7 = v6;
  if ( dword_221A400[5355] )
  {
    v9 = *(uint *)(dword_221A400[5355] + 8800);
    switch ( v9 )
    {
      case 3:
        Function_2213a94(v3, v4, v5);
        DC_InvalidateRange(*(uint *)(dword_221A400[5355] + 8840), *(ushort *)(dword_221A400[5355] + 8844));
        ++*(uint *)(dword_221A400[5355] + 8836);
        v10 = WM_StartScanEx((int)Function_2214254, dword_221A400[5355] + 8840);
        if ( v10 == 2 )
        {
          Function_2213d74(5);
          *(ushort *)(dword_221A400[5355] + 8832) = 3;
          OS_RestoreInterrupts(v7);
          result = 3;
        }
        else if ( v10 != 3 && v10 == 8 )
        {
          OS_RestoreInterrupts(v7);
          result = 4;
        }
        else
        {
          Function_2213d74(11);
          OS_RestoreInterrupts(v7);
          result = 7;
        }
        break;
      case 5:
        Function_2213a94(v3, v4, v5);
        OS_RestoreInterrupts(v7);
        result = 2;
        break;
      case 6:
        Function_2213a94(v3, v4, v5);
        OS_RestoreInterrupts(v7);
        result = 0;
        break;
      default:
        OS_RestoreInterrupts(v6);
        result = 1;
        break;
    }
  }
  else
  {
    OS_RestoreInterrupts(v6);
    result = 1;
  }
  return result;
}

//----- (022132C4) --------------------------------------------------------
int Function_22132c4()
{
  int v0;
  int v1;
  int result;
  int v3;

  v0 = OS_DisableInterrupts();
  v1 = v0;
  if ( dword_221A400[5355] )
  {
    v3 = *(uint *)(dword_221A400[5355] + 8800);
    switch ( v3 )
    {
      case 3:
        OS_RestoreInterrupts(v0);
        result = 0;
        break;
      case 6:
        Function_2213d74(7);
        *(ushort *)(dword_221A400[5355] + 8832) = 4;
        OS_RestoreInterrupts(v1);
        result = 3;
        break;
      case 7:
        OS_RestoreInterrupts(v0);
        result = 2;
        break;
      default:
        OS_RestoreInterrupts(v0);
        result = 1;
        break;
    }
  }
  else
  {
    OS_RestoreInterrupts(v0);
    result = 1;
  }
  return result;
}

//----- (02213368) --------------------------------------------------------
int __fastcall Function_4_2213368(int a1, uchar *a2, int a3)
{
  int v3;
  uchar *v4;
  int v5;
  int v6;
  int v7;
  int result;
  int v9;
  uint v10;
  bool v11;
  uint v12;
  int v13;

  v3 = a1;
  v4 = a2;
  v5 = a3;
  v6 = OS_DisableInterrupts();
  v7 = v6;
  if ( !dword_221A400[5355] )
  {
    OS_RestoreInterrupts(v6);
    return 1;
  }
  v9 = *(uint *)(dword_221A400[5355] + 8800);
  switch ( v9 )
  {
    case 3:
      if ( !v3 )
      {
        OS_RestoreInterrupts(v6);
        return 1;
      }
      if ( *(ushort *)(v3 + 60) )
      {
        OS_RestoreInterrupts(v6);
        return 1;
      }
      if ( v4 )
      {
        v10 = *v4;
        v11 = v10 >= 4;
        if ( v10 < 4 )
          v11 = v4[1] >= 4u;
        if ( v11 )
        {
          OS_RestoreInterrupts(v6);
          return 1;
        }
        *(uchar *)(dword_221A400[5355] + 8784) = v10;
        *(uchar *)(dword_221A400[5355] + 8785) = v4[1];
        if ( *(uchar *)(dword_221A400[5355] + 8784) )
          MI_CpuCopy8((int)(v4 + 2), dword_221A400[5355] + 8704, 0x50u, v10);
        else
          MI_CpuFill8((ushort *)(dword_221A400[5355] + 8704), 0, 0x50u);
      }
      else
      {
        MI_CpuFill8((ushort *)(dword_221A400[5355] + 8704), 0, 0x52u);
      }
      MI_CpuCopy8(v3, dword_221A400[5355] + 8512, 0xC0u, v12);
      *(ushort *)(dword_221A400[5355] + 8560) = *(ushort *)(dword_221A400[5355] + 8558) | 3;
      Function_22138c8(v5);
      v13 = WM_SetLifeTime((int)Function_2213f98, 0xFFFF, 80, 0xFFFF, 0xFFFFu);
      if ( v13 == 2 )
      {
        Function_2213d74(8);
        *(ushort *)(dword_221A400[5355] + 8832) = 5;
        OS_RestoreInterrupts(v7);
        result = 3;
      }
      else if ( v13 != 3 && v13 == 8 )
      {
        OS_RestoreInterrupts(v7);
        result = 4;
      }
      else
      {
        Function_2213d74(11);
        OS_RestoreInterrupts(v7);
        result = 7;
      }
      break;
    case 8:
      OS_RestoreInterrupts(v6);
      result = 2;
      break;
    case 9:
      OS_RestoreInterrupts(v6);
      result = 0;
      break;
    default:
      OS_RestoreInterrupts(v6);
      result = 1;
      break;
  }
  return result;
}

//----- (0221356C) --------------------------------------------------------
int Function_4_221356c()
{
  int v0;
  int v1;
  int result;
  int v3;
  int v4;

  v0 = OS_DisableInterrupts();
  v1 = v0;
  if ( !dword_221A400[5355] )
  {
    OS_RestoreInterrupts(v0);
    return 1;
  }
  v3 = *(uint *)(dword_221A400[5355] + 8800);
  if ( v3 == 3 )
  {
    OS_RestoreInterrupts(v0);
    return 0;
  }
  if ( v3 != 9 )
  {
    if ( v3 == 10 )
    {
      OS_RestoreInterrupts(v0);
      result = 2;
    }
    else
    {
      OS_RestoreInterrupts(v0);
      result = 1;
    }
    return result;
  }
  if ( *(uchar *)(dword_221A400[5355] + 8811) == 1 )
  {
    Function_2213d74(10);
    *(ushort *)(dword_221A400[5355] + 8832) = 6;
LABEL_19:
    OS_RestoreInterrupts(v1);
    return 3;
  }
  v4 = Function_20cf958((int)Function_22149ec);
  if ( v4 == 2 )
  {
    Function_2213d74(10);
    *(ushort *)(dword_221A400[5355] + 8832) = 6;
    goto LABEL_19;
  }
  if ( v4 != 3 && v4 == 8 )
  {
    OS_RestoreInterrupts(v1);
    result = 4;
  }
  else
  {
    Function_2213d74(11);
    OS_RestoreInterrupts(v1);
    result = 7;
  }
  return result;
}

//----- (02213688) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x2213740 for case 0"

//----- (022136C4) --------------------------------------------------------
void Function_22136c4()
{
  JUMPOUT(&loc_2213740);
}

//----- (022136C8) --------------------------------------------------------
void Function_22136c8()
{
  JUMPOUT(&loc_2213708);
}

//----- (022136CC) --------------------------------------------------------
void Function_22136cc()
{
  JUMPOUT(&loc_2213740);
}

//----- (022136D0) --------------------------------------------------------
void Function_22136d0()
{
  JUMPOUT(&loc_2213750);
}

//----- (022136D4) --------------------------------------------------------
void Function_22136d4()
{
  JUMPOUT(&loc_2213740);
}

//----- (022136D8) --------------------------------------------------------
void Function_22136d8()
{
  JUMPOUT(&loc_2213740);
}

//----- (022136DC) --------------------------------------------------------
void Function_22136dc()
{
  JUMPOUT(&loc_2213714);
}

//----- (022136E0) --------------------------------------------------------
void Function_22136e0()
{
  JUMPOUT(&loc_2213740);
}

//----- (022136E4) --------------------------------------------------------
void Function_22136e4()
{
  JUMPOUT(&loc_2213740);
}

//----- (022136E8) --------------------------------------------------------
void Function_22136e8()
{
  JUMPOUT(&loc_2213750);
}

//----- (022136EC) --------------------------------------------------------
void Function_22136ec()
{
  JUMPOUT(&loc_2213740);
}

//----- (022136F0) --------------------------------------------------------
void Function_22136f0()
{
  JUMPOUT(&loc_2213740);
}

//----- (022136F4) --------------------------------------------------------
void Function_22136f4()
{
  JUMPOUT(&loc_2213750);
}

//----- (022136F8) --------------------------------------------------------
void __fastcall Function_22136f8(int a1)
{
  int v1;

  OS_RestoreInterrupts(a1);
  JUMPOUT(__CS__, v1);
}

//----- (02213898) --------------------------------------------------------
int Function_4_2213898()
{
  int v0;
  int v1;

  v0 = OS_DisableInterrupts();
  v1 = 0;
  if ( dword_221A400[5355] )
    v1 = *(uint *)(dword_221A400[5355] + 8800);
  OS_RestoreInterrupts(v0);
  return v1;
}

//----- (022138C8) --------------------------------------------------------
int __fastcall Function_22138c8(int a1)
{
  int v1;
  int v2;
  int v3;
  int v4;
  int result;
  bool v6;

  v1 = a1;
  v2 = OS_DisableInterrupts();
  v3 = 0;
  v4 = *(uint *)(dword_221A400[5355] + 8804);
  if ( dword_221A400[5355] )
  {
    if ( v1 & 0x8000 )
    {
      v6 = (v1 & 0x3FFE) == 0;
      if ( !(v1 & 0x3FFE) )
        v1 |= 0x82u;
      v3 = 16382;
      if ( v6 )
        v1 |= 0xA000u;
    }
    if ( v1 & 0x20000 )
      v3 |= 0x10000u;
    if ( v1 & 0x80000 )
      v3 |= 0x40000u;
    if ( v1 & 0x200000 )
      v3 |= 0x100000u;
    if ( v1 & 0x800000 )
      v3 |= 0x400000u;
    *(uint *)(dword_221A400[5355] + 8804) = v1 | v4 & ~v3;
    OS_RestoreInterrupts(v2);
    result = v4;
  }
  else
  {
    OS_RestoreInterrupts(v2);
    result = 0;
  }
  return result;
}

//----- (02213964) --------------------------------------------------------
int Function_2213964()
{
  return dword_221A400[5355];
}

//----- (02213974) --------------------------------------------------------
int __fastcall Function_2213974(uint *a1, int a2)
{
  uint *v2;
  int v3;
  int v4;
  int result;

  v2 = a1;
  v3 = a2;
  if ( a1 )
  {
    *(uint *)(dword_221A400[5355] + 8812) = *a1 & 3;
    v4 = a1[1];
    if ( ((4 - (v4 & 3)) & 3u) + 12 > a1[2] )
    {
      *(uint *)(dword_221A400[5355] + 8816) = 0;
      *(uint *)(dword_221A400[5355] + 8820) = 0;
    }
    else
    {
      *(uint *)(dword_221A400[5355] + 8816) = (v4 + 3) & 0xFFFFFFFC;
      *(uint *)(dword_221A400[5355] + 8820) = a1[2] - ((4 - (a1[1] & 3)) & 3);
      MI_CpuFill8(*(ushort **)(dword_221A400[5355] + 8816), 0, *(uint *)(dword_221A400[5355] + 8820));
    }
    *(uint *)(dword_221A400[5355] + 8824) = v2[3];
  }
  else
  {
    *(uint *)(dword_221A400[5355] + 8812) = 3;
    *(uint *)(dword_221A400[5355] + 8816) = 0;
    *(uint *)(dword_221A400[5355] + 8820) = 0;
    *(uint *)(dword_221A400[5355] + 8824) = 0;
  }
  result = dword_221A400[5355] + 0x2000;
  *(uint *)(dword_221A400[5355] + 8828) = v3;
  return result;
}

//----- (02213A94) --------------------------------------------------------
int __fastcall Function_2213a94(int a1, int *a2, int a3)
{
  int v3;
  int *v4;
  int v5;
  uint v6;
  int v7;
  int *v8;
  uint v9;
  int v10;
  int result;

  v3 = a1;
  v4 = a2;
  Function_22138c8(a3);
  *(uint *)(dword_221A400[5355] + 8840) = dword_221A400[5355] + 5376;
  *(ushort *)(dword_221A400[5355] + 8844) = 1024;
  v5 = 1 << Function_2213c4c(0) >> 1;
  *(ushort *)(dword_221A400[5355] + 8846) = v5;
  v7 = *(ushort *)(dword_221A400[5355] + 8808);
  if ( !*(ushort *)(dword_221A400[5355] + 8808) )
    LOWORD(v7) = WM_GetDispersionScanPeriod(v7, (int)&dword_221A400[5355], v5, v6);
  *(ushort *)(dword_221A400[5355] + 8848) = v7;
  *(ushort *)(dword_221A400[5355] + 8856) = (*(uint *)(dword_221A400[5355] + 8804) & 0x300000) != 3145728;
  if ( v3 )
    v8 = (int *)MI_CpuCopy8(v3, dword_221A400[5355] + 8850, 6u, v6);
  else
    v8 = (int *)MI_CpuCopy8((int)dword_2215E48, dword_221A400[5355] + 8850, 6u, v6);
  if ( v4 )
    v8 = dword_2215E50;
  if ( v4 && v4 != v8 )
  {
    MI_CpuCopy8((int)v4, dword_221A400[5355] + 8860, 0x20u, v9);
    v10 = 0;
    do
    {
      if ( !*(uchar *)v4 )
        break;
      ++v10;
      v4 = (int *)((char *)v4 + 1);
    }
    while ( v10 < 32 );
    *(ushort *)(dword_221A400[5355] + 8858) = v10;
  }
  else
  {
    MI_CpuCopy8((int)dword_2215E50, dword_221A400[5355] + 8860, 0x20u, v9);
    *(ushort *)(dword_221A400[5355] + 8858) = 0;
  }
  result = dword_221A400[5355] + 0x2000;
  *(uint *)(dword_221A400[5355] + 8836) = 0;
  return result;
}

//----- (02213C2C) --------------------------------------------------------
int Function_2213c2c()
{
  int result;

  result = dword_221A400[5355] + 0x2000;
  *(uint *)(dword_221A400[5355] + 8804) = 11182210;
  return result;
}

//----- (02213C4C) --------------------------------------------------------
int __fastcall Function_2213c4c(int a1)
{
  int v1;
  int v2;

  v1 = a1;
  v2 = 0;
  do
  {
    if ( *(uint *)(dword_221A400[5355] + 8804) & (1 << (v1 % 13 + 1)) )
      break;
    ++v2;
    ++v1;
  }
  while ( v2 < 13 );
  return ((a1 + v2) % 13 + 1) & 0xFFFF;
}

//----- (02213CDC) --------------------------------------------------------
int __fastcall Function_2213cdc(int a1, int a2, int a3)
{
  int v3;
  int v4;

  v3 = a1;
  v4 = *(short *)(dword_221A400[5355] + 8832);
  *(ushort *)(dword_221A400[5355] + 8832) = 0;
  return Function_2213d20(v4, v3, a2, a3);
}

//----- (02213D20) --------------------------------------------------------
int __fastcall Function_2213d20(int result, short a2, int a3, int a4, int a5)
{
  short v5;
  short v6;
  int v7;
  int v8;
  int v9;
  int v10;

  v10 = a4;
  if ( *(uint *)(dword_221A400[5355] + 8828) )
  {
    v5 = result;
    v7 = a3;
    v8 = a4;
    v9 = a5;
    v6 = a2;
    result = (*(int (__fastcall **)(short *))(dword_221A400[5355] + 8828))(&v5);
  }
  return result;
}

//----- (02213D74) --------------------------------------------------------
uint __fastcall Function_2213d74(int a1)
{
  int v1;
  int v2;

  v1 = a1;
  v2 = OS_DisableInterrupts();
  if ( *(uint *)(dword_221A400[5355] + 8800) == 9 && v1 != 9 )
    Function_20c3bb4((uint *)(dword_221A400[5355] + 8908));
  if ( *(uint *)(dword_221A400[5355] + 8800) != 11 )
    *(uint *)(dword_221A400[5355] + 8800) = v1;
  if ( v1 == 9 )
    OS_SetAlarm((uint *)(dword_221A400[5355] + 8908), 0x22F5341u, 0, (int)Function_2213e80, 0);
  return OS_RestoreInterrupts(v2);
}

//----- (02213E0C) --------------------------------------------------------
uint Function_2213e0c()
{
  int v0;

  v0 = OS_DisableInterrupts();
  Function_20c3bb4((uint *)(dword_221A400[5355] + 8908));
  if ( *(uint *)(dword_221A400[5355] + 8800) == 9 )
    OS_SetAlarm((uint *)(dword_221A400[5355] + 8908), 0x22F5341u, 0, (int)Function_2213e80, 0);
  return OS_RestoreInterrupts(v0);
}

//----- (02213E80) --------------------------------------------------------
uint Function_2213e80()
{
  Function_2215328();
  return Function_2213e0c();
}

//----- (02213E90) --------------------------------------------------------
int __fastcall Function_2213e90(uint a1)
{
  uint v1;
  int result;
  uint v3;
  bool v4;
  char v5;

  v1 = a1;
  for ( result = 0; ; ++result )
  {
    v3 = __clz(v1);
    v4 = v3 <= 0x1F;
    v5 = 31 - v3;
    if ( !v4 )
      break;
    v1 &= ~(1 << v5);
  }
  return result;
}

//----- (02213EBC) --------------------------------------------------------
uint __fastcall Function_2213ebc(uint a1)
{
  return __clz(a1);
}

//----- (02213EC4) --------------------------------------------------------
int Function_2213ec4()
{
  int result;

  result = *(uchar *)(dword_221A400[5355] + 8811);
  if ( !*(uchar *)(dword_221A400[5355] + 8811) )
  {
    *(uchar *)(dword_221A400[5355] + 8811) = 1;
    result = WM_Reset((int)Function_2214b08);
    if ( result != 2 )
    {
      Function_2213d74(11);
      result = Function_2213cdc(7, 0, 0);
    }
  }
  return result;
}

//----- (02213F20) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x2213F74 for case 0"

//----- (02213F60) --------------------------------------------------------
void Function_2213f60()
{
  JUMPOUT(&loc_2213F74);
}

//----- (02213F64) --------------------------------------------------------
void Function_2213f64()
{
  JUMPOUT(&loc_2213F80);
}

//----- (02213F68) --------------------------------------------------------
void Function_2213f68()
{
  JUMPOUT(&loc_2213F88);
}

//----- (02213F6C) --------------------------------------------------------
// jumptable 02213F58 case 3
int __fastcall Function_2213f6c(int a1, int a2, int a3, int a4, int a5, int (__fastcall *a6)(int, int, int, int))
{
  return a6(a1, a2, a3, a5);
}

//----- (02213F70) --------------------------------------------------------
void Function_2213f70()
{
  int v0;

  Function_2213ec4();
  JUMPOUT(__CS__, v0);
}

//----- (02213F98) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x2213FC4 for case 0"

//----- (02213FB0) --------------------------------------------------------
void Function_2213fb0()
{
  JUMPOUT(&loc_2213FC4);
}

//----- (02213FB4) --------------------------------------------------------
void Function_2213fb4()
{
  JUMPOUT(&loc_22141C0);
}

//----- (02213FB8) --------------------------------------------------------
void Function_2213fb8()
{
  JUMPOUT(&loc_22141F8);
}

//----- (02213FBC) --------------------------------------------------------
void Function_2213fbc()
{
  JUMPOUT(&loc_22141F8);
}

//----- (02213FC0) --------------------------------------------------------
void Function_2213fc0()
{
  JUMPOUT(&loc_22141F8);
}

//----- (02213FE0) --------------------------------------------------------
void Function_2213fe0()
{
  JUMPOUT(&loc_2214138);
}

//----- (02213FE4) --------------------------------------------------------
void Function_2213fe4()
{
  JUMPOUT(&loc_2214138);
}

//----- (02213FE8) --------------------------------------------------------
void Function_2213fe8()
{
  JUMPOUT(&loc_2214138);
}

//----- (02213FEC) --------------------------------------------------------
void Function_2213fec()
{
  JUMPOUT(&loc_2214018);
}

//----- (02213FF0) --------------------------------------------------------
void Function_2213ff0()
{
  JUMPOUT(&loc_2214028);
}

//----- (02213FF4) --------------------------------------------------------
void Function_2213ff4()
{
  JUMPOUT(&loc_221407C);
}

//----- (02213FF8) --------------------------------------------------------
void __fastcall Function_2213ff8(int a1, int a2, int a3, int a4)
{
  int v4;
  int v5;
  int v6;
  int v7;
  int v8;

  v4 = Function_20cec08((int)Function_2213f98, a2, a3, a4);
  if ( v4 == 2 )
    JUMPOUT(__CS__, v8);
  if ( v4 != 3 && v4 == 8 )
  {
    Function_2213d74(12);
    v5 = dword_221A400[5355];
    v6 = *(short *)(dword_221A400[5355] + 8832);
    if ( v6 == 5 )
      v5 = dword_221A400[5355] + 8512;
    if ( v6 != 5 )
      v5 = 0;
    Function_2213cdc(1, v5, 0);
    JUMPOUT(__CS__, v8);
  }
  Function_2213d74(11);
  if ( *(ushort *)(dword_221A400[5355] + 8832) == 5 )
    v7 = dword_221A400[5355] + 8512;
  else
    v7 = 0;
  Function_2213cdc(7, v7, 0);
  JUMPOUT(__CS__, v8);
}

//----- (02214254) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x2214288 for case 0"

//----- (02214274) --------------------------------------------------------
void Function_2214274()
{
  JUMPOUT(&loc_2214288);
}

//----- (02214278) --------------------------------------------------------
void Function_2214278()
{
  JUMPOUT(&loc_22144E0);
}

//----- (0221427C) --------------------------------------------------------
void Function_221427c()
{
  JUMPOUT(&loc_22144EC);
}

//----- (02214280) --------------------------------------------------------
void Function_2214280()
{
  JUMPOUT(&loc_22144EC);
}

//----- (02214284) --------------------------------------------------------
void Function_2214284()
{
  int v0;

  Function_2213d74(11);
  Function_2213cdc(7, 0, 0);
  JUMPOUT(__CS__, v0);
}

//----- (02214538) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x2214560 for case 0"

//----- (0221454C) --------------------------------------------------------
void Function_221454c()
{
  JUMPOUT(&loc_2214560);
}

//----- (02214550) --------------------------------------------------------
void Function_2214550()
{
  JUMPOUT(&loc_2214580);
}

//----- (02214554) --------------------------------------------------------
void Function_2214554()
{
  JUMPOUT(&loc_2214588);
}

//----- (02214558) --------------------------------------------------------
void Function_2214558()
{
  JUMPOUT(&loc_2214588);
}

//----- (0221455C) --------------------------------------------------------
void Function_221455c()
{
  int v0;

  Function_2213d74(11);
  Function_2213cdc(7, 0, 0);
  JUMPOUT(__CS__, v0);
}

//----- (022145B0) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x22145FC for case 0"

//----- (022145C8) --------------------------------------------------------
void Function_22145c8()
{
  JUMPOUT(&loc_22145FC);
}

//----- (022145CC) --------------------------------------------------------
void Function_22145cc()
{
  JUMPOUT(&loc_22147AC);
}

//----- (022145D0) --------------------------------------------------------
void Function_22145d0()
{
  JUMPOUT(&loc_22147D0);
}

//----- (022145D4) --------------------------------------------------------
void Function_22145d4()
{
  JUMPOUT(&loc_22147D0);
}

//----- (022145D8) --------------------------------------------------------
void Function_22145d8()
{
  JUMPOUT(&loc_22147D0);
}

//----- (022145DC) --------------------------------------------------------
void Function_22145dc()
{
  JUMPOUT(&loc_22147D0);
}

//----- (022145E0) --------------------------------------------------------
void Function_22145e0()
{
  JUMPOUT(&loc_22147C0);
}

//----- (022145E4) --------------------------------------------------------
void Function_22145e4()
{
  JUMPOUT(&loc_22147D0);
}

//----- (022145E8) --------------------------------------------------------
void Function_22145e8()
{
  JUMPOUT(&loc_22147D0);
}

//----- (022145EC) --------------------------------------------------------
void Function_22145ec()
{
  JUMPOUT(&loc_22147D0);
}

//----- (022145F0) --------------------------------------------------------
void Function_22145f0()
{
  JUMPOUT(&loc_22147D0);
}

//----- (022145F4) --------------------------------------------------------
void Function_22145f4()
{
  JUMPOUT(&loc_22147C0);
}

//----- (022145F8) --------------------------------------------------------
void Function_22145f8()
{
  JUMPOUT(&loc_22147C0);
}

//----- (02214614) --------------------------------------------------------
void Function_2214614()
{
  JUMPOUT(&loc_2214784);
}

//----- (02214618) --------------------------------------------------------
void Function_2214618()
{
  JUMPOUT(&loc_2214784);
}

//----- (0221461C) --------------------------------------------------------
void Function_221461c()
{
  JUMPOUT(&loc_2214784);
}

//----- (02214620) --------------------------------------------------------
void Function_2214620()
{
  JUMPOUT(&loc_2214784);
}

//----- (02214624) --------------------------------------------------------
void Function_2214624()
{
  JUMPOUT(&loc_2214784);
}

//----- (02214628) --------------------------------------------------------
void Function_2214628()
{
  JUMPOUT(&loc_2214784);
}

//----- (0221462C) --------------------------------------------------------
int __fastcall Function_221462c(int a1, int a2, int a3, int a4, int a5, int (*a6)(void))
{
  return a6();
}

//----- (02214630) --------------------------------------------------------
void Function_2214630()
{
  JUMPOUT(&loc_22146B8);
}

//----- (02214634) --------------------------------------------------------
void Function_2214634()
{
  JUMPOUT(&loc_2214648);
}

//----- (02214638) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x2214688 for case 0"

//----- (02214668) --------------------------------------------------------
void Function_2214668()
{
  JUMPOUT(&loc_2214688);
}

//----- (0221466C) --------------------------------------------------------
void Function_221466c()
{
  JUMPOUT(&loc_2214694);
}

//----- (02214670) --------------------------------------------------------
void Function_2214670()
{
  JUMPOUT(&loc_221467C);
}

//----- (02214674) --------------------------------------------------------
// jumptable 02214660 case 3
int __fastcall Function_2214674(int a1, int a2, int a3, int a4, int a5, int (*a6)(void))
{
  return a6();
}

//----- (02214678) --------------------------------------------------------
int __fastcall Function_2214678(int a1, int a2, int a3, int a4, int a5, int (__fastcall *a6)(int))
{
  int v6;

  v6 = Function_2213ec4();
  return a6(v6);
}

//----- (02214814) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x221483C for case 0"

//----- (02214828) --------------------------------------------------------
void Function_2214828()
{
  JUMPOUT(&loc_221483C);
}

//----- (0221482C) --------------------------------------------------------
void Function_221482c()
{
  JUMPOUT(&loc_2214898);
}

//----- (02214830) --------------------------------------------------------
void Function_2214830()
{
  JUMPOUT(&loc_22148A8);
}

//----- (02214834) --------------------------------------------------------
void Function_2214834()
{
  JUMPOUT(&loc_2214898);
}

//----- (02214838) --------------------------------------------------------
void Function_2214838()
{
  int v0;

  Function_2213d74(11);
  Function_2213cdc(7, dword_221A400[5355] + 8512, 0);
  JUMPOUT(__CS__, v0);
}

//----- (022148DC) --------------------------------------------------------
int __fastcall Function_22148dc(int a1)
{
  int v1;
  int v2;
  int result;

  v1 = a1;
  if ( *(ushort *)(a1 + 2) )
  {
    Function_2213d74(11);
    result = Function_2213cdc(7, dword_221A400[5355] + 8512, 0);
  }
  else
  {
    v2 = *(ushort *)(a1 + 4);
    if ( v2 == 14 )
    {
      if ( *(uint *)(dword_221A400[5355] + 8800) == 12 )
      {
        Function_2213d74(8);
        result = Function_2213ec4();
      }
      else
      {
        Function_2213d74(9);
        result = Function_2213cdc(0, dword_221A400[5355] + 8512, 0);
      }
    }
    else if ( v2 == 15 )
    {
      Function_22157e4((uchar)(*(ushort *)(*(uint *)(v1 + 8) + 14) >> 8));
      DC_InvalidateRange(*(uint *)(v1 + 8), 1568);
      result = Function_22152f4(*(uint *)(v1 + 8));
    }
    else
    {
      Function_2213d74(11);
      result = Function_2213cdc(7, dword_221A400[5355] + 8512, *(ushort *)(v1 + 4));
    }
  }
  return result;
}

//----- (022149EC) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x2214A14 for case 0"

//----- (02214A00) --------------------------------------------------------
void Function_2214a00()
{
  JUMPOUT(&loc_2214A14);
}

//----- (02214A04) --------------------------------------------------------
void Function_2214a04()
{
  JUMPOUT(&loc_2214AC0);
}

//----- (02214A08) --------------------------------------------------------
void Function_2214a08()
{
  JUMPOUT(&loc_2214AD0);
}

//----- (02214A0C) --------------------------------------------------------
void Function_2214a0c()
{
  JUMPOUT(&loc_2214AC0);
}

//----- (02214A10) --------------------------------------------------------
void Function_2214a10()
{
  int v0;

  Function_2213d74(11);
  Function_2213cdc(7, dword_221A400[5355] + 8512, 0);
  JUMPOUT(__CS__, v0);
}

//----- (02214B08) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x2214DB0 for case 0"

//----- (02214B54) --------------------------------------------------------
void Function_2214b54()
{
  JUMPOUT(&loc_2214DB0);
}

//----- (02214B58) --------------------------------------------------------
void Function_2214b58()
{
  JUMPOUT(&loc_2214DB0);
}

//----- (02214B5C) --------------------------------------------------------
void Function_2214b5c()
{
  JUMPOUT(&loc_2214DB0);
}

//----- (02214B60) --------------------------------------------------------
void Function_2214b60()
{
  JUMPOUT(&loc_2214DB0);
}

//----- (02214B64) --------------------------------------------------------
void Function_2214b64()
{
  JUMPOUT(&loc_2214DB0);
}

//----- (02214B68) --------------------------------------------------------
void Function_2214b68()
{
  JUMPOUT(&loc_2214B8C);
}

//----- (02214B6C) --------------------------------------------------------
void Function_2214b6c()
{
  JUMPOUT(&loc_2214B8C);
}

//----- (02214B70) --------------------------------------------------------
void Function_2214b70()
{
  JUMPOUT(&loc_2214BB0);
}

//----- (02214B74) --------------------------------------------------------
void Function_2214b74()
{
  JUMPOUT(&loc_2214BD4);
}

//----- (02214B78) --------------------------------------------------------
void Function_2214b78()
{
  JUMPOUT(&loc_2214CEC);
}

//----- (02214B7C) --------------------------------------------------------
void Function_2214b7c()
{
  JUMPOUT(&loc_2214D18);
}

//----- (02214B80) --------------------------------------------------------
void Function_2214b80()
{
  JUMPOUT(&loc_2214DB0);
}

//----- (02214B84) --------------------------------------------------------
void Function_2214b84()
{
  JUMPOUT(&loc_2214CEC);
}

//----- (02214B88) --------------------------------------------------------
void __fastcall Function_2214b88(int a1, int a2, int a3, int a4)
{
  int v4;
  int v5;

  v4 = Function_20cec88((int)Function_2213f98, a2, a3, a4);
  if ( v4 == 2 )
    JUMPOUT(__CS__, v5);
  if ( v4 != 3 && v4 == 8 )
  {
    Function_2213d74(12);
    Function_2213cdc(1, 0, 0);
    JUMPOUT(__CS__, v5);
  }
  Function_2213d74(11);
  Function_2213cdc(7, 0, 0);
  JUMPOUT(__CS__, v5);
}

//----- (02214E34) --------------------------------------------------------
uint Function_4_2214e34()
{
  int v0;
  int v1;
  int v3;
  ushort *v4;
  int v5;

  v0 = OS_DisableInterrupts();
  v1 = Function_2213964();
  if ( !v1 )
    return OS_RestoreInterrupts(v0);
  v3 = v1 + 0x2000;
  v4 = *(ushort **)(v1 + 8816);
  if ( v4 )
  {
    v5 = *(uint *)(v3 + 628);
    if ( v5 > 0 )
      MI_CpuFill8(v4, 0, v5);
  }
  return OS_RestoreInterrupts(v0);
}

//----- (02214E88) --------------------------------------------------------
int Function_4_2214e88()
{
  int v0;
  int v1;
  int v2;
  int result;
  int v4;
  int *v5;

  v0 = OS_DisableInterrupts();
  v1 = Function_2213964();
  v2 = 0;
  if ( v1 )
  {
    v4 = v1 + 0x2000;
    v5 = *(int **)(v4 + 624);
    if ( v5 )
    {
      if ( *(uint *)(v4 + 628) > 0xCu )
        v2 = *v5;
    }
    OS_RestoreInterrupts(v0);
    result = v2;
  }
  else
  {
    OS_RestoreInterrupts(v0);
    result = 0;
  }
  return result;
}

//----- (02214EE0) --------------------------------------------------------
BOOL __fastcall Function_4_2214ee0(int a1)
{
  int v1;
  int v2;
  int v3;
  BOOL result;
  int v5;
  BOOL v6;
  int v7;
  char v8;

  v1 = a1;
  v2 = OS_DisableInterrupts();
  v3 = Function_2213964();
  if ( v3 )
  {
    v5 = *(uchar *)(v3 + 8810);
    if ( v1 )
    {
      v6 = v5 != 0;
      v7 = v3 + 0x2000;
      v8 = 1;
    }
    else
    {
      v6 = v5 != 0;
      v7 = v3 + 0x2000;
      v8 = 0;
    }
    *(uchar *)(v7 + 618) = v8;
    OS_RestoreInterrupts(v2);
    result = v6;
  }
  else
  {
    OS_RestoreInterrupts(v2);
    result = 0;
  }
  return result;
}

//----- (02214F5C) --------------------------------------------------------
int __fastcall Function_4_2214f5c(int a1)
{
  int v1;
  int v2;
  int result;
  int v4;

  v1 = a1;
  v2 = OS_DisableInterrupts();
  if ( Function_2213964() )
  {
    v4 = Function_22151a8(v1);
    if ( v4 )
    {
      OS_RestoreInterrupts(v2);
      result = v4 + 16;
    }
    else
    {
      OS_RestoreInterrupts(v2);
      result = 0;
    }
  }
  else
  {
    OS_RestoreInterrupts(v2);
    result = 0;
  }
  return result;
}

//----- (02214FB4) --------------------------------------------------------
int __fastcall Function_2214fb4(int a1, short a2)
{
  int v2;
  short v3;
  int result;
  int v5;
  bool v6;
  uint v7;
  int v8;
  bool v9;

  v2 = a1;
  v3 = a2;
  result = Function_2213964();
  v5 = result;
  if ( result )
  {
    result = *(uchar *)(result + 8810);
    v6 = result == 0;
    if ( !*(uchar *)(v5 + 8810) )
    {
      result = *(ushort *)(v2 + 60);
      v6 = result == 0;
    }
    if ( v6 )
    {
      result = Function_221513c(v2 + 4);
      v8 = result;
      if ( !result )
      {
        result = Function_2215040();
        v8 = result;
      }
      v9 = v8 == 0;
      if ( !v8 )
      {
        result = *(uint *)(v5 + 8824);
        v9 = result == 1;
      }
      if ( v9 )
      {
        result = Function_221510c();
        v8 = result;
      }
      if ( v8 )
      {
        *(ushort *)(v8 + 2) = v3;
        MIi_CpuCopyFast((uint *)v2, (uint *)(v8 + 16), 0xC0u, v7);
        result = Function_22151f8(v8);
      }
    }
  }
  return result;
}

//----- (02215040) --------------------------------------------------------
int Function_2215040()
{
  int v0;
  int v1;
  uint *v2;
  int result;
  uint v4;
  uint v5;
  uint v6;
  int v7;
  int v8;

  v0 = Function_2213964();
  v1 = v0 + 0x2000;
  v2 = *(uint **)(v0 + 8816);
  result = 0;
  if ( v2 )
  {
    v4 = *(uint *)(v1 + 628);
    if ( v4 > 0xC )
    {
      v5 = (v4 - 12) / 0xD0;
      if ( v5 )
      {
        if ( v5 > *v2 )
        {
          v6 = 0;
          if ( v5 )
          {
            v7 = (int)(v2 + 3);
            do
            {
              result = v7 + 208 * v6;
              if ( !*(uchar *)(v7 + 208 * v6) )
                break;
              ++v6;
            }
            while ( v6 < v5 );
          }
          if ( v6 < v5 )
          {
            *(uchar *)result = 1;
            *(uint *)(result + 4) = *v2;
            *(uint *)(result + 12) = 0;
            *(uint *)(result + 8) = v2[2];
            v2[2] = result;
            v8 = *(uint *)(result + 8);
            if ( v8 )
              *(uint *)(v8 + 12) = result;
            else
              v2[1] = result;
            ++*v2;
          }
        }
      }
    }
  }
  return result;
}

//----- (0221510C) --------------------------------------------------------
int Function_221510c()
{
  int v0;
  int v1;
  int result;

  v0 = Function_2213964() + 0x2000;
  v1 = *(uint *)(v0 + 624);
  if ( v1 && *(uint *)(v0 + 628) > 0xCu )
    result = *(uint *)(v1 + 4);
  else
    result = 0;
  return result;
}

//----- (0221513C) --------------------------------------------------------
int __fastcall Function_221513c(int a1)
{
  int v1;
  int v2;
  int i;
  int v4;

  v1 = a1;
  v2 = Function_2213964() + 0x2000;
  i = 0;
  v4 = *(uint *)(v2 + 624);
  if ( !v1 )
    return 0;
  if ( v4 )
  {
    if ( *(uint *)(v2 + 628) > 0xCu )
    {
      for ( i = *(uint *)(v4 + 4); i; i = *(uint *)(i + 12) )
      {
        if ( Function_22156c0(i + 20, v1) )
          break;
      }
    }
  }
  return i;
}

//----- (022151A8) --------------------------------------------------------
int __fastcall Function_22151a8(int a1)
{
  int v1;
  int v2;
  int v3;
  int v4;
  int result;
  int v6;
  bool v7;

  v1 = a1;
  v2 = Function_2213964();
  v3 = v2 + 0x2000;
  v4 = *(uint *)(v2 + 8816);
  result = 0;
  if ( v4 )
  {
    if ( *(uint *)(v3 + 628) > 0xCu )
    {
      result = *(uint *)(v4 + 4);
      if ( result )
      {
        do
        {
          v6 = *(uint *)(result + 4);
          v7 = v6 == v1;
          if ( v6 != v1 )
          {
            result = *(uint *)(result + 12);
            v7 = result == 0;
          }
        }
        while ( !v7 );
      }
    }
  }
  return result;
}

//----- (022151F8) --------------------------------------------------------
uint *__fastcall Function_22151f8(uint *a1)
{
  uint *v1;
  int v2;
  int v3;
  uint *result;
  bool v5;
  uint *v6;
  int v7;
  int v8;
  int v9;
  int v10;
  int v11;

  v1 = a1;
  v2 = Function_2213964();
  v3 = v2 + 0x2000;
  result = *(uint **)(v2 + 8816);
  v5 = v1 == 0;
  if ( v1 )
    v5 = result == 0;
  if ( !v5 && *(uint *)(v3 + 628) > 0xCu )
  {
    v6 = (uint *)result[1];
    if ( v6 )
    {
      while ( v6 != v1 )
      {
        v6 = (uint *)v6[3];
        if ( !v6 )
          goto LABEL_15;
      }
      v7 = v6[2];
      v8 = v6[3];
      if ( v7 )
        *(uint *)(v7 + 12) = v8;
      else
        result[1] = v8;
      v9 = v6[3];
      v10 = v6[2];
      if ( v9 )
        *(uint *)(v9 + 8) = v10;
      else
        result[2] = v10;
    }
LABEL_15:
    v1[3] = 0;
    v1[2] = result[2];
    result[2] = v1;
    v11 = v1[2];
    if ( v11 )
      *(uint *)(v11 + 12) = v1;
    else
      result[1] = v1;
    if ( !v6 )
      v1[1] = (*result)++;
  }
  return result;
}

//----- (022152B4) --------------------------------------------------------
uint *Function_22152b4()
{
  uint *result;

  result = (uint *)LOBYTE(dword_221A400[5356]);
  if ( !LOBYTE(dword_221A400[5356]) )
  {
    LOBYTE(dword_221A400[5356]) = 1;
    dword_221A400[5365] = 0;
    dword_221A400[5358] = 0;
    dword_221A400[5357] = 0;
    result = OS_InitMutex(&dword_221A400[5359]);
  }
  return result;
}

//----- (022152F4) --------------------------------------------------------
int __fastcall Function_22152f4(int result)
{
  if ( dword_221A400[5366] )
    result = ((int (__fastcall *)(int, int, int, uint))dword_221A400[5366])(
               result + 30,
               result + 24,
               result + 44,
               *(ushort *)(result + 6));
  return result;
}

//----- (02215328) --------------------------------------------------------
int Function_2215328()
{
  int result;
  int v1;

  result = Function_2213964();
  v1 = result;
  if ( result )
  {
    result += 0x2000;
    if ( *(uint *)(v1 + 8800) == 9 )
    {
      result = *(uchar *)(v1 + 8811);
      if ( result != 1 )
      {
        result = Function_2215638(&dword_221A400[5359]);
        if ( result )
        {
          result = WM_SetDCFData((int)Function_2215624, v1 + 8516, v1 + 3840, 0);
          if ( result != 2 )
            result = Function_2215688(&dword_221A400[5359]);
        }
      }
    }
  }
  return result;
}

//----- (02215398) --------------------------------------------------------
int Function_2215398()
{
  int v0;
  int v1;
  int v2;
  int v3;
  bool v4;

  v0 = 0;
  v1 = Function_2213964();
  v2 = OS_DisableInterrupts();
  if ( v1 )
  {
    v3 = *(uint *)(v1 + 8800);
    v4 = v3 == 9;
    if ( v3 == 9 )
      v4 = *(uchar *)(v1 + 8811) == 0;
    if ( v4 )
      v0 = v1 + 8516;
  }
  OS_RestoreInterrupts(v2);
  return v0;
}

//----- (022153DC) --------------------------------------------------------
int __fastcall Function_22153dc(ushort *a1)
{
  int v1;
  ushort *v2;
  short v3;
  int v4;
  int v5;
  int v6;
  bool v7;

  v1 = 0;
  v2 = a1;
  v3 = 0;
  v4 = Function_2213964();
  v5 = OS_DisableInterrupts();
  if ( v4 )
  {
    v6 = *(uint *)(v4 + 8800);
    v7 = v6 == 9;
    if ( v6 == 9 )
      v7 = *(uchar *)(v4 + 8811) == 0;
    if ( v7 )
    {
      v3 = *(ushort *)(v4 + 8522);
      v1 = v4 + 8524;
    }
  }
  OS_RestoreInterrupts(v5);
  if ( v2 )
    *v2 = v3;
  return v1;
}

//----- (0221543C) --------------------------------------------------------
uint __fastcall Function_221543c(int a1)
{
  int v1;
  int v2;

  v1 = a1;
  v2 = OS_DisableInterrupts();
  dword_221A400[5366] = v1;
  return OS_RestoreInterrupts(v2);
}

//----- (0221545C) --------------------------------------------------------
#error "Failed to decompile function. bad target 0x2215570 for case 0"

//----- (0221554C) --------------------------------------------------------
void Function_221554c()
{
  JUMPOUT(&loc_2215570);
}

//----- (02215550) --------------------------------------------------------
void Function_2215550()
{
  JUMPOUT(&loc_2215570);
}

//----- (02215554) --------------------------------------------------------
void Function_2215554()
{
  JUMPOUT(&loc_2215588);
}

//----- (02215558) --------------------------------------------------------
void Function_2215558()
{
  JUMPOUT(&loc_2215570);
}

//----- (0221555C) --------------------------------------------------------
void Function_221555c()
{
  JUMPOUT(&loc_2215570);
}

//----- (02215560) --------------------------------------------------------
void Function_2215560()
{
  JUMPOUT(&loc_2215570);
}

//----- (02215564) --------------------------------------------------------
void Function_2215564()
{
  JUMPOUT(&loc_2215570);
}

//----- (02215568) --------------------------------------------------------
void Function_2215568()
{
  JUMPOUT(&loc_2215570);
}

//----- (0221556C) --------------------------------------------------------
void Function_221556c()
{
  int v0;
  int v1;

  OS_UnlockMutex(&dword_221A400[5359]);
  OS_RestoreInterrupts(v0);
  JUMPOUT(__CS__, v1);
}

//----- (022155E4) --------------------------------------------------------
ushort *__fastcall Function_22155e4(ushort *result)
{
  if ( *result == 18 )
  {
    dword_221A400[5365] = (ushort)result[1];
    if ( !result[1] )
      Function_2213e0c();
    result = (ushort *)OS_WakeupThread(&dword_221A400[5357]);
  }
  return result;
}

//----- (02215624) --------------------------------------------------------
int Function_2215624()
{
  return Function_2215688(&dword_221A400[5359]);
}

//----- (02215638) --------------------------------------------------------
int __fastcall Function_2215638(int a1)
{
  int v1;
  int result;

  v1 = *(uint *)(a1 + 8);
  if ( v1 )
  {
    if ( v1 == 33521664 )
    {
      ++*(uint *)(a1 + 12);
      result = 1;
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    *(uint *)(a1 + 8) = 33521664;
    ++*(uint *)(a1 + 12);
    result = 1;
  }
  return result;
}

//----- (02215688) --------------------------------------------------------
int *__fastcall Function_2215688(int *result)
{
  int v1;

  if ( result[2] == 33521664 )
  {
    v1 = result[3] - 1;
    result[3] = v1;
    if ( !v1 )
    {
      result[2] = 0;
      result = (int *)OS_WakeupThread(result);
    }
  }
  return result;
}

//----- (022156C0) --------------------------------------------------------
int __fastcall Function_22156c0(int a1, int a2)
{
  int v2;

  v2 = 0;
  do
  {
    if ( *(uchar *)(a1 + v2) != *(uchar *)(a2 + v2) )
      return 0;
    ++v2;
  }
  while ( v2 < 6 );
  return 1;
}

//----- (022156EC) --------------------------------------------------------
int Function_22156ec()
{
  int v0;
  int v1;
  int v2;

  v0 = OS_DisableInterrupts();
  v1 = Function_2213964();
  v2 = 0;
  if ( v1 && *(uint *)(v1 + 8800) == 9 )
    v2 = Function_22157b0();
  OS_RestoreInterrupts(v0);
  return v2;
}

//----- (02215730) --------------------------------------------------------
int Function_2215730()
{
  int result;
  int *v1;
  int v2;
  int v3;
  int v4;
  int *v5;
  int v6;

  result = 0;
  if ( LOBYTE(dword_221A400[5367]) <= 0x10u )
  {
    if ( LOBYTE(dword_221A400[5367]) )
    {
      v4 = 0;
      if ( (int)LOBYTE(dword_221A400[5367]) > 0 )
      {
        v5 = &dword_221A400[5368];
        do
        {
          v6 = *(uchar *)v5;
          v5 = (int *)((char *)v5 + 1);
          ++v4;
          result += v6;
        }
        while ( v4 < LOBYTE(dword_221A400[5367]) );
      }
      LOBYTE(result) = s32_div_f(result, LOBYTE(dword_221A400[5367]));
    }
  }
  else
  {
    v1 = &dword_221A400[5368];
    v2 = 0;
    do
    {
      v3 = *(uchar *)v1;
      v1 = (int *)((char *)v1 + 1);
      ++v2;
      result += v3;
    }
    while ( v2 < 16 );
    result /= 16;
  }
  return (uchar)result;
}

//----- (022157B0) --------------------------------------------------------
int Function_22157b0()
{
  uint v0;
  int v1;

  v0 = Function_2215730();
  v1 = 0;
  if ( v0 >= 0x1C )
    return 3;
  if ( v0 >= 0x16 )
    return 2;
  if ( v0 >= 0x10 )
    v1 = 1;
  return v1;
}

//----- (022157E4) --------------------------------------------------------
int __fastcall Function_22157e4(int a1)
{
  bool v1;
  int v2;
  int result;

  v1 = (a1 & 2) == 0;
  v2 = a1 >> 2;
  if ( v1 )
    LOBYTE(v2) = v2 + 25;
  *((uchar *)&dword_221A400[5368]
  + ((uint)LOBYTE(dword_221A400[5367]) >> 31)
  + __ROR4__((LOBYTE(dword_221A400[5367]) << 28) - ((uint)LOBYTE(dword_221A400[5367]) >> 31), 28)) = v2;
  result = LOBYTE(dword_221A400[5367]) + 1;
  if ( LOBYTE(dword_221A400[5367]) >= 0x10u )
    result = (((uint)LOBYTE(dword_221A400[5367]) + 1) >> 31)
           + __ROR4__(
               ((LOBYTE(dword_221A400[5367]) + 1) << 28) - (((uint)LOBYTE(dword_221A400[5367]) + 1) >> 31),
               28)
           + 16;
  LOBYTE(dword_221A400[5367]) = result;
  return result;
}

//----- (02215844) --------------------------------------------------------
uint *__fastcall Call_DGT_Hash1Reset(uint *result)
{
  return DGT_Hash1Reset(result);
}

//----- (02215850) --------------------------------------------------------
int __fastcall Call_DGT_Hash1SetSource(int *a1, int a2, uint a3)
{
  return DGT_Hash1SetSource(a1, a2, a3);
}

//----- (0221585C) --------------------------------------------------------
ushort *__fastcall Call_DGT_Hash1GetDigest_R(uint a1, int a2)
{
  return DGT_Hash1GetDigest_R(a1, a2);
}

